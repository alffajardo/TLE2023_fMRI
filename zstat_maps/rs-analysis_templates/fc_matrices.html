<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
	<head>
    	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    
    	<!-- iOS meta tags -->
    	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    	<meta name="apple-mobile-web-app-capable" content="yes">
    	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    	<style type="text/css">
.papaya{width:90%;height:90%;margin:25px auto;background-color:black;font-family:sans-serif}.papaya:before{position:relative;content:"Papaya requires JavaScript...";display:block;top:45%;color:red;margin:0 auto;font-size:18px;font-family:sans-serif}.papaya-fullscreen{height:100%}.papaya-toolbar{text-align:left;box-sizing:content-box;position:relative}.papaya-toolbar ul{margin:0;list-style:none}.papaya-toolbar input[type=file]{text-align:right;display:none}.papaya-kiosk-controls{position:relative;margin:5px auto;list-style:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.papaya-kiosk-controls ul{list-style:none}.papaya-kiosk-controls button{-webkit-appearance:none;border-radius:0;-webkit-border-radius:0;font-size:14px;height:25px;background-color:lightgray}.papaya-control-increment{-webkit-appearance:none;border-radius:0;-webkit-border-radius:0;font-size:14px;height:25px;width:25px;text-align:center;vertical-align:middle;padding:0;margin-left:auto;margin-right:auto;line-height:16px;box-sizing:border-box;font-family:"Courier New",Courier,monospace}.papaya-main-increment{-webkit-appearance:none;border-radius:0;-webkit-border-radius:0;font-size:14px;height:25px;width:25px;text-align:center;font-family:"Courier New",Courier,monospace;background-color:lightgray;vertical-align:middle;padding:0;margin-left:auto;margin-right:auto;box-sizing:border-box;outline:0}.papaya-main-decrement{-webkit-appearance:none;border-radius:0;-webkit-border-radius:0;font-size:14px;height:25px;width:25px;text-align:center;font-family:"Courier New",Courier,monospace;background-color:lightgray;vertical-align:middle;padding:0;margin-left:auto;margin-right:auto;box-sizing:border-box;outline:0}.papaya-main-swap{-webkit-appearance:none;border-radius:0;-webkit-border-radius:0;font-size:14px;height:25px;background-color:lightgray;outline:0}.papaya-main-goto-center{-webkit-appearance:none;border-radius:0;-webkit-border-radius:0;font-size:14px;height:25px;background-color:lightgray;outline:0}.papaya-main-goto-origin{-webkit-appearance:none;border-radius:0;-webkit-border-radius:0;font-size:14px;height:25px;background-color:lightgray;outline:0}.papaya-slider-slice{padding:0 5px;display:inline}.papaya-slider-slice span{font-size:14px;font-family:sans-serif;vertical-align:middle}.papaya-slider-slice button{-webkit-appearance:none;border-radius:0;-webkit-border-radius:0;vertical-align:middle;font-size:14px;height:25px;background-color:lightgray}.papaya-controlbar-label{color:#000}.papaya-menu{width:220px;background:#222;z-index:100;position:absolute;border:solid 2px darkgray;padding:4px;margin:0}.papaya-menu li{font-size:12px;font-family:sans-serif;padding:4px 2px;color:#b5cbd3;cursor:pointer;list-style-type:none}.papaya-menu-label{font-size:14px;font-family:sans-serif;font-weight:bold;padding:2px 8px;cursor:pointer;vertical-align:text-bottom}.papaya-menu-titlebar{font-size:16px;font-family:sans-serif;padding:3px 8px 0 8px;cursor:default;vertical-align:text-bottom;color:white}.papaya-menu-icon{margin-left:5px}.papaya-menu-icon img{box-sizing:content-box}.papaya-menu-hovering{background-color:#444}.papaya-menu-spacer{height:8px}.papaya-menu-unselectable{-moz-user-select:-moz-none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none;user-drag:none}.papaya-menu-button-hovering{background-color:#DDD}.papaya-menu-filechooser{cursor:pointer;width:200px;display:inline-block;font-weight:normal}.papaya-menu-input{width:38px;margin-right:5px;color:black}li .papaya-menu-slider{vertical-align:middle;text-align:center;display:inline;width:120px;padding:0;margin:0}.papaya-dialog{min-width:400px;max-width:500px;height:500px;background:#222;position:absolute;z-index:100;border:solid 2px darkgray;padding:6px;font-size:14px;font-family:sans-serif;color:#b5cbd3;box-sizing:content-box;line-height:1.45}.papaya-dialog-content{margin:20px;height:415px;color:#dedede;overflow:auto;-ms-overflow-style:-ms-autohiding-scrollbar}.papaya-dialog-content-nowrap{white-space:nowrap}.papaya-dialog-content table{margin:0 auto}.papaya-dialog-content-label{text-align:right;padding:5px;color:#b5cbd3}.papaya-dialog-content-control{text-align:left;padding:5px}.papaya-dialog-content-help{text-align:right;padding:5px;color:lightgray;font-size:12px}.papaya-dialog-title{color:#b5cbd3;font-weight:bold;font-size:16px}.papaya-dialog-button{text-align:right;box-sizing:content-box;height:22px}.papaya-dialog-button button{box-sizing:content-box;color:black;font-size:11px}.papaya-dialog-background{position:fixed;top:0;left:0;background-color:#fff;width:100%;height:100%;opacity:.5}.papaya-dialog-stopscroll{height:100%;overflow:hidden}.checkForJS{width:90%;height:90%;margin:25px auto;background-color:black}.checkForJS:before{position:relative;content:"Papaya requires JavaScript...";display:block;top:45%;color:red;margin:0 auto;font-size:18px;font-family:sans-serif;text-align:center}.papaya-utils-unsupported{width:90%;height:90%;margin:25px auto;background-color:black}.papaya-utils-unsupported-message{position:relative;display:block;top:45%;color:red;margin:0 auto;font-size:18px;font-family:sans-serif;text-align:center}.papaya-viewer{line-height:1;font-family:sans-serif}.papaya-viewer div,.papaya-viewer canvas{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline;font-family:sans-serif}.papaya-viewer canvas{cursor:crosshair}
</style>

    	<script type="text/javascript">
PAPAYA_BUILD_NUM="1654";
var all_array= "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";

var papayaLoadableImages=[{encode:"all_array",name:"all_array",nicename:"all_array"}];(function(a2,aG){var ai,w,aC=typeof aG,l=a2.document,aL=a2.location,bi=a2.jQuery,H=a2.$,aa={},a6=[],s="1.9.1",aI=a6.concat,ao=a6.push,a4=a6.slice,aM=a6.indexOf,z=aa.toString,V=aa.hasOwnProperty,aQ=s.trim,bJ=function(e,b3){return new bJ.fn.init(e,b3,w)},bA=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ac=/\S+/g,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,br=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,bh=/^[\],:{}\s]*$/,bk=/(?:^|:|,)(?:\s*\[)+/g,bG=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,aZ=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,bS=/^-ms-/,aV=/-([\da-z])/gi,M=function(e,b3){return b3.toUpperCase()},bW=function(e){if(l.addEventListener||e.type==="load"||l.readyState==="complete"){bl();bJ.ready()}},bl=function(){if(l.addEventListener){l.removeEventListener("DOMContentLoaded",bW,false);a2.removeEventListener("load",bW,false)}else{l.detachEvent("onreadystatechange",bW);a2.detachEvent("onload",bW)}};bJ.fn=bJ.prototype={jquery:s,constructor:bJ,init:function(e,b5,b4){var b3,b6;if(!e){return this}if(typeof e==="string"){if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){b3=[null,e,null]}else{b3=br.exec(e)}if(b3&&(b3[1]||!b5)){if(b3[1]){b5=b5 instanceof bJ?b5[0]:b5;bJ.merge(this,bJ.parseHTML(b3[1],b5&&b5.nodeType?b5.ownerDocument||b5:l,true));if(a.test(b3[1])&&bJ.isPlainObject(b5)){for(b3 in b5){if(bJ.isFunction(this[b3])){this[b3](b5[b3])}else{this.attr(b3,b5[b3])}}}return this}else{b6=l.getElementById(b3[2]);if(b6&&b6.parentNode){if(b6.id!==b3[2]){return b4.find(e)}this.length=1;this[0]=b6}this.context=l;this.selector=e;return this}}else{if(!b5||b5.jquery){return(b5||b4).find(e)}else{return this.constructor(b5).find(e)}}}else{if(e.nodeType){this.context=this[0]=e;this.length=1;return this}else{if(bJ.isFunction(e)){return b4.ready(e)}}}if(e.selector!==aG){this.selector=e.selector;this.context=e.context}return bJ.makeArray(e,this)},selector:"",length:0,size:function(){return this.length},toArray:function(){return a4.call(this)},get:function(e){return e==null?this.toArray():(e<0?this[this.length+e]:this[e])},pushStack:function(e){var b3=bJ.merge(this.constructor(),e);b3.prevObject=this;b3.context=this.context;return b3},each:function(b3,e){return bJ.each(this,b3,e)},ready:function(e){bJ.ready.promise().done(e);return this},slice:function(){return this.pushStack(a4.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b4){var e=this.length,b3=+b4+(b4<0?e:0);return this.pushStack(b3>=0&&b3<e?[this[b3]]:[])},map:function(e){return this.pushStack(bJ.map(this,function(b4,b3){return e.call(b4,b3,b4)}))},end:function(){return this.prevObject||this.constructor(null)},push:ao,sort:[].sort,splice:[].splice};bJ.fn.init.prototype=bJ.fn;bJ.extend=bJ.fn.extend=function(){var e,b8,b3,b4,cb,b9,b7=arguments[0]||{},b6=1,b5=arguments.length,ca=false;if(typeof b7==="boolean"){ca=b7;b7=arguments[1]||{};b6=2}if(typeof b7!=="object"&&!bJ.isFunction(b7)){b7={}}if(b5===b6){b7=this;--b6}for(;b6<b5;b6++){if((cb=arguments[b6])!=null){for(b4 in cb){e=b7[b4];b3=cb[b4];if(b7===b3){continue}if(ca&&b3&&(bJ.isPlainObject(b3)||(b8=bJ.isArray(b3)))){if(b8){b8=false;b9=e&&bJ.isArray(e)?e:[]}else{b9=e&&bJ.isPlainObject(e)?e:{}}b7[b4]=bJ.extend(ca,b9,b3)}else{if(b3!==aG){b7[b4]=b3}}}}}return b7};bJ.extend({noConflict:function(e){if(a2.$===bJ){a2.$=H}if(e&&a2.jQuery===bJ){a2.jQuery=bi}return bJ},isReady:false,readyWait:1,holdReady:function(e){if(e){bJ.readyWait++}else{bJ.ready(true)}},ready:function(e){if(e===true?--bJ.readyWait:bJ.isReady){return}if(!l.body){return setTimeout(bJ.ready)}bJ.isReady=true;if(e!==true&&--bJ.readyWait>0){return}ai.resolveWith(l,[bJ]);if(bJ.fn.trigger){bJ(l).trigger("ready").off("ready")}},isFunction:function(e){return bJ.type(e)==="function"},isArray:Array.isArray||function(e){return bJ.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return !isNaN(parseFloat(e))&&isFinite(e)},type:function(e){if(e==null){return String(e)}return typeof e==="object"||typeof e==="function"?aa[z.call(e)]||"object":typeof e},isPlainObject:function(b5){if(!b5||bJ.type(b5)!=="object"||b5.nodeType||bJ.isWindow(b5)){return false}try{if(b5.constructor&&!V.call(b5,"constructor")&&!V.call(b5.constructor.prototype,"isPrototypeOf")){return false}}catch(b4){return false}var b3;for(b3 in b5){}return b3===aG||V.call(b5,b3)},isEmptyObject:function(b3){var e;for(e in b3){return false}return true},error:function(e){throw new Error(e)},parseHTML:function(b6,b4,b5){if(!b6||typeof b6!=="string"){return null}if(typeof b4==="boolean"){b5=b4;b4=false}b4=b4||l;var b3=a.exec(b6),e=!b5&&[];if(b3){return[b4.createElement(b3[1])]}b3=bJ.buildFragment([b6],b4,e);if(e){bJ(e).remove()}return bJ.merge([],b3.childNodes)},parseJSON:function(e){if(a2.JSON&&a2.JSON.parse){return a2.JSON.parse(e)}if(e===null){return e}if(typeof e==="string"){e=bJ.trim(e);if(e){if(bh.test(e.replace(bG,"@").replace(aZ,"]").replace(bk,""))){return(new Function("return "+e))()}}}bJ.error("Invalid JSON: "+e)},parseXML:function(b5){var b3,b4;if(!b5||typeof b5!=="string"){return null}try{if(a2.DOMParser){b4=new DOMParser();b3=b4.parseFromString(b5,"text/xml")}else{b3=new ActiveXObject("Microsoft.XMLDOM");b3.async="false";b3.loadXML(b5)}}catch(b6){b3=aG}if(!b3||!b3.documentElement||b3.getElementsByTagName("parsererror").length){bJ.error("Invalid XML: "+b5)}return b3},noop:function(){},globalEval:function(e){if(e&&bJ.trim(e)){(a2.execScript||function(b3){a2["eval"].call(a2,b3)})(e)}},camelCase:function(e){return e.replace(bS,"ms-").replace(aV,M)},nodeName:function(b3,e){return b3.nodeName&&b3.nodeName.toLowerCase()===e.toLowerCase()},each:function(b7,b8,b3){var b6,b4=0,b5=b7.length,e=ab(b7);if(b3){if(e){for(;b4<b5;b4++){b6=b8.apply(b7[b4],b3);if(b6===false){break}}}else{for(b4 in b7){b6=b8.apply(b7[b4],b3);if(b6===false){break}}}}else{if(e){for(;b4<b5;b4++){b6=b8.call(b7[b4],b4,b7[b4]);if(b6===false){break}}}else{for(b4 in b7){b6=b8.call(b7[b4],b4,b7[b4]);if(b6===false){break}}}}return b7},trim:aQ&&!aQ.call("\uFEFF\xA0")?function(e){return e==null?"":aQ.call(e)}:function(e){return e==null?"":(e+"").replace(C,"")},makeArray:function(e,b4){var b3=b4||[];if(e!=null){if(ab(Object(e))){bJ.merge(b3,typeof e==="string"?[e]:e)}else{ao.call(b3,e)}}return b3},inArray:function(b5,b3,b4){var e;if(b3){if(aM){return aM.call(b3,b5,b4)}e=b3.length;b4=b4?b4<0?Math.max(0,e+b4):b4:0;for(;b4<e;b4++){if(b4 in b3&&b3[b4]===b5){return b4}}}return -1},merge:function(b6,b4){var e=b4.length,b5=b6.length,b3=0;if(typeof e==="number"){for(;b3<e;b3++){b6[b5++]=b4[b3]}}else{while(b4[b3]!==aG){b6[b5++]=b4[b3++]}}b6.length=b5;return b6},grep:function(b3,b8,e){var b7,b4=[],b5=0,b6=b3.length;e=!!e;for(;b5<b6;b5++){b7=!!b8(b3[b5],b5);if(e!==b7){b4.push(b3[b5])}}return b4},map:function(b4,b9,e){var b8,b6=0,b7=b4.length,b3=ab(b4),b5=[];if(b3){for(;b6<b7;b6++){b8=b9(b4[b6],b6,e);if(b8!=null){b5[b5.length]=b8}}}else{for(b6 in b4){b8=b9(b4[b6],b6,e);if(b8!=null){b5[b5.length]=b8}}}return aI.apply([],b5)},guid:1,proxy:function(b6,b5){var e,b4,b3;if(typeof b5==="string"){b3=b6[b5];b5=b6;b6=b3}if(!bJ.isFunction(b6)){return aG}e=a4.call(arguments,2);b4=function(){return b6.apply(b5||this,e.concat(a4.call(arguments)))};b4.guid=b6.guid=b6.guid||bJ.guid++;return b4},access:function(e,b7,b9,b8,b5,cb,ca){var b4=0,b3=e.length,b6=b9==null;if(bJ.type(b9)==="object"){b5=true;for(b4 in b9){bJ.access(e,b7,b4,b9[b4],true,cb,ca)}}else{if(b8!==aG){b5=true;if(!bJ.isFunction(b8)){ca=true}if(b6){if(ca){b7.call(e,b8);b7=null}else{b6=b7;b7=function(cd,cc,ce){return b6.call(bJ(cd),ce)}}}if(b7){for(;b4<b3;b4++){b7(e[b4],b9,ca?b8:b8.call(e[b4],b4,b7(e[b4],b9)))}}}}return b5?e:b6?b7.call(e):b3?b7(e[0],b9):cb},now:function(){return(new Date()).getTime()}});bJ.ready.promise=function(b6){if(!ai){ai=bJ.Deferred();if(l.readyState==="complete"){setTimeout(bJ.ready)}else{if(l.addEventListener){l.addEventListener("DOMContentLoaded",bW,false);a2.addEventListener("load",bW,false)}else{l.attachEvent("onreadystatechange",bW);a2.attachEvent("onload",bW);var b5=false;try{b5=a2.frameElement==null&&l.documentElement}catch(b4){}if(b5&&b5.doScroll){(function b3(){if(!bJ.isReady){try{b5.doScroll("left")}catch(b7){return setTimeout(b3,50)}bl();bJ.ready()}})()}}}}return ai.promise(b6)};bJ.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(b3,e){aa["[object "+e+"]"]=e.toLowerCase()});function ab(b4){var b3=b4.length,e=bJ.type(b4);if(bJ.isWindow(b4)){return false}if(b4.nodeType===1&&b3){return true}return e==="array"||e!=="function"&&(b3===0||typeof b3==="number"&&b3>0&&(b3-1) in b4)}w=bJ(l);var bY={};function ae(b3){var e=bY[b3]={};bJ.each(b3.match(ac)||[],function(b5,b4){e[b4]=true});return e}bJ.Callbacks=function(cc){cc=typeof cc==="string"?(bY[cc]||ae(cc)):bJ.extend({},cc);var b6,b5,e,b7,b8,b4,b9=[],ca=!cc.once&&[],b3=function(cd){b5=cc.memory&&cd;e=true;b8=b4||0;b4=0;b7=b9.length;b6=true;for(;b9&&b8<b7;b8++){if(b9[b8].apply(cd[0],cd[1])===false&&cc.stopOnFalse){b5=false;break}}b6=false;if(b9){if(ca){if(ca.length){b3(ca.shift())}}else{if(b5){b9=[]}else{cb.disable()}}}},cb={add:function(){if(b9){var ce=b9.length;(function cd(cf){bJ.each(cf,function(ch,cg){var ci=bJ.type(cg);if(ci==="function"){if(!cc.unique||!cb.has(cg)){b9.push(cg)}}else{if(cg&&cg.length&&ci!=="string"){cd(cg)}}})})(arguments);if(b6){b7=b9.length}else{if(b5){b4=ce;b3(b5)}}}return this},remove:function(){if(b9){bJ.each(arguments,function(cf,cd){var ce;while((ce=bJ.inArray(cd,b9,ce))>-1){b9.splice(ce,1);if(b6){if(ce<=b7){b7--}if(ce<=b8){b8--}}}})}return this},has:function(cd){return cd?bJ.inArray(cd,b9)>-1:!!(b9&&b9.length)},empty:function(){b9=[];return this},disable:function(){b9=ca=b5=aG;return this},disabled:function(){return !b9},lock:function(){ca=aG;if(!b5){cb.disable()}return this},locked:function(){return !ca},fireWith:function(ce,cd){cd=cd||[];cd=[ce,cd.slice?cd.slice():cd];if(b9&&(!e||ca)){if(b6){ca.push(cd)}else{b3(cd)}}return this},fire:function(){cb.fireWith(this,arguments);return this},fired:function(){return !!e}};return cb};bJ.extend({Deferred:function(b4){var b3=[["resolve","done",bJ.Callbacks("once memory"),"resolved"],["reject","fail",bJ.Callbacks("once memory"),"rejected"],["notify","progress",bJ.Callbacks("memory")]],b5="pending",b6={state:function(){return b5},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var b7=arguments;return bJ.Deferred(function(b8){bJ.each(b3,function(ca,b9){var cc=b9[0],cb=bJ.isFunction(b7[ca])&&b7[ca];e[b9[1]](function(){var cd=cb&&cb.apply(this,arguments);if(cd&&bJ.isFunction(cd.promise)){cd.promise().done(b8.resolve).fail(b8.reject).progress(b8.notify)}else{b8[cc+"With"](this===b6?b8.promise():this,cb?[cd]:arguments)}})});b7=null}).promise()},promise:function(b7){return b7!=null?bJ.extend(b7,b6):b6}},e={};b6.pipe=b6.then;bJ.each(b3,function(b8,b7){var ca=b7[2],b9=b7[3];b6[b7[1]]=ca.add;if(b9){ca.add(function(){b5=b9},b3[b8^1][2].disable,b3[2][2].lock)}e[b7[0]]=function(){e[b7[0]+"With"](this===e?b6:this,arguments);return this};e[b7[0]+"With"]=ca.fireWith});b6.promise(e);if(b4){b4.call(e,e)}return e},when:function(b6){var b4=0,b8=a4.call(arguments),e=b8.length,b3=e!==1||(b6&&bJ.isFunction(b6.promise))?e:0,cb=b3===1?b6:bJ.Deferred(),b5=function(cd,ce,cc){return function(cf){ce[cd]=this;cc[cd]=arguments.length>1?a4.call(arguments):cf;if(cc===ca){cb.notifyWith(ce,cc)}else{if(!(--b3)){cb.resolveWith(ce,cc)}}}},ca,b7,b9;if(e>1){ca=new Array(e);b7=new Array(e);b9=new Array(e);for(;b4<e;b4++){if(b8[b4]&&bJ.isFunction(b8[b4].promise)){b8[b4].promise().done(b5(b4,b9,b8)).fail(cb.reject).progress(b5(b4,b7,ca))}else{--b3}}}if(!b3){cb.resolveWith(b9,b8)}return cb.promise()}});bJ.support=(function(){var ce,cd,cb,ca,cc,b9,b5,b7,b4,b6,b3=l.createElement("div");b3.setAttribute("className","t");b3.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";cd=b3.getElementsByTagName("*");cb=b3.getElementsByTagName("a")[0];if(!cd||!cb||!cd.length){return{}}cc=l.createElement("select");b5=cc.appendChild(l.createElement("option"));ca=b3.getElementsByTagName("input")[0];cb.style.cssText="top:1px;float:left;opacity:.5";ce={getSetAttribute:b3.className!=="t",leadingWhitespace:b3.firstChild.nodeType===3,tbody:!b3.getElementsByTagName("tbody").length,htmlSerialize:!!b3.getElementsByTagName("link").length,style:/top/.test(cb.getAttribute("style")),hrefNormalized:cb.getAttribute("href")==="/a",opacity:/^0.5/.test(cb.style.opacity),cssFloat:!!cb.style.cssFloat,checkOn:!!ca.value,optSelected:b5.selected,enctype:!!l.createElement("form").enctype,html5Clone:l.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:l.compatMode==="CSS1Compat",deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};ca.checked=true;ce.noCloneChecked=ca.cloneNode(true).checked;cc.disabled=true;ce.optDisabled=!b5.disabled;try{delete b3.test}catch(b8){ce.deleteExpando=false}ca=l.createElement("input");ca.setAttribute("value","");ce.input=ca.getAttribute("value")==="";ca.value="t";ca.setAttribute("type","radio");ce.radioValue=ca.value==="t";ca.setAttribute("checked","t");ca.setAttribute("name","t");b9=l.createDocumentFragment();b9.appendChild(ca);ce.appendChecked=ca.checked;ce.checkClone=b9.cloneNode(true).cloneNode(true).lastChild.checked;if(b3.attachEvent){b3.attachEvent("onclick",function(){ce.noCloneEvent=false});b3.cloneNode(true).click()}for(b6 in {submit:true,change:true,focusin:true}){b3.setAttribute(b7="on"+b6,"t");ce[b6+"Bubbles"]=b7 in a2||b3.attributes[b7].expando===false}b3.style.backgroundClip="content-box";b3.cloneNode(true).style.backgroundClip="";ce.clearCloneStyle=b3.style.backgroundClip==="content-box";bJ(function(){var cf,ci,ch,cg="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",e=l.getElementsByTagName("body")[0];if(!e){return}cf=l.createElement("div");cf.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";e.appendChild(cf).appendChild(b3);b3.innerHTML="<table><tr><td></td><td>t</td></tr></table>";ch=b3.getElementsByTagName("td");ch[0].style.cssText="padding:0;margin:0;border:0;display:none";b4=(ch[0].offsetHeight===0);ch[0].style.display="";ch[1].style.display="none";ce.reliableHiddenOffsets=b4&&(ch[0].offsetHeight===0);b3.innerHTML="";b3.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";ce.boxSizing=(b3.offsetWidth===4);ce.doesNotIncludeMarginInBodyOffset=(e.offsetTop!==1);if(a2.getComputedStyle){ce.pixelPosition=(a2.getComputedStyle(b3,null)||{}).top!=="1%";ce.boxSizingReliable=(a2.getComputedStyle(b3,null)||{width:"4px"}).width==="4px";ci=b3.appendChild(l.createElement("div"));ci.style.cssText=b3.style.cssText=cg;ci.style.marginRight=ci.style.width="0";b3.style.width="1px";ce.reliableMarginRight=!parseFloat((a2.getComputedStyle(ci,null)||{}).marginRight)}if(typeof b3.style.zoom!==aC){b3.innerHTML="";b3.style.cssText=cg+"width:1px;padding:1px;display:inline;zoom:1";ce.inlineBlockNeedsLayout=(b3.offsetWidth===3);b3.style.display="block";b3.innerHTML="<div></div>";b3.firstChild.style.width="5px";ce.shrinkWrapBlocks=(b3.offsetWidth!==3);if(ce.inlineBlockNeedsLayout){e.style.zoom=1}}e.removeChild(cf);cf=b3=ch=ci=null});cd=cc=b9=b5=cb=ca=null;return ce})();var bw=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,aN=/([A-Z])/g;function ba(b5,b3,b7,b6){if(!bJ.acceptData(b5)){return}var b8,ca,cb=bJ.expando,b9=typeof b3==="string",cc=b5.nodeType,e=cc?bJ.cache:b5,b4=cc?b5[cb]:b5[cb]&&cb;if((!b4||!e[b4]||(!b6&&!e[b4].data))&&b9&&b7===aG){return}if(!b4){if(cc){b5[cb]=b4=a6.pop()||bJ.guid++}else{b4=cb}}if(!e[b4]){e[b4]={};if(!cc){e[b4].toJSON=bJ.noop}}if(typeof b3==="object"||typeof b3==="function"){if(b6){e[b4]=bJ.extend(e[b4],b3)}else{e[b4].data=bJ.extend(e[b4].data,b3)}}b8=e[b4];if(!b6){if(!b8.data){b8.data={}}b8=b8.data}if(b7!==aG){b8[bJ.camelCase(b3)]=b7}if(b9){ca=b8[b3];if(ca==null){ca=b8[bJ.camelCase(b3)]}}else{ca=b8}return ca}function Z(b5,b3,b6){if(!bJ.acceptData(b5)){return}var b8,b7,b9,ca=b5.nodeType,e=ca?bJ.cache:b5,b4=ca?b5[bJ.expando]:bJ.expando;if(!e[b4]){return}if(b3){b9=b6?e[b4]:e[b4].data;if(b9){if(!bJ.isArray(b3)){if(b3 in b9){b3=[b3]}else{b3=bJ.camelCase(b3);if(b3 in b9){b3=[b3]}else{b3=b3.split(" ")}}}else{b3=b3.concat(bJ.map(b3,bJ.camelCase))}for(b8=0,b7=b3.length;b8<b7;b8++){delete b9[b3[b8]]}if(!(b6?N:bJ.isEmptyObject)(b9)){return}}}if(!b6){delete e[b4].data;if(!N(e[b4])){return}}if(ca){bJ.cleanData([b5],true)}else{if(bJ.support.deleteExpando||e!=e.window){delete e[b4]}else{e[b4]=null}}}bJ.extend({cache:{},expando:"jQuery"+(s+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?bJ.cache[e[bJ.expando]]:e[bJ.expando];return !!e&&!N(e)},data:function(b3,e,b4){return ba(b3,e,b4)},removeData:function(b3,e){return Z(b3,e)},_data:function(b3,e,b4){return ba(b3,e,b4,true)},_removeData:function(b3,e){return Z(b3,e,true)},acceptData:function(b3){if(b3.nodeType&&b3.nodeType!==1&&b3.nodeType!==9){return false}var e=b3.nodeName&&bJ.noData[b3.nodeName.toLowerCase()];return !e||e!==true&&b3.getAttribute("classid")===e}});bJ.fn.extend({data:function(b5,b8){var b3,e,b6=this[0],b4=0,b7=null;if(b5===aG){if(this.length){b7=bJ.data(b6);if(b6.nodeType===1&&!bJ._data(b6,"parsedAttrs")){b3=b6.attributes;for(;b4<b3.length;b4++){e=b3[b4].name;if(!e.indexOf("data-")){e=bJ.camelCase(e.slice(5));by(b6,e,b7[e])}}bJ._data(b6,"parsedAttrs",true)}}return b7}if(typeof b5==="object"){return this.each(function(){bJ.data(this,b5)})}return bJ.access(this,function(b9){if(b9===aG){return b6?by(b6,b5,bJ.data(b6,b5)):null}this.each(function(){bJ.data(this,b5,b9)})},null,b8,arguments.length>1,null,true)},removeData:function(e){return this.each(function(){bJ.removeData(this,e)})}});function by(b5,b4,b6){if(b6===aG&&b5.nodeType===1){var b3="data-"+b4.replace(aN,"-$1").toLowerCase();b6=b5.getAttribute(b3);if(typeof b6==="string"){try{b6=b6==="true"?true:b6==="false"?false:b6==="null"?null:+b6+""===b6?+b6:bw.test(b6)?bJ.parseJSON(b6):b6}catch(b7){}bJ.data(b5,b4,b6)}else{b6=aG}}return b6}function N(b3){var e;for(e in b3){if(e==="data"&&bJ.isEmptyObject(b3[e])){continue}if(e!=="toJSON"){return false}}return true}bJ.extend({queue:function(b4,b3,b5){var e;if(b4){b3=(b3||"fx")+"queue";e=bJ._data(b4,b3);if(b5){if(!e||bJ.isArray(b5)){e=bJ._data(b4,b3,bJ.makeArray(b5))}else{e.push(b5)}}return e||[]}},dequeue:function(b7,b6){b6=b6||"fx";var b3=bJ.queue(b7,b6),b8=b3.length,b5=b3.shift(),e=bJ._queueHooks(b7,b6),b4=function(){bJ.dequeue(b7,b6)};if(b5==="inprogress"){b5=b3.shift();b8--}e.cur=b5;if(b5){if(b6==="fx"){b3.unshift("inprogress")}delete e.stop;b5.call(b7,b4,e)}if(!b8&&e){e.empty.fire()}},_queueHooks:function(b4,b3){var e=b3+"queueHooks";return bJ._data(b4,e)||bJ._data(b4,e,{empty:bJ.Callbacks("once memory").add(function(){bJ._removeData(b4,b3+"queue");bJ._removeData(b4,e)})})}});bJ.fn.extend({queue:function(e,b3){var b4=2;if(typeof e!=="string"){b3=e;e="fx";b4--}if(arguments.length<b4){return bJ.queue(this[0],e)}return b3===aG?this:this.each(function(){var b5=bJ.queue(this,e,b3);bJ._queueHooks(this,e);if(e==="fx"&&b5[0]!=="inprogress"){bJ.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){bJ.dequeue(this,e)})},delay:function(b3,e){b3=bJ.fx?bJ.fx.speeds[b3]||b3:b3;e=e||"fx";return this.queue(e,function(b5,b4){var b6=setTimeout(b5,b3);b4.stop=function(){clearTimeout(b6)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(b4,b8){var b3,b5=1,b9=bJ.Deferred(),b7=this,e=this.length,b6=function(){if(!(--b5)){b9.resolveWith(b7,[b7])}};if(typeof b4!=="string"){b8=b4;b4=aG}b4=b4||"fx";while(e--){b3=bJ._data(b7[e],b4+"queueHooks");if(b3&&b3.empty){b5++;b3.empty.add(b6)}}b6();return b9.promise(b8)}});var a8,bZ,bM=/[\t\r\n]/g,ak=/\r/g,aF=/^(?:input|select|textarea|button|object)$/i,D=/^(?:a|area)$/i,L=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,aq=/^(?:checked|selected)$/i,bP=bJ.support.getSetAttribute,bF=bJ.support.input;bJ.fn.extend({attr:function(e,b3){return bJ.access(this,bJ.attr,e,b3,arguments.length>1)},removeAttr:function(e){return this.each(function(){bJ.removeAttr(this,e)})},prop:function(e,b3){return bJ.access(this,bJ.prop,e,b3,arguments.length>1)},removeProp:function(e){e=bJ.propFix[e]||e;return this.each(function(){try{this[e]=aG;delete this[e]}catch(b3){}})},addClass:function(b9){var b3,e,ca,b6,b4,b5=0,b7=this.length,b8=typeof b9==="string"&&b9;if(bJ.isFunction(b9)){return this.each(function(cb){bJ(this).addClass(b9.call(this,cb,this.className))})}if(b8){b3=(b9||"").match(ac)||[];for(;b5<b7;b5++){e=this[b5];ca=e.nodeType===1&&(e.className?(" "+e.className+" ").replace(bM," "):" ");if(ca){b4=0;while((b6=b3[b4++])){if(ca.indexOf(" "+b6+" ")<0){ca+=b6+" "}}e.className=bJ.trim(ca)}}}return this},removeClass:function(b9){var b3,e,ca,b6,b4,b5=0,b7=this.length,b8=arguments.length===0||typeof b9==="string"&&b9;if(bJ.isFunction(b9)){return this.each(function(cb){bJ(this).removeClass(b9.call(this,cb,this.className))})}if(b8){b3=(b9||"").match(ac)||[];for(;b5<b7;b5++){e=this[b5];ca=e.nodeType===1&&(e.className?(" "+e.className+" ").replace(bM," "):"");if(ca){b4=0;while((b6=b3[b4++])){while(ca.indexOf(" "+b6+" ")>=0){ca=ca.replace(" "+b6+" "," ")}}e.className=b9?bJ.trim(ca):""}}}return this},toggleClass:function(b5,b3){var b4=typeof b5,e=typeof b3==="boolean";if(bJ.isFunction(b5)){return this.each(function(b6){bJ(this).toggleClass(b5.call(this,b6,this.className,b3),b3)})}return this.each(function(){if(b4==="string"){var b8,b7=0,b6=bJ(this),b9=b3,ca=b5.match(ac)||[];while((b8=ca[b7++])){b9=e?b9:!b6.hasClass(b8);b6[b9?"addClass":"removeClass"](b8)}}else{if(b4===aC||b4==="boolean"){if(this.className){bJ._data(this,"__className__",this.className)}this.className=this.className||b5===false?"":bJ._data(this,"__className__")||""}}})},hasClass:function(e){var b5=" "+e+" ",b4=0,b3=this.length;for(;b4<b3;b4++){if(this[b4].nodeType===1&&(" "+this[b4].className+" ").replace(bM," ").indexOf(b5)>=0){return true}}return false},val:function(b5){var b3,e,b6,b4=this[0];if(!arguments.length){if(b4){e=bJ.valHooks[b4.type]||bJ.valHooks[b4.nodeName.toLowerCase()];if(e&&"get" in e&&(b3=e.get(b4,"value"))!==aG){return b3}b3=b4.value;return typeof b3==="string"?b3.replace(ak,""):b3==null?"":b3}return}b6=bJ.isFunction(b5);return this.each(function(b8){var b9,b7=bJ(this);if(this.nodeType!==1){return}if(b6){b9=b5.call(this,b8,b7.val())}else{b9=b5}if(b9==null){b9=""}else{if(typeof b9==="number"){b9+=""}else{if(bJ.isArray(b9)){b9=bJ.map(b9,function(ca){return ca==null?"":ca+""})}}}e=bJ.valHooks[this.type]||bJ.valHooks[this.nodeName.toLowerCase()];if(!e||!("set" in e)||e.set(this,b9,"value")===aG){this.value=b9}})}});bJ.extend({valHooks:{option:{get:function(e){var b3=e.attributes.value;return !b3||b3.specified?e.value:e.text}},select:{get:function(e){var b8,b4,ca=e.options,b6=e.selectedIndex,b5=e.type==="select-one"||b6<0,b9=b5?null:[],b7=b5?b6+1:ca.length,b3=b6<0?b7:b5?b6:0;for(;b3<b7;b3++){b4=ca[b3];if((b4.selected||b3===b6)&&(bJ.support.optDisabled?!b4.disabled:b4.getAttribute("disabled")===null)&&(!b4.parentNode.disabled||!bJ.nodeName(b4.parentNode,"optgroup"))){b8=bJ(b4).val();if(b5){return b8}b9.push(b8)}}return b9},set:function(b3,b4){var e=bJ.makeArray(b4);bJ(b3).find("option").each(function(){this.selected=bJ.inArray(bJ(this).val(),e)>=0});if(!e.length){b3.selectedIndex=-1}return e}}},attr:function(b7,b5,b8){var e,b6,b4,b3=b7.nodeType;if(!b7||b3===3||b3===8||b3===2){return}if(typeof b7.getAttribute===aC){return bJ.prop(b7,b5,b8)}b6=b3!==1||!bJ.isXMLDoc(b7);if(b6){b5=b5.toLowerCase();e=bJ.attrHooks[b5]||(L.test(b5)?bZ:a8)}if(b8!==aG){if(b8===null){bJ.removeAttr(b7,b5)}else{if(e&&b6&&"set" in e&&(b4=e.set(b7,b8,b5))!==aG){return b4}else{b7.setAttribute(b5,b8+"");return b8}}}else{if(e&&b6&&"get" in e&&(b4=e.get(b7,b5))!==null){return b4}else{if(typeof b7.getAttribute!==aC){b4=b7.getAttribute(b5)}return b4==null?aG:b4}}},removeAttr:function(b4,b6){var e,b5,b3=0,b7=b6&&b6.match(ac);if(b7&&b4.nodeType===1){while((e=b7[b3++])){b5=bJ.propFix[e]||e;if(L.test(e)){if(!bP&&aq.test(e)){b4[bJ.camelCase("default-"+e)]=b4[b5]=false}else{b4[b5]=false}}else{bJ.attr(b4,e,"")}b4.removeAttribute(bP?e:b5)}}},attrHooks:{type:{set:function(e,b3){if(!bJ.support.radioValue&&b3==="radio"&&bJ.nodeName(e,"input")){var b4=e.value;e.setAttribute("type",b3);if(b4){e.value=b4}return b3}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b7,b5,b8){var b4,e,b6,b3=b7.nodeType;if(!b7||b3===3||b3===8||b3===2){return}b6=b3!==1||!bJ.isXMLDoc(b7);if(b6){b5=bJ.propFix[b5]||b5;e=bJ.propHooks[b5]}if(b8!==aG){if(e&&"set" in e&&(b4=e.set(b7,b8,b5))!==aG){return b4}else{return(b7[b5]=b8)}}else{if(e&&"get" in e&&(b4=e.get(b7,b5))!==null){return b4}else{return b7[b5]}}},propHooks:{tabIndex:{get:function(b3){var e=b3.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):aF.test(b3.nodeName)||D.test(b3.nodeName)&&b3.href?0:aG}}}});bZ={get:function(b5,b3){var b6=bJ.prop(b5,b3),e=typeof b6==="boolean"&&b5.getAttribute(b3),b4=typeof b6==="boolean"?bF&&bP?e!=null:aq.test(b3)?b5[bJ.camelCase("default-"+b3)]:!!e:b5.getAttributeNode(b3);return b4&&b4.value!==false?b3.toLowerCase():aG},set:function(b3,b4,e){if(b4===false){bJ.removeAttr(b3,e)}else{if(bF&&bP||!aq.test(e)){b3.setAttribute(!bP&&bJ.propFix[e]||e,e)}else{b3[bJ.camelCase("default-"+e)]=b3[e]=true}}return e}};if(!bF||!bP){bJ.attrHooks.value={get:function(b4,b3){var e=b4.getAttributeNode(b3);return bJ.nodeName(b4,"input")?b4.defaultValue:e&&e.specified?e.value:aG},set:function(b3,b4,e){if(bJ.nodeName(b3,"input")){b3.defaultValue=b4}else{return a8&&a8.set(b3,b4,e)}}}}if(!bP){a8=bJ.valHooks.button={get:function(b4,b3){var e=b4.getAttributeNode(b3);return e&&(b3==="id"||b3==="name"||b3==="coords"?e.value!=="":e.specified)?e.value:aG},set:function(b4,b5,b3){var e=b4.getAttributeNode(b3);if(!e){b4.setAttributeNode((e=b4.ownerDocument.createAttribute(b3)))}e.value=b5+="";return b3==="value"||b5===b4.getAttribute(b3)?b5:aG}};bJ.attrHooks.contenteditable={get:a8.get,set:function(b3,b4,e){a8.set(b3,b4===""?false:b4,e)}};bJ.each(["width","height"],function(b3,e){bJ.attrHooks[e]=bJ.extend(bJ.attrHooks[e],{set:function(b4,b5){if(b5===""){b4.setAttribute(e,"auto");return b5}}})})}if(!bJ.support.hrefNormalized){bJ.each(["href","src","width","height"],function(b3,e){bJ.attrHooks[e]=bJ.extend(bJ.attrHooks[e],{get:function(b5){var b4=b5.getAttribute(e,2);return b4==null?aG:b4}})});bJ.each(["href","src"],function(b3,e){bJ.propHooks[e]={get:function(b4){return b4.getAttribute(e,4)}}})}if(!bJ.support.style){bJ.attrHooks.style={get:function(e){return e.style.cssText||aG},set:function(e,b3){return(e.style.cssText=b3+"")}}}if(!bJ.support.optSelected){bJ.propHooks.selected=bJ.extend(bJ.propHooks.selected,{get:function(b3){var e=b3.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}return null}})}if(!bJ.support.enctype){bJ.propFix.enctype="encoding"}if(!bJ.support.checkOn){bJ.each(["radio","checkbox"],function(){bJ.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}bJ.each(["radio","checkbox"],function(){bJ.valHooks[this]=bJ.extend(bJ.valHooks[this],{set:function(e,b3){if(bJ.isArray(b3)){return(e.checked=bJ.inArray(bJ(e).val(),b3)>=0)}}})});var bH=/^(?:input|select|textarea)$/i,a3=/^key/,bN=/^(?:mouse|contextmenu)|click/,bB=/^(?:focusinfocus|focusoutblur)$/,bu=/^([^.]*)(?:\.(.+)|)$/;function R(){return true}function X(){return false}bJ.event={global:{},add:function(b6,cb,cg,b8,b7){var b9,ch,ci,b4,cd,ca,cf,b5,ce,e,b3,cc=bJ._data(b6);if(!cc){return}if(cg.handler){b4=cg;cg=b4.handler;b7=b4.selector}if(!cg.guid){cg.guid=bJ.guid++}if(!(ch=cc.events)){ch=cc.events={}}if(!(ca=cc.handle)){ca=cc.handle=function(cj){return typeof bJ!==aC&&(!cj||bJ.event.triggered!==cj.type)?bJ.event.dispatch.apply(ca.elem,arguments):aG};ca.elem=b6}cb=(cb||"").match(ac)||[""];ci=cb.length;while(ci--){b9=bu.exec(cb[ci])||[];ce=b3=b9[1];e=(b9[2]||"").split(".").sort();cd=bJ.event.special[ce]||{};ce=(b7?cd.delegateType:cd.bindType)||ce;cd=bJ.event.special[ce]||{};cf=bJ.extend({type:ce,origType:b3,data:b8,handler:cg,guid:cg.guid,selector:b7,needsContext:b7&&bJ.expr.match.needsContext.test(b7),namespace:e.join(".")},b4);if(!(b5=ch[ce])){b5=ch[ce]=[];b5.delegateCount=0;if(!cd.setup||cd.setup.call(b6,b8,e,ca)===false){if(b6.addEventListener){b6.addEventListener(ce,ca,false)}else{if(b6.attachEvent){b6.attachEvent("on"+ce,ca)}}}}if(cd.add){cd.add.call(b6,cf);if(!cf.handler.guid){cf.handler.guid=cg.guid}}if(b7){b5.splice(b5.delegateCount++,0,cf)}else{b5.push(cf)}bJ.event.global[ce]=true}b6=null},remove:function(b5,cb,ci,b6,ca){var b8,cf,b9,b7,ch,cg,cd,b4,ce,e,b3,cc=bJ.hasData(b5)&&bJ._data(b5);if(!cc||!(cg=cc.events)){return}cb=(cb||"").match(ac)||[""];ch=cb.length;while(ch--){b9=bu.exec(cb[ch])||[];ce=b3=b9[1];e=(b9[2]||"").split(".").sort();if(!ce){for(ce in cg){bJ.event.remove(b5,ce+cb[ch],ci,b6,true)}continue}cd=bJ.event.special[ce]||{};ce=(b6?cd.delegateType:cd.bindType)||ce;b4=cg[ce]||[];b9=b9[2]&&new RegExp("(^|\\.)"+e.join("\\.(?:.*\\.|)")+"(\\.|$)");b7=b8=b4.length;while(b8--){cf=b4[b8];if((ca||b3===cf.origType)&&(!ci||ci.guid===cf.guid)&&(!b9||b9.test(cf.namespace))&&(!b6||b6===cf.selector||b6==="**"&&cf.selector)){b4.splice(b8,1);if(cf.selector){b4.delegateCount--}if(cd.remove){cd.remove.call(b5,cf)}}}if(b7&&!b4.length){if(!cd.teardown||cd.teardown.call(b5,e,cc.handle)===false){bJ.removeEvent(b5,ce,cc.handle)}delete cg[ce]}}if(bJ.isEmptyObject(cg)){delete cc.handle;bJ._removeData(b5,"events")}},trigger:function(b3,ca,b6,ch){var cb,b5,cf,cg,cd,b9,b8,b7=[b6||l],ce=V.call(b3,"type")?b3.type:b3,b4=V.call(b3,"namespace")?b3.namespace.split("."):[];cf=b9=b6=b6||l;if(b6.nodeType===3||b6.nodeType===8){return}if(bB.test(ce+bJ.event.triggered)){return}if(ce.indexOf(".")>=0){b4=ce.split(".");ce=b4.shift();b4.sort()}b5=ce.indexOf(":")<0&&"on"+ce;b3=b3[bJ.expando]?b3:new bJ.Event(ce,typeof b3==="object"&&b3);b3.isTrigger=true;b3.namespace=b4.join(".");b3.namespace_re=b3.namespace?new RegExp("(^|\\.)"+b4.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b3.result=aG;if(!b3.target){b3.target=b6}ca=ca==null?[b3]:bJ.makeArray(ca,[b3]);cd=bJ.event.special[ce]||{};if(!ch&&cd.trigger&&cd.trigger.apply(b6,ca)===false){return}if(!ch&&!cd.noBubble&&!bJ.isWindow(b6)){cg=cd.delegateType||ce;if(!bB.test(cg+ce)){cf=cf.parentNode}for(;cf;cf=cf.parentNode){b7.push(cf);b9=cf}if(b9===(b6.ownerDocument||l)){b7.push(b9.defaultView||b9.parentWindow||a2)}}b8=0;while((cf=b7[b8++])&&!b3.isPropagationStopped()){b3.type=b8>1?cg:cd.bindType||ce;cb=(bJ._data(cf,"events")||{})[b3.type]&&bJ._data(cf,"handle");if(cb){cb.apply(cf,ca)}cb=b5&&cf[b5];if(cb&&bJ.acceptData(cf)&&cb.apply&&cb.apply(cf,ca)===false){b3.preventDefault()}}b3.type=ce;if(!ch&&!b3.isDefaultPrevented()){if((!cd._default||cd._default.apply(b6.ownerDocument,ca)===false)&&!(ce==="click"&&bJ.nodeName(b6,"a"))&&bJ.acceptData(b6)){if(b5&&b6[ce]&&!bJ.isWindow(b6)){b9=b6[b5];if(b9){b6[b5]=null}bJ.event.triggered=ce;try{b6[ce]()}catch(cc){}bJ.event.triggered=aG;if(b9){b6[b5]=b9}}}}return b3.result},dispatch:function(e){e=bJ.event.fix(e);var b6,b7,cb,b3,b5,ca=[],b9=a4.call(arguments),b4=(bJ._data(this,"events")||{})[e.type]||[],b8=bJ.event.special[e.type]||{};b9[0]=e;e.delegateTarget=this;if(b8.preDispatch&&b8.preDispatch.call(this,e)===false){return}ca=bJ.event.handlers.call(this,e,b4);b6=0;while((b3=ca[b6++])&&!e.isPropagationStopped()){e.currentTarget=b3.elem;b5=0;while((cb=b3.handlers[b5++])&&!e.isImmediatePropagationStopped()){if(!e.namespace_re||e.namespace_re.test(cb.namespace)){e.handleObj=cb;e.data=cb.data;b7=((bJ.event.special[cb.origType]||{}).handle||cb.handler).apply(b3.elem,b9);if(b7!==aG){if((e.result=b7)===false){e.preventDefault();e.stopPropagation()}}}}}if(b8.postDispatch){b8.postDispatch.call(this,e)}return e.result},handlers:function(e,b4){var b3,b9,b7,b6,b8=[],b5=b4.delegateCount,ca=e.target;if(b5&&ca.nodeType&&(!e.button||e.type!=="click")){for(;ca!=this;ca=ca.parentNode||this){if(ca.nodeType===1&&(ca.disabled!==true||e.type!=="click")){b7=[];for(b6=0;b6<b5;b6++){b9=b4[b6];b3=b9.selector+" ";if(b7[b3]===aG){b7[b3]=b9.needsContext?bJ(b3,this).index(ca)>=0:bJ.find(b3,this,null,[ca]).length}if(b7[b3]){b7.push(b9)}}if(b7.length){b8.push({elem:ca,handlers:b7})}}}}if(b5<b4.length){b8.push({elem:this,handlers:b4.slice(b5)})}return b8},fix:function(b5){if(b5[bJ.expando]){return b5}var b3,b8,b7,b4=b5.type,e=b5,b6=this.fixHooks[b4];if(!b6){this.fixHooks[b4]=b6=bN.test(b4)?this.mouseHooks:a3.test(b4)?this.keyHooks:{}}b7=b6.props?this.props.concat(b6.props):this.props;b5=new bJ.Event(e);b3=b7.length;while(b3--){b8=b7[b3];b5[b8]=e[b8]}if(!b5.target){b5.target=e.srcElement||l}if(b5.target.nodeType===3){b5.target=b5.target.parentNode}b5.metaKey=!!b5.metaKey;return b6.filter?b6.filter(b5,e):b5},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(b3,e){if(b3.which==null){b3.which=e.charCode!=null?e.charCode:e.keyCode}return b3}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b5,b4){var e,b6,b7,b3=b4.button,b8=b4.fromElement;if(b5.pageX==null&&b4.clientX!=null){b6=b5.target.ownerDocument||l;b7=b6.documentElement;e=b6.body;b5.pageX=b4.clientX+(b7&&b7.scrollLeft||e&&e.scrollLeft||0)-(b7&&b7.clientLeft||e&&e.clientLeft||0);b5.pageY=b4.clientY+(b7&&b7.scrollTop||e&&e.scrollTop||0)-(b7&&b7.clientTop||e&&e.clientTop||0)}if(!b5.relatedTarget&&b8){b5.relatedTarget=b8===b5.target?b4.toElement:b8}if(!b5.which&&b3!==aG){b5.which=(b3&1?1:(b3&2?3:(b3&4?2:0)))}return b5}},special:{load:{noBubble:true},click:{trigger:function(){if(bJ.nodeName(this,"input")&&this.type==="checkbox"&&this.click){this.click();return false}}},focus:{trigger:function(){if(this!==l.activeElement&&this.focus){try{this.focus();return false}catch(b3){}}},delegateType:"focusin"},blur:{trigger:function(){if(this===l.activeElement&&this.blur){this.blur();return false}},delegateType:"focusout"},beforeunload:{postDispatch:function(e){if(e.result!==aG){e.originalEvent.returnValue=e.result}}}},simulate:function(b4,b6,b5,b3){var b7=bJ.extend(new bJ.Event(),b5,{type:b4,isSimulated:true,originalEvent:{}});if(b3){bJ.event.trigger(b7,null,b6)}else{bJ.event.dispatch.call(b6,b7)}if(b7.isDefaultPrevented()){b5.preventDefault()}}};bJ.removeEvent=l.removeEventListener?function(b3,e,b4){if(b3.removeEventListener){b3.removeEventListener(e,b4,false)}}:function(b4,b3,b5){var e="on"+b3;if(b4.detachEvent){if(typeof b4[e]===aC){b4[e]=null}b4.detachEvent(e,b5)}};bJ.Event=function(b3,e){if(!(this instanceof bJ.Event)){return new bJ.Event(b3,e)}if(b3&&b3.type){this.originalEvent=b3;this.type=b3.type;this.isDefaultPrevented=(b3.defaultPrevented||b3.returnValue===false||b3.getPreventDefault&&b3.getPreventDefault())?R:X}else{this.type=b3}if(e){bJ.extend(this,e)}this.timeStamp=b3&&b3.timeStamp||bJ.now();this[bJ.expando]=true};bJ.Event.prototype={isDefaultPrevented:X,isPropagationStopped:X,isImmediatePropagationStopped:X,preventDefault:function(){var b3=this.originalEvent;this.isDefaultPrevented=R;if(!b3){return}if(b3.preventDefault){b3.preventDefault()}else{b3.returnValue=false}},stopPropagation:function(){var b3=this.originalEvent;this.isPropagationStopped=R;if(!b3){return}if(b3.stopPropagation){b3.stopPropagation()}b3.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=R;this.stopPropagation()}};bJ.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b3,e){bJ.event.special[b3]={delegateType:e,bindType:e,handle:function(b6){var b4,b8=this,b7=b6.relatedTarget,b5=b6.handleObj;if(!b7||(b7!==b8&&!bJ.contains(b8,b7))){b6.type=b5.origType;b4=b5.handler.apply(this,arguments);b6.type=e}return b4}}});if(!bJ.support.submitBubbles){bJ.event.special.submit={setup:function(){if(bJ.nodeName(this,"form")){return false}bJ.event.add(this,"click._submit keypress._submit",function(b5){var b4=b5.target,b3=bJ.nodeName(b4,"input")||bJ.nodeName(b4,"button")?b4.form:aG;if(b3&&!bJ._data(b3,"submitBubbles")){bJ.event.add(b3,"submit._submit",function(e){e._submit_bubble=true});bJ._data(b3,"submitBubbles",true)}})},postDispatch:function(e){if(e._submit_bubble){delete e._submit_bubble;if(this.parentNode&&!e.isTrigger){bJ.event.simulate("submit",this.parentNode,e,true)}}},teardown:function(){if(bJ.nodeName(this,"form")){return false}bJ.event.remove(this,"._submit")}}}if(!bJ.support.changeBubbles){bJ.event.special.change={setup:function(){if(bH.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){bJ.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true}});bJ.event.add(this,"click._change",function(e){if(this._just_changed&&!e.isTrigger){this._just_changed=false}bJ.event.simulate("change",this,e,true)})}return false}bJ.event.add(this,"beforeactivate._change",function(b4){var b3=b4.target;if(bH.test(b3.nodeName)&&!bJ._data(b3,"changeBubbles")){bJ.event.add(b3,"change._change",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger){bJ.event.simulate("change",this.parentNode,e,true)}});bJ._data(b3,"changeBubbles",true)}})},handle:function(b3){var e=b3.target;if(this!==e||b3.isSimulated||b3.isTrigger||(e.type!=="radio"&&e.type!=="checkbox")){return b3.handleObj.handler.apply(this,arguments)}},teardown:function(){bJ.event.remove(this,"._change");return !bH.test(this.nodeName)}}}if(!bJ.support.focusinBubbles){bJ.each({focus:"focusin",blur:"focusout"},function(b5,e){var b3=0,b4=function(b6){bJ.event.simulate(e,b6.target,bJ.event.fix(b6),true)};bJ.event.special[e]={setup:function(){if(b3++===0){l.addEventListener(b5,b4,true)}},teardown:function(){if(--b3===0){l.removeEventListener(b5,b4,true)}}}})}bJ.fn.extend({on:function(b4,e,b7,b6,b3){var b5,b8;if(typeof b4==="object"){if(typeof e!=="string"){b7=b7||e;e=aG}for(b5 in b4){this.on(b5,e,b7,b4[b5],b3)}return this}if(b7==null&&b6==null){b6=e;b7=e=aG}else{if(b6==null){if(typeof e==="string"){b6=b7;b7=aG}else{b6=b7;b7=e;e=aG}}}if(b6===false){b6=X}else{if(!b6){return this}}if(b3===1){b8=b6;b6=function(b9){bJ().off(b9);return b8.apply(this,arguments)};b6.guid=b8.guid||(b8.guid=bJ.guid++)}return this.each(function(){bJ.event.add(this,b4,b6,b7,e)})},one:function(b3,e,b5,b4){return this.on(b3,e,b5,b4,1)},off:function(b4,e,b6){var b3,b5;if(b4&&b4.preventDefault&&b4.handleObj){b3=b4.handleObj;bJ(b4.delegateTarget).off(b3.namespace?b3.origType+"."+b3.namespace:b3.origType,b3.selector,b3.handler);return this}if(typeof b4==="object"){for(b5 in b4){this.off(b5,e,b4[b5])}return this}if(e===false||typeof e==="function"){b6=e;e=aG}if(b6===false){b6=X}return this.each(function(){bJ.event.remove(this,b4,b6,e)})},bind:function(e,b4,b3){return this.on(e,null,b4,b3)},unbind:function(e,b3){return this.off(e,null,b3)},delegate:function(e,b3,b5,b4){return this.on(b3,e,b5,b4)},undelegate:function(e,b3,b4){return arguments.length===1?this.off(e,"**"):this.off(b3,e||"**",b4)},trigger:function(e,b3){return this.each(function(){bJ.event.trigger(e,b3,this)})},triggerHandler:function(e,b4){var b3=this[0];if(b3){return bJ.event.trigger(e,b4,b3,true)}}});(function(da,ch){var cx,cb,cn,cH,cJ,cS,cT,dg,cV,cB,co,cd,cZ,db,ca,cF,cD,c5="sizzle"+-(new Date()),cI=da.document,dd={},de=0,c0=0,b5=cz(),c4=cz(),cG=cz(),c9=typeof ch,cN=1<<31,c7=[],c8=c7.pop,b4=c7.push,cm=c7.slice,b9=c7.indexOf||function(di){var dh=0,e=this.length;for(;dh<e;dh++){if(this[dh]===di){return dh}}return -1},cp="[\\x20\\t\\r\\n\\f]",b3="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",cK=b3.replace("w","w#"),ci="([*^$|!~]?=)",c2="\\["+cp+"*("+b3+")"+cp+"*(?:"+ci+cp+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+cK+")|)|)"+cp+"*\\]",ck=":("+b3+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+c2.replace(3,8)+")*)|.*)\\)|)",cr=new RegExp("^"+cp+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cp+"+$","g"),cu=new RegExp("^"+cp+"*,"+cp+"*"),cA=new RegExp("^"+cp+"*([\\x20\\t\\r\\n\\f>+~])"+cp+"*"),cP=new RegExp(ck),cQ=new RegExp("^"+cK+"$"),cY={ID:new RegExp("^#("+b3+")"),CLASS:new RegExp("^\\.("+b3+")"),NAME:new RegExp("^\\[name=['\"]?("+b3+")['\"]?\\]"),TAG:new RegExp("^("+b3.replace("w","w*")+")"),ATTR:new RegExp("^"+c2),PSEUDO:new RegExp("^"+ck),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+cp+"*(even|odd|(([+-]|)(\\d*)n|)"+cp+"*(?:([+-]|)"+cp+"*(\\d+)|))"+cp+"*\\)|)","i"),needsContext:new RegExp("^"+cp+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+cp+"*((?:-\\d)?\\d*)"+cp+"*\\)|)(?=[^-]|$)","i")},cW=/[\x20\t\r\n\f]*[+~]/,cM=/^[^{]+\{\s*\[native code/,cO=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,b8=/^(?:input|select|textarea|button)$/i,cl=/^h\d$/i,cL=/'|\\/g,ct=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,cs=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,c1=function(e,di){var dh="0x"+di-65536;return dh!==dh?di:dh<0?String.fromCharCode(dh+65536):String.fromCharCode(dh>>10|55296,dh&1023|56320)};try{cm.call(cI.documentElement.childNodes,0)[0].nodeType}catch(cC){cm=function(dh){var di,e=[];while((di=this[dh++])){e.push(di)}return e}}function cE(e){return cM.test(e+"")}function cz(){var e,dh=[];return(e=function(di,dj){if(dh.push(di+=" ")>cn.cacheLength){delete e[dh.shift()]}return(e[di]=dj)})}function cj(e){e[c5]=true;return e}function cc(dh){var dj=cB.createElement("div");try{return dh(dj)}catch(di){return false}finally{dj=null}}function cv(dp,dh,dt,dv){var du,dl,dm,dr,ds,dk,dj,e,di,dq;if((dh?dh.ownerDocument||dh:cI)!==cB){cV(dh)}dh=dh||cB;dt=dt||[];if(!dp||typeof dp!=="string"){return dt}if((dr=dh.nodeType)!==1&&dr!==9){return[]}if(!cd&&!dv){if((du=cO.exec(dp))){if((dm=du[1])){if(dr===9){dl=dh.getElementById(dm);if(dl&&dl.parentNode){if(dl.id===dm){dt.push(dl);return dt}}else{return dt}}else{if(dh.ownerDocument&&(dl=dh.ownerDocument.getElementById(dm))&&cF(dh,dl)&&dl.id===dm){dt.push(dl);return dt}}}else{if(du[2]){b4.apply(dt,cm.call(dh.getElementsByTagName(dp),0));return dt}else{if((dm=du[3])&&dd.getByClassName&&dh.getElementsByClassName){b4.apply(dt,cm.call(dh.getElementsByClassName(dm),0));return dt}}}}if(dd.qsa&&!cZ.test(dp)){dj=true;e=c5;di=dh;dq=dr===9&&dp;if(dr===1&&dh.nodeName.toLowerCase()!=="object"){dk=cf(dp);if((dj=dh.getAttribute("id"))){e=dj.replace(cL,"\\$&")}else{dh.setAttribute("id",e)}e="[id='"+e+"'] ";ds=dk.length;while(ds--){dk[ds]=e+cg(dk[ds])}di=cW.test(dp)&&dh.parentNode||dh;dq=dk.join(",")}if(dq){try{b4.apply(dt,cm.call(di.querySelectorAll(dq),0));return dt}catch(dn){}finally{if(!dj){dh.removeAttribute("id")}}}}}return dc(dp.replace(cr,"$1"),dh,dt,dv)}cJ=cv.isXML=function(e){var dh=e&&(e.ownerDocument||e).documentElement;return dh?dh.nodeName!=="HTML":false};cV=cv.setDocument=function(e){var dh=e?e.ownerDocument||e:cI;if(dh===cB||dh.nodeType!==9||!dh.documentElement){return cB}cB=dh;co=dh.documentElement;cd=cJ(dh);dd.tagNameNoComments=cc(function(di){di.appendChild(dh.createComment(""));return !di.getElementsByTagName("*").length});dd.attributes=cc(function(dj){dj.innerHTML="<select></select>";var di=typeof dj.lastChild.getAttribute("multiple");return di!=="boolean"&&di!=="string"});dd.getByClassName=cc(function(di){di.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!di.getElementsByClassName||!di.getElementsByClassName("e").length){return false}di.lastChild.className="e";return di.getElementsByClassName("e").length===2});dd.getByName=cc(function(dj){dj.id=c5+0;dj.innerHTML="<a name='"+c5+"'></a><div name='"+c5+"'></div>";co.insertBefore(dj,co.firstChild);var di=dh.getElementsByName&&dh.getElementsByName(c5).length===2+dh.getElementsByName(c5+0).length;dd.getIdNotName=!dh.getElementById(c5);co.removeChild(dj);return di});cn.attrHandle=cc(function(di){di.innerHTML="<a href='#'></a>";return di.firstChild&&typeof di.firstChild.getAttribute!==c9&&di.firstChild.getAttribute("href")==="#"})?{}:{href:function(di){return di.getAttribute("href",2)},type:function(di){return di.getAttribute("type")}};if(dd.getIdNotName){cn.find.ID=function(dk,dj){if(typeof dj.getElementById!==c9&&!cd){var di=dj.getElementById(dk);return di&&di.parentNode?[di]:[]}};cn.filter.ID=function(dj){var di=dj.replace(cs,c1);return function(dk){return dk.getAttribute("id")===di}}}else{cn.find.ID=function(dk,dj){if(typeof dj.getElementById!==c9&&!cd){var di=dj.getElementById(dk);return di?di.id===dk||typeof di.getAttributeNode!==c9&&di.getAttributeNode("id").value===dk?[di]:ch:[]}};cn.filter.ID=function(dj){var di=dj.replace(cs,c1);return function(dl){var dk=typeof dl.getAttributeNode!==c9&&dl.getAttributeNode("id");return dk&&dk.value===di}}}cn.find.TAG=dd.tagNameNoComments?function(di,dj){if(typeof dj.getElementsByTagName!==c9){return dj.getElementsByTagName(di)}}:function(di,dm){var dn,dl=[],dk=0,dj=dm.getElementsByTagName(di);if(di==="*"){while((dn=dj[dk++])){if(dn.nodeType===1){dl.push(dn)}}return dl}return dj};cn.find.NAME=dd.getByName&&function(di,dj){if(typeof dj.getElementsByName!==c9){return dj.getElementsByName(name)}};cn.find.CLASS=dd.getByClassName&&function(dj,di){if(typeof di.getElementsByClassName!==c9&&!cd){return di.getElementsByClassName(dj)}};db=[];cZ=[":focus"];if((dd.qsa=cE(dh.querySelectorAll))){cc(function(di){di.innerHTML="<select><option selected=''></option></select>";if(!di.querySelectorAll("[selected]").length){cZ.push("\\["+cp+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!di.querySelectorAll(":checked").length){cZ.push(":checked")}});cc(function(di){di.innerHTML="<input type='hidden' i=''/>";if(di.querySelectorAll("[i^='']").length){cZ.push("[*^$]="+cp+"*(?:\"\"|'')")}if(!di.querySelectorAll(":enabled").length){cZ.push(":enabled",":disabled")}di.querySelectorAll("*,:x");cZ.push(",.*:")})}if((dd.matchesSelector=cE((ca=co.matchesSelector||co.mozMatchesSelector||co.webkitMatchesSelector||co.oMatchesSelector||co.msMatchesSelector)))){cc(function(di){dd.disconnectedMatch=ca.call(di,"div");ca.call(di,"[s!='']:x");db.push("!=",ck)})}cZ=new RegExp(cZ.join("|"));db=new RegExp(db.join("|"));cF=cE(co.contains)||co.compareDocumentPosition?function(dj,di){var dl=dj.nodeType===9?dj.documentElement:dj,dk=di&&di.parentNode;return dj===dk||!!(dk&&dk.nodeType===1&&(dl.contains?dl.contains(dk):dj.compareDocumentPosition&&dj.compareDocumentPosition(dk)&16))}:function(dj,di){if(di){while((di=di.parentNode)){if(di===dj){return true}}}return false};cD=co.compareDocumentPosition?function(dj,di){var dk;if(dj===di){cT=true;return 0}if((dk=di.compareDocumentPosition&&dj.compareDocumentPosition&&dj.compareDocumentPosition(di))){if(dk&1||dj.parentNode&&dj.parentNode.nodeType===11){if(dj===dh||cF(cI,dj)){return -1}if(di===dh||cF(cI,di)){return 1}return 0}return dk&4?-1:1}return dj.compareDocumentPosition?-1:1}:function(dj,di){var dq,dm=0,dp=dj.parentNode,dl=di.parentNode,dk=[dj],dn=[di];if(dj===di){cT=true;return 0}else{if(!dp||!dl){return dj===dh?-1:di===dh?1:dp?-1:dl?1:0}else{if(dp===dl){return b6(dj,di)}}}dq=dj;while((dq=dq.parentNode)){dk.unshift(dq)}dq=di;while((dq=dq.parentNode)){dn.unshift(dq)}while(dk[dm]===dn[dm]){dm++}return dm?b6(dk[dm],dn[dm]):dk[dm]===cI?-1:dn[dm]===cI?1:0};cT=false;[0,0].sort(cD);dd.detectDuplicates=cT;return cB};cv.matches=function(dh,e){return cv(dh,null,null,e)};cv.matchesSelector=function(di,dk){if((di.ownerDocument||di)!==cB){cV(di)}dk=dk.replace(ct,"='$1']");if(dd.matchesSelector&&!cd&&(!db||!db.test(dk))&&!cZ.test(dk)){try{var dh=ca.call(di,dk);if(dh||dd.disconnectedMatch||di.document&&di.document.nodeType!==11){return dh}}catch(dj){}}return cv(dk,cB,null,[di]).length>0};cv.contains=function(e,dh){if((e.ownerDocument||e)!==cB){cV(e)}return cF(e,dh)};cv.attr=function(dh,e){var di;if((dh.ownerDocument||dh)!==cB){cV(dh)}if(!cd){e=e.toLowerCase()}if((di=cn.attrHandle[e])){return di(dh)}if(cd||dd.attributes){return dh.getAttribute(e)}return((di=dh.getAttributeNode(e))||dh.getAttribute(e))&&dh[e]===true?e:di&&di.specified?di.value:null};cv.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};cv.uniqueSort=function(di){var dj,dk=[],dh=1,e=0;cT=!dd.detectDuplicates;di.sort(cD);if(cT){for(;(dj=di[dh]);dh++){if(dj===di[dh-1]){e=dk.push(dh)}}while(e--){di.splice(dk[e],1)}}return di};function b6(dh,e){var dj=e&&dh,di=dj&&(~e.sourceIndex||cN)-(~dh.sourceIndex||cN);if(di){return di}if(dj){while((dj=dj.nextSibling)){if(dj===e){return -1}}}return dh?1:-1}function cw(e){return function(di){var dh=di.nodeName.toLowerCase();return dh==="input"&&di.type===e}}function b7(e){return function(di){var dh=di.nodeName.toLowerCase();return(dh==="input"||dh==="button")&&di.type===e}}function c3(e){return cj(function(dh){dh=+dh;return cj(function(di,dm){var dk,dj=e([],di.length,dh),dl=dj.length;while(dl--){if(di[(dk=dj[dl])]){di[dk]=!(dm[dk]=di[dk])}}})})}cH=cv.getText=function(dk){var dj,dh="",di=0,e=dk.nodeType;if(!e){for(;(dj=dk[di]);di++){dh+=cH(dj)}}else{if(e===1||e===9||e===11){if(typeof dk.textContent==="string"){return dk.textContent}else{for(dk=dk.firstChild;dk;dk=dk.nextSibling){dh+=cH(dk)}}}else{if(e===3||e===4){return dk.nodeValue}}}return dh};cn=cv.selectors={cacheLength:50,createPseudo:cj,match:cY,find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(cs,c1);e[3]=(e[4]||e[5]||"").replace(cs,c1);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){cv.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+((e[7]+e[8])||e[3]==="odd")}else{if(e[3]){cv.error(e[0])}}return e},PSEUDO:function(dh){var e,di=!dh[5]&&dh[2];if(cY.CHILD.test(dh[0])){return null}if(dh[4]){dh[2]=dh[4]}else{if(di&&cP.test(di)&&(e=cf(di,true))&&(e=di.indexOf(")",di.length-e)-di.length)){dh[0]=dh[0].slice(0,e);dh[2]=di.slice(0,e)}}return dh.slice(0,3)}},filter:{TAG:function(e){if(e==="*"){return function(){return true}}e=e.replace(cs,c1).toLowerCase();return function(dh){return dh.nodeName&&dh.nodeName.toLowerCase()===e}},CLASS:function(e){var dh=b5[e+" "];return dh||(dh=new RegExp("(^|"+cp+")"+e+"("+cp+"|$)"))&&b5(e,function(di){return dh.test(di.className||(typeof di.getAttribute!==c9&&di.getAttribute("class"))||"")})},ATTR:function(di,dh,e){return function(dk){var dj=cv.attr(dk,di);if(dj==null){return dh==="!="}if(!dh){return true}dj+="";return dh==="="?dj===e:dh==="!="?dj!==e:dh==="^="?e&&dj.indexOf(e)===0:dh==="*="?e&&dj.indexOf(e)>-1:dh==="$="?e&&dj.slice(-e.length)===e:dh==="~="?(" "+dj+" ").indexOf(e)>-1:dh==="|="?dj===e||dj.slice(0,e.length+1)===e+"-":false}},CHILD:function(dh,dk,dj,dl,di){var dn=dh.slice(0,3)!=="nth",e=dh.slice(-4)!=="last",dm=dk==="of-type";return dl===1&&di===0?function(dp){return !!dp.parentNode}:function(dv,dt,dy){var dp,dB,dw,dA,dx,ds,du=dn!==e?"nextSibling":"previousSibling",dz=dv.parentNode,dr=dm&&dv.nodeName.toLowerCase(),dq=!dy&&!dm;if(dz){if(dn){while(du){dw=dv;while((dw=dw[du])){if(dm?dw.nodeName.toLowerCase()===dr:dw.nodeType===1){return false}}ds=du=dh==="only"&&!ds&&"nextSibling"}return true}ds=[e?dz.firstChild:dz.lastChild];if(e&&dq){dB=dz[c5]||(dz[c5]={});dp=dB[dh]||[];dx=dp[0]===de&&dp[1];dA=dp[0]===de&&dp[2];dw=dx&&dz.childNodes[dx];while((dw=++dx&&dw&&dw[du]||(dA=dx=0)||ds.pop())){if(dw.nodeType===1&&++dA&&dw===dv){dB[dh]=[de,dx,dA];break}}}else{if(dq&&(dp=(dv[c5]||(dv[c5]={}))[dh])&&dp[0]===de){dA=dp[1]}else{while((dw=++dx&&dw&&dw[du]||(dA=dx=0)||ds.pop())){if((dm?dw.nodeName.toLowerCase()===dr:dw.nodeType===1)&&++dA){if(dq){(dw[c5]||(dw[c5]={}))[dh]=[de,dA]}if(dw===dv){break}}}}}dA-=di;return dA===dl||(dA%dl===0&&dA/dl>=0)}}},PSEUDO:function(dj,di){var e,dh=cn.pseudos[dj]||cn.setFilters[dj.toLowerCase()]||cv.error("unsupported pseudo: "+dj);if(dh[c5]){return dh(di)}if(dh.length>1){e=[dj,dj,"",di];return cn.setFilters.hasOwnProperty(dj.toLowerCase())?cj(function(dm,dp){var dl,dk=dh(dm,di),dn=dk.length;while(dn--){dl=b9.call(dm,dk[dn]);dm[dl]=!(dp[dl]=dk[dn])}}):function(dk){return dh(dk,0,e)}}return dh}},pseudos:{not:cj(function(e){var dh=[],di=[],dj=cS(e.replace(cr,"$1"));return dj[c5]?cj(function(dl,dr,dp,dm){var dq,dk=dj(dl,null,dm,[]),dn=dl.length;while(dn--){if((dq=dk[dn])){dl[dn]=!(dr[dn]=dq)}}}):function(dm,dl,dk){dh[0]=dm;dj(dh,null,dk,di);return !di.pop()}}),has:cj(function(e){return function(dh){return cv(e,dh).length>0}}),contains:cj(function(e){return function(dh){return(dh.textContent||dh.innerText||cH(dh)).indexOf(e)>-1}}),lang:cj(function(e){if(!cQ.test(e||"")){cv.error("unsupported lang: "+e)}e=e.replace(cs,c1).toLowerCase();return function(di){var dh;do{if((dh=cd?di.getAttribute("xml:lang")||di.getAttribute("lang"):di.lang)){dh=dh.toLowerCase();return dh===e||dh.indexOf(e+"-")===0}}while((di=di.parentNode)&&di.nodeType===1);return false}}),target:function(e){var dh=da.location&&da.location.hash;return dh&&dh.slice(1)===e.id},root:function(e){return e===co},focus:function(e){return e===cB.activeElement&&(!cB.hasFocus||cB.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var dh=e.nodeName.toLowerCase();return(dh==="input"&&!!e.checked)||(dh==="option"&&!!e.selected)},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4){return false}}return true},parent:function(e){return !cn.pseudos.empty(e)},header:function(e){return cl.test(e.nodeName)},input:function(e){return b8.test(e.nodeName)},button:function(dh){var e=dh.nodeName.toLowerCase();return e==="input"&&dh.type==="button"||e==="button"},text:function(dh){var e;return dh.nodeName.toLowerCase()==="input"&&dh.type==="text"&&((e=dh.getAttribute("type"))==null||e.toLowerCase()===dh.type)},first:c3(function(){return[0]}),last:c3(function(e,dh){return[dh-1]}),eq:c3(function(e,di,dh){return[dh<0?dh+di:dh]}),even:c3(function(e,di){var dh=0;for(;dh<di;dh+=2){e.push(dh)}return e}),odd:c3(function(e,di){var dh=1;for(;dh<di;dh+=2){e.push(dh)}return e}),lt:c3(function(e,dj,di){var dh=di<0?di+dj:di;for(;--dh>=0;){e.push(dh)}return e}),gt:c3(function(e,dj,di){var dh=di<0?di+dj:di;for(;++dh<dj;){e.push(dh)}return e})}};for(cx in {radio:true,checkbox:true,file:true,password:true,image:true}){cn.pseudos[cx]=cw(cx)}for(cx in {submit:true,reset:true}){cn.pseudos[cx]=b7(cx)}function cf(dk,dq){var dh,dl,dn,dp,dm,di,e,dj=c4[dk+" "];if(dj){return dq?0:dj.slice(0)}dm=dk;di=[];e=cn.preFilter;while(dm){if(!dh||(dl=cu.exec(dm))){if(dl){dm=dm.slice(dl[0].length)||dm}di.push(dn=[])}dh=false;if((dl=cA.exec(dm))){dh=dl.shift();dn.push({value:dh,type:dl[0].replace(cr," ")});dm=dm.slice(dh.length)}for(dp in cn.filter){if((dl=cY[dp].exec(dm))&&(!e[dp]||(dl=e[dp](dl)))){dh=dl.shift();dn.push({value:dh,type:dp,matches:dl});dm=dm.slice(dh.length)}}if(!dh){break}}return dq?dm.length:dm?cv.error(dk):c4(dk,di).slice(0)}function cg(dj){var di=0,dh=dj.length,e="";for(;di<dh;di++){e+=dj[di].value}return e}function cq(dk,di,dj){var e=di.dir,dl=dj&&e==="parentNode",dh=c0++;return di.first?function(dp,dn,dm){while((dp=dp[e])){if(dp.nodeType===1||dl){return dk(dp,dn,dm)}}}:function(dr,dp,dn){var dt,dm,dq,ds=de+" "+dh;if(dn){while((dr=dr[e])){if(dr.nodeType===1||dl){if(dk(dr,dp,dn)){return true}}}}else{while((dr=dr[e])){if(dr.nodeType===1||dl){dq=dr[c5]||(dr[c5]={});if((dm=dq[e])&&dm[0]===ds){if((dt=dm[1])===true||dt===cb){return dt===true}}else{dm=dq[e]=[ds];dm[1]=dk(dr,dp,dn)||cb;if(dm[1]===true){return true}}}}}}}function df(e){return e.length>1?function(dk,dj,dh){var di=e.length;while(di--){if(!e[di](dk,dj,dh)){return false}}return true}:e[0]}function cX(e,dh,di,dj,dm){var dk,dq=[],dl=0,dn=e.length,dp=dh!=null;for(;dl<dn;dl++){if((dk=e[dl])){if(!di||di(dk,dj,dm)){dq.push(dk);if(dp){dh.push(dl)}}}}return dq}function ce(di,dh,dk,dj,dl,e){if(dj&&!dj[c5]){dj=ce(dj)}if(dl&&!dl[c5]){dl=ce(dl,e)}return cj(function(dx,du,dp,dw){var dz,dv,dr,dq=[],dy=[],dn=du.length,dm=dx||cy(dh||"*",dp.nodeType?[dp]:dp,[]),ds=di&&(dx||!dh)?cX(dm,dq,di,dp,dw):dm,dt=dk?dl||(dx?di:dn||dj)?[]:du:ds;if(dk){dk(ds,dt,dp,dw)}if(dj){dz=cX(dt,dy);dj(dz,[],dp,dw);dv=dz.length;while(dv--){if((dr=dz[dv])){dt[dy[dv]]=!(ds[dy[dv]]=dr)}}}if(dx){if(dl||di){if(dl){dz=[];dv=dt.length;while(dv--){if((dr=dt[dv])){dz.push((ds[dv]=dr))}}dl(null,(dt=[]),dz,dw)}dv=dt.length;while(dv--){if((dr=dt[dv])&&(dz=dl?b9.call(dx,dr):dq[dv])>-1){dx[dz]=!(du[dz]=dr)}}}}else{dt=cX(dt===du?dt.splice(dn,dt.length):dt);if(dl){dl(null,du,dt,dw)}else{b4.apply(du,dt)}}})}function c6(dm){var dh,dk,di,dl=dm.length,dq=cn.relative[dm[0].type],dr=dq||cn.relative[" "],dj=dq?1:0,dn=cq(function(ds){return ds===dh},dr,true),dp=cq(function(ds){return b9.call(dh,ds)>-1},dr,true),e=[function(du,dt,ds){return(!dq&&(ds||dt!==dg))||((dh=dt).nodeType?dn(du,dt,ds):dp(du,dt,ds))}];for(;dj<dl;dj++){if((dk=cn.relative[dm[dj].type])){e=[cq(df(e),dk)]}else{dk=cn.filter[dm[dj].type].apply(null,dm[dj].matches);if(dk[c5]){di=++dj;for(;di<dl;di++){if(cn.relative[dm[di].type]){break}}return ce(dj>1&&df(e),dj>1&&cg(dm.slice(0,dj-1)).replace(cr,"$1"),dk,dj<di&&c6(dm.slice(dj,di)),di<dl&&c6((dm=dm.slice(di))),di<dl&&cg(dm))}e.push(dk)}}return df(e)}function cU(dj,di){var dl=0,e=di.length>0,dk=dj.length>0,dh=function(dw,dq,dv,du,dC){var dr,ds,dx,dB=[],dA=0,dt="0",dm=dw&&[],dy=dC!=null,dz=dg,dp=dw||dk&&cn.find.TAG("*",dC&&dq.parentNode||dq),dn=(de+=dz==null?1:Math.random()||0.1);if(dy){dg=dq!==cB&&dq;cb=dl}for(;(dr=dp[dt])!=null;dt++){if(dk&&dr){ds=0;while((dx=dj[ds++])){if(dx(dr,dq,dv)){du.push(dr);break}}if(dy){de=dn;cb=++dl}}if(e){if((dr=!dx&&dr)){dA--}if(dw){dm.push(dr)}}}dA+=dt;if(e&&dt!==dA){ds=0;while((dx=di[ds++])){dx(dm,dB,dq,dv)}if(dw){if(dA>0){while(dt--){if(!(dm[dt]||dB[dt])){dB[dt]=c8.call(du)}}}dB=cX(dB)}b4.apply(du,dB);if(dy&&!dw&&dB.length>0&&(dA+di.length)>1){cv.uniqueSort(du)}}if(dy){de=dn;dg=dz}return dm};return e?cj(dh):dh}cS=cv.compile=function(e,dl){var di,dh=[],dk=[],dj=cG[e+" "];if(!dj){if(!dl){dl=cf(e)}di=dl.length;while(di--){dj=c6(dl[di]);if(dj[c5]){dh.push(dj)}else{dk.push(dj)}}dj=cG(e,cU(dk,dh))}return dj};function cy(dh,dk,dj){var di=0,e=dk.length;for(;di<e;di++){cv(dh,dk[di],dj)}return dj}function dc(di,e,dj,dm){var dk,dp,dh,dq,dn,dl=cf(di);if(!dm){if(dl.length===1){dp=dl[0]=dl[0].slice(0);if(dp.length>2&&(dh=dp[0]).type==="ID"&&e.nodeType===9&&!cd&&cn.relative[dp[1].type]){e=cn.find.ID(dh.matches[0].replace(cs,c1),e)[0];if(!e){return dj}di=di.slice(dp.shift().value.length)}dk=cY.needsContext.test(di)?0:dp.length;while(dk--){dh=dp[dk];if(cn.relative[(dq=dh.type)]){break}if((dn=cn.find[dq])){if((dm=dn(dh.matches[0].replace(cs,c1),cW.test(dp[0].type)&&e.parentNode||e))){dp.splice(dk,1);di=dm.length&&cg(dp);if(!di){b4.apply(dj,cm.call(dm,0));return dj}break}}}}}cS(di,dl)(dm,e,cd,dj,cW.test(di));return dj}cn.pseudos.nth=cn.pseudos.eq;function cR(){}cn.filters=cR.prototype=cn.pseudos;cn.setFilters=new cR();cV();cv.attr=bJ.attr;bJ.find=cv;bJ.expr=cv.selectors;bJ.expr[":"]=bJ.expr.pseudos;bJ.unique=cv.uniqueSort;bJ.text=cv.getText;bJ.isXMLDoc=cv.isXML;bJ.contains=cv.contains})(a2);var aj=/Until$/,bt=/^(?:parents|prev(?:Until|All))/,an=/^.[^:#\[\.,]*$/,y=bJ.expr.match.needsContext,bx={children:true,contents:true,next:true,prev:true};bJ.fn.extend({find:function(b3){var b6,b5,b4,e=this.length;if(typeof b3!=="string"){b4=this;return this.pushStack(bJ(b3).filter(function(){for(b6=0;b6<e;b6++){if(bJ.contains(b4[b6],this)){return true}}}))}b5=[];for(b6=0;b6<e;b6++){bJ.find(b3,this[b6],b5)}b5=this.pushStack(e>1?bJ.unique(b5):b5);b5.selector=(this.selector?this.selector+" ":"")+b3;return b5},has:function(b5){var b4,b3=bJ(b5,this),e=b3.length;return this.filter(function(){for(b4=0;b4<e;b4++){if(bJ.contains(this,b3[b4])){return true}}})},not:function(e){return this.pushStack(aO(this,e,false))},filter:function(e){return this.pushStack(aO(this,e,true))},is:function(e){return !!e&&(typeof e==="string"?y.test(e)?bJ(e,this.context).index(this[0])>=0:bJ.filter(e,this).length>0:this.filter(e).length>0)},closest:function(b6,b5){var b7,b4=0,e=this.length,b3=[],b8=y.test(b6)||typeof b6!=="string"?bJ(b6,b5||this.context):0;for(;b4<e;b4++){b7=this[b4];while(b7&&b7.ownerDocument&&b7!==b5&&b7.nodeType!==11){if(b8?b8.index(b7)>-1:bJ.find.matchesSelector(b7,b6)){b3.push(b7);break}b7=b7.parentNode}}return this.pushStack(b3.length>1?bJ.unique(b3):b3)},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1}if(typeof e==="string"){return bJ.inArray(this[0],bJ(e))}return bJ.inArray(e.jquery?e[0]:e,this)},add:function(e,b3){var b5=typeof e==="string"?bJ(e,b3):bJ.makeArray(e&&e.nodeType?[e]:e),b4=bJ.merge(this.get(),b5);return this.pushStack(bJ.unique(b4))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});bJ.fn.andSelf=bJ.fn.addBack;function aX(b3,e){do{b3=b3[e]}while(b3&&b3.nodeType!==1);return b3}bJ.each({parent:function(b3){var e=b3.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return bJ.dir(e,"parentNode")},parentsUntil:function(b3,e,b4){return bJ.dir(b3,"parentNode",b4)},next:function(e){return aX(e,"nextSibling")},prev:function(e){return aX(e,"previousSibling")},nextAll:function(e){return bJ.dir(e,"nextSibling")},prevAll:function(e){return bJ.dir(e,"previousSibling")},nextUntil:function(b3,e,b4){return bJ.dir(b3,"nextSibling",b4)},prevUntil:function(b3,e,b4){return bJ.dir(b3,"previousSibling",b4)},siblings:function(e){return bJ.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return bJ.sibling(e.firstChild)},contents:function(e){return bJ.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:bJ.merge([],e.childNodes)}},function(e,b3){bJ.fn[e]=function(b6,b4){var b5=bJ.map(this,b3,b6);if(!aj.test(e)){b4=b6}if(b4&&typeof b4==="string"){b5=bJ.filter(b4,b5)}b5=this.length>1&&!bx[e]?bJ.unique(b5):b5;if(this.length>1&&bt.test(e)){b5=b5.reverse()}return this.pushStack(b5)}});bJ.extend({filter:function(b4,e,b3){if(b3){b4=":not("+b4+")"}return e.length===1?bJ.find.matchesSelector(e[0],b4)?[e[0]]:[]:bJ.find.matches(b4,e)},dir:function(b4,b3,b6){var e=[],b5=b4[b3];while(b5&&b5.nodeType!==9&&(b6===aG||b5.nodeType!==1||!bJ(b5).is(b6))){if(b5.nodeType===1){e.push(b5)}b5=b5[b3]}return e},sibling:function(b4,b3){var e=[];for(;b4;b4=b4.nextSibling){if(b4.nodeType===1&&b4!==b3){e.push(b4)}}return e}});function aO(b5,b4,e){b4=b4||0;if(bJ.isFunction(b4)){return bJ.grep(b5,function(b7,b6){var b8=!!b4.call(b7,b6,b7);return b8===e})}else{if(b4.nodeType){return bJ.grep(b5,function(b6){return(b6===b4)===e})}else{if(typeof b4==="string"){var b3=bJ.grep(b5,function(b6){return b6.nodeType===1});if(an.test(b4)){return bJ.filter(b4,b3,!e)}else{b4=bJ.filter(b4,b3)}}}}return bJ.grep(b5,function(b6){return(bJ.inArray(b6,b4)>=0)===e})}function A(e){var b4=d.split("|"),b3=e.createDocumentFragment();if(b3.createElement){while(b4.length){b3.createElement(b4.pop())}}return b3}var d="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",aA=/ jQuery\d+="(?:null|\d+)"/g,J=new RegExp("<(?:"+d+")[\\s/>]","i"),b2=/^\s+/,aD=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,m=/<([\w:]+)/,bX=/<tbody/i,I=/<|&#?\w+;/,al=/<(?:script|style|link)/i,q=/^(?:checkbox|radio)$/i,bU=/checked\s*(?:[^=]|=\s*.checked.)/i,bz=/^$|\/(?:java|ecma)script/i,ar=/^true\/(.*)/,aK=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,T={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:bJ.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},aS=A(l),j=aS.appendChild(l.createElement("div"));T.optgroup=T.option;T.tbody=T.tfoot=T.colgroup=T.caption=T.thead;T.th=T.td;bJ.fn.extend({text:function(e){return bJ.access(this,function(b3){return b3===aG?bJ.text(this):this.empty().append((this[0]&&this[0].ownerDocument||l).createTextNode(b3))},null,e,arguments.length)},wrapAll:function(e){if(bJ.isFunction(e)){return this.each(function(b4){bJ(this).wrapAll(e.call(this,b4))})}if(this[0]){var b3=bJ(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){b3.insertBefore(this[0])}b3.map(function(){var b4=this;while(b4.firstChild&&b4.firstChild.nodeType===1){b4=b4.firstChild}return b4}).append(this)}return this},wrapInner:function(e){if(bJ.isFunction(e)){return this.each(function(b3){bJ(this).wrapInner(e.call(this,b3))})}return this.each(function(){var b3=bJ(this),b4=b3.contents();if(b4.length){b4.wrapAll(e)}else{b3.append(e)}})},wrap:function(e){var b3=bJ.isFunction(e);return this.each(function(b4){bJ(this).wrapAll(b3?e.call(this,b4):e)})},unwrap:function(){return this.parent().each(function(){if(!bJ.nodeName(this,"body")){bJ(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.insertBefore(e,this.firstChild)}})},before:function(){return this.domManip(arguments,false,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return this.domManip(arguments,false,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},remove:function(e,b5){var b4,b3=0;for(;(b4=this[b3])!=null;b3++){if(!e||bJ.filter(e,[b4]).length>0){if(!b5&&b4.nodeType===1){bJ.cleanData(k(b4))}if(b4.parentNode){if(b5&&bJ.contains(b4.ownerDocument,b4)){bs(k(b4,"script"))}b4.parentNode.removeChild(b4)}}}return this},empty:function(){var b3,e=0;for(;(b3=this[e])!=null;e++){if(b3.nodeType===1){bJ.cleanData(k(b3,false))}while(b3.firstChild){b3.removeChild(b3.firstChild)}if(b3.options&&bJ.nodeName(b3,"select")){b3.options.length=0}}return this},clone:function(b3,e){b3=b3==null?false:b3;e=e==null?b3:e;return this.map(function(){return bJ.clone(this,b3,e)})},html:function(e){return bJ.access(this,function(b6){var b5=this[0]||{},b4=0,b3=this.length;if(b6===aG){return b5.nodeType===1?b5.innerHTML.replace(aA,""):aG}if(typeof b6==="string"&&!al.test(b6)&&(bJ.support.htmlSerialize||!J.test(b6))&&(bJ.support.leadingWhitespace||!b2.test(b6))&&!T[(m.exec(b6)||["",""])[1].toLowerCase()]){b6=b6.replace(aD,"<$1></$2>");try{for(;b4<b3;b4++){b5=this[b4]||{};if(b5.nodeType===1){bJ.cleanData(k(b5,false));b5.innerHTML=b6}}b5=0}catch(b7){}}if(b5){this.empty().append(b6)}},null,e,arguments.length)},replaceWith:function(b3){var e=bJ.isFunction(b3);if(!e&&typeof b3!=="string"){b3=bJ(b3).not(this).detach()}return this.domManip([b3],true,function(b6){var b5=this.nextSibling,b4=this.parentNode;if(b4){bJ(this).remove();b4.insertBefore(b6,b5)}})},detach:function(e){return this.remove(e,true)},domManip:function(ca,cg,cf){ca=aI.apply([],ca);var b8,b4,e,b6,cd,b9,b7=0,b5=this.length,cc=this,ce=b5-1,cb=ca[0],b3=bJ.isFunction(cb);if(b3||!(b5<=1||typeof cb!=="string"||bJ.support.checkClone||!bU.test(cb))){return this.each(function(ci){var ch=cc.eq(ci);if(b3){ca[0]=cb.call(this,ci,cg?ch.html():aG)}ch.domManip(ca,cg,cf)})}if(b5){b9=bJ.buildFragment(ca,this[0].ownerDocument,false,this);b8=b9.firstChild;if(b9.childNodes.length===1){b9=b8}if(b8){cg=cg&&bJ.nodeName(b8,"tr");b6=bJ.map(k(b9,"script"),t);e=b6.length;for(;b7<b5;b7++){b4=b9;if(b7!==ce){b4=bJ.clone(b4,true,true);if(e){bJ.merge(b6,k(b4,"script"))}}cf.call(cg&&bJ.nodeName(this[b7],"table")?x(this[b7],"tbody"):this[b7],b4,b7)}if(e){cd=b6[b6.length-1].ownerDocument;bJ.map(b6,bc);for(b7=0;b7<e;b7++){b4=b6[b7];if(bz.test(b4.type||"")&&!bJ._data(b4,"globalEval")&&bJ.contains(cd,b4)){if(b4.src){bJ.ajax({url:b4.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})}else{bJ.globalEval((b4.text||b4.textContent||b4.innerHTML||"").replace(aK,""))}}}}b9=b8=null}}return this}});function x(b3,e){return b3.getElementsByTagName(e)[0]||b3.appendChild(b3.ownerDocument.createElement(e))}function t(b3){var e=b3.getAttributeNode("type");b3.type=(e&&e.specified)+"/"+b3.type;return b3}function bc(b3){var e=ar.exec(b3.type);if(e){b3.type=e[1]}else{b3.removeAttribute("type")}return b3}function bs(e,b4){var b5,b3=0;for(;(b5=e[b3])!=null;b3++){bJ._data(b5,"globalEval",!b4||bJ._data(b4[b3],"globalEval"))}}function at(b9,b3){if(b3.nodeType!==1||!bJ.hasData(b9)){return}var b6,b5,e,b8=bJ._data(b9),b7=bJ._data(b3,b8),b4=b8.events;if(b4){delete b7.handle;b7.events={};for(b6 in b4){for(b5=0,e=b4[b6].length;b5<e;b5++){bJ.event.add(b3,b6,b4[b6][b5])}}}if(b7.data){b7.data=bJ.extend({},b7.data)}}function Q(b6,b3){var b7,b5,b4;if(b3.nodeType!==1){return}b7=b3.nodeName.toLowerCase();if(!bJ.support.noCloneEvent&&b3[bJ.expando]){b4=bJ._data(b3);for(b5 in b4.events){bJ.removeEvent(b3,b5,b4.handle)}b3.removeAttribute(bJ.expando)}if(b7==="script"&&b3.text!==b6.text){t(b3).text=b6.text;bc(b3)}else{if(b7==="object"){if(b3.parentNode){b3.outerHTML=b6.outerHTML}if(bJ.support.html5Clone&&(b6.innerHTML&&!bJ.trim(b3.innerHTML))){b3.innerHTML=b6.innerHTML}}else{if(b7==="input"&&q.test(b6.type)){b3.defaultChecked=b3.checked=b6.checked;if(b3.value!==b6.value){b3.value=b6.value}}else{if(b7==="option"){b3.defaultSelected=b3.selected=b6.defaultSelected}else{if(b7==="input"||b7==="textarea"){b3.defaultValue=b6.defaultValue}}}}}}bJ.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,b3){bJ.fn[e]=function(b4){var b5,b7=0,b6=[],b9=bJ(b4),b8=b9.length-1;for(;b7<=b8;b7++){b5=b7===b8?this:this.clone(true);bJ(b9[b7])[b3](b5);ao.apply(b6,b5.get())}return this.pushStack(b6)}});function k(b5,e){var b3,b6,b4=0,b7=typeof b5.getElementsByTagName!==aC?b5.getElementsByTagName(e||"*"):typeof b5.querySelectorAll!==aC?b5.querySelectorAll(e||"*"):aG;if(!b7){for(b7=[],b3=b5.childNodes||b5;(b6=b3[b4])!=null;b4++){if(!e||bJ.nodeName(b6,e)){b7.push(b6)}else{bJ.merge(b7,k(b6,e))}}}return e===aG||e&&bJ.nodeName(b5,e)?bJ.merge([b5],b7):b7}function bV(e){if(q.test(e.type)){e.defaultChecked=e.checked}}bJ.extend({clone:function(b3,b5,e){var b7,b4,ca,b6,b8,b9=bJ.contains(b3.ownerDocument,b3);if(bJ.support.html5Clone||bJ.isXMLDoc(b3)||!J.test("<"+b3.nodeName+">")){ca=b3.cloneNode(true)}else{j.innerHTML=b3.outerHTML;j.removeChild(ca=j.firstChild)}if((!bJ.support.noCloneEvent||!bJ.support.noCloneChecked)&&(b3.nodeType===1||b3.nodeType===11)&&!bJ.isXMLDoc(b3)){b7=k(ca);b8=k(b3);for(b6=0;(b4=b8[b6])!=null;++b6){if(b7[b6]){Q(b4,b7[b6])}}}if(b5){if(e){b8=b8||k(b3);b7=b7||k(ca);for(b6=0;(b4=b8[b6])!=null;b6++){at(b4,b7[b6])}}else{at(b3,ca)}}b7=k(ca,"script");if(b7.length>0){bs(b7,!b9&&k(b3,"script"))}b7=b8=b4=null;return ca},buildFragment:function(b3,b5,ca,cf){var cb,b7,b9,ce,cg,cd,b4,b8=b3.length,b6=A(b5),e=[],cc=0;for(;cc<b8;cc++){b7=b3[cc];if(b7||b7===0){if(bJ.type(b7)==="object"){bJ.merge(e,b7.nodeType?[b7]:b7)}else{if(!I.test(b7)){e.push(b5.createTextNode(b7))}else{ce=ce||b6.appendChild(b5.createElement("div"));cg=(m.exec(b7)||["",""])[1].toLowerCase();b4=T[cg]||T._default;ce.innerHTML=b4[1]+b7.replace(aD,"<$1></$2>")+b4[2];cb=b4[0];while(cb--){ce=ce.lastChild}if(!bJ.support.leadingWhitespace&&b2.test(b7)){e.push(b5.createTextNode(b2.exec(b7)[0]))}if(!bJ.support.tbody){b7=cg==="table"&&!bX.test(b7)?ce.firstChild:b4[1]==="<table>"&&!bX.test(b7)?ce:0;cb=b7&&b7.childNodes.length;while(cb--){if(bJ.nodeName((cd=b7.childNodes[cb]),"tbody")&&!cd.childNodes.length){b7.removeChild(cd)}}}bJ.merge(e,ce.childNodes);ce.textContent="";while(ce.firstChild){ce.removeChild(ce.firstChild)}ce=b6.lastChild}}}}if(ce){b6.removeChild(ce)}if(!bJ.support.appendChecked){bJ.grep(k(e,"input"),bV)}cc=0;while((b7=e[cc++])){if(cf&&bJ.inArray(b7,cf)!==-1){continue}b9=bJ.contains(b7.ownerDocument,b7);ce=k(b6.appendChild(b7),"script");if(b9){bs(ce)}if(ca){cb=0;while((b7=ce[cb++])){if(bz.test(b7.type||"")){ca.push(b7)}}}}ce=null;return b6},cleanData:function(b3,cb){var b5,ca,b4,b6,b7=0,cc=bJ.expando,e=bJ.cache,b8=bJ.support.deleteExpando,b9=bJ.event.special;for(;(b5=b3[b7])!=null;b7++){if(cb||bJ.acceptData(b5)){b4=b5[cc];b6=b4&&e[b4];if(b6){if(b6.events){for(ca in b6.events){if(b9[ca]){bJ.event.remove(b5,ca)}else{bJ.removeEvent(b5,ca,b6.handle)}}}if(e[b4]){delete e[b4];if(b8){delete b5[cc]}else{if(typeof b5.removeAttribute!==aC){b5.removeAttribute(cc)}else{b5[cc]=null}}a6.push(b4)}}}}}});var aE,bo,E,bg=/alpha\([^)]*\)/i,aT=/opacity\s*=\s*([^)]*)/,bn=/^(top|right|bottom|left)$/,F=/^(none|table(?!-c[ea]).+)/,aY=/^margin/,a9=new RegExp("^("+bA+")(.*)$","i"),W=new RegExp("^("+bA+")(?!px)[a-z%]+$","i"),S=new RegExp("^([+-])=("+bA+")","i"),bj={BODY:"block"},bb={position:"absolute",visibility:"hidden",display:"block"},bC={letterSpacing:0,fontWeight:400},bT=["Top","Right","Bottom","Left"],av=["Webkit","O","Moz","ms"];function b(b5,b3){if(b3 in b5){return b3}var b6=b3.charAt(0).toUpperCase()+b3.slice(1),e=b3,b4=av.length;while(b4--){b3=av[b4]+b6;if(b3 in b5){return b3}}return e}function P(b3,e){b3=e||b3;return bJ.css(b3,"display")==="none"||!bJ.contains(b3.ownerDocument,b3)}function p(b8,e){var b9,b6,b7,b3=[],b4=0,b5=b8.length;for(;b4<b5;b4++){b6=b8[b4];if(!b6.style){continue}b3[b4]=bJ._data(b6,"olddisplay");b9=b6.style.display;if(e){if(!b3[b4]&&b9==="none"){b6.style.display=""}if(b6.style.display===""&&P(b6)){b3[b4]=bJ._data(b6,"olddisplay",bE(b6.nodeName))}}else{if(!b3[b4]){b7=P(b6);if(b9&&b9!=="none"||!b7){bJ._data(b6,"olddisplay",b7?b9:bJ.css(b6,"display"))}}}}for(b4=0;b4<b5;b4++){b6=b8[b4];if(!b6.style){continue}if(!e||b6.style.display==="none"||b6.style.display===""){b6.style.display=e?b3[b4]||"":"none"}}return b8}bJ.fn.extend({css:function(e,b3){return bJ.access(this,function(b8,b5,b9){var b4,b7,ca={},b6=0;if(bJ.isArray(b5)){b7=bo(b8);b4=b5.length;for(;b6<b4;b6++){ca[b5[b6]]=bJ.css(b8,b5[b6],false,b7)}return ca}return b9!==aG?bJ.style(b8,b5,b9):bJ.css(b8,b5)},e,b3,arguments.length>1)},show:function(){return p(this,true)},hide:function(){return p(this)},toggle:function(b3){var e=typeof b3==="boolean";return this.each(function(){if(e?b3:P(this)){bJ(this).show()}else{bJ(this).hide()}})}});bJ.extend({cssHooks:{opacity:{get:function(b4,b3){if(b3){var e=E(b4,"opacity");return e===""?"1":e}}}},cssNumber:{columnCount:true,fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":bJ.support.cssFloat?"cssFloat":"styleFloat"},style:function(b5,b4,cb,b6){if(!b5||b5.nodeType===3||b5.nodeType===8||!b5.style){return}var b9,ca,cc,b7=bJ.camelCase(b4),b3=b5.style;b4=bJ.cssProps[b7]||(bJ.cssProps[b7]=b(b3,b7));cc=bJ.cssHooks[b4]||bJ.cssHooks[b7];if(cb!==aG){ca=typeof cb;if(ca==="string"&&(b9=S.exec(cb))){cb=(b9[1]+1)*b9[2]+parseFloat(bJ.css(b5,b4));ca="number"}if(cb==null||ca==="number"&&isNaN(cb)){return}if(ca==="number"&&!bJ.cssNumber[b7]){cb+="px"}if(!bJ.support.clearCloneStyle&&cb===""&&b4.indexOf("background")===0){b3[b4]="inherit"}if(!cc||!("set" in cc)||(cb=cc.set(b5,cb,b6))!==aG){try{b3[b4]=cb}catch(b8){}}}else{if(cc&&"get" in cc&&(b9=cc.get(b5,false,b6))!==aG){return b9}return b3[b4]}},css:function(b8,b6,b3,b7){var b5,b9,e,b4=bJ.camelCase(b6);b6=bJ.cssProps[b4]||(bJ.cssProps[b4]=b(b8.style,b4));e=bJ.cssHooks[b6]||bJ.cssHooks[b4];if(e&&"get" in e){b9=e.get(b8,true,b3)}if(b9===aG){b9=E(b8,b6,b7)}if(b9==="normal"&&b6 in bC){b9=bC[b6]}if(b3===""||b3){b5=parseFloat(b9);return b3===true||bJ.isNumeric(b5)?b5||0:b9}return b9},swap:function(b7,b6,b8,b5){var b4,b3,e={};for(b3 in b6){e[b3]=b7.style[b3];b7.style[b3]=b6[b3]}b4=b8.apply(b7,b5||[]);for(b3 in b6){b7.style[b3]=e[b3]}return b4}});if(a2.getComputedStyle){bo=function(e){return a2.getComputedStyle(e,null)};E=function(b6,b4,b8){var b5,b3,ca,b7=b8||bo(b6),b9=b7?b7.getPropertyValue(b4)||b7[b4]:aG,e=b6.style;if(b7){if(b9===""&&!bJ.contains(b6.ownerDocument,b6)){b9=bJ.style(b6,b4)}if(W.test(b9)&&aY.test(b4)){b5=e.width;b3=e.minWidth;ca=e.maxWidth;e.minWidth=e.maxWidth=e.width=b9;b9=b7.width;e.width=b5;e.minWidth=b3;e.maxWidth=ca}}return b9}}else{if(l.documentElement.currentStyle){bo=function(e){return e.currentStyle};E=function(b5,b3,b8){var b4,b7,b9,b6=b8||bo(b5),ca=b6?b6[b3]:aG,e=b5.style;if(ca==null&&e&&e[b3]){ca=e[b3]}if(W.test(ca)&&!bn.test(b3)){b4=e.left;b7=b5.runtimeStyle;b9=b7&&b7.left;if(b9){b7.left=b5.currentStyle.left}e.left=b3==="fontSize"?"1em":ca;ca=e.pixelLeft+"px";e.left=b4;if(b9){b7.left=b9}}return ca===""?"auto":ca}}}function aJ(e,b4,b5){var b3=a9.exec(b4);return b3?Math.max(0,b3[1]-(b5||0))+(b3[2]||"px"):b4}function aw(b6,b3,e,b8,b5){var b4=e===(b8?"border":"content")?4:b3==="width"?1:0,b7=0;for(;b4<4;b4+=2){if(e==="margin"){b7+=bJ.css(b6,e+bT[b4],true,b5)}if(b8){if(e==="content"){b7-=bJ.css(b6,"padding"+bT[b4],true,b5)}if(e!=="margin"){b7-=bJ.css(b6,"border"+bT[b4]+"Width",true,b5)}}else{b7+=bJ.css(b6,"padding"+bT[b4],true,b5);if(e!=="padding"){b7+=bJ.css(b6,"border"+bT[b4]+"Width",true,b5)}}}return b7}function u(b6,b3,e){var b5=true,b7=b3==="width"?b6.offsetWidth:b6.offsetHeight,b4=bo(b6),b8=bJ.support.boxSizing&&bJ.css(b6,"boxSizing",false,b4)==="border-box";if(b7<=0||b7==null){b7=E(b6,b3,b4);if(b7<0||b7==null){b7=b6.style[b3]}if(W.test(b7)){return b7}b5=b8&&(bJ.support.boxSizingReliable||b7===b6.style[b3]);b7=parseFloat(b7)||0}return(b7+aw(b6,b3,e||(b8?"border":"content"),b5,b4))+"px"}function bE(b4){var b3=l,e=bj[b4];if(!e){e=a1(b4,b3);if(e==="none"||!e){aE=(aE||bJ("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b3.documentElement);b3=(aE[0].contentWindow||aE[0].contentDocument).document;b3.write("<!doctype html><html><body>");b3.close();e=a1(b4,b3);aE.detach()}bj[b4]=e}return e}function a1(e,b5){var b3=bJ(b5.createElement(e)).appendTo(b5.body),b4=bJ.css(b3[0],"display");b3.remove();return b4}bJ.each(["height","width"],function(b3,e){bJ.cssHooks[e]={get:function(b6,b5,b4){if(b5){return b6.offsetWidth===0&&F.test(bJ.css(b6,"display"))?bJ.swap(b6,bb,function(){return u(b6,e,b4)}):u(b6,e,b4)}},set:function(b6,b7,b4){var b5=b4&&bo(b6);return aJ(b6,b7,b4?aw(b6,e,b4,bJ.support.boxSizing&&bJ.css(b6,"boxSizing",false,b5)==="border-box",b5):0)}}});if(!bJ.support.opacity){bJ.cssHooks.opacity={get:function(b3,e){return aT.test((e&&b3.currentStyle?b3.currentStyle.filter:b3.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":e?"1":""},set:function(b6,b7){var b5=b6.style,b3=b6.currentStyle,e=bJ.isNumeric(b7)?"alpha(opacity="+b7*100+")":"",b4=b3&&b3.filter||b5.filter||"";b5.zoom=1;if((b7>=1||b7==="")&&bJ.trim(b4.replace(bg,""))===""&&b5.removeAttribute){b5.removeAttribute("filter");if(b7===""||b3&&!b3.filter){return}}b5.filter=bg.test(b4)?b4.replace(bg,e):b4+" "+e}}}bJ(function(){if(!bJ.support.reliableMarginRight){bJ.cssHooks.marginRight={get:function(b3,e){if(e){return bJ.swap(b3,{display:"inline-block"},E,[b3,"marginRight"])}}}}if(!bJ.support.pixelPosition&&bJ.fn.position){bJ.each(["top","left"],function(e,b3){bJ.cssHooks[b3]={get:function(b5,b4){if(b4){b4=E(b5,b3);return W.test(b4)?bJ(b5).position()[b3]+"px":b4}}}})}});if(bJ.expr&&bJ.expr.filters){bJ.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||(!bJ.support.reliableHiddenOffsets&&((e.style&&e.style.display)||bJ.css(e,"display"))==="none")};bJ.expr.filters.visible=function(e){return !bJ.expr.filters.hidden(e)}}bJ.each({margin:"",padding:"",border:"Width"},function(e,b3){bJ.cssHooks[e+b3]={expand:function(b6){var b5=0,b4={},b7=typeof b6==="string"?b6.split(" "):[b6];for(;b5<4;b5++){b4[e+bT[b5]+b3]=b7[b5]||b7[b5-2]||b7[0]}return b4}};if(!aY.test(e)){bJ.cssHooks[e+b3].set=aJ}});var bv=/%20/g,aR=/\[\]$/,U=/\r?\n/g,c=/^(?:submit|button|image|reset|file)$/i,au=/^(?:input|select|textarea|keygen)/i;bJ.fn.extend({serialize:function(){return bJ.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=bJ.prop(this,"elements");return e?bJ.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!bJ(this).is(":disabled")&&au.test(this.nodeName)&&!c.test(e)&&(this.checked||!q.test(e))}).map(function(e,b3){var b4=bJ(this).val();return b4==null?null:bJ.isArray(b4)?bJ.map(b4,function(b5){return{name:b3.name,value:b5.replace(U,"\r\n")}}):{name:b3.name,value:b4.replace(U,"\r\n")}}).get()}});bJ.param=function(e,b4){var b5,b3=[],b6=function(b7,b8){b8=bJ.isFunction(b8)?b8():(b8==null?"":b8);b3[b3.length]=encodeURIComponent(b7)+"="+encodeURIComponent(b8)};if(b4===aG){b4=bJ.ajaxSettings&&bJ.ajaxSettings.traditional}if(bJ.isArray(e)||(e.jquery&&!bJ.isPlainObject(e))){bJ.each(e,function(){b6(this.name,this.value)})}else{for(b5 in e){i(b5,e[b5],b4,b6)}}return b3.join("&").replace(bv,"+")};function i(b4,b6,b3,b5){var e;if(bJ.isArray(b6)){bJ.each(b6,function(b8,b7){if(b3||aR.test(b4)){b5(b4,b7)}else{i(b4+"["+(typeof b7==="object"?b8:"")+"]",b7,b3,b5)}})}else{if(!b3&&bJ.type(b6)==="object"){for(e in b6){i(b4+"["+e+"]",b6[e],b3,b5)}}else{b5(b4,b6)}}}bJ.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(b3,e){bJ.fn[e]=function(b5,b4){return arguments.length>0?this.on(e,null,b5,b4):this.trigger(e)}});bJ.fn.hover=function(e,b3){return this.mouseenter(e).mouseleave(b3||e)};var b1,Y,bO=bJ.now(),az=/\?/,ap=/#.*$/,O=/([?&])_=[^&]*/,ag=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,B=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,o=/^(?:GET|HEAD)$/,aH=/^\/\//,aU=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,b0=bJ.fn.load,v={},a7={},aW="*/".concat("*");try{Y=aL.href}catch(bf){Y=l.createElement("a");Y.href="";Y=Y.href}b1=aU.exec(Y.toLowerCase())||[];function bL(e){return function(b6,b7){if(typeof b6!=="string"){b7=b6;b6="*"}var b3,b4=0,b5=b6.toLowerCase().match(ac)||[];if(bJ.isFunction(b7)){while((b3=b5[b4++])){if(b3[0]==="+"){b3=b3.slice(1)||"*";(e[b3]=e[b3]||[]).unshift(b7)}else{(e[b3]=e[b3]||[]).push(b7)}}}}}function n(e,b4,b8,b5){var b3={},b6=(e===a7);function b7(b9){var ca;b3[b9]=true;bJ.each(e[b9]||[],function(cc,cb){var cd=cb(b4,b8,b5);if(typeof cd==="string"&&!b6&&!b3[cd]){b4.dataTypes.unshift(cd);b7(cd);return false}else{if(b6){return !(ca=cd)}}});return ca}return b7(b4.dataTypes[0])||!b3["*"]&&b7("*")}function r(b4,b5){var e,b3,b6=bJ.ajaxSettings.flatOptions||{};for(b3 in b5){if(b5[b3]!==aG){(b6[b3]?b4:(e||(e={})))[b3]=b5[b3]}}if(e){bJ.extend(true,b4,e)}return b4}bJ.fn.load=function(b5,b8,b9){if(typeof b5!=="string"&&b0){return b0.apply(this,arguments)}var e,b4,b6,b3=this,b7=b5.indexOf(" ");if(b7>=0){e=b5.slice(b7,b5.length);b5=b5.slice(0,b7)}if(bJ.isFunction(b8)){b9=b8;b8=aG}else{if(b8&&typeof b8==="object"){b6="POST"}}if(b3.length>0){bJ.ajax({url:b5,type:b6,dataType:"html",data:b8}).done(function(ca){b4=arguments;b3.html(e?bJ("<div>").append(bJ.parseHTML(ca)).find(e):ca)}).complete(b9&&function(cb,ca){b3.each(b9,b4||[cb.responseText,ca,cb])})}return this};bJ.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,b3){bJ.fn[b3]=function(b4){return this.on(b3,b4)}});bJ.each(["get","post"],function(e,b3){bJ[b3]=function(b4,b6,b7,b5){if(bJ.isFunction(b6)){b5=b5||b7;b7=b6;b6=aG}return bJ.ajax({url:b4,type:b3,dataType:b5,data:b6,success:b7})}});bJ.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Y,type:"GET",isLocal:B.test(b1[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":aW,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a2.String,"text html":true,"text json":bJ.parseJSON,"text xml":bJ.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(b3,e){return e?r(r(b3,bJ.ajaxSettings),e):r(bJ.ajaxSettings,b3)},ajaxPrefilter:bL(v),ajaxTransport:bL(a7),ajax:function(b7,b4){if(typeof b7==="object"){b4=b7;b7=aG}b4=b4||{};var cg,ci,b8,cn,cc,b3,cj,b5,cb=bJ.ajaxSetup({},b4),cp=cb.context||cb,ce=cb.context&&(cp.nodeType||cp.jquery)?bJ(cp):bJ.event,co=bJ.Deferred(),cl=bJ.Callbacks("once memory"),b9=cb.statusCode||{},cf={},cm={},b6=0,ca="canceled",ch={readyState:0,getResponseHeader:function(cq){var e;if(b6===2){if(!b5){b5={};while((e=ag.exec(cn))){b5[e[1].toLowerCase()]=e[2]}}e=b5[cq.toLowerCase()]}return e==null?null:e},getAllResponseHeaders:function(){return b6===2?cn:null},setRequestHeader:function(cq,cr){var e=cq.toLowerCase();if(!b6){cq=cm[e]=cm[e]||cq;cf[cq]=cr}return this},overrideMimeType:function(e){if(!b6){cb.mimeType=e}return this},statusCode:function(cq){var e;if(cq){if(b6<2){for(e in cq){b9[e]=[b9[e],cq[e]]}}else{ch.always(cq[ch.status])}}return this},abort:function(cq){var e=cq||ca;if(cj){cj.abort(e)}cd(0,e);return this}};co.promise(ch).complete=cl.add;ch.success=ch.done;ch.error=ch.fail;cb.url=((b7||cb.url||Y)+"").replace(ap,"").replace(aH,b1[1]+"//");cb.type=b4.method||b4.type||cb.method||cb.type;cb.dataTypes=bJ.trim(cb.dataType||"*").toLowerCase().match(ac)||[""];if(cb.crossDomain==null){cg=aU.exec(cb.url.toLowerCase());cb.crossDomain=!!(cg&&(cg[1]!==b1[1]||cg[2]!==b1[2]||(cg[3]||(cg[1]==="http:"?80:443))!=(b1[3]||(b1[1]==="http:"?80:443))))}if(cb.data&&cb.processData&&typeof cb.data!=="string"){cb.data=bJ.param(cb.data,cb.traditional)}n(v,cb,b4,ch);if(b6===2){return ch}b3=cb.global;if(b3&&bJ.active++===0){bJ.event.trigger("ajaxStart")}cb.type=cb.type.toUpperCase();cb.hasContent=!o.test(cb.type);b8=cb.url;if(!cb.hasContent){if(cb.data){b8=(cb.url+=(az.test(b8)?"&":"?")+cb.data);delete cb.data}if(cb.cache===false){cb.url=O.test(b8)?b8.replace(O,"$1_="+bO++):b8+(az.test(b8)?"&":"?")+"_="+bO++}}if(cb.ifModified){if(bJ.lastModified[b8]){ch.setRequestHeader("If-Modified-Since",bJ.lastModified[b8])}if(bJ.etag[b8]){ch.setRequestHeader("If-None-Match",bJ.etag[b8])}}if(cb.data&&cb.hasContent&&cb.contentType!==false||b4.contentType){ch.setRequestHeader("Content-Type",cb.contentType)}ch.setRequestHeader("Accept",cb.dataTypes[0]&&cb.accepts[cb.dataTypes[0]]?cb.accepts[cb.dataTypes[0]]+(cb.dataTypes[0]!=="*"?", "+aW+"; q=0.01":""):cb.accepts["*"]);for(ci in cb.headers){ch.setRequestHeader(ci,cb.headers[ci])}if(cb.beforeSend&&(cb.beforeSend.call(cp,ch,cb)===false||b6===2)){return ch.abort()}ca="abort";for(ci in {success:1,error:1,complete:1}){ch[ci](cb[ci])}cj=n(a7,cb,b4,ch);if(!cj){cd(-1,"No Transport")}else{ch.readyState=1;if(b3){ce.trigger("ajaxSend",[ch,cb])}if(cb.async&&cb.timeout>0){cc=setTimeout(function(){ch.abort("timeout")},cb.timeout)}try{b6=1;cj.send(cf,cd)}catch(ck){if(b6<2){cd(-1,ck)}else{throw ck}}}function cd(cu,cq,cv,cs){var e,cy,cw,ct,cx,cr=cq;if(b6===2){return}b6=2;if(cc){clearTimeout(cc)}cj=aG;cn=cs||"";ch.readyState=cu>0?4:0;if(cv){ct=g(cb,ch,cv)}if(cu>=200&&cu<300||cu===304){if(cb.ifModified){cx=ch.getResponseHeader("Last-Modified");if(cx){bJ.lastModified[b8]=cx}cx=ch.getResponseHeader("etag");if(cx){bJ.etag[b8]=cx}}if(cu===204){e=true;cr="nocontent"}else{if(cu===304){e=true;cr="notmodified"}else{e=af(cb,ct);cr=e.state;cy=e.data;cw=e.error;e=!cw}}}else{cw=cr;if(cu||!cr){cr="error";if(cu<0){cu=0}}}ch.status=cu;ch.statusText=(cq||cr)+"";if(e){co.resolveWith(cp,[cy,cr,ch])}else{co.rejectWith(cp,[ch,cr,cw])}ch.statusCode(b9);b9=aG;if(b3){ce.trigger(e?"ajaxSuccess":"ajaxError",[ch,cb,e?cy:cw])}cl.fireWith(cp,[ch,cr]);if(b3){ce.trigger("ajaxComplete",[ch,cb]);if(!(--bJ.active)){bJ.event.trigger("ajaxStop")}}}return ch},getScript:function(e,b3){return bJ.get(e,aG,b3,"script")},getJSON:function(e,b3,b4){return bJ.get(e,b3,b4,"json")}});function g(cb,ca,b7){var e,b6,b5,b8,b3=cb.contents,b9=cb.dataTypes,b4=cb.responseFields;for(b8 in b4){if(b8 in b7){ca[b4[b8]]=b7[b8]}}while(b9[0]==="*"){b9.shift();if(b6===aG){b6=cb.mimeType||ca.getResponseHeader("Content-Type")}}if(b6){for(b8 in b3){if(b3[b8]&&b3[b8].test(b6)){b9.unshift(b8);break}}}if(b9[0] in b7){b5=b9[0]}else{for(b8 in b7){if(!b9[0]||cb.converters[b8+" "+b9[0]]){b5=b8;break}if(!e){e=b8}}b5=b5||e}if(b5){if(b5!==b9[0]){b9.unshift(b5)}return b7[b5]}}function af(cd,b5){var b3,b9,cb,b6,cc={},b7=0,ca=cd.dataTypes.slice(),b4=ca[0];if(cd.dataFilter){b5=cd.dataFilter(b5,cd.dataType)}if(ca[1]){for(cb in cd.converters){cc[cb.toLowerCase()]=cd.converters[cb]}}for(;(b9=ca[++b7]);){if(b9!=="*"){if(b4!=="*"&&b4!==b9){cb=cc[b4+" "+b9]||cc["* "+b9];if(!cb){for(b3 in cc){b6=b3.split(" ");if(b6[1]===b9){cb=cc[b4+" "+b6[0]]||cc["* "+b6[0]];if(cb){if(cb===true){cb=cc[b3]}else{if(cc[b3]!==true){b9=b6[0];ca.splice(b7--,0,b9)}}break}}}}if(cb!==true){if(cb&&cd["throws"]){b5=cb(b5)}else{try{b5=cb(b5)}catch(b8){return{state:"parsererror",error:cb?b8:"No conversion from "+b4+" to "+b9}}}}}b4=b9}}return{state:"success",data:b5}}bJ.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){bJ.globalEval(e);return e}}});bJ.ajaxPrefilter("script",function(e){if(e.cache===aG){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});bJ.ajaxTransport("script",function(b4){if(b4.crossDomain){var e,b3=l.head||bJ("head")[0]||l.documentElement;return{send:function(b5,b6){e=l.createElement("script");e.async=true;if(b4.scriptCharset){e.charset=b4.scriptCharset}e.src=b4.url;e.onload=e.onreadystatechange=function(b8,b7){if(b7||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(e.parentNode){e.parentNode.removeChild(e)}e=null;if(!b7){b6(200,"success")}}};b3.insertBefore(e,b3.firstChild)},abort:function(){if(e){e.onload(aG,true)}}}}});var bq=[],a5=/(=)\?(?=&|$)|\?\?/;bJ.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=bq.pop()||(bJ.expando+"_"+(bO++));this[e]=true;return e}});bJ.ajaxPrefilter("json jsonp",function(b5,e,b6){var b8,b3,b4,b7=b5.jsonp!==false&&(a5.test(b5.url)?"url":typeof b5.data==="string"&&!(b5.contentType||"").indexOf("application/x-www-form-urlencoded")&&a5.test(b5.data)&&"data");if(b7||b5.dataTypes[0]==="jsonp"){b8=b5.jsonpCallback=bJ.isFunction(b5.jsonpCallback)?b5.jsonpCallback():b5.jsonpCallback;if(b7){b5[b7]=b5[b7].replace(a5,"$1"+b8)}else{if(b5.jsonp!==false){b5.url+=(az.test(b5.url)?"&":"?")+b5.jsonp+"="+b8}}b5.converters["script json"]=function(){if(!b4){bJ.error(b8+" was not called")}return b4[0]};b5.dataTypes[0]="json";b3=a2[b8];a2[b8]=function(){b4=arguments};b6.always(function(){a2[b8]=b3;if(b5[b8]){b5.jsonpCallback=e.jsonpCallback;bq.push(b8)}if(b4&&bJ.isFunction(b3)){b3(b4[0])}b4=b3=aG});return"script"}});var ah,ax,ay=0,aP=a2.ActiveXObject&&function(){var e;for(e in ah){ah[e](aG,true)}};function bD(){try{return new a2.XMLHttpRequest()}catch(b3){}}function bd(){try{return new a2.ActiveXObject("Microsoft.XMLHTTP")}catch(b3){}}bJ.ajaxSettings.xhr=a2.ActiveXObject?function(){return !this.isLocal&&bD()||bd()}:bD;ax=bJ.ajaxSettings.xhr();bJ.support.cors=!!ax&&("withCredentials" in ax);ax=bJ.support.ajax=!!ax;if(ax){bJ.ajaxTransport(function(e){if(!e.crossDomain||bJ.support.cors){var b3;return{send:function(b9,b4){var b7,b5,b8=e.xhr();if(e.username){b8.open(e.type,e.url,e.async,e.username,e.password)}else{b8.open(e.type,e.url,e.async)}if(e.xhrFields){for(b5 in e.xhrFields){b8[b5]=e.xhrFields[b5]}}if(e.mimeType&&b8.overrideMimeType){b8.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!b9["X-Requested-With"]){b9["X-Requested-With"]="XMLHttpRequest"}try{for(b5 in b9){b8.setRequestHeader(b5,b9[b5])}}catch(b6){}b8.send((e.hasContent&&e.data)||null);b3=function(cc,cb){var ca,cd,cg,ce;try{if(b3&&(cb||b8.readyState===4)){b3=aG;if(b7){b8.onreadystatechange=bJ.noop;if(aP){delete ah[b7]}}if(cb){if(b8.readyState!==4){b8.abort()}}else{ce={};ca=b8.status;cd=b8.getAllResponseHeaders();if(typeof b8.responseText==="string"){ce.text=b8.responseText}try{cg=b8.statusText}catch(cf){cg=""}if(!ca&&e.isLocal&&!e.crossDomain){ca=ce.text?200:404}else{if(ca===1223){ca=204}}}}}catch(ch){if(!cb){b4(-1,ch)}}if(ce){b4(ca,cg,ce,cd)}};if(!e.async){b3()}else{if(b8.readyState===4){setTimeout(b3)}else{b7=++ay;if(aP){if(!ah){ah={};bJ(a2).unload(aP)}ah[b7]=b3}b8.onreadystatechange=b3}}},abort:function(){if(b3){b3(aG,true)}}}}})}var K,ad,bR=/^(?:toggle|show|hide)$/,bK=new RegExp("^(?:([+-])=|)("+bA+")([a-z%]*)$","i"),bQ=/queueHooks$/,aB=[h],a0={"*":[function(e,b9){var b5,ca,cb=this.createTween(e,b9),b6=bK.exec(b9),b7=cb.cur(),b3=+b7||0,b4=1,b8=20;if(b6){b5=+b6[2];ca=b6[3]||(bJ.cssNumber[e]?"":"px");if(ca!=="px"&&b3){b3=bJ.css(cb.elem,e,true)||b5||1;do{b4=b4||".5";b3=b3/b4;bJ.style(cb.elem,e,b3+ca)}while(b4!==(b4=cb.cur()/b7)&&b4!==1&&--b8)}cb.unit=ca;cb.start=b3;cb.end=b6[1]?b3+(b6[1]+1)*b5:b5}return cb}]};function bm(){setTimeout(function(){K=aG});return(K=bJ.now())}function be(b3,e){bJ.each(e,function(b8,b6){var b7=(a0[b8]||[]).concat(a0["*"]),b4=0,b5=b7.length;for(;b4<b5;b4++){if(b7[b4].call(b3,b8,b6)){return}}})}function f(b4,b8,cb){var cc,e,b7=0,b3=aB.length,ca=bJ.Deferred().always(function(){delete b6.elem}),b6=function(){if(e){return false}var ci=K||bm(),cf=Math.max(0,b5.startTime+b5.duration-ci),cd=cf/b5.duration||0,ch=1-cd,ce=0,cg=b5.tweens.length;for(;ce<cg;ce++){b5.tweens[ce].run(ch)}ca.notifyWith(b4,[b5,ch,cf]);if(ch<1&&cg){return cf}else{ca.resolveWith(b4,[b5]);return false}},b5=ca.promise({elem:b4,props:bJ.extend({},b8),opts:bJ.extend(true,{specialEasing:{}},cb),originalProperties:b8,originalOptions:cb,startTime:K||bm(),duration:cb.duration,tweens:[],createTween:function(cf,cd){var ce=bJ.Tween(b4,b5.opts,cf,cd,b5.opts.specialEasing[cf]||b5.opts.easing);b5.tweens.push(ce);return ce},stop:function(ce){var cd=0,cf=ce?b5.tweens.length:0;if(e){return this}e=true;for(;cd<cf;cd++){b5.tweens[cd].run(1)}if(ce){ca.resolveWith(b4,[b5,ce])}else{ca.rejectWith(b4,[b5,ce])}return this}}),b9=b5.props;am(b9,b5.opts.specialEasing);for(;b7<b3;b7++){cc=aB[b7].call(b5,b4,b9,b5.opts);if(cc){return cc}}be(b5,b9);if(bJ.isFunction(b5.opts.start)){b5.opts.start.call(b4,b5)}bJ.fx.timer(bJ.extend(b6,{elem:b4,anim:b5,queue:b5.opts.queue}));return b5.progress(b5.opts.progress).done(b5.opts.done,b5.opts.complete).fail(b5.opts.fail).always(b5.opts.always)}function am(b5,b7){var b6,b4,b3,b8,e;for(b3 in b5){b4=bJ.camelCase(b3);b8=b7[b4];b6=b5[b3];if(bJ.isArray(b6)){b8=b6[1];b6=b5[b3]=b6[0]}if(b3!==b4){b5[b4]=b6;delete b5[b3]}e=bJ.cssHooks[b4];if(e&&"expand" in e){b6=e.expand(b6);delete b5[b4];for(b3 in b6){if(!(b3 in b5)){b5[b3]=b6[b3];b7[b3]=b8}}}else{b7[b4]=b8}}}bJ.Animation=bJ.extend(f,{tweener:function(b3,b6){if(bJ.isFunction(b3)){b6=b3;b3=["*"]}else{b3=b3.split(" ")}var b5,e=0,b4=b3.length;for(;e<b4;e++){b5=b3[e];a0[b5]=a0[b5]||[];a0[b5].unshift(b6)}},prefilter:function(b3,e){if(e){aB.unshift(b3)}else{aB.push(b3)}}});function h(b6,cc,e){var b4,cb,b5,ce,ci,b8,ch,cg,cf,b7=this,b3=b6.style,cd={},ca=[],b9=b6.nodeType&&P(b6);if(!e.queue){cg=bJ._queueHooks(b6,"fx");if(cg.unqueued==null){cg.unqueued=0;cf=cg.empty.fire;cg.empty.fire=function(){if(!cg.unqueued){cf()}}}cg.unqueued++;b7.always(function(){b7.always(function(){cg.unqueued--;if(!bJ.queue(b6,"fx").length){cg.empty.fire()}})})}if(b6.nodeType===1&&("height" in cc||"width" in cc)){e.overflow=[b3.overflow,b3.overflowX,b3.overflowY];if(bJ.css(b6,"display")==="inline"&&bJ.css(b6,"float")==="none"){if(!bJ.support.inlineBlockNeedsLayout||bE(b6.nodeName)==="inline"){b3.display="inline-block"}else{b3.zoom=1}}}if(e.overflow){b3.overflow="hidden";if(!bJ.support.shrinkWrapBlocks){b7.always(function(){b3.overflow=e.overflow[0];b3.overflowX=e.overflow[1];b3.overflowY=e.overflow[2]})}}for(cb in cc){ce=cc[cb];if(bR.exec(ce)){delete cc[cb];b8=b8||ce==="toggle";if(ce===(b9?"hide":"show")){continue}ca.push(cb)}}b5=ca.length;if(b5){ci=bJ._data(b6,"fxshow")||bJ._data(b6,"fxshow",{});if("hidden" in ci){b9=ci.hidden}if(b8){ci.hidden=!b9}if(b9){bJ(b6).show()}else{b7.done(function(){bJ(b6).hide()})}b7.done(function(){var cj;bJ._removeData(b6,"fxshow");for(cj in cd){bJ.style(b6,cj,cd[cj])}});for(cb=0;cb<b5;cb++){b4=ca[cb];ch=b7.createTween(b4,b9?ci[b4]:0);cd[b4]=ci[b4]||bJ.style(b6,b4);if(!(b4 in ci)){ci[b4]=ch.start;if(b9){ch.end=ch.start;ch.start=b4==="width"||b4==="height"?1:0}}}}}function G(b4,b3,b6,e,b5){return new G.prototype.init(b4,b3,b6,e,b5)}bJ.Tween=G;G.prototype={constructor:G,init:function(b5,b3,b7,e,b6,b4){this.elem=b5;this.prop=b7;this.easing=b6||"swing";this.options=b3;this.start=this.now=this.cur();this.end=e;this.unit=b4||(bJ.cssNumber[b7]?"":"px")},cur:function(){var e=G.propHooks[this.prop];return e&&e.get?e.get(this):G.propHooks._default.get(this)},run:function(b4){var b3,e=G.propHooks[this.prop];if(this.options.duration){this.pos=b3=bJ.easing[this.easing](b4,this.options.duration*b4,0,1,this.options.duration)}else{this.pos=b3=b4}this.now=(this.end-this.start)*b3+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(e&&e.set){e.set(this)}else{G.propHooks._default.set(this)}return this}};G.prototype.init.prototype=G.prototype;G.propHooks={_default:{get:function(b3){var e;if(b3.elem[b3.prop]!=null&&(!b3.elem.style||b3.elem.style[b3.prop]==null)){return b3.elem[b3.prop]}e=bJ.css(b3.elem,b3.prop,"");return !e||e==="auto"?0:e},set:function(e){if(bJ.fx.step[e.prop]){bJ.fx.step[e.prop](e)}else{if(e.elem.style&&(e.elem.style[bJ.cssProps[e.prop]]!=null||bJ.cssHooks[e.prop])){bJ.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}}};G.propHooks.scrollTop=G.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};bJ.each(["toggle","show","hide"],function(b3,e){var b4=bJ.fn[e];bJ.fn[e]=function(b5,b7,b6){return b5==null||typeof b5==="boolean"?b4.apply(this,arguments):this.animate(bI(e,true),b5,b7,b6)}});bJ.fn.extend({fadeTo:function(e,b5,b4,b3){return this.filter(P).css("opacity",0).show().end().animate({opacity:b5},e,b4,b3)},animate:function(b8,b5,b7,b6){var b4=bJ.isEmptyObject(b8),e=bJ.speed(b5,b7,b6),b3=function(){var b9=f(this,bJ.extend({},b8),e);b3.finish=function(){b9.stop(true)};if(b4||bJ._data(this,"finish")){b9.stop(true)}};b3.finish=b3;return b4||e.queue===false?this.each(b3):this.queue(e.queue,b3)},stop:function(b4,b3,e){var b5=function(b6){var b7=b6.stop;delete b6.stop;b7(e)};if(typeof b4!=="string"){e=b3;b3=b4;b4=aG}if(b3&&b4!==false){this.queue(b4||"fx",[])}return this.each(function(){var b9=true,b6=b4!=null&&b4+"queueHooks",b8=bJ.timers,b7=bJ._data(this);if(b6){if(b7[b6]&&b7[b6].stop){b5(b7[b6])}}else{for(b6 in b7){if(b7[b6]&&b7[b6].stop&&bQ.test(b6)){b5(b7[b6])}}}for(b6=b8.length;b6--;){if(b8[b6].elem===this&&(b4==null||b8[b6].queue===b4)){b8[b6].anim.stop(e);b9=false;b8.splice(b6,1)}}if(b9||!e){bJ.dequeue(this,b4)}})},finish:function(e){if(e!==false){e=e||"fx"}return this.each(function(){var b5,b8=bJ._data(this),b4=b8[e+"queue"],b3=b8[e+"queueHooks"],b7=bJ.timers,b6=b4?b4.length:0;b8.finish=true;bJ.queue(this,e,[]);if(b3&&b3.cur&&b3.cur.finish){b3.cur.finish.call(this)}for(b5=b7.length;b5--;){if(b7[b5].elem===this&&b7[b5].queue===e){b7[b5].anim.stop(true);b7.splice(b5,1)}}for(b5=0;b5<b6;b5++){if(b4[b5]&&b4[b5].finish){b4[b5].finish.call(this)}}delete b8.finish})}});function bI(b4,b6){var b5,e={height:b4},b3=0;b6=b6?1:0;for(;b3<4;b3+=2-b6){b5=bT[b3];e["margin"+b5]=e["padding"+b5]=b4}if(b6){e.opacity=e.width=b4}return e}bJ.each({slideDown:bI("show"),slideUp:bI("hide"),slideToggle:bI("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,b3){bJ.fn[e]=function(b4,b6,b5){return this.animate(b3,b4,b6,b5)}});bJ.speed=function(b4,b5,b3){var e=b4&&typeof b4==="object"?bJ.extend({},b4):{complete:b3||!b3&&b5||bJ.isFunction(b4)&&b4,duration:b4,easing:b3&&b5||b5&&!bJ.isFunction(b5)&&b5};e.duration=bJ.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in bJ.fx.speeds?bJ.fx.speeds[e.duration]:bJ.fx.speeds._default;if(e.queue==null||e.queue===true){e.queue="fx"}e.old=e.complete;e.complete=function(){if(bJ.isFunction(e.old)){e.old.call(this)}if(e.queue){bJ.dequeue(this,e.queue)}};return e};bJ.easing={linear:function(e){return e},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2}};bJ.timers=[];bJ.fx=G.prototype.init;bJ.fx.tick=function(){var b4,b3=bJ.timers,e=0;K=bJ.now();for(;e<b3.length;e++){b4=b3[e];if(!b4()&&b3[e]===b4){b3.splice(e--,1)}}if(!b3.length){bJ.fx.stop()}K=aG};bJ.fx.timer=function(e){if(e()&&bJ.timers.push(e)){bJ.fx.start()}};bJ.fx.interval=13;bJ.fx.start=function(){if(!ad){ad=setInterval(bJ.fx.tick,bJ.fx.interval)}};bJ.fx.stop=function(){clearInterval(ad);ad=null};bJ.fx.speeds={slow:600,fast:200,_default:400};bJ.fx.step={};if(bJ.expr&&bJ.expr.filters){bJ.expr.filters.animated=function(e){return bJ.grep(bJ.timers,function(b3){return e===b3.elem}).length}}bJ.fn.offset=function(b3){if(arguments.length){return b3===aG?this:this.each(function(b8){bJ.offset.setOffset(this,b3,b8)})}var e,b7,b5={top:0,left:0},b4=this[0],b6=b4&&b4.ownerDocument;if(!b6){return}e=b6.documentElement;if(!bJ.contains(e,b4)){return b5}if(typeof b4.getBoundingClientRect!==aC){b5=b4.getBoundingClientRect()}b7=bp(b6);return{top:b5.top+(b7.pageYOffset||e.scrollTop)-(e.clientTop||0),left:b5.left+(b7.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}};bJ.offset={setOffset:function(b5,ce,b8){var b9=bJ.css(b5,"position");if(b9==="static"){b5.style.position="relative"}var b7=bJ(b5),b3=b7.offset(),e=bJ.css(b5,"top"),cc=bJ.css(b5,"left"),cd=(b9==="absolute"||b9==="fixed")&&bJ.inArray("auto",[e,cc])>-1,cb={},ca={},b4,b6;if(cd){ca=b7.position();b4=ca.top;b6=ca.left}else{b4=parseFloat(e)||0;b6=parseFloat(cc)||0}if(bJ.isFunction(ce)){ce=ce.call(b5,b8,b3)}if(ce.top!=null){cb.top=(ce.top-b3.top)+b4}if(ce.left!=null){cb.left=(ce.left-b3.left)+b6}if("using" in ce){ce.using.call(b5,cb)}else{b7.css(cb)}}};bJ.fn.extend({position:function(){if(!this[0]){return}var b4,b5,e={top:0,left:0},b3=this[0];if(bJ.css(b3,"position")==="fixed"){b5=b3.getBoundingClientRect()}else{b4=this.offsetParent();b5=this.offset();if(!bJ.nodeName(b4[0],"html")){e=b4.offset()}e.top+=bJ.css(b4[0],"borderTopWidth",true);e.left+=bJ.css(b4[0],"borderLeftWidth",true)}return{top:b5.top-e.top-bJ.css(b3,"marginTop",true),left:b5.left-e.left-bJ.css(b3,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||l.documentElement;while(e&&(!bJ.nodeName(e,"html")&&bJ.css(e,"position")==="static")){e=e.offsetParent}return e||l.documentElement})}});bJ.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b4,b3){var e=/Y/.test(b3);bJ.fn[b4]=function(b5){return bJ.access(this,function(b6,b9,b8){var b7=bp(b6);if(b8===aG){return b7?(b3 in b7)?b7[b3]:b7.document.documentElement[b9]:b6[b9]}if(b7){b7.scrollTo(!e?b8:bJ(b7).scrollLeft(),e?b8:bJ(b7).scrollTop())}else{b6[b9]=b8}},b4,b5,arguments.length,null)}});function bp(e){return bJ.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}bJ.each({Height:"height",Width:"width"},function(e,b3){bJ.each({padding:"inner"+e,content:b3,"":"outer"+e},function(b4,b5){bJ.fn[b5]=function(b9,b8){var b7=arguments.length&&(b4||typeof b9!=="boolean"),b6=b4||(b9===true||b8===true?"margin":"border");return bJ.access(this,function(cb,ca,cc){var cd;if(bJ.isWindow(cb)){return cb.document.documentElement["client"+e]}if(cb.nodeType===9){cd=cb.documentElement;return Math.max(cb.body["scroll"+e],cd["scroll"+e],cb.body["offset"+e],cd["offset"+e],cd["client"+e])}return cc===aG?bJ.css(cb,ca,b6):bJ.style(cb,ca,cc,b6)},b3,b7?b9:aG,b7,null)}})});a2.jQuery=a2.$=bJ;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return bJ})}})(window);var Base64Binary={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(b){var d=this._keyStr.indexOf(b.charAt(b.length-1));var c=this._keyStr.indexOf(b.charAt(b.length-2));var a=(b.length/4)*3;if(d==64){a--}if(c==64){a--}var e=new ArrayBuffer(a);this.decode(b,e,a);return e},decode:function(e,d,o){var c;var n,l,h;var m,k,g,f;var b=0;var a=0;if(d){c=new Uint8Array(d)}else{c=new Uint8Array(o)}e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(b=0;b<o;b+=3){m=this._keyStr.indexOf(e.charAt(a++));k=this._keyStr.indexOf(e.charAt(a++));g=this._keyStr.indexOf(e.charAt(a++));f=this._keyStr.indexOf(e.charAt(a++));n=(m<<2)|(k>>4);l=((k&15)<<4)|(g>>2);h=((g&3)<<6)|f;c[b]=n;if(g!=64){c[b+1]=l}if(f!=64){c[b+2]=h}}return c}};!function(a,b){if(typeof module!="undefined"&&module.exports){module.exports.browser=b()}else{if(typeof define=="function"){define(b)}else{this[a]=b()}}}("bowser",function(){var d=true,c;function b(g,h,i){var f=g.match(h);return(f&&f.length>i&&f[i])||0}function a(y){var v=/(msie|trident)/i.test(y),u=/chrome|crios/i.test(y),n=/phantom/i.test(y),h=/iphone/i.test(y),s=/ipad/i.test(y),k=/ipod/i.test(y),t=/touchpad/i.test(y),x=/silk/i.test(y),p=/safari/i.test(y)&&!u&&!n&&!x,B=/android/i.test(y),z=/opera/i.test(y)||/opr/i.test(y),l=/firefox/i.test(y),q=/gecko\//i.test(y),j=/seamonkey\//i.test(y),f=/webos/i.test(y),m=/windows phone/i.test(y),r=/blackberry/i.test(y),A=/version\/(\d+(\.\d+)?)/i,i=/firefox[ \/](\d+(\.\d+)?)/i,w={};if(k){h=false}if(m){w={name:"Windows Phone",windowsphone:d,msie:d,mobile:d,version:b(y,/iemobile\/(\d+(\.\d+)?)/i,1)}}else{if(z){c=b(y,A,1)||b(y,/opr\/(\d+(\.\d+)?)/i,1)||b(y,/opera[ \/](\d+(\.\d+)?)/i,1);w={name:"Opera",opera:d,version:c};if(B){w.android=d;w.mobile=d}if(u){w.webkit=d}}else{if(v){w={name:"Internet Explorer",msie:d,version:b(y,/(msie |rv:)(\d+(\.\d+)?)/i,2)}}else{if(u){w={name:"Chrome",webkit:d,chrome:d,version:b(y,/(?:chrome|crios)\/(\d+(\.\d+)?)/i,1)};if(B){w.android=d}if(s||k||h){w[h?"iphone":s?"ipad":"ipod"]=d;w.ios=d}if(w.android||w.ios){w.mobile=d}}else{if(n){w={name:"PhantomJS",webkit:d,phantom:d,version:b(y,/phantomjs\/(\d+(\.\d+)?)/i,1)}}else{if(t){w={name:"TouchPad",webkit:d,touchpad:d,version:b(y,/touchpad\/(\d+(\.\d+)?)/i,1)}}else{if(x){w={name:"Amazon Silk",webkit:d,android:d,mobile:d,version:b(y,/silk\/(\d+(\.\d+)?)/i,1)}}else{if(h||s||k){w={name:h?"iPhone":s?"iPad":"iPod",webkit:d,mobile:d,ios:d};w[h?"iphone":s?"ipad":"ipod"]=d;if(A.test(y)){w.version=b(y,A,1)}}else{if(r){w={name:"BlackBerry",blackberry:d,mobile:d};if((c=b(y,A,1))){w.version=c;w.webkit=d}else{w.version=b(y,/blackberry[\d]+\/(\d+(\.\d+)?)/i,1)}}else{if(f){w={name:"WebOS",mobile:d,webkit:d,webos:d,version:(b(y,A,1)||b(y,/wosbrowser\/(\d+(\.\d+)?)/i,1))}}else{if(q){w={name:"Gecko",gecko:d,mozilla:d,version:b(y,i,1)};if(j){w.name="SeaMonkey";w.seamonkey=d;w.version=b(y,/seamonkey\/(\d+(\.\d+)?)/i,1)}else{if(l){w.name="Firefox";w.firefox=d}}if(B){w.android=d;w.mobile=d}else{if(!B&&l&&/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(y)){w.firefoxos=d;w.mobile=d}}}else{if(B){w={name:"Android",webkit:d,android:d,mobile:d,version:b(y,A,1)}}else{if(p){w={name:"Safari",webkit:d,safari:d,version:b(y,A,1)}}}}}}}}}}}}}}var g;if(B){g=b(y,/android[ \/](\d+(\.\d+)*)/i,1);if(g){w.osversion=g}}else{if(h||s||k){g=b(y,/os (\d+([_\s]\d+)*) like mac os x/i,1);if(g){w.osversion=g.replace(/[_\s]/g,".")}}else{if(m){g=b(y,/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,1);if(g){w.osversion=g}}}}if((w.msie&&w.version>=9)||(w.chrome&&w.version>=20)||(w.firefox&&w.version>=10)||(w.safari&&w.version>=5)||(w.opera&&w.version>=10)||(w.ios&&w.osversion&&w.osversion.split(".")[0]>=6)){w.a=d}else{if((w.msie&&w.version<9)||(w.chrome&&w.version<20)||(w.firefox&&w.version<10)||(w.safari&&w.version<5)||(w.opera&&w.version<10)||(w.ios&&w.osversion&&w.osversion.split(".")[0]<6)){w.c=d}else{w.x=d}}return w}var e=a(typeof navigator!=="undefined"?navigator.userAgent:"");e._detect=a;return e});"use strict";var numeric={};numeric.inv=function inv(o){var u=numeric.dim(o),v=Math.abs,d=u[0],c=u[1];var b=o.clone(),q,l;var p=numeric.identity(d),a,t;var h,g,e,o;for(g=0;g<c;++g){var f=-1;var r=-1;for(h=g;h!==d;++h){e=v(b[h][g]);if(e>r){f=h;r=e}}l=b[f];b[f]=b[g];b[g]=l;t=p[f];p[f]=p[g];p[g]=t;o=l[g];for(e=g;e!==c;++e){l[e]/=o}for(e=c-1;e!==-1;--e){t[e]/=o}for(h=d-1;h!==-1;--h){if(h!==g){q=b[h];a=p[h];o=q[g];for(e=g+1;e!==c;++e){q[e]-=l[e]*o}for(e=c-1;e>0;--e){a[e]-=t[e]*o;--e;a[e]-=t[e]*o}if(e===0){a[0]-=t[0]*o}}}}return p};numeric.dim=function dim(a){var c,b;if(typeof a==="object"){c=a[0];if(typeof c==="object"){b=c[0];if(typeof b==="object"){return numeric._dim(a)}return[a.length,c.length]}return[a.length]}return[]};numeric._dim=function _dim(a){var b=[];while(typeof a==="object"){b.push(a.length);a=a[0]}return b};numeric.identity=function identity(a){return numeric.diag(numeric.rep([a],1))};numeric.rep=function rep(e,b,a){if(typeof a==="undefined"){a=0}var f=e[a],c=Array(f),d;if(a===e.length-1){for(d=f-2;d>=0;d-=2){c[d+1]=b;c[d]=b}if(d===-1){c[0]=b}return c}for(d=f-1;d>=0;d--){c[d]=numeric.rep(e,b,a+1)}return c};numeric.diag=function diag(g){var e,f,c,h=g.length,a=Array(h),b;for(e=h-1;e>=0;e--){b=Array(h);f=e+2;for(c=h-1;c>=f;c-=2){b[c]=0;b[c-1]=0}if(c>e){b[c]=0}b[e]=g[e];for(c=e-1;c>=1;c-=2){b[c]=0;b[c-1]=0}if(c===0){b[0]=0}a[e]=b}return a};!function(b){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=b()}else{if("function"==typeof define&&define.amd){define([],b)}else{var a;"undefined"!=typeof window?a=window:"undefined"!=typeof global?a=global:"undefined"!=typeof self&&(a=self),a.pako=b()}}}(function(){var d,b,a;return(function c(f,k,h){function g(n,l){if(!k[n]){if(!f[n]){var i=typeof require=="function"&&require;if(!l&&i){return i(n,!0)}if(e){return e(n,!0)}throw new Error("Cannot find module '"+n+"'")}var m=k[n]={exports:{}};f[n][0].call(m.exports,function(o){var p=f[n][1][o];return g(p?p:o)},m,m.exports,c,f,k,h)}return k[n].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(g,h,l){var e=g("./zlib/inflate.js");var p=g("./utils/common");var q=g("./utils/strings");var o=g("./zlib/constants");var j=g("./zlib/messages");var k=g("./zlib/zstream");var f=g("./zlib/gzheader");var m="Unpacking";var n=function(t){this.options=p.assign({chunkSize:16384,windowBits:0,to:""},t||{});var u=this.options;if(u.raw&&(u.windowBits>=0)&&(u.windowBits<16)){u.windowBits=-u.windowBits;if(u.windowBits===0){u.windowBits=-15}}if((u.windowBits>=0)&&(u.windowBits<16)&&!(t&&t.windowBits)){u.windowBits+=32}if((u.windowBits>15)&&(u.windowBits<48)){if((u.windowBits&15)===0){u.windowBits|=15}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new k();this.strm.avail_out=0;var s=e.inflateInit2(this.strm,u.windowBits);if(s!==o.Z_OK){throw new Error(j[s])}this.header=new f();e.inflateGetHeader(this.strm,this.header)};n.prototype.push=function(w,x,z){var A=this.strm;var u=this.options.chunkSize;var v,t;if(this.ended){return false}t=(x===~~x)?x:((x===true)?o.Z_FINISH:o.Z_NO_FLUSH);if(typeof w==="string"){A.input=q.binstring2buf(w)}else{A.input=w}A.next_in=0;A.avail_in=A.input.length;var y=new DataView(w.buffer);var s=y.getUint32(w.byteLength-4,true);this.progressMeter=z;this.progressIterations=(s/u);this.progressIndex=0;this.progressNextGoal=0.25;if(this.progressMeter){this.progressMeter.drawProgress(0.1,m)}setTimeout(this.pushProcess.bind(this),0)};n.prototype.pushProcess=function(){var t=this.strm;var w=this.options.chunkSize;var s,v,u;do{if(t.avail_out===0){t.output=new p.Buf8(w);t.next_out=0;t.avail_out=w}var s=e.inflate(t,o.Z_NO_FLUSH);if(s!==o.Z_STREAM_END&&s!==o.Z_OK){this.onEnd(s);this.ended=true;return false}if(t.next_out){if(t.avail_out===0||s===o.Z_STREAM_END||(t.avail_in===0&&v===o.Z_FINISH)){this.onData(p.shrinkBuf(t.output,t.next_out))}}this.progressIndex+=1;u=this.progressIndex/this.progressIterations;if(this.progressMeter){this.progressMeter.drawProgress(u,m)}}while((u<this.progressNextGoal)&&(((t.avail_in>0||t.avail_out===0)&&s!==o.Z_STREAM_END)));if((t.avail_in>0||t.avail_out===0)&&s!==o.Z_STREAM_END){this.progressNextGoal+=0.1;setTimeout(this.pushProcess.bind(this),0)}else{if(s===o.Z_STREAM_END){v=o.Z_FINISH}if(v===o.Z_FINISH){s=e.inflateEnd(this.strm);this.onEnd(s);this.ended=true}this.onFinish(this.result)}};n.prototype.onData=function(s){this.chunks.push(s)};n.prototype.onEnd=function(s){if(s===o.Z_OK){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=p.flattenChunks(this.chunks)}}this.chunks=[];this.err=s;this.msg=this.strm.msg};function r(s,t,u,w){var v=new n(t);v.onFinish=w;v.push(s,true,u)}function i(s,t){t=t||{};t.raw=true;return r(s,t)}l.Inflate=n;l.inflate=r;l.inflateRaw=i;l.ungzip=r},{"./utils/common":2,"./utils/strings":3,"./zlib/constants":5,"./zlib/gzheader":7,"./zlib/inflate.js":9,"./zlib/messages":11,"./zlib/zstream":12}],2:[function(g,f,e){var j=(typeof Uint8Array!=="undefined")&&(typeof Uint16Array!=="undefined")&&(typeof Int32Array!=="undefined");e.assign=function(n){var k=Array.prototype.slice.call(arguments,1);while(k.length){var l=k.shift();if(!l){continue}if(typeof(l)!=="object"){throw new TypeError(l+"must be non-object")}for(var m in l){if(l.hasOwnProperty(m)){n[m]=l[m]}}}return n};e.shrinkBuf=function(k,l){if(k.length===l){return k}if(k.subarray){return k.subarray(0,l)}k.length=l;return k};var h={arraySet:function(l,n,p,k,o){if(n.subarray&&l.subarray){l.set(n.subarray(p,p+k),o);return}for(var m=0;m<k;m++){l[o+m]=n[p+m]}},flattenChunks:function(r){var p,n,m,q,o,k;m=0;for(p=0,n=r.length;p<n;p++){m+=r[p].length}k=new Uint8Array(m);q=0;for(p=0,n=r.length;p<n;p++){o=r[p];k.set(o,q);q+=o.length}return k}};var i={arraySet:function(l,n,p,k,o){for(var m=0;m<k;m++){l[o+m]=n[p+m]}},flattenChunks:function(k){return[].concat.apply([],k)}};e.setTyped=function(k){if(k){e.Buf8=Uint8Array;e.Buf16=Uint16Array;e.Buf32=Int32Array;e.assign(e,h)}else{e.Buf8=Array;e.Buf16=Array;e.Buf32=Array;e.assign(e,i)}};e.setTyped(j)},{}],3:[function(e,f,h){var o=e("./common");var m=true;var k=true;try{String.fromCharCode.apply(null,[0])}catch(n){m=false}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(n){k=false}var g=new o.Buf8(256);for(var j=0;j<256;j++){g[j]=(j>=252?6:j>=248?5:j>=240?4:j>=224?3:j>=192?2:1)}g[254]=g[254]=1;h.string2buf=function(v){var p,w,r,s,q,u=v.length,t=0;for(s=0;s<u;s++){w=v.charCodeAt(s);if((w&64512)===55296&&(s+1<u)){r=v.charCodeAt(s+1);if((r&64512)===56320){w=65536+((w-55296)<<10)+(r-56320);s++}}t+=w<128?1:w<2048?2:w<65536?3:4}p=new o.Buf8(t);for(q=0,s=0;q<t;s++){w=v.charCodeAt(s);if((w&64512)===55296&&(s+1<u)){r=v.charCodeAt(s+1);if((r&64512)===56320){w=65536+((w-55296)<<10)+(r-56320);s++}}if(w<128){p[q++]=w}else{if(w<2048){p[q++]=192|(w>>>6);p[q++]=128|(w&63)}else{if(w<65536){p[q++]=224|(w>>>12);p[q++]=128|(w>>>6&63);p[q++]=128|(w&63)}else{p[q++]=240|(w>>>18);p[q++]=128|(w>>>12&63);p[q++]=128|(w>>>6&63);p[q++]=128|(w&63)}}}}return p};function l(r,q){if(q<65537){if((r.subarray&&k)||(!r.subarray&&m)){return String.fromCharCode.apply(null,o.shrinkBuf(r,q))}}var p="";for(var s=0;s<q;s++){p+=String.fromCharCode(r[s])}return p}h.buf2binstring=function(i){return l(i,i.length)};h.binstring2buf=function(s){var q=new o.Buf8(s.length);for(var r=0,p=q.length;r<p;r++){q[r]=s.charCodeAt(r)}return q};h.buf2string=function(u,r){var v,t,w,s;var q=r||u.length;var p=new Array(q*2);for(t=0,v=0;v<q;){w=u[v++];if(w<128){p[t++]=w;continue}s=g[w];if(s>4){p[t++]=65533;v+=s-1;continue}w&=s===2?31:s===3?15:7;while(s>1&&v<q){w=(w<<6)|(u[v++]&63);s--}if(s>1){p[t++]=65533;continue}if(w<65536){p[t++]=w}else{w-=65536;p[t++]=55296|((w>>10)&1023);p[t++]=56320|(w&1023)}}return l(p,t)};h.utf8border=function(p,i){var q;i=i||p.length;if(i>p.length){i=p.length}q=i-1;while(q>=0&&(p[q]&192)===128){q--}if(q<0){return i}if(q===0){return i}return(q+g[p[q]]>i)?q:i}},{"./common":2}],4:[function(h,f,e){function g(l,k,i,p){var m=(l&65535)|0,j=((l>>>16)&65535)|0,o=0;while(i!==0){o=i>2000?2000:i;i-=o;do{m=(m+k[p++])|0;j=(j+m)|0}while(--o);m%=65521;j%=65521}return(m|(j<<16))|0}f.exports=g},{}],5:[function(g,f,e){f.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],6:[function(j,g,f){function h(){var p,m=[];for(var o=0;o<256;o++){p=o;for(var l=0;l<8;l++){p=((p&1)?(3988292384^(p>>>1)):(p>>>1))}m[o]=p}return m}var e=h();function i(p,m,k,q){var o=e,l=q+k;p=p^(-1);for(var n=q;n<l;n++){p=(p>>>8)^o[(p^m[n])&255]}return(p^(-1))}g.exports=i},{}],7:[function(g,f,e){function h(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=false}f.exports=h},{}],8:[function(i,g,f){var h=30;var j=12;g.exports=function e(I,p){var q;var K;var w;var J;var v;var o;var C;var l;var A;var m;var r;var z;var F;var D;var G;var u;var x;var k;var t;var H;var B;var E;var n;var y,s;q=I.state;K=I.next_in;y=I.input;w=K+(I.avail_in-5);J=I.next_out;s=I.output;v=J-(p-I.avail_out);o=J+(I.avail_out-257);C=q.dmax;l=q.wsize;A=q.whave;m=q.wnext;r=q.window;z=q.hold;F=q.bits;D=q.lencode;G=q.distcode;u=(1<<q.lenbits)-1;x=(1<<q.distbits)-1;top:do{if(F<15){z+=y[K++]<<F;F+=8;z+=y[K++]<<F;F+=8}k=D[z&u];dolen:for(;;){t=k>>>24;z>>>=t;F-=t;t=(k>>>16)&255;if(t===0){s[J++]=k&65535}else{if(t&16){H=k&65535;t&=15;if(t){if(F<t){z+=y[K++]<<F;F+=8}H+=z&((1<<t)-1);z>>>=t;F-=t}if(F<15){z+=y[K++]<<F;F+=8;z+=y[K++]<<F;F+=8}k=G[z&x];dodist:for(;;){t=k>>>24;z>>>=t;F-=t;t=(k>>>16)&255;if(t&16){B=k&65535;t&=15;if(F<t){z+=y[K++]<<F;F+=8;if(F<t){z+=y[K++]<<F;F+=8}}B+=z&((1<<t)-1);if(B>C){I.msg="invalid distance too far back";q.mode=h;break top}z>>>=t;F-=t;t=J-v;if(B>t){t=B-t;if(t>A){if(q.sane){I.msg="invalid distance too far back";q.mode=h;break top}}E=0;n=r;if(m===0){E+=l-t;if(t<H){H-=t;do{s[J++]=r[E++]}while(--t);E=J-B;n=s}}else{if(m<t){E+=l+m-t;t-=m;if(t<H){H-=t;do{s[J++]=r[E++]}while(--t);E=0;if(m<H){t=m;H-=t;do{s[J++]=r[E++]}while(--t);E=J-B;n=s}}}else{E+=m-t;if(t<H){H-=t;do{s[J++]=r[E++]}while(--t);E=J-B;n=s}}}while(H>2){s[J++]=n[E++];s[J++]=n[E++];s[J++]=n[E++];H-=3}if(H){s[J++]=n[E++];if(H>1){s[J++]=n[E++]}}}else{E=J-B;do{s[J++]=s[E++];s[J++]=s[E++];s[J++]=s[E++];H-=3}while(H>2);if(H){s[J++]=s[E++];if(H>1){s[J++]=s[E++]}}}}else{if((t&64)===0){k=G[(k&65535)+(z&((1<<t)-1))];continue dodist}else{I.msg="invalid distance code";q.mode=h;break top}}break}}else{if((t&64)===0){k=D[(k&65535)+(z&((1<<t)-1))];continue dolen}else{if(t&32){q.mode=j;break top}else{I.msg="invalid literal/length code";q.mode=h;break top}}}}break}}while(K<w&&J<o);H=F>>3;K-=H;F-=H<<3;z&=(1<<F)-1;I.next_in=K;I.next_out=J;I.avail_in=(K<w?5+(w-K):5-(K-w));I.avail_out=(J<o?257+(o-J):257-(J-o));q.hold=z;q.bits=F;return}},{}],9:[function(W,ax,N){var S=W("../utils/common");var M=W("./adler32");var ae=W("./crc32");var aq=W("./inffast");var n=W("./inftrees");var ad=0;var af=1;var J=2;var p=4;var T=5;var C=6;var v=0;var z=1;var u=2;var at=-2;var x=-3;var L=-4;var j=-5;var ab=8;var am=1;var al=2;var k=3;var ah=4;var E=5;var f=6;var t=7;var Z=8;var r=9;var ar=10;var w=11;var m=12;var aj=13;var h=14;var az=15;var ap=16;var o=17;var A=18;var U=19;var aa=20;var e=21;var aw=22;var V=23;var au=24;var D=25;var F=26;var ao=27;var X=28;var B=29;var g=30;var ay=31;var G=32;var Y=852;var P=592;var Q=15;var K=Q;function s(aA){return(((aA>>>24)&255)+((aA>>>8)&65280)+((aA&65280)<<8)+((aA&255)<<24))}function ag(){this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new S.Buf16(320);this.work=new S.Buf16(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}function R(aA){var aB;if(!aA||!aA.state){return at}aB=aA.state;aA.total_in=aA.total_out=aB.total=0;aA.msg="";if(aB.wrap){aA.adler=aB.wrap&1}aB.mode=am;aB.last=0;aB.havedict=0;aB.dmax=32768;aB.head=null;aB.hold=0;aB.bits=0;aB.lencode=aB.lendyn=new S.Buf32(Y);aB.distcode=aB.distdyn=new S.Buf32(P);aB.sane=1;aB.back=-1;return v}function av(aA){var aB;if(!aA||!aA.state){return at}aB=aA.state;aB.wsize=0;aB.whave=0;aB.wnext=0;return R(aA)}function y(aA,aC){var aB;var aD;if(!aA||!aA.state){return at}aD=aA.state;if(aC<0){aB=0;aC=-aC}else{aB=(aC>>4)+1;if(aC<48){aC&=15}}if(aC&&(aC<8||aC>15)){return at}if(aD.window!==null&&aD.wbits!==aC){aD.window=null}aD.wrap=aB;aD.wbits=aC;return av(aA)}function q(aA,aC){var aB;var aD;if(!aA){return at}aD=new ag();aA.state=aD;aD.window=null;aB=y(aA,aC);if(aB!==v){aA.state=null}return aB}function I(aA){return q(aA,K)}var ai=true;var an,l;function H(aB){if(ai){var aA;an=new S.Buf32(512);l=new S.Buf32(32);aA=0;while(aA<144){aB.lens[aA++]=8}while(aA<256){aB.lens[aA++]=9}while(aA<280){aB.lens[aA++]=7}while(aA<288){aB.lens[aA++]=8}n(af,aB.lens,0,288,an,0,aB.work,{bits:9});aA=0;while(aA<32){aB.lens[aA++]=5}n(J,aB.lens,0,32,l,0,aB.work,{bits:5});ai=false}aB.lencode=an;aB.lenbits=9;aB.distcode=l;aB.distbits=5}function O(aB,aE,aA,aF){var aD;var aC=aB.state;if(aC.window===null){aC.wsize=1<<aC.wbits;aC.wnext=0;aC.whave=0;aC.window=new S.Buf8(aC.wsize)}if(aF>=aC.wsize){S.arraySet(aC.window,aE,aA-aC.wsize,aC.wsize,0);aC.wnext=0;aC.whave=aC.wsize}else{aD=aC.wsize-aC.wnext;if(aD>aF){aD=aF}S.arraySet(aC.window,aE,aA-aF,aD,aC.wnext);aF-=aD;if(aF){S.arraySet(aC.window,aE,aA-aF,aF,0);aC.wnext=aF;aC.whave=aC.wsize}else{aC.wnext+=aD;if(aC.wnext===aC.wsize){aC.wnext=0}if(aC.whave<aC.wsize){aC.whave+=aD}}}return 0}function ac(aX,aR){var aF;var aK,aI;var aP;var aG;var aD,aE;var aN;var aT;var a1,a0;var aS;var aU;var aC;var aA=0;var aY,aJ,aZ;var aO,aB,aL;var aW;var a2;var aH=new S.Buf8(4);var aM;var aQ;var aV=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!aX||!aX.state||!aX.output||(!aX.input&&aX.avail_in!==0)){return at}aF=aX.state;if(aF.mode===m){aF.mode=aj}aG=aX.next_out;aI=aX.output;aE=aX.avail_out;aP=aX.next_in;aK=aX.input;aD=aX.avail_in;aN=aF.hold;aT=aF.bits;a1=aD;a0=aE;a2=v;inf_leave:for(;;){switch(aF.mode){case am:if(aF.wrap===0){aF.mode=aj;break}while(aT<16){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if((aF.wrap&2)&&aN===35615){aF.check=0;aH[0]=aN&255;aH[1]=(aN>>>8)&255;aF.check=ae(aF.check,aH,2,0);aN=0;aT=0;aF.mode=al;break}aF.flags=0;if(aF.head){aF.head.done=false}if(!(aF.wrap&1)||(((aN&255)<<8)+(aN>>8))%31){aX.msg="incorrect header check";aF.mode=g;break}if((aN&15)!==ab){aX.msg="unknown compression method";aF.mode=g;break}aN>>>=4;aT-=4;aW=(aN&15)+8;if(aF.wbits===0){aF.wbits=aW}else{if(aW>aF.wbits){aX.msg="invalid window size";aF.mode=g;break}}aF.dmax=1<<aW;aX.adler=aF.check=1;aF.mode=aN&512?ar:m;aN=0;aT=0;break;case al:while(aT<16){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.flags=aN;if((aF.flags&255)!==ab){aX.msg="unknown compression method";aF.mode=g;break}if(aF.flags&57344){aX.msg="unknown header flags set";aF.mode=g;break}if(aF.head){aF.head.text=((aN>>8)&1)}if(aF.flags&512){aH[0]=aN&255;aH[1]=(aN>>>8)&255;aF.check=ae(aF.check,aH,2,0)}aN=0;aT=0;aF.mode=k;case k:while(aT<32){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aF.head){aF.head.time=aN}if(aF.flags&512){aH[0]=aN&255;aH[1]=(aN>>>8)&255;aH[2]=(aN>>>16)&255;aH[3]=(aN>>>24)&255;aF.check=ae(aF.check,aH,4,0)}aN=0;aT=0;aF.mode=ah;case ah:while(aT<16){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aF.head){aF.head.xflags=(aN&255);aF.head.os=(aN>>8)}if(aF.flags&512){aH[0]=aN&255;aH[1]=(aN>>>8)&255;aF.check=ae(aF.check,aH,2,0)}aN=0;aT=0;aF.mode=E;case E:if(aF.flags&1024){while(aT<16){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.length=aN;if(aF.head){aF.head.extra_len=aN}if(aF.flags&512){aH[0]=aN&255;aH[1]=(aN>>>8)&255;aF.check=ae(aF.check,aH,2,0)}aN=0;aT=0}else{if(aF.head){aF.head.extra=null}}aF.mode=f;case f:if(aF.flags&1024){aS=aF.length;if(aS>aD){aS=aD}if(aS){if(aF.head){aW=aF.head.extra_len-aF.length;if(!aF.head.extra){aF.head.extra=new Array(aF.head.extra_len)}S.arraySet(aF.head.extra,aK,aP,aS,aW)}if(aF.flags&512){aF.check=ae(aF.check,aK,aS,aP)}aD-=aS;aP+=aS;aF.length-=aS}if(aF.length){break inf_leave}}aF.length=0;aF.mode=t;case t:if(aF.flags&2048){if(aD===0){break inf_leave}aS=0;do{aW=aK[aP+aS++];if(aF.head&&aW&&(aF.length<65536)){aF.head.name+=String.fromCharCode(aW)}}while(aW&&aS<aD);if(aF.flags&512){aF.check=ae(aF.check,aK,aS,aP)}aD-=aS;aP+=aS;if(aW){break inf_leave}}else{if(aF.head){aF.head.name=null}}aF.length=0;aF.mode=Z;case Z:if(aF.flags&4096){if(aD===0){break inf_leave}aS=0;do{aW=aK[aP+aS++];if(aF.head&&aW&&(aF.length<65536)){aF.head.comment+=String.fromCharCode(aW)}}while(aW&&aS<aD);if(aF.flags&512){aF.check=ae(aF.check,aK,aS,aP)}aD-=aS;aP+=aS;if(aW){break inf_leave}}else{if(aF.head){aF.head.comment=null}}aF.mode=r;case r:if(aF.flags&512){while(aT<16){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aN!==(aF.check&65535)){aX.msg="header crc mismatch";aF.mode=g;break}aN=0;aT=0}if(aF.head){aF.head.hcrc=((aF.flags>>9)&1);aF.head.done=true}aX.adler=aF.check=0;aF.mode=m;break;case ar:while(aT<32){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aX.adler=aF.check=s(aN);aN=0;aT=0;aF.mode=w;case w:if(aF.havedict===0){aX.next_out=aG;aX.avail_out=aE;aX.next_in=aP;aX.avail_in=aD;aF.hold=aN;aF.bits=aT;return u}aX.adler=aF.check=1;aF.mode=m;case m:if(aR===T||aR===C){break inf_leave}case aj:if(aF.last){aN>>>=aT&7;aT-=aT&7;aF.mode=ao;break}while(aT<3){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.last=(aN&1);aN>>>=1;aT-=1;switch((aN&3)){case 0:aF.mode=h;break;case 1:H(aF);aF.mode=aa;if(aR===C){aN>>>=2;aT-=2;break inf_leave}break;case 2:aF.mode=o;break;case 3:aX.msg="invalid block type";aF.mode=g}aN>>>=2;aT-=2;break;case h:aN>>>=aT&7;aT-=aT&7;while(aT<32){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if((aN&65535)!==((aN>>>16)^65535)){aX.msg="invalid stored block lengths";aF.mode=g;break}aF.length=aN&65535;aN=0;aT=0;aF.mode=az;if(aR===C){break inf_leave}case az:aF.mode=ap;case ap:aS=aF.length;if(aS){if(aS>aD){aS=aD}if(aS>aE){aS=aE}if(aS===0){break inf_leave}S.arraySet(aI,aK,aP,aS,aG);aD-=aS;aP+=aS;aE-=aS;aG+=aS;aF.length-=aS;break}aF.mode=m;break;case o:while(aT<14){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.nlen=(aN&31)+257;aN>>>=5;aT-=5;aF.ndist=(aN&31)+1;aN>>>=5;aT-=5;aF.ncode=(aN&15)+4;aN>>>=4;aT-=4;if(aF.nlen>286||aF.ndist>30){aX.msg="too many length or distance symbols";aF.mode=g;break}aF.have=0;aF.mode=A;case A:while(aF.have<aF.ncode){while(aT<3){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.lens[aV[aF.have++]]=(aN&7);aN>>>=3;aT-=3}while(aF.have<19){aF.lens[aV[aF.have++]]=0}aF.lencode=aF.lendyn;aF.lenbits=7;aM={bits:aF.lenbits};a2=n(ad,aF.lens,0,19,aF.lencode,0,aF.work,aM);aF.lenbits=aM.bits;if(a2){aX.msg="invalid code lengths set";aF.mode=g;break}aF.have=0;aF.mode=U;case U:while(aF.have<aF.nlen+aF.ndist){for(;;){aA=aF.lencode[aN&((1<<aF.lenbits)-1)];aY=aA>>>24;aJ=(aA>>>16)&255;aZ=aA&65535;if((aY)<=aT){break}if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aZ<16){aN>>>=aY;aT-=aY;aF.lens[aF.have++]=aZ}else{if(aZ===16){aQ=aY+2;while(aT<aQ){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aN>>>=aY;aT-=aY;if(aF.have===0){aX.msg="invalid bit length repeat";aF.mode=g;break}aW=aF.lens[aF.have-1];aS=3+(aN&3);aN>>>=2;aT-=2}else{if(aZ===17){aQ=aY+3;while(aT<aQ){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aN>>>=aY;aT-=aY;aW=0;aS=3+(aN&7);aN>>>=3;aT-=3}else{aQ=aY+7;while(aT<aQ){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aN>>>=aY;aT-=aY;aW=0;aS=11+(aN&127);aN>>>=7;aT-=7}}if(aF.have+aS>aF.nlen+aF.ndist){aX.msg="invalid bit length repeat";aF.mode=g;break}while(aS--){aF.lens[aF.have++]=aW}}}if(aF.mode===g){break}if(aF.lens[256]===0){aX.msg="invalid code -- missing end-of-block";aF.mode=g;break}aF.lenbits=9;aM={bits:aF.lenbits};a2=n(af,aF.lens,0,aF.nlen,aF.lencode,0,aF.work,aM);aF.lenbits=aM.bits;if(a2){aX.msg="invalid literal/lengths set";aF.mode=g;break}aF.distbits=6;aF.distcode=aF.distdyn;aM={bits:aF.distbits};a2=n(J,aF.lens,aF.nlen,aF.ndist,aF.distcode,0,aF.work,aM);aF.distbits=aM.bits;if(a2){aX.msg="invalid distances set";aF.mode=g;break}aF.mode=aa;if(aR===C){break inf_leave}case aa:aF.mode=e;case e:if(aD>=6&&aE>=258){aX.next_out=aG;aX.avail_out=aE;aX.next_in=aP;aX.avail_in=aD;aF.hold=aN;aF.bits=aT;aq(aX,a0);aG=aX.next_out;aI=aX.output;aE=aX.avail_out;aP=aX.next_in;aK=aX.input;aD=aX.avail_in;aN=aF.hold;aT=aF.bits;if(aF.mode===m){aF.back=-1}break}aF.back=0;for(;;){aA=aF.lencode[aN&((1<<aF.lenbits)-1)];aY=aA>>>24;aJ=(aA>>>16)&255;aZ=aA&65535;if(aY<=aT){break}if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aJ&&(aJ&240)===0){aO=aY;aB=aJ;aL=aZ;for(;;){aA=aF.lencode[aL+((aN&((1<<(aO+aB))-1))>>aO)];aY=aA>>>24;aJ=(aA>>>16)&255;aZ=aA&65535;if((aO+aY)<=aT){break}if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aN>>>=aO;aT-=aO;aF.back+=aO}aN>>>=aY;aT-=aY;aF.back+=aY;aF.length=aZ;if(aJ===0){aF.mode=F;break}if(aJ&32){aF.back=-1;aF.mode=m;break}if(aJ&64){aX.msg="invalid literal/length code";aF.mode=g;break}aF.extra=aJ&15;aF.mode=aw;case aw:if(aF.extra){aQ=aF.extra;while(aT<aQ){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.length+=aN&((1<<aF.extra)-1);aN>>>=aF.extra;aT-=aF.extra;aF.back+=aF.extra}aF.was=aF.length;aF.mode=V;case V:for(;;){aA=aF.distcode[aN&((1<<aF.distbits)-1)];aY=aA>>>24;aJ=(aA>>>16)&255;aZ=aA&65535;if((aY)<=aT){break}if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if((aJ&240)===0){aO=aY;aB=aJ;aL=aZ;for(;;){aA=aF.distcode[aL+((aN&((1<<(aO+aB))-1))>>aO)];aY=aA>>>24;aJ=(aA>>>16)&255;aZ=aA&65535;if((aO+aY)<=aT){break}if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aN>>>=aO;aT-=aO;aF.back+=aO}aN>>>=aY;aT-=aY;aF.back+=aY;if(aJ&64){aX.msg="invalid distance code";aF.mode=g;break}aF.offset=aZ;aF.extra=(aJ)&15;aF.mode=au;case au:if(aF.extra){aQ=aF.extra;while(aT<aQ){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.offset+=aN&((1<<aF.extra)-1);aN>>>=aF.extra;aT-=aF.extra;aF.back+=aF.extra}if(aF.offset>aF.dmax){aX.msg="invalid distance too far back";aF.mode=g;break}aF.mode=D;case D:if(aE===0){break inf_leave}aS=a0-aE;if(aF.offset>aS){aS=aF.offset-aS;if(aS>aF.whave){if(aF.sane){aX.msg="invalid distance too far back";aF.mode=g;break}}if(aS>aF.wnext){aS-=aF.wnext;aU=aF.wsize-aS}else{aU=aF.wnext-aS}if(aS>aF.length){aS=aF.length}aC=aF.window}else{aC=aI;aU=aG-aF.offset;aS=aF.length}if(aS>aE){aS=aE}aE-=aS;aF.length-=aS;do{aI[aG++]=aC[aU++]}while(--aS);if(aF.length===0){aF.mode=e}break;case F:if(aE===0){break inf_leave}aI[aG++]=aF.length;aE--;aF.mode=e;break;case ao:if(aF.wrap){while(aT<32){if(aD===0){break inf_leave}aD--;aN|=aK[aP++]<<aT;aT+=8}a0-=aE;aX.total_out+=a0;aF.total+=a0;if(a0){aX.adler=aF.check=(aF.flags?ae(aF.check,aI,a0,aG-a0):M(aF.check,aI,a0,aG-a0))}a0=aE;if((aF.flags?aN:s(aN))!==aF.check){aX.msg="incorrect data check";aF.mode=g;break}aN=0;aT=0}aF.mode=X;case X:if(aF.wrap&&aF.flags){while(aT<32){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aN!==(aF.total&4294967295)){aX.msg="incorrect length check";aF.mode=g;break}aN=0;aT=0}aF.mode=B;case B:a2=z;break inf_leave;case g:a2=x;break inf_leave;case ay:return L;case G:default:return at}}aX.next_out=aG;aX.avail_out=aE;aX.next_in=aP;aX.avail_in=aD;aF.hold=aN;aF.bits=aT;if(aF.wsize||(a0!==aX.avail_out&&aF.mode<g&&(aF.mode<ao||aR!==p))){if(O(aX,aX.output,aX.next_out,a0-aX.avail_out)){aF.mode=ay;return L}}a1-=aX.avail_in;a0-=aX.avail_out;aX.total_in+=a1;aX.total_out+=a0;aF.total+=a0;if(aF.wrap&&a0){aX.adler=aF.check=(aF.flags?ae(aF.check,aI,a0,aX.next_out-a0):M(aF.check,aI,a0,aX.next_out-a0))}aX.data_type=aF.bits+(aF.last?64:0)+(aF.mode===m?128:0)+(aF.mode===aa||aF.mode===az?256:0);if(((a1===0&&a0===0)||aR===p)&&a2===v){a2=j}return a2}function ak(aA){if(!aA||!aA.state){return at}var aB=aA.state;if(aB.window){aB.window=null}aA.state=null;return v}function i(aA,aB){var aC;if(!aA||!aA.state){return at}aC=aA.state;if((aC.wrap&2)===0){return at}aC.head=aB;aB.done=false;return v}N.inflateReset=av;N.inflateReset2=y;N.inflateResetKeep=R;N.inflateInit=I;N.inflateInit2=q;N.inflate=ac;N.inflateEnd=ak;N.inflateGetHeader=i;N.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":2,"./adler32":4,"./crc32":6,"./inffast":8,"./inftrees":10}],10:[function(f,g,i){var r=f("../utils/common");var q=15;var n=852;var m=592;var p=0;var k=1;var h=2;var o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var j=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var e=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];g.exports=function l(v,aa,I,X,W,U,H,E){var L=E.bits;var S=0;var D=0;var K=0,R=0;var J=0;var V=0;var B=0;var w=0;var z=0;var Q=0;var P;var M;var ab;var O;var G;var y=null;var F=0;var u;var A=new r.Buf16(q+1);var x=new r.Buf16(q+1);var t=null;var Z=0;var T,C,Y;for(S=0;S<=q;S++){A[S]=0}for(D=0;D<X;D++){A[aa[I+D]]++}J=L;for(R=q;R>=1;R--){if(A[R]!==0){break}}if(J>R){J=R}if(R===0){W[U++]=(1<<24)|(64<<16)|0;W[U++]=(1<<24)|(64<<16)|0;E.bits=1;return 0}for(K=1;K<R;K++){if(A[K]!==0){break}}if(J<K){J=K}w=1;for(S=1;S<=q;S++){w<<=1;w-=A[S];if(w<0){return -1}}if(w>0&&(v===p||R!==1)){return -1}x[1]=0;for(S=1;S<q;S++){x[S+1]=x[S]+A[S]}for(D=0;D<X;D++){if(aa[I+D]!==0){H[x[aa[I+D]]++]=D}}switch(v){case p:y=t=H;u=19;break;case k:y=o;F-=257;t=s;Z-=257;u=256;break;default:y=j;t=e;u=-1}Q=0;D=0;S=K;G=U;V=J;B=0;ab=-1;z=1<<J;O=z-1;if((v===k&&z>n)||(v===h&&z>m)){return 1}var N=0;for(;;){N++;T=S-B;if(H[D]<u){C=0;Y=H[D]}else{if(H[D]>u){C=t[Z+H[D]];Y=y[F+H[D]]}else{C=32+64;Y=0}}P=1<<(S-B);M=1<<V;K=M;do{M-=P;W[G+(Q>>B)+M]=(T<<24)|(C<<16)|Y|0}while(M!==0);P=1<<(S-1);while(Q&P){P>>=1}if(P!==0){Q&=P-1;Q+=P}else{Q=0}D++;if(--(A[S])===0){if(S===R){break}S=aa[I+H[D]]}if(S>J&&(Q&O)!==ab){if(B===0){B=J}G+=K;V=S-B;w=1<<V;while(V+B<R){w-=A[V+B];if(w<=0){break}V++;w<<=1}z+=1<<V;if((v===k&&z>n)||(v===h&&z>m)){return 1}ab=Q&O;W[ab]=(J<<24)|(V<<16)|(G-U)|0}}if(Q!==0){W[G+Q]=((S-B)<<24)|(64<<16)|0}E.bits=J;return 0}},{"../utils/common":2}],11:[function(g,f,e){f.exports={"2":"need dictionary","1":"stream end","0":"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],12:[function(g,f,e){function h(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}f.exports=h},{}]},{},[1])(1)});(function(b){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{var a;if(typeof window!=="undefined"){a=window}else{if(typeof global!=="undefined"){a=global}else{if(typeof self!=="undefined"){a=self}else{a=this}}}a.nifti=b()}}})(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(g,j,f){var e=g("./lib/utils/common").assign;var i=g("./lib/deflate");var l=g("./lib/inflate");var h=g("./lib/zlib/constants");var k={};e(k,i,l,h);j.exports=k},{"./lib/deflate":2,"./lib/inflate":3,"./lib/utils/common":4,"./lib/zlib/constants":7}],2:[function(l,e,x){var p=l("./zlib/deflate.js");var v=l("./utils/common");var i=l("./utils/strings");var k=l("./zlib/messages");var u=l("./zlib/zstream");var s=Object.prototype.toString;var r=0;var y=4;var j=0;var n=1;var q=2;var f=-1;var g=0;var o=8;var w=function(A){this.options=v.assign({level:f,method:o,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},A||{});var B=this.options;if(B.raw&&(B.windowBits>0)){B.windowBits=-B.windowBits}else{if(B.gzip&&(B.windowBits>0)&&(B.windowBits<16)){B.windowBits+=16}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new u();this.strm.avail_out=0;var z=p.deflateInit2(this.strm,B.level,B.method,B.windowBits,B.memLevel,B.strategy);if(z!==j){throw new Error(k[z])}if(B.header){p.deflateSetHeader(this.strm,B.header)}};w.prototype.push=function(C,D){var A=this.strm;var E=this.options.chunkSize;var z,B;if(this.ended){return false}B=(D===~~D)?D:((D===true)?y:r);if(typeof C==="string"){A.input=i.string2buf(C)}else{if(s.call(C)==="[object ArrayBuffer]"){A.input=new Uint8Array(C)}else{A.input=C}}A.next_in=0;A.avail_in=A.input.length;do{if(A.avail_out===0){A.output=new v.Buf8(E);A.next_out=0;A.avail_out=E}z=p.deflate(A,B);if(z!==n&&z!==j){this.onEnd(z);this.ended=true;return false}if(A.avail_out===0||(A.avail_in===0&&(B===y||B===q))){if(this.options.to==="string"){this.onData(i.buf2binstring(v.shrinkBuf(A.output,A.next_out)))}else{this.onData(v.shrinkBuf(A.output,A.next_out))}}}while((A.avail_in>0||A.avail_out===0)&&z!==n);if(B===y){z=p.deflateEnd(this.strm);this.onEnd(z);this.ended=true;return z===j}if(B===q){this.onEnd(j);A.avail_out=0;return true}return true};w.prototype.onData=function(z){this.chunks.push(z)};w.prototype.onEnd=function(z){if(z===j){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=v.flattenChunks(this.chunks)}}this.chunks=[];this.err=z;this.msg=this.strm.msg};function m(z,A){var B=new w(A);B.push(z,true);if(B.err){throw B.msg}return B.result}function t(z,A){A=A||{};A.raw=true;return m(z,A)}function h(z,A){A=A||{};A.gzip=true;return m(z,A)}x.Deflate=w;x.deflate=m;x.deflateRaw=t;x.gzip=h},{"./utils/common":4,"./utils/strings":5,"./zlib/deflate.js":9,"./zlib/messages":14,"./zlib/zstream":16}],3:[function(l,h,m){var e=l("./zlib/inflate.js");var p=l("./utils/common");var q=l("./utils/strings");var o=l("./zlib/constants");var j=l("./zlib/messages");var k=l("./zlib/zstream");var g=l("./zlib/gzheader");var f=Object.prototype.toString;var n=function(t){this.options=p.assign({chunkSize:16384,windowBits:0,to:""},t||{});var u=this.options;if(u.raw&&(u.windowBits>=0)&&(u.windowBits<16)){u.windowBits=-u.windowBits;if(u.windowBits===0){u.windowBits=-15}}if((u.windowBits>=0)&&(u.windowBits<16)&&!(t&&t.windowBits)){u.windowBits+=32}if((u.windowBits>15)&&(u.windowBits<48)){if((u.windowBits&15)===0){u.windowBits|=15}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new k();this.strm.avail_out=0;var s=e.inflateInit2(this.strm,u.windowBits);if(s!==o.Z_OK){throw new Error(j[s])}this.header=new g();e.inflateGetHeader(this.strm,this.header)};n.prototype.push=function(x,y){var B=this.strm;var v=this.options.chunkSize;var w,u;var t,z,s;var A=false;if(this.ended){return false}u=(y===~~y)?y:((y===true)?o.Z_FINISH:o.Z_NO_FLUSH);if(typeof x==="string"){B.input=q.binstring2buf(x)}else{if(f.call(x)==="[object ArrayBuffer]"){B.input=new Uint8Array(x)}else{B.input=x}}B.next_in=0;B.avail_in=B.input.length;do{if(B.avail_out===0){B.output=new p.Buf8(v);B.next_out=0;B.avail_out=v}w=e.inflate(B,o.Z_NO_FLUSH);if(w===o.Z_BUF_ERROR&&A===true){w=o.Z_OK;A=false}if(w!==o.Z_STREAM_END&&w!==o.Z_OK){this.onEnd(w);this.ended=true;return false}if(B.next_out){if(B.avail_out===0||w===o.Z_STREAM_END||(B.avail_in===0&&(u===o.Z_FINISH||u===o.Z_SYNC_FLUSH))){if(this.options.to==="string"){t=q.utf8border(B.output,B.next_out);z=B.next_out-t;s=q.buf2string(B.output,t);B.next_out=z;B.avail_out=v-z;if(z){p.arraySet(B.output,B.output,t,z,0)}this.onData(s)}else{this.onData(p.shrinkBuf(B.output,B.next_out))}}}if(B.avail_in===0&&B.avail_out===0){A=true}}while((B.avail_in>0||B.avail_out===0)&&w!==o.Z_STREAM_END);if(w===o.Z_STREAM_END){u=o.Z_FINISH}if(u===o.Z_FINISH){w=e.inflateEnd(this.strm);this.onEnd(w);this.ended=true;return w===o.Z_OK}if(u===o.Z_SYNC_FLUSH){this.onEnd(o.Z_OK);B.avail_out=0;return true}return true};n.prototype.onData=function(s){this.chunks.push(s)};n.prototype.onEnd=function(s){if(s===o.Z_OK){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=p.flattenChunks(this.chunks)}}this.chunks=[];this.err=s;this.msg=this.strm.msg};function r(s,t){var u=new n(t);u.push(s,true);if(u.err){throw u.msg}return u.result}function i(s,t){t=t||{};t.raw=true;return r(s,t)}m.Inflate=n;m.inflate=r;m.inflateRaw=i;m.ungzip=r},{"./utils/common":4,"./utils/strings":5,"./zlib/constants":7,"./zlib/gzheader":10,"./zlib/inflate.js":12,"./zlib/messages":14,"./zlib/zstream":16}],4:[function(f,g,e){var j=(typeof Uint8Array!=="undefined")&&(typeof Uint16Array!=="undefined")&&(typeof Int32Array!=="undefined");e.assign=function(n){var k=Array.prototype.slice.call(arguments,1);while(k.length){var l=k.shift();if(!l){continue}if(typeof l!=="object"){throw new TypeError(l+"must be non-object")}for(var m in l){if(l.hasOwnProperty(m)){n[m]=l[m]}}}return n};e.shrinkBuf=function(k,l){if(k.length===l){return k}if(k.subarray){return k.subarray(0,l)}k.length=l;return k};var h={arraySet:function(l,n,p,k,o){if(n.subarray&&l.subarray){l.set(n.subarray(p,p+k),o);return}for(var m=0;m<k;m++){l[o+m]=n[p+m]}},flattenChunks:function(r){var p,n,m,q,o,k;m=0;for(p=0,n=r.length;p<n;p++){m+=r[p].length}k=new Uint8Array(m);q=0;for(p=0,n=r.length;p<n;p++){o=r[p];k.set(o,q);q+=o.length}return k}};var i={arraySet:function(l,n,p,k,o){for(var m=0;m<k;m++){l[o+m]=n[p+m]}},flattenChunks:function(k){return[].concat.apply([],k)}};e.setTyped=function(k){if(k){e.Buf8=Uint8Array;e.Buf16=Uint16Array;e.Buf32=Int32Array;e.assign(e,h)}else{e.Buf8=Array;e.Buf16=Array;e.Buf32=Array;e.assign(e,i)}};e.setTyped(j)},{}],5:[function(h,f,i){var n=h("./common");var l=true;var j=true;try{String.fromCharCode.apply(null,[0])}catch(m){l=false}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(m){j=false}var g=new n.Buf8(256);for(var e=0;e<256;e++){g[e]=(e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1)}g[254]=g[254]=1;i.string2buf=function(u){var o,v,q,r,p,t=u.length,s=0;for(r=0;r<t;r++){v=u.charCodeAt(r);if((v&64512)===55296&&(r+1<t)){q=u.charCodeAt(r+1);if((q&64512)===56320){v=65536+((v-55296)<<10)+(q-56320);r++}}s+=v<128?1:v<2048?2:v<65536?3:4}o=new n.Buf8(s);for(p=0,r=0;p<s;r++){v=u.charCodeAt(r);if((v&64512)===55296&&(r+1<t)){q=u.charCodeAt(r+1);if((q&64512)===56320){v=65536+((v-55296)<<10)+(q-56320);r++}}if(v<128){o[p++]=v}else{if(v<2048){o[p++]=192|(v>>>6);o[p++]=128|(v&63)}else{if(v<65536){o[p++]=224|(v>>>12);o[p++]=128|(v>>>6&63);o[p++]=128|(v&63)}else{o[p++]=240|(v>>>18);o[p++]=128|(v>>>12&63);o[p++]=128|(v>>>6&63);o[p++]=128|(v&63)}}}}return o};function k(q,p){if(p<65537){if((q.subarray&&j)||(!q.subarray&&l)){return String.fromCharCode.apply(null,n.shrinkBuf(q,p))}}var o="";for(var r=0;r<p;r++){o+=String.fromCharCode(q[r])}return o}i.buf2binstring=function(o){return k(o,o.length)};i.binstring2buf=function(r){var p=new n.Buf8(r.length);for(var q=0,o=p.length;q<o;q++){p[q]=r.charCodeAt(q)}return p};i.buf2string=function(t,q){var u,s,v,r;var p=q||t.length;var o=new Array(p*2);for(s=0,u=0;u<p;){v=t[u++];if(v<128){o[s++]=v;continue}r=g[v];if(r>4){o[s++]=65533;u+=r-1;continue}v&=r===2?31:r===3?15:7;while(r>1&&u<p){v=(v<<6)|(t[u++]&63);r--}if(r>1){o[s++]=65533;continue}if(v<65536){o[s++]=v}else{v-=65536;o[s++]=55296|((v>>10)&1023);o[s++]=56320|(v&1023)}}return k(o,s)};i.utf8border=function(p,o){var q;o=o||p.length;if(o>p.length){o=p.length}q=o-1;while(q>=0&&(p[q]&192)===128){q--}if(q<0){return o}if(q===0){return o}return(q+g[p[q]]>o)?q:o}},{"./common":4}],6:[function(f,g,e){function h(l,k,i,p){var m=(l&65535)|0,j=((l>>>16)&65535)|0,o=0;while(i!==0){o=i>2000?2000:i;i-=o;do{m=(m+k[p++])|0;j=(j+m)|0}while(--o);m%=65521;j%=65521}return(m|(j<<16))|0}g.exports=h},{}],7:[function(f,g,e){g.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],8:[function(g,h,f){function i(){var p,m=[];for(var o=0;o<256;o++){p=o;for(var l=0;l<8;l++){p=((p&1)?(3988292384^(p>>>1)):(p>>>1))}m[o]=p}return m}var e=i();function j(p,m,k,q){var o=e,l=q+k;p=p^(-1);for(var n=q;n<l;n++){p=(p>>>8)^o[(p^m[n])&255]}return(p^(-1))}h.exports=j},{}],9:[function(ao,aC,L){var S=ao("../utils/common");var aA=ao("./trees");var K=ao("./adler32");var Z=ao("./crc32");var F=ao("./messages");var N=0;var Y=1;var at=3;var n=4;var T=5;var t=0;var x=1;var ap=-2;var w=-3;var i=-5;var k=-1;var O=1;var D=2;var z=3;var u=4;var au=0;var J=2;var X=8;var av=9;var Q=15;var p=8;var ak=29;var az=256;var aB=az+1+ak;var C=30;var af=19;var am=2*aB+1;var R=15;var H=3;var aq=258;var g=(aq+H+1);var l=32;var V=42;var r=69;var aa=73;var al=91;var s=103;var aE=113;var B=666;var an=1;var v=2;var U=3;var h=4;var ar=3;function ag(aF,aG){aF.msg=F[aG];return aG}function P(aF){return((aF)<<1)-((aF)>4?9:0)}function ay(aG){var aF=aG.length;while(--aF>=0){aG[aF]=0}}function j(aG){var aH=aG.state;var aF=aH.pending;if(aF>aG.avail_out){aF=aG.avail_out}if(aF===0){return}S.arraySet(aG.output,aH.pending_buf,aH.pending_out,aF,aG.next_out);aG.next_out+=aF;aH.pending_out+=aF;aG.total_out+=aF;aG.avail_out-=aF;aH.pending-=aF;if(aH.pending===0){aH.pending_out=0}}function m(aF,aG){aA._tr_flush_block(aF,(aF.block_start>=0?aF.block_start:-1),aF.strstart-aF.block_start,aG);aF.block_start=aF.strstart;j(aF.strm)}function f(aG,aF){aG.pending_buf[aG.pending++]=aF}function A(aG,aF){aG.pending_buf[aG.pending++]=(aF>>>8)&255;aG.pending_buf[aG.pending++]=aF&255}function E(aG,aH,aJ,aI){var aF=aG.avail_in;if(aF>aI){aF=aI}if(aF===0){return 0}aG.avail_in-=aF;S.arraySet(aH,aG.input,aG.next_in,aF,aJ);if(aG.state.wrap===1){aG.adler=K(aG.adler,aH,aF,aJ)}else{if(aG.state.wrap===2){aG.adler=Z(aG.adler,aH,aF,aJ)}}aG.next_in+=aF;aG.total_in+=aF;return aF}function ax(aS,aJ){var aM=aS.max_chain_length;var aT=aS.strstart;var aK;var aL;var aF=aS.prev_length;var aG=aS.nice_match;var aI=(aS.strstart>(aS.w_size-g))?aS.strstart-(aS.w_size-g):0;var aQ=aS.window;var aN=aS.w_mask;var aH=aS.prev;var aP=aS.strstart+aq;var aR=aQ[aT+aF-1];var aO=aQ[aT+aF];if(aS.prev_length>=aS.good_match){aM>>=2}if(aG>aS.lookahead){aG=aS.lookahead}do{aK=aJ;if(aQ[aK+aF]!==aO||aQ[aK+aF-1]!==aR||aQ[aK]!==aQ[aT]||aQ[++aK]!==aQ[aT+1]){continue}aT+=2;aK++;do{}while(aQ[++aT]===aQ[++aK]&&aQ[++aT]===aQ[++aK]&&aQ[++aT]===aQ[++aK]&&aQ[++aT]===aQ[++aK]&&aQ[++aT]===aQ[++aK]&&aQ[++aT]===aQ[++aK]&&aQ[++aT]===aQ[++aK]&&aQ[++aT]===aQ[++aK]&&aT<aP);aL=aq-(aP-aT);aT=aP-aq;if(aL>aF){aS.match_start=aJ;aF=aL;if(aL>=aG){break}aR=aQ[aT+aF-1];aO=aQ[aT+aF]}}while((aJ=aH[aJ&aN])>aI&&--aM!==0);if(aF<=aS.lookahead){return aF}return aS.lookahead}function aj(aH){var aL=aH.w_size;var aI,aK,aF,aG,aJ;do{aG=aH.window_size-aH.lookahead-aH.strstart;if(aH.strstart>=aL+(aL-g)){S.arraySet(aH.window,aH.window,aL,aL,0);aH.match_start-=aL;aH.strstart-=aL;aH.block_start-=aL;aK=aH.hash_size;aI=aK;do{aF=aH.head[--aI];aH.head[aI]=(aF>=aL?aF-aL:0)}while(--aK);aK=aL;aI=aK;do{aF=aH.prev[--aI];aH.prev[aI]=(aF>=aL?aF-aL:0)}while(--aK);aG+=aL}if(aH.strm.avail_in===0){break}aK=E(aH.strm,aH.window,aH.strstart+aH.lookahead,aG);aH.lookahead+=aK;if(aH.lookahead+aH.insert>=H){aJ=aH.strstart-aH.insert;aH.ins_h=aH.window[aJ];aH.ins_h=((aH.ins_h<<aH.hash_shift)^aH.window[aJ+1])&aH.hash_mask;while(aH.insert){aH.ins_h=((aH.ins_h<<aH.hash_shift)^aH.window[aJ+H-1])&aH.hash_mask;aH.prev[aJ&aH.w_mask]=aH.head[aH.ins_h];aH.head[aH.ins_h]=aJ;aJ++;aH.insert--;if(aH.lookahead+aH.insert<H){break}}}}while(aH.lookahead<g&&aH.strm.avail_in!==0)}function M(aI,aF){var aH=65535;if(aH>aI.pending_buf_size-5){aH=aI.pending_buf_size-5}for(;;){if(aI.lookahead<=1){aj(aI);if(aI.lookahead===0&&aF===N){return an}if(aI.lookahead===0){break}}aI.strstart+=aI.lookahead;aI.lookahead=0;var aG=aI.block_start+aH;if(aI.strstart===0||aI.strstart>=aG){aI.lookahead=aI.strstart-aG;aI.strstart=aG;m(aI,false);if(aI.strm.avail_out===0){return an}}if(aI.strstart-aI.block_start>=(aI.w_size-g)){m(aI,false);if(aI.strm.avail_out===0){return an}}}aI.insert=0;if(aF===n){m(aI,true);if(aI.strm.avail_out===0){return U}return h}if(aI.strstart>aI.block_start){m(aI,false);if(aI.strm.avail_out===0){return an}}return an}function o(aH,aF){var aI;var aG;for(;;){if(aH.lookahead<g){aj(aH);if(aH.lookahead<g&&aF===N){return an}if(aH.lookahead===0){break}}aI=0;if(aH.lookahead>=H){aH.ins_h=((aH.ins_h<<aH.hash_shift)^aH.window[aH.strstart+H-1])&aH.hash_mask;aI=aH.prev[aH.strstart&aH.w_mask]=aH.head[aH.ins_h];aH.head[aH.ins_h]=aH.strstart}if(aI!==0&&((aH.strstart-aI)<=(aH.w_size-g))){aH.match_length=ax(aH,aI)}if(aH.match_length>=H){aG=aA._tr_tally(aH,aH.strstart-aH.match_start,aH.match_length-H);aH.lookahead-=aH.match_length;if(aH.match_length<=aH.max_lazy_match&&aH.lookahead>=H){aH.match_length--;do{aH.strstart++;aH.ins_h=((aH.ins_h<<aH.hash_shift)^aH.window[aH.strstart+H-1])&aH.hash_mask;aI=aH.prev[aH.strstart&aH.w_mask]=aH.head[aH.ins_h];aH.head[aH.ins_h]=aH.strstart}while(--aH.match_length!==0);aH.strstart++}else{aH.strstart+=aH.match_length;aH.match_length=0;aH.ins_h=aH.window[aH.strstart];aH.ins_h=((aH.ins_h<<aH.hash_shift)^aH.window[aH.strstart+1])&aH.hash_mask}}else{aG=aA._tr_tally(aH,0,aH.window[aH.strstart]);aH.lookahead--;aH.strstart++}if(aG){m(aH,false);if(aH.strm.avail_out===0){return an}}}aH.insert=((aH.strstart<(H-1))?aH.strstart:H-1);if(aF===n){m(aH,true);if(aH.strm.avail_out===0){return U}return h}if(aH.last_lit){m(aH,false);if(aH.strm.avail_out===0){return an}}return v}function ah(aI,aG){var aJ;var aH;var aF;for(;;){if(aI.lookahead<g){aj(aI);if(aI.lookahead<g&&aG===N){return an}if(aI.lookahead===0){break}}aJ=0;if(aI.lookahead>=H){aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aI.strstart+H-1])&aI.hash_mask;aJ=aI.prev[aI.strstart&aI.w_mask]=aI.head[aI.ins_h];aI.head[aI.ins_h]=aI.strstart}aI.prev_length=aI.match_length;aI.prev_match=aI.match_start;aI.match_length=H-1;if(aJ!==0&&aI.prev_length<aI.max_lazy_match&&aI.strstart-aJ<=(aI.w_size-g)){aI.match_length=ax(aI,aJ);if(aI.match_length<=5&&(aI.strategy===O||(aI.match_length===H&&aI.strstart-aI.match_start>4096))){aI.match_length=H-1}}if(aI.prev_length>=H&&aI.match_length<=aI.prev_length){aF=aI.strstart+aI.lookahead-H;aH=aA._tr_tally(aI,aI.strstart-1-aI.prev_match,aI.prev_length-H);aI.lookahead-=aI.prev_length-1;aI.prev_length-=2;do{if(++aI.strstart<=aF){aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aI.strstart+H-1])&aI.hash_mask;aJ=aI.prev[aI.strstart&aI.w_mask]=aI.head[aI.ins_h];aI.head[aI.ins_h]=aI.strstart}}while(--aI.prev_length!==0);aI.match_available=0;aI.match_length=H-1;aI.strstart++;if(aH){m(aI,false);if(aI.strm.avail_out===0){return an}}}else{if(aI.match_available){aH=aA._tr_tally(aI,0,aI.window[aI.strstart-1]);if(aH){m(aI,false)}aI.strstart++;aI.lookahead--;if(aI.strm.avail_out===0){return an}}else{aI.match_available=1;aI.strstart++;aI.lookahead--}}}if(aI.match_available){aH=aA._tr_tally(aI,0,aI.window[aI.strstart-1]);aI.match_available=0}aI.insert=aI.strstart<H-1?aI.strstart:H-1;if(aG===n){m(aI,true);if(aI.strm.avail_out===0){return U}return h}if(aI.last_lit){m(aI,false);if(aI.strm.avail_out===0){return an}}return v}function ad(aJ,aG){var aI;var aK;var aH,aF;var aL=aJ.window;for(;;){if(aJ.lookahead<=aq){aj(aJ);if(aJ.lookahead<=aq&&aG===N){return an}if(aJ.lookahead===0){break}}aJ.match_length=0;if(aJ.lookahead>=H&&aJ.strstart>0){aH=aJ.strstart-1;aK=aL[aH];if(aK===aL[++aH]&&aK===aL[++aH]&&aK===aL[++aH]){aF=aJ.strstart+aq;do{}while(aK===aL[++aH]&&aK===aL[++aH]&&aK===aL[++aH]&&aK===aL[++aH]&&aK===aL[++aH]&&aK===aL[++aH]&&aK===aL[++aH]&&aK===aL[++aH]&&aH<aF);aJ.match_length=aq-(aF-aH);if(aJ.match_length>aJ.lookahead){aJ.match_length=aJ.lookahead}}}if(aJ.match_length>=H){aI=aA._tr_tally(aJ,1,aJ.match_length-H);aJ.lookahead-=aJ.match_length;aJ.strstart+=aJ.match_length;aJ.match_length=0}else{aI=aA._tr_tally(aJ,0,aJ.window[aJ.strstart]);aJ.lookahead--;aJ.strstart++}if(aI){m(aJ,false);if(aJ.strm.avail_out===0){return an}}}aJ.insert=0;if(aG===n){m(aJ,true);if(aJ.strm.avail_out===0){return U}return h}if(aJ.last_lit){m(aJ,false);if(aJ.strm.avail_out===0){return an}}return v}function ae(aH,aF){var aG;for(;;){if(aH.lookahead===0){aj(aH);if(aH.lookahead===0){if(aF===N){return an}break}}aH.match_length=0;aG=aA._tr_tally(aH,0,aH.window[aH.strstart]);aH.lookahead--;aH.strstart++;if(aG){m(aH,false);if(aH.strm.avail_out===0){return an}}}aH.insert=0;if(aF===n){m(aH,true);if(aH.strm.avail_out===0){return U}return h}if(aH.last_lit){m(aH,false);if(aH.strm.avail_out===0){return an}}return v}var ac=function(aF,aJ,aG,aI,aH){this.good_length=aF;this.max_lazy=aJ;this.nice_length=aG;this.max_chain=aI;this.func=aH};var ab;ab=[new ac(0,0,0,0,M),new ac(4,4,8,4,o),new ac(4,5,16,8,o),new ac(4,6,32,32,o),new ac(4,4,16,16,ah),new ac(8,16,32,32,ah),new ac(8,16,128,128,ah),new ac(8,32,128,256,ah),new ac(32,128,258,1024,ah),new ac(32,258,258,4096,ah)];function I(aF){aF.window_size=2*aF.w_size;ay(aF.head);aF.max_lazy_match=ab[aF.level].max_lazy;aF.good_match=ab[aF.level].good_length;aF.nice_match=ab[aF.level].nice_length;aF.max_chain_length=ab[aF.level].max_chain;aF.strstart=0;aF.block_start=0;aF.lookahead=0;aF.insert=0;aF.match_length=aF.prev_length=H-1;aF.match_available=0;aF.ins_h=0}function e(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=X;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new S.Buf16(am*2);this.dyn_dtree=new S.Buf16((2*C+1)*2);this.bl_tree=new S.Buf16((2*af+1)*2);ay(this.dyn_ltree);ay(this.dyn_dtree);ay(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new S.Buf16(R+1);this.heap=new S.Buf16(2*aB+1);ay(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new S.Buf16(2*aB+1);ay(this.depth);this.l_buf=0;this.lit_bufsize=0;this.last_lit=0;this.d_buf=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}function ai(aF){var aG;if(!aF||!aF.state){return ag(aF,ap)}aF.total_in=aF.total_out=0;aF.data_type=J;aG=aF.state;aG.pending=0;aG.pending_out=0;if(aG.wrap<0){aG.wrap=-aG.wrap}aG.status=(aG.wrap?V:aE);aF.adler=(aG.wrap===2)?0:1;aG.last_flush=N;aA._tr_init(aG);return t}function y(aF){var aG=ai(aF);if(aG===t){I(aF.state)}return aG}function aD(aF,aG){if(!aF||!aF.state){return ap}if(aF.state.wrap!==2){return ap}aF.state.gzhead=aG;return t}function G(aF,aM,aL,aI,aK,aJ){if(!aF){return ap}var aH=1;if(aM===k){aM=6}if(aI<0){aH=0;aI=-aI}else{if(aI>15){aH=2;aI-=16}}if(aK<1||aK>av||aL!==X||aI<8||aI>15||aM<0||aM>9||aJ<0||aJ>u){return ag(aF,ap)}if(aI===8){aI=9}var aG=new e();aF.state=aG;aG.strm=aF;aG.wrap=aH;aG.gzhead=null;aG.w_bits=aI;aG.w_size=1<<aG.w_bits;aG.w_mask=aG.w_size-1;aG.hash_bits=aK+7;aG.hash_size=1<<aG.hash_bits;aG.hash_mask=aG.hash_size-1;aG.hash_shift=~~((aG.hash_bits+H-1)/H);aG.window=new S.Buf8(aG.w_size*2);aG.head=new S.Buf16(aG.hash_size);aG.prev=new S.Buf16(aG.w_size);aG.lit_bufsize=1<<(aK+6);aG.pending_buf_size=aG.lit_bufsize*4;aG.pending_buf=new S.Buf8(aG.pending_buf_size);aG.d_buf=aG.lit_bufsize>>1;aG.l_buf=(1+2)*aG.lit_bufsize;aG.level=aM;aG.strategy=aJ;aG.method=aL;return y(aF)}function W(aF,aG){return G(aF,aG,X,Q,p,au)}function q(aK,aL){var aJ,aN;var aI,aG;if(!aK||!aK.state||aL>T||aL<0){return aK?ag(aK,ap):ap}aN=aK.state;if(!aK.output||(!aK.input&&aK.avail_in!==0)||(aN.status===B&&aL!==n)){return ag(aK,(aK.avail_out===0)?i:ap)}aN.strm=aK;aJ=aN.last_flush;aN.last_flush=aL;if(aN.status===V){if(aN.wrap===2){aK.adler=0;f(aN,31);f(aN,139);f(aN,8);if(!aN.gzhead){f(aN,0);f(aN,0);f(aN,0);f(aN,0);f(aN,0);f(aN,aN.level===9?2:(aN.strategy>=D||aN.level<2?4:0));f(aN,ar);aN.status=aE}else{f(aN,(aN.gzhead.text?1:0)+(aN.gzhead.hcrc?2:0)+(!aN.gzhead.extra?0:4)+(!aN.gzhead.name?0:8)+(!aN.gzhead.comment?0:16));f(aN,aN.gzhead.time&255);f(aN,(aN.gzhead.time>>8)&255);f(aN,(aN.gzhead.time>>16)&255);f(aN,(aN.gzhead.time>>24)&255);f(aN,aN.level===9?2:(aN.strategy>=D||aN.level<2?4:0));f(aN,aN.gzhead.os&255);if(aN.gzhead.extra&&aN.gzhead.extra.length){f(aN,aN.gzhead.extra.length&255);f(aN,(aN.gzhead.extra.length>>8)&255)}if(aN.gzhead.hcrc){aK.adler=Z(aK.adler,aN.pending_buf,aN.pending,0)}aN.gzindex=0;aN.status=r}}else{var aH=(X+((aN.w_bits-8)<<4))<<8;var aM=-1;if(aN.strategy>=D||aN.level<2){aM=0}else{if(aN.level<6){aM=1}else{if(aN.level===6){aM=2}else{aM=3}}}aH|=(aM<<6);if(aN.strstart!==0){aH|=l}aH+=31-(aH%31);aN.status=aE;A(aN,aH);if(aN.strstart!==0){A(aN,aK.adler>>>16);A(aN,aK.adler&65535)}aK.adler=1}}if(aN.status===r){if(aN.gzhead.extra){aI=aN.pending;while(aN.gzindex<(aN.gzhead.extra.length&65535)){if(aN.pending===aN.pending_buf_size){if(aN.gzhead.hcrc&&aN.pending>aI){aK.adler=Z(aK.adler,aN.pending_buf,aN.pending-aI,aI)}j(aK);aI=aN.pending;if(aN.pending===aN.pending_buf_size){break}}f(aN,aN.gzhead.extra[aN.gzindex]&255);aN.gzindex++}if(aN.gzhead.hcrc&&aN.pending>aI){aK.adler=Z(aK.adler,aN.pending_buf,aN.pending-aI,aI)}if(aN.gzindex===aN.gzhead.extra.length){aN.gzindex=0;aN.status=aa}}else{aN.status=aa}}if(aN.status===aa){if(aN.gzhead.name){aI=aN.pending;do{if(aN.pending===aN.pending_buf_size){if(aN.gzhead.hcrc&&aN.pending>aI){aK.adler=Z(aK.adler,aN.pending_buf,aN.pending-aI,aI)}j(aK);aI=aN.pending;if(aN.pending===aN.pending_buf_size){aG=1;break}}if(aN.gzindex<aN.gzhead.name.length){aG=aN.gzhead.name.charCodeAt(aN.gzindex++)&255}else{aG=0}f(aN,aG)}while(aG!==0);if(aN.gzhead.hcrc&&aN.pending>aI){aK.adler=Z(aK.adler,aN.pending_buf,aN.pending-aI,aI)}if(aG===0){aN.gzindex=0;aN.status=al}}else{aN.status=al}}if(aN.status===al){if(aN.gzhead.comment){aI=aN.pending;do{if(aN.pending===aN.pending_buf_size){if(aN.gzhead.hcrc&&aN.pending>aI){aK.adler=Z(aK.adler,aN.pending_buf,aN.pending-aI,aI)}j(aK);aI=aN.pending;if(aN.pending===aN.pending_buf_size){aG=1;break}}if(aN.gzindex<aN.gzhead.comment.length){aG=aN.gzhead.comment.charCodeAt(aN.gzindex++)&255}else{aG=0}f(aN,aG)}while(aG!==0);if(aN.gzhead.hcrc&&aN.pending>aI){aK.adler=Z(aK.adler,aN.pending_buf,aN.pending-aI,aI)}if(aG===0){aN.status=s}}else{aN.status=s}}if(aN.status===s){if(aN.gzhead.hcrc){if(aN.pending+2>aN.pending_buf_size){j(aK)}if(aN.pending+2<=aN.pending_buf_size){f(aN,aK.adler&255);f(aN,(aK.adler>>8)&255);aK.adler=0;aN.status=aE}}else{aN.status=aE}}if(aN.pending!==0){j(aK);if(aK.avail_out===0){aN.last_flush=-1;return t}}else{if(aK.avail_in===0&&P(aL)<=P(aJ)&&aL!==n){return ag(aK,i)}}if(aN.status===B&&aK.avail_in!==0){return ag(aK,i)}if(aK.avail_in!==0||aN.lookahead!==0||(aL!==N&&aN.status!==B)){var aF=(aN.strategy===D)?ae(aN,aL):(aN.strategy===z?ad(aN,aL):ab[aN.level].func(aN,aL));if(aF===U||aF===h){aN.status=B}if(aF===an||aF===U){if(aK.avail_out===0){aN.last_flush=-1}return t}if(aF===v){if(aL===Y){aA._tr_align(aN)}else{if(aL!==T){aA._tr_stored_block(aN,0,0,false);if(aL===at){ay(aN.head);if(aN.lookahead===0){aN.strstart=0;aN.block_start=0;aN.insert=0}}}}j(aK);if(aK.avail_out===0){aN.last_flush=-1;return t}}}if(aL!==n){return t}if(aN.wrap<=0){return x}if(aN.wrap===2){f(aN,aK.adler&255);f(aN,(aK.adler>>8)&255);f(aN,(aK.adler>>16)&255);f(aN,(aK.adler>>24)&255);f(aN,aK.total_in&255);f(aN,(aK.total_in>>8)&255);f(aN,(aK.total_in>>16)&255);f(aN,(aK.total_in>>24)&255)}else{A(aN,aK.adler>>>16);A(aN,aK.adler&65535)}j(aK);if(aN.wrap>0){aN.wrap=-aN.wrap}return aN.pending!==0?t:x}function aw(aG){var aF;if(!aG||!aG.state){return ap}aF=aG.state.status;if(aF!==V&&aF!==r&&aF!==aa&&aF!==al&&aF!==s&&aF!==aE&&aF!==B){return ag(aG,ap)}aG.state=null;return aF===aE?ag(aG,w):t}L.deflateInit=W;L.deflateInit2=G;L.deflateReset=y;L.deflateResetKeep=ai;L.deflateSetHeader=aD;L.deflate=q;L.deflateEnd=aw;L.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":4,"./adler32":6,"./crc32":8,"./messages":14,"./trees":15}],10:[function(f,g,e){function h(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=false}g.exports=h},{}],11:[function(g,h,f){var i=30;var j=12;h.exports=function e(I,p){var q;var K;var v;var J;var u;var o;var B;var l;var z;var m;var C;var y;var F;var D;var G;var t;var w;var k;var s;var H;var A;var E;var n;var x,r;q=I.state;K=I.next_in;x=I.input;v=K+(I.avail_in-5);J=I.next_out;r=I.output;u=J-(p-I.avail_out);o=J+(I.avail_out-257);B=q.dmax;l=q.wsize;z=q.whave;m=q.wnext;C=q.window;y=q.hold;F=q.bits;D=q.lencode;G=q.distcode;t=(1<<q.lenbits)-1;w=(1<<q.distbits)-1;top:do{if(F<15){y+=x[K++]<<F;F+=8;y+=x[K++]<<F;F+=8}k=D[y&t];dolen:for(;;){s=k>>>24;y>>>=s;F-=s;s=(k>>>16)&255;if(s===0){r[J++]=k&65535}else{if(s&16){H=k&65535;s&=15;if(s){if(F<s){y+=x[K++]<<F;F+=8}H+=y&((1<<s)-1);y>>>=s;F-=s}if(F<15){y+=x[K++]<<F;F+=8;y+=x[K++]<<F;F+=8}k=G[y&w];dodist:for(;;){s=k>>>24;y>>>=s;F-=s;s=(k>>>16)&255;if(s&16){A=k&65535;s&=15;if(F<s){y+=x[K++]<<F;F+=8;if(F<s){y+=x[K++]<<F;F+=8}}A+=y&((1<<s)-1);if(A>B){I.msg="invalid distance too far back";q.mode=i;break top}y>>>=s;F-=s;s=J-u;if(A>s){s=A-s;if(s>z){if(q.sane){I.msg="invalid distance too far back";q.mode=i;break top}}E=0;n=C;if(m===0){E+=l-s;if(s<H){H-=s;do{r[J++]=C[E++]}while(--s);E=J-A;n=r}}else{if(m<s){E+=l+m-s;s-=m;if(s<H){H-=s;do{r[J++]=C[E++]}while(--s);E=0;if(m<H){s=m;H-=s;do{r[J++]=C[E++]}while(--s);E=J-A;n=r}}}else{E+=m-s;if(s<H){H-=s;do{r[J++]=C[E++]}while(--s);E=J-A;n=r}}}while(H>2){r[J++]=n[E++];r[J++]=n[E++];r[J++]=n[E++];H-=3}if(H){r[J++]=n[E++];if(H>1){r[J++]=n[E++]}}}else{E=J-A;do{r[J++]=r[E++];r[J++]=r[E++];r[J++]=r[E++];H-=3}while(H>2);if(H){r[J++]=r[E++];if(H>1){r[J++]=r[E++]}}}}else{if((s&64)===0){k=G[(k&65535)+(y&((1<<s)-1))];continue dodist}else{I.msg="invalid distance code";q.mode=i;break top}}break}}else{if((s&64)===0){k=D[(k&65535)+(y&((1<<s)-1))];continue dolen}else{if(s&32){q.mode=j;break top}else{I.msg="invalid literal/length code";q.mode=i;break top}}}}break}}while(K<v&&J<o);H=F>>3;K-=H;F-=H<<3;y&=(1<<F)-1;I.next_in=K;I.next_out=J;I.avail_in=(K<v?5+(v-K):5-(K-v));I.avail_out=(J<o?257+(o-J):257-(J-o));q.hold=y;q.bits=F;return}},{}],12:[function(ar,ax,N){var S=ar("../utils/common");var M=ar("./adler32");var ad=ar("./crc32");var ap=ar("./inffast");var n=ar("./inftrees");var ac=0;var ae=1;var J=2;var p=4;var T=5;var C=6;var v=0;var z=1;var u=2;var at=-2;var x=-3;var L=-4;var j=-5;var aa=8;var al=1;var ak=2;var k=3;var ag=4;var E=5;var f=6;var t=7;var Y=8;var r=9;var aq=10;var w=11;var m=12;var ai=13;var h=14;var az=15;var ao=16;var o=17;var A=18;var U=19;var Z=20;var e=21;var aw=22;var V=23;var au=24;var D=25;var F=26;var an=27;var W=28;var B=29;var g=30;var ay=31;var G=32;var X=852;var P=592;var Q=15;var K=Q;function s(aA){return(((aA>>>24)&255)+((aA>>>8)&65280)+((aA&65280)<<8)+((aA&255)<<24))}function af(){this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new S.Buf16(320);this.work=new S.Buf16(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}function R(aA){var aB;if(!aA||!aA.state){return at}aB=aA.state;aA.total_in=aA.total_out=aB.total=0;aA.msg="";if(aB.wrap){aA.adler=aB.wrap&1}aB.mode=al;aB.last=0;aB.havedict=0;aB.dmax=32768;aB.head=null;aB.hold=0;aB.bits=0;aB.lencode=aB.lendyn=new S.Buf32(X);aB.distcode=aB.distdyn=new S.Buf32(P);aB.sane=1;aB.back=-1;return v}function av(aA){var aB;if(!aA||!aA.state){return at}aB=aA.state;aB.wsize=0;aB.whave=0;aB.wnext=0;return R(aA)}function y(aA,aC){var aB;var aD;if(!aA||!aA.state){return at}aD=aA.state;if(aC<0){aB=0;aC=-aC}else{aB=(aC>>4)+1;if(aC<48){aC&=15}}if(aC&&(aC<8||aC>15)){return at}if(aD.window!==null&&aD.wbits!==aC){aD.window=null}aD.wrap=aB;aD.wbits=aC;return av(aA)}function q(aA,aC){var aB;var aD;if(!aA){return at}aD=new af();aA.state=aD;aD.window=null;aB=y(aA,aC);if(aB!==v){aA.state=null}return aB}function I(aA){return q(aA,K)}var ah=true;var am,l;function H(aB){if(ah){var aA;am=new S.Buf32(512);l=new S.Buf32(32);aA=0;while(aA<144){aB.lens[aA++]=8}while(aA<256){aB.lens[aA++]=9}while(aA<280){aB.lens[aA++]=7}while(aA<288){aB.lens[aA++]=8}n(ae,aB.lens,0,288,am,0,aB.work,{bits:9});aA=0;while(aA<32){aB.lens[aA++]=5}n(J,aB.lens,0,32,l,0,aB.work,{bits:5});ah=false}aB.lencode=am;aB.lenbits=9;aB.distcode=l;aB.distbits=5}function O(aB,aE,aA,aF){var aD;var aC=aB.state;if(aC.window===null){aC.wsize=1<<aC.wbits;aC.wnext=0;aC.whave=0;aC.window=new S.Buf8(aC.wsize)}if(aF>=aC.wsize){S.arraySet(aC.window,aE,aA-aC.wsize,aC.wsize,0);aC.wnext=0;aC.whave=aC.wsize}else{aD=aC.wsize-aC.wnext;if(aD>aF){aD=aF}S.arraySet(aC.window,aE,aA-aF,aD,aC.wnext);aF-=aD;if(aF){S.arraySet(aC.window,aE,aA-aF,aF,0);aC.wnext=aF;aC.whave=aC.wsize}else{aC.wnext+=aD;if(aC.wnext===aC.wsize){aC.wnext=0}if(aC.whave<aC.wsize){aC.whave+=aD}}}return 0}function ab(aX,aR){var aF;var aK,aI;var aP;var aG;var aD,aE;var aN;var aT;var a1,a0;var aS;var aU;var aC;var aA=0;var aY,aJ,aZ;var aO,aB,aL;var aW;var a2;var aH=new S.Buf8(4);var aM;var aQ;var aV=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!aX||!aX.state||!aX.output||(!aX.input&&aX.avail_in!==0)){return at}aF=aX.state;if(aF.mode===m){aF.mode=ai}aG=aX.next_out;aI=aX.output;aE=aX.avail_out;aP=aX.next_in;aK=aX.input;aD=aX.avail_in;aN=aF.hold;aT=aF.bits;a1=aD;a0=aE;a2=v;inf_leave:for(;;){switch(aF.mode){case al:if(aF.wrap===0){aF.mode=ai;break}while(aT<16){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if((aF.wrap&2)&&aN===35615){aF.check=0;aH[0]=aN&255;aH[1]=(aN>>>8)&255;aF.check=ad(aF.check,aH,2,0);aN=0;aT=0;aF.mode=ak;break}aF.flags=0;if(aF.head){aF.head.done=false}if(!(aF.wrap&1)||(((aN&255)<<8)+(aN>>8))%31){aX.msg="incorrect header check";aF.mode=g;break}if((aN&15)!==aa){aX.msg="unknown compression method";aF.mode=g;break}aN>>>=4;aT-=4;aW=(aN&15)+8;if(aF.wbits===0){aF.wbits=aW}else{if(aW>aF.wbits){aX.msg="invalid window size";aF.mode=g;break}}aF.dmax=1<<aW;aX.adler=aF.check=1;aF.mode=aN&512?aq:m;aN=0;aT=0;break;case ak:while(aT<16){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.flags=aN;if((aF.flags&255)!==aa){aX.msg="unknown compression method";aF.mode=g;break}if(aF.flags&57344){aX.msg="unknown header flags set";aF.mode=g;break}if(aF.head){aF.head.text=((aN>>8)&1)}if(aF.flags&512){aH[0]=aN&255;aH[1]=(aN>>>8)&255;aF.check=ad(aF.check,aH,2,0)}aN=0;aT=0;aF.mode=k;case k:while(aT<32){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aF.head){aF.head.time=aN}if(aF.flags&512){aH[0]=aN&255;aH[1]=(aN>>>8)&255;aH[2]=(aN>>>16)&255;aH[3]=(aN>>>24)&255;aF.check=ad(aF.check,aH,4,0)}aN=0;aT=0;aF.mode=ag;case ag:while(aT<16){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aF.head){aF.head.xflags=(aN&255);aF.head.os=(aN>>8)}if(aF.flags&512){aH[0]=aN&255;aH[1]=(aN>>>8)&255;aF.check=ad(aF.check,aH,2,0)}aN=0;aT=0;aF.mode=E;case E:if(aF.flags&1024){while(aT<16){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.length=aN;if(aF.head){aF.head.extra_len=aN}if(aF.flags&512){aH[0]=aN&255;aH[1]=(aN>>>8)&255;aF.check=ad(aF.check,aH,2,0)}aN=0;aT=0}else{if(aF.head){aF.head.extra=null}}aF.mode=f;case f:if(aF.flags&1024){aS=aF.length;if(aS>aD){aS=aD}if(aS){if(aF.head){aW=aF.head.extra_len-aF.length;if(!aF.head.extra){aF.head.extra=new Array(aF.head.extra_len)}S.arraySet(aF.head.extra,aK,aP,aS,aW)}if(aF.flags&512){aF.check=ad(aF.check,aK,aS,aP)}aD-=aS;aP+=aS;aF.length-=aS}if(aF.length){break inf_leave}}aF.length=0;aF.mode=t;case t:if(aF.flags&2048){if(aD===0){break inf_leave}aS=0;do{aW=aK[aP+aS++];if(aF.head&&aW&&(aF.length<65536)){aF.head.name+=String.fromCharCode(aW)}}while(aW&&aS<aD);if(aF.flags&512){aF.check=ad(aF.check,aK,aS,aP)}aD-=aS;aP+=aS;if(aW){break inf_leave}}else{if(aF.head){aF.head.name=null}}aF.length=0;aF.mode=Y;case Y:if(aF.flags&4096){if(aD===0){break inf_leave}aS=0;do{aW=aK[aP+aS++];if(aF.head&&aW&&(aF.length<65536)){aF.head.comment+=String.fromCharCode(aW)}}while(aW&&aS<aD);if(aF.flags&512){aF.check=ad(aF.check,aK,aS,aP)}aD-=aS;aP+=aS;if(aW){break inf_leave}}else{if(aF.head){aF.head.comment=null}}aF.mode=r;case r:if(aF.flags&512){while(aT<16){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aN!==(aF.check&65535)){aX.msg="header crc mismatch";aF.mode=g;break}aN=0;aT=0}if(aF.head){aF.head.hcrc=((aF.flags>>9)&1);aF.head.done=true}aX.adler=aF.check=0;aF.mode=m;break;case aq:while(aT<32){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aX.adler=aF.check=s(aN);aN=0;aT=0;aF.mode=w;case w:if(aF.havedict===0){aX.next_out=aG;aX.avail_out=aE;aX.next_in=aP;aX.avail_in=aD;aF.hold=aN;aF.bits=aT;return u}aX.adler=aF.check=1;aF.mode=m;case m:if(aR===T||aR===C){break inf_leave}case ai:if(aF.last){aN>>>=aT&7;aT-=aT&7;aF.mode=an;break}while(aT<3){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.last=(aN&1);aN>>>=1;aT-=1;switch((aN&3)){case 0:aF.mode=h;break;case 1:H(aF);aF.mode=Z;if(aR===C){aN>>>=2;aT-=2;break inf_leave}break;case 2:aF.mode=o;break;case 3:aX.msg="invalid block type";aF.mode=g}aN>>>=2;aT-=2;break;case h:aN>>>=aT&7;aT-=aT&7;while(aT<32){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if((aN&65535)!==((aN>>>16)^65535)){aX.msg="invalid stored block lengths";aF.mode=g;break}aF.length=aN&65535;aN=0;aT=0;aF.mode=az;if(aR===C){break inf_leave}case az:aF.mode=ao;case ao:aS=aF.length;if(aS){if(aS>aD){aS=aD}if(aS>aE){aS=aE}if(aS===0){break inf_leave}S.arraySet(aI,aK,aP,aS,aG);aD-=aS;aP+=aS;aE-=aS;aG+=aS;aF.length-=aS;break}aF.mode=m;break;case o:while(aT<14){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.nlen=(aN&31)+257;aN>>>=5;aT-=5;aF.ndist=(aN&31)+1;aN>>>=5;aT-=5;aF.ncode=(aN&15)+4;aN>>>=4;aT-=4;if(aF.nlen>286||aF.ndist>30){aX.msg="too many length or distance symbols";aF.mode=g;break}aF.have=0;aF.mode=A;case A:while(aF.have<aF.ncode){while(aT<3){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.lens[aV[aF.have++]]=(aN&7);aN>>>=3;aT-=3}while(aF.have<19){aF.lens[aV[aF.have++]]=0}aF.lencode=aF.lendyn;aF.lenbits=7;aM={bits:aF.lenbits};a2=n(ac,aF.lens,0,19,aF.lencode,0,aF.work,aM);aF.lenbits=aM.bits;if(a2){aX.msg="invalid code lengths set";aF.mode=g;break}aF.have=0;aF.mode=U;case U:while(aF.have<aF.nlen+aF.ndist){for(;;){aA=aF.lencode[aN&((1<<aF.lenbits)-1)];aY=aA>>>24;aJ=(aA>>>16)&255;aZ=aA&65535;if((aY)<=aT){break}if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aZ<16){aN>>>=aY;aT-=aY;aF.lens[aF.have++]=aZ}else{if(aZ===16){aQ=aY+2;while(aT<aQ){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aN>>>=aY;aT-=aY;if(aF.have===0){aX.msg="invalid bit length repeat";aF.mode=g;break}aW=aF.lens[aF.have-1];aS=3+(aN&3);aN>>>=2;aT-=2}else{if(aZ===17){aQ=aY+3;while(aT<aQ){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aN>>>=aY;aT-=aY;aW=0;aS=3+(aN&7);aN>>>=3;aT-=3}else{aQ=aY+7;while(aT<aQ){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aN>>>=aY;aT-=aY;aW=0;aS=11+(aN&127);aN>>>=7;aT-=7}}if(aF.have+aS>aF.nlen+aF.ndist){aX.msg="invalid bit length repeat";aF.mode=g;break}while(aS--){aF.lens[aF.have++]=aW}}}if(aF.mode===g){break}if(aF.lens[256]===0){aX.msg="invalid code -- missing end-of-block";aF.mode=g;break}aF.lenbits=9;aM={bits:aF.lenbits};a2=n(ae,aF.lens,0,aF.nlen,aF.lencode,0,aF.work,aM);aF.lenbits=aM.bits;if(a2){aX.msg="invalid literal/lengths set";aF.mode=g;break}aF.distbits=6;aF.distcode=aF.distdyn;aM={bits:aF.distbits};a2=n(J,aF.lens,aF.nlen,aF.ndist,aF.distcode,0,aF.work,aM);aF.distbits=aM.bits;if(a2){aX.msg="invalid distances set";aF.mode=g;break}aF.mode=Z;if(aR===C){break inf_leave}case Z:aF.mode=e;case e:if(aD>=6&&aE>=258){aX.next_out=aG;aX.avail_out=aE;aX.next_in=aP;aX.avail_in=aD;aF.hold=aN;aF.bits=aT;ap(aX,a0);aG=aX.next_out;aI=aX.output;aE=aX.avail_out;aP=aX.next_in;aK=aX.input;aD=aX.avail_in;aN=aF.hold;aT=aF.bits;if(aF.mode===m){aF.back=-1}break}aF.back=0;for(;;){aA=aF.lencode[aN&((1<<aF.lenbits)-1)];aY=aA>>>24;aJ=(aA>>>16)&255;aZ=aA&65535;if(aY<=aT){break}if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aJ&&(aJ&240)===0){aO=aY;aB=aJ;aL=aZ;for(;;){aA=aF.lencode[aL+((aN&((1<<(aO+aB))-1))>>aO)];aY=aA>>>24;aJ=(aA>>>16)&255;aZ=aA&65535;if((aO+aY)<=aT){break}if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aN>>>=aO;aT-=aO;aF.back+=aO}aN>>>=aY;aT-=aY;aF.back+=aY;aF.length=aZ;if(aJ===0){aF.mode=F;break}if(aJ&32){aF.back=-1;aF.mode=m;break}if(aJ&64){aX.msg="invalid literal/length code";aF.mode=g;break}aF.extra=aJ&15;aF.mode=aw;case aw:if(aF.extra){aQ=aF.extra;while(aT<aQ){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.length+=aN&((1<<aF.extra)-1);aN>>>=aF.extra;aT-=aF.extra;aF.back+=aF.extra}aF.was=aF.length;aF.mode=V;case V:for(;;){aA=aF.distcode[aN&((1<<aF.distbits)-1)];aY=aA>>>24;aJ=(aA>>>16)&255;aZ=aA&65535;if((aY)<=aT){break}if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if((aJ&240)===0){aO=aY;aB=aJ;aL=aZ;for(;;){aA=aF.distcode[aL+((aN&((1<<(aO+aB))-1))>>aO)];aY=aA>>>24;aJ=(aA>>>16)&255;aZ=aA&65535;if((aO+aY)<=aT){break}if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aN>>>=aO;aT-=aO;aF.back+=aO}aN>>>=aY;aT-=aY;aF.back+=aY;if(aJ&64){aX.msg="invalid distance code";aF.mode=g;break}aF.offset=aZ;aF.extra=(aJ)&15;aF.mode=au;case au:if(aF.extra){aQ=aF.extra;while(aT<aQ){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.offset+=aN&((1<<aF.extra)-1);aN>>>=aF.extra;aT-=aF.extra;aF.back+=aF.extra}if(aF.offset>aF.dmax){aX.msg="invalid distance too far back";aF.mode=g;break}aF.mode=D;case D:if(aE===0){break inf_leave}aS=a0-aE;if(aF.offset>aS){aS=aF.offset-aS;if(aS>aF.whave){if(aF.sane){aX.msg="invalid distance too far back";aF.mode=g;break}}if(aS>aF.wnext){aS-=aF.wnext;aU=aF.wsize-aS}else{aU=aF.wnext-aS}if(aS>aF.length){aS=aF.length}aC=aF.window}else{aC=aI;aU=aG-aF.offset;aS=aF.length}if(aS>aE){aS=aE}aE-=aS;aF.length-=aS;do{aI[aG++]=aC[aU++]}while(--aS);if(aF.length===0){aF.mode=e}break;case F:if(aE===0){break inf_leave}aI[aG++]=aF.length;aE--;aF.mode=e;break;case an:if(aF.wrap){while(aT<32){if(aD===0){break inf_leave}aD--;aN|=aK[aP++]<<aT;aT+=8}a0-=aE;aX.total_out+=a0;aF.total+=a0;if(a0){aX.adler=aF.check=(aF.flags?ad(aF.check,aI,a0,aG-a0):M(aF.check,aI,a0,aG-a0))}a0=aE;if((aF.flags?aN:s(aN))!==aF.check){aX.msg="incorrect data check";aF.mode=g;break}aN=0;aT=0}aF.mode=W;case W:if(aF.wrap&&aF.flags){while(aT<32){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aN!==(aF.total&4294967295)){aX.msg="incorrect length check";aF.mode=g;break}aN=0;aT=0}aF.mode=B;case B:a2=z;break inf_leave;case g:a2=x;break inf_leave;case ay:return L;case G:default:return at}}aX.next_out=aG;aX.avail_out=aE;aX.next_in=aP;aX.avail_in=aD;aF.hold=aN;aF.bits=aT;if(aF.wsize||(a0!==aX.avail_out&&aF.mode<g&&(aF.mode<an||aR!==p))){if(O(aX,aX.output,aX.next_out,a0-aX.avail_out)){aF.mode=ay;return L}}a1-=aX.avail_in;a0-=aX.avail_out;aX.total_in+=a1;aX.total_out+=a0;aF.total+=a0;if(aF.wrap&&a0){aX.adler=aF.check=(aF.flags?ad(aF.check,aI,a0,aX.next_out-a0):M(aF.check,aI,a0,aX.next_out-a0))}aX.data_type=aF.bits+(aF.last?64:0)+(aF.mode===m?128:0)+(aF.mode===Z||aF.mode===az?256:0);if(((a1===0&&a0===0)||aR===p)&&a2===v){a2=j}return a2}function aj(aA){if(!aA||!aA.state){return at}var aB=aA.state;if(aB.window){aB.window=null}aA.state=null;return v}function i(aA,aB){var aC;if(!aA||!aA.state){return at}aC=aA.state;if((aC.wrap&2)===0){return at}aC.head=aB;aB.done=false;return v}N.inflateReset=av;N.inflateReset2=y;N.inflateResetKeep=R;N.inflateInit=I;N.inflateInit2=q;N.inflate=ab;N.inflateEnd=aj;N.inflateGetHeader=i;N.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":4,"./adler32":6,"./crc32":8,"./inffast":11,"./inftrees":13}],13:[function(h,f,i){var r=h("../utils/common");var q=15;var n=852;var m=592;var p=0;var k=1;var g=2;var o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var j=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var e=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];f.exports=function l(v,aa,I,X,W,U,H,E){var L=E.bits;var S=0;var D=0;var K=0,R=0;var J=0;var V=0;var B=0;var w=0;var z=0;var Q=0;var P;var M;var ab;var O;var G;var y=null;var F=0;var u;var A=new r.Buf16(q+1);var x=new r.Buf16(q+1);var t=null;var Z=0;var T,C,Y;for(S=0;S<=q;S++){A[S]=0}for(D=0;D<X;D++){A[aa[I+D]]++}J=L;for(R=q;R>=1;R--){if(A[R]!==0){break}}if(J>R){J=R}if(R===0){W[U++]=(1<<24)|(64<<16)|0;W[U++]=(1<<24)|(64<<16)|0;E.bits=1;return 0}for(K=1;K<R;K++){if(A[K]!==0){break}}if(J<K){J=K}w=1;for(S=1;S<=q;S++){w<<=1;w-=A[S];if(w<0){return -1}}if(w>0&&(v===p||R!==1)){return -1}x[1]=0;for(S=1;S<q;S++){x[S+1]=x[S]+A[S]}for(D=0;D<X;D++){if(aa[I+D]!==0){H[x[aa[I+D]]++]=D}}if(v===p){y=t=H;u=19}else{if(v===k){y=o;F-=257;t=s;Z-=257;u=256}else{y=j;t=e;u=-1}}Q=0;D=0;S=K;G=U;V=J;B=0;ab=-1;z=1<<J;O=z-1;if((v===k&&z>n)||(v===g&&z>m)){return 1}var N=0;for(;;){N++;T=S-B;if(H[D]<u){C=0;Y=H[D]}else{if(H[D]>u){C=t[Z+H[D]];Y=y[F+H[D]]}else{C=32+64;Y=0}}P=1<<(S-B);M=1<<V;K=M;do{M-=P;W[G+(Q>>B)+M]=(T<<24)|(C<<16)|Y|0}while(M!==0);P=1<<(S-1);while(Q&P){P>>=1}if(P!==0){Q&=P-1;Q+=P}else{Q=0}D++;if(--A[S]===0){if(S===R){break}S=aa[I+H[D]]}if(S>J&&(Q&O)!==ab){if(B===0){B=J}G+=K;V=S-B;w=1<<V;while(V+B<R){w-=A[V+B];if(w<=0){break}V++;w<<=1}z+=1<<V;if((v===k&&z>n)||(v===g&&z>m)){return 1}ab=Q&O;W[ab]=(J<<24)|(V<<16)|(G-U)|0}}if(Q!==0){W[G+Q]=((S-B)<<24)|(64<<16)|0}E.bits=J;return 0}},{"../utils/common":4}],14:[function(f,g,e){g.exports={"2":"need dictionary","1":"stream end","0":"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],15:[function(m,k,al){var aw=m("../utils/common");var T=4;var u=0;var E=1;var F=2;function e(ay){var ax=ay.length;while(--ax>=0){ay[ax]=0}}var X=0;var an=1;var M=2;var av=3;var G=258;var r=29;var h=256;var i=h+1+r;var f=30;var x=19;var j=2*i+1;var ar=15;var A=16;var ag=7;var g=256;var J=16;var I=17;var N=18;var l=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var V=512;var P=new Array((i+2)*2);e(P);var ab=new Array(f*2);e(ab);var ah=new Array(V);e(ah);var B=new Array(G-av+1);e(B);var O=new Array(r);e(O);var aq=new Array(f);e(aq);var ae=function(aA,az,ay,ax,aB){this.static_tree=aA;this.extra_bits=az;this.extra_base=ay;this.elems=ax;this.max_length=aB;this.has_stree=aA&&aA.length};var aj;var aa;var z;var au=function(ay,ax){this.dyn_tree=ay;this.max_code=0;this.stat_desc=ax};function ac(ax){return ax<256?ah[ax]:ah[256+(ax>>>7)]}function p(ay,ax){ay.pending_buf[ay.pending++]=(ax)&255;ay.pending_buf[ay.pending++]=(ax>>>8)&255}function ai(ax,az,ay){if(ax.bi_valid>(A-ay)){ax.bi_buf|=(az<<ax.bi_valid)&65535;p(ax,ax.bi_buf);ax.bi_buf=az>>(A-ax.bi_valid);ax.bi_valid+=ay-A}else{ax.bi_buf|=(az<<ax.bi_valid)&65535;ax.bi_valid+=ay}}function am(ay,az,ax){ai(ay,ax[az*2],ax[az*2+1])}function C(az,ax){var ay=0;do{ay|=az&1;az>>>=1;ay<<=1}while(--ax>0);return ay>>>1}function w(ax){if(ax.bi_valid===16){p(ax,ax.bi_buf);ax.bi_buf=0;ax.bi_valid=0}else{if(ax.bi_valid>=8){ax.pending_buf[ax.pending++]=ax.bi_buf&255;ax.bi_buf>>=8;ax.bi_valid-=8}}}function o(aL,aG){var aM=aG.dyn_tree;var aH=aG.max_code;var aK=aG.stat_desc.static_tree;var az=aG.stat_desc.has_stree;var aB=aG.stat_desc.extra_bits;var ax=aG.stat_desc.extra_base;var aJ=aG.stat_desc.max_length;var aE;var ay,aA;var aI;var aD;var aF;var aC=0;for(aI=0;aI<=ar;aI++){aL.bl_count[aI]=0}aM[aL.heap[aL.heap_max]*2+1]=0;for(aE=aL.heap_max+1;aE<j;aE++){ay=aL.heap[aE];aI=aM[aM[ay*2+1]*2+1]+1;if(aI>aJ){aI=aJ;aC++}aM[ay*2+1]=aI;if(ay>aH){continue}aL.bl_count[aI]++;aD=0;if(ay>=ax){aD=aB[ay-ax]}aF=aM[ay*2];aL.opt_len+=aF*(aI+aD);if(az){aL.static_len+=aF*(aK[ay*2+1]+aD)}}if(aC===0){return}do{aI=aJ-1;while(aL.bl_count[aI]===0){aI--}aL.bl_count[aI]--;aL.bl_count[aI+1]+=2;aL.bl_count[aJ]--;aC-=2}while(aC>0);for(aI=aJ;aI!==0;aI--){ay=aL.bl_count[aI];while(ay!==0){aA=aL.heap[--aE];if(aA>aH){continue}if(aM[aA*2+1]!==aI){aL.opt_len+=(aI-aM[aA*2+1])*aM[aA*2];aM[aA*2+1]=aI}ay--}}}function ak(ay,aE,az){var aB=new Array(ar+1);var aA=0;var aC;var aD;for(aC=1;aC<=ar;aC++){aB[aC]=aA=(aA+az[aC-1])<<1}for(aD=0;aD<=aE;aD++){var ax=ay[aD*2+1];if(ax===0){continue}ay[aD*2]=C(aB[ax]++,ax)}}function W(){var aC;var aA;var az;var ay;var aB;var ax=new Array(ar+1);az=0;for(ay=0;ay<r-1;ay++){O[ay]=az;for(aC=0;aC<(1<<l[ay]);aC++){B[az++]=ay}}B[az-1]=ay;aB=0;for(ay=0;ay<16;ay++){aq[ay]=aB;for(aC=0;aC<(1<<y[ay]);aC++){ah[aB++]=ay}}aB>>=7;for(;ay<f;ay++){aq[ay]=aB<<7;for(aC=0;aC<(1<<(y[ay]-7));aC++){ah[256+aB++]=ay}}for(aA=0;aA<=ar;aA++){ax[aA]=0}aC=0;while(aC<=143){P[aC*2+1]=8;aC++;ax[8]++}while(aC<=255){P[aC*2+1]=9;aC++;ax[9]++}while(aC<=279){P[aC*2+1]=7;aC++;ax[7]++}while(aC<=287){P[aC*2+1]=8;aC++;ax[8]++}ak(P,i+1,ax);for(aC=0;aC<f;aC++){ab[aC*2+1]=5;ab[aC*2]=C(aC,5)}aj=new ae(P,l,h+1,i,ar);aa=new ae(ab,y,0,f,ar);z=new ae(new Array(0),D,0,x,ag)}function L(ax){var ay;for(ay=0;ay<i;ay++){ax.dyn_ltree[ay*2]=0}for(ay=0;ay<f;ay++){ax.dyn_dtree[ay*2]=0}for(ay=0;ay<x;ay++){ax.bl_tree[ay*2]=0}ax.dyn_ltree[g*2]=1;ax.opt_len=ax.static_len=0;ax.last_lit=ax.matches=0}function n(ax){if(ax.bi_valid>8){p(ax,ax.bi_buf)}else{if(ax.bi_valid>0){ax.pending_buf[ax.pending++]=ax.bi_buf}}ax.bi_buf=0;ax.bi_valid=0}function t(az,ay,ax,aA){n(az);if(aA){p(az,ax);p(az,~ax)}aw.arraySet(az.pending_buf,az.window,ay,ax,az.pending);az.pending+=ax}function Z(ay,aC,ax,aB){var aA=aC*2;var az=ax*2;return(ay[aA]<ay[az]||(ay[aA]===ay[az]&&aB[aC]<=aB[ax]))}function at(aB,ax,az){var ay=aB.heap[az];var aA=az<<1;while(aA<=aB.heap_len){if(aA<aB.heap_len&&Z(ax,aB.heap[aA+1],aB.heap[aA],aB.depth)){aA++}if(Z(ax,ay,aB.heap[aA],aB.depth)){break}aB.heap[az]=aB.heap[aA];az=aA;aA<<=1}aB.heap[az]=ay}function ap(ay,aE,aB){var aD;var aA;var aC=0;var az;var ax;if(ay.last_lit!==0){do{aD=(ay.pending_buf[ay.d_buf+aC*2]<<8)|(ay.pending_buf[ay.d_buf+aC*2+1]);aA=ay.pending_buf[ay.l_buf+aC];aC++;if(aD===0){am(ay,aA,aE)}else{az=B[aA];am(ay,az+h+1,aE);ax=l[az];if(ax!==0){aA-=O[az];ai(ay,aA,ax)}aD--;az=ac(aD);am(ay,az,aB);ax=y[az];if(ax!==0){aD-=aq[az];ai(ay,aD,ax)}}}while(aC<ay.last_lit)}am(ay,g,aE)}function Y(aF,aC){var aG=aC.dyn_tree;var aE=aC.stat_desc.static_tree;var az=aC.stat_desc.has_stree;var ax=aC.stat_desc.elems;var ay,aB;var aD=-1;var aA;aF.heap_len=0;aF.heap_max=j;for(ay=0;ay<ax;ay++){if(aG[ay*2]!==0){aF.heap[++aF.heap_len]=aD=ay;aF.depth[ay]=0}else{aG[ay*2+1]=0}}while(aF.heap_len<2){aA=aF.heap[++aF.heap_len]=(aD<2?++aD:0);aG[aA*2]=1;aF.depth[aA]=0;aF.opt_len--;if(az){aF.static_len-=aE[aA*2+1]}}aC.max_code=aD;for(ay=(aF.heap_len>>1);ay>=1;ay--){at(aF,aG,ay)}aA=ax;do{ay=aF.heap[1];aF.heap[1]=aF.heap[aF.heap_len--];at(aF,aG,1);aB=aF.heap[1];aF.heap[--aF.heap_max]=ay;aF.heap[--aF.heap_max]=aB;aG[aA*2]=aG[ay*2]+aG[aB*2];aF.depth[aA]=(aF.depth[ay]>=aF.depth[aB]?aF.depth[ay]:aF.depth[aB])+1;aG[ay*2+1]=aG[aB*2+1]=aA;aF.heap[1]=aA++;at(aF,aG,1)}while(aF.heap_len>=2);aF.heap[--aF.heap_max]=aF.heap[1];o(aF,aC);ak(aG,aD,aF.bl_count)}function s(aF,aG,aE){var ay;var aC=-1;var ax;var aA=aG[0*2+1];var aB=0;var az=7;var aD=4;if(aA===0){az=138;aD=3}aG[(aE+1)*2+1]=65535;for(ay=0;ay<=aE;ay++){ax=aA;aA=aG[(ay+1)*2+1];if(++aB<az&&ax===aA){continue}else{if(aB<aD){aF.bl_tree[ax*2]+=aB}else{if(ax!==0){if(ax!==aC){aF.bl_tree[ax*2]++}aF.bl_tree[J*2]++}else{if(aB<=10){aF.bl_tree[I*2]++}else{aF.bl_tree[N*2]++}}}}aB=0;aC=ax;if(aA===0){az=138;aD=3}else{if(ax===aA){az=6;aD=3}else{az=7;aD=4}}}}function v(aF,aG,aE){var ay;var aC=-1;var ax;var aA=aG[0*2+1];var aB=0;var az=7;var aD=4;if(aA===0){az=138;aD=3}for(ay=0;ay<=aE;ay++){ax=aA;aA=aG[(ay+1)*2+1];if(++aB<az&&ax===aA){continue}else{if(aB<aD){do{am(aF,ax,aF.bl_tree)}while(--aB!==0)}else{if(ax!==0){if(ax!==aC){am(aF,ax,aF.bl_tree);aB--}am(aF,J,aF.bl_tree);ai(aF,aB-3,2)}else{if(aB<=10){am(aF,I,aF.bl_tree);ai(aF,aB-3,3)}else{am(aF,N,aF.bl_tree);ai(aF,aB-11,7)}}}}aB=0;aC=ax;if(aA===0){az=138;aD=3}else{if(ax===aA){az=6;aD=3}else{az=7;aD=4}}}}function H(ay){var ax;s(ay,ay.dyn_ltree,ay.l_desc.max_code);s(ay,ay.dyn_dtree,ay.d_desc.max_code);Y(ay,ay.bl_desc);for(ax=x-1;ax>=3;ax--){if(ay.bl_tree[U[ax]*2+1]!==0){break}}ay.opt_len+=3*(ax+1)+5+5+4;return ax}function R(ay,az,ax,aA){var aB;ai(ay,az-257,5);ai(ay,ax-1,5);ai(ay,aA-4,4);for(aB=0;aB<aA;aB++){ai(ay,ay.bl_tree[U[aB]*2+1],3)}v(ay,ay.dyn_ltree,az-1);v(ay,ay.dyn_dtree,ax-1)}function Q(ay){var ax=4093624447;var az;for(az=0;az<=31;az++,ax>>>=1){if((ax&1)&&(ay.dyn_ltree[az*2]!==0)){return u}}if(ay.dyn_ltree[9*2]!==0||ay.dyn_ltree[10*2]!==0||ay.dyn_ltree[13*2]!==0){return E}for(az=32;az<h;az++){if(ay.dyn_ltree[az*2]!==0){return E}}return u}var af=false;function K(ax){if(!af){W();af=true}ax.l_desc=new au(ax.dyn_ltree,aj);ax.d_desc=new au(ax.dyn_dtree,aa);ax.bl_desc=new au(ax.bl_tree,z);ax.bi_buf=0;ax.bi_valid=0;L(ax)}function S(az,ax,ay,aA){ai(az,(X<<1)+(aA?1:0),3);t(az,ax,ay,true)}function ad(ax){ai(ax,an<<1,3);am(ax,g,P);w(ax)}function q(aC,az,aB,aD){var ay,ax;var aA=0;if(aC.level>0){if(aC.strm.data_type===F){aC.strm.data_type=Q(aC)}Y(aC,aC.l_desc);Y(aC,aC.d_desc);aA=H(aC);ay=(aC.opt_len+3+7)>>>3;ax=(aC.static_len+3+7)>>>3;if(ax<=ay){ay=ax}}else{ay=ax=aB+5}if((aB+4<=ay)&&(az!==-1)){S(aC,az,aB,aD)}else{if(aC.strategy===T||ax===ay){ai(aC,(an<<1)+(aD?1:0),3);ap(aC,P,ab)}else{ai(aC,(M<<1)+(aD?1:0),3);R(aC,aC.l_desc.max_code+1,aC.d_desc.max_code+1,aA+1);ap(aC,aC.dyn_ltree,aC.dyn_dtree)}}L(aC);if(aD){n(aC)}}function ao(ax,az,ay){ax.pending_buf[ax.d_buf+ax.last_lit*2]=(az>>>8)&255;ax.pending_buf[ax.d_buf+ax.last_lit*2+1]=az&255;ax.pending_buf[ax.l_buf+ax.last_lit]=ay&255;ax.last_lit++;if(az===0){ax.dyn_ltree[ay*2]++}else{ax.matches++;az--;ax.dyn_ltree[(B[ay]+h+1)*2]++;ax.dyn_dtree[ac(az)*2]++}return(ax.last_lit===ax.lit_bufsize-1)}al._tr_init=K;al._tr_stored_block=S;al._tr_flush_block=q;al._tr_tally=ao;al._tr_align=ad},{"../utils/common":4}],16:[function(f,g,e){function h(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}g.exports=h},{}],17:[function(f,g,e){var j=j||{};j.NIFTI1=j.NIFTI1||((typeof f!=="undefined")?f("./nifti1.js"):null);j.NIFTI2=j.NIFTI2||((typeof f!=="undefined")?f("./nifti2.js"):null);j.Utils=j.Utils||((typeof f!=="undefined")?f("./utilities.js"):null);var i=i||((typeof f!=="undefined")?f("pako"):null);j.isNIFTI1=function(o){var n,m,l,k;if(o.byteLength<j.NIFTI1.STANDARD_HEADER_SIZE){return false}n=new DataView(o);if(n){m=n.getUint8(j.NIFTI1.MAGIC_NUMBER_LOCATION)}l=n.getUint8(j.NIFTI1.MAGIC_NUMBER_LOCATION+1);k=n.getUint8(j.NIFTI1.MAGIC_NUMBER_LOCATION+2);return !!((m===j.NIFTI1.MAGIC_NUMBER[0])&&(l===j.NIFTI1.MAGIC_NUMBER[1])&&(k===j.NIFTI1.MAGIC_NUMBER[2]))};j.isNIFTI2=function(o){var n,m,l,k;if(o.byteLength<j.NIFTI1.STANDARD_HEADER_SIZE){return false}n=new DataView(o);m=n.getUint8(j.NIFTI2.MAGIC_NUMBER_LOCATION);l=n.getUint8(j.NIFTI2.MAGIC_NUMBER_LOCATION+1);k=n.getUint8(j.NIFTI2.MAGIC_NUMBER_LOCATION+2);return !!((m===j.NIFTI2.MAGIC_NUMBER[0])&&(l===j.NIFTI2.MAGIC_NUMBER[1])&&(k===j.NIFTI2.MAGIC_NUMBER[2]))};j.isNIFTI=function(k){return(j.isNIFTI1(k)||j.isNIFTI2(k))};j.isCompressed=function(n){var m,l,k;if(n){m=new DataView(n);l=m.getUint8(0);k=m.getUint8(1);if(l===j.Utils.GUNZIP_MAGIC_COOKIE1){return true}if(k===j.Utils.GUNZIP_MAGIC_COOKIE2){return true}}return false};j.decompress=function(k){return i.inflate(k).buffer};j.readHeader=function(k){var l=null;if(j.isCompressed(k)){k=j.decompress(k)}if(j.isNIFTI1(k)){l=new j.NIFTI1()}else{if(j.isNIFTI2(k)){l=new j.NIFTI2()}}if(l){l.readHeader(k)}else{console.error("That file does not appear to be NIFTI!")}return l};j.hasExtension=function(k){return(k.extensionFlag[0]!=0)};j.readImage=function(p,l){var n=p.vox_offset,m=1,o=1;if(p.dims[4]){m=p.dims[4]}if(p.dims[5]){o=p.dims[5]}var k=p.dims[1]*p.dims[2]*p.dims[3]*m*o*(p.numBitsPerVoxel/8);return l.slice(n,n+k)};j.readExtension=function(n,l){var m=n.getExtensionLocation(),k=n.extensionSize;return l.slice(m,m+k)};j.readExtensionData=function(n,l){var m=n.getExtensionLocation(),k=n.extensionSize;return l.slice(m+8,m+k-8)};var h=typeof g;if((h!=="undefined")&&g.exports){g.exports=j}},{"./nifti1.js":18,"./nifti2.js":19,"./utilities.js":20,pako:1}],18:[function(f,g,e){var i=i||{};i.Utils=i.Utils||((typeof f!=="undefined")?f("./utilities.js"):null);i.NIFTI1=i.NIFTI1||function(){this.littleEndian=false;this.dim_info=0;this.dims=[];this.intent_p1=0;this.intent_p2=0;this.intent_p3=0;this.intent_code=0;this.datatypeCode=0;this.numBitsPerVoxel=0;this.slice_start=0;this.slice_end=0;this.slice_code=0;this.pixDims=[];this.vox_offset=0;this.scl_slope=1;this.scl_inter=0;this.xyzt_units=0;this.cal_max=0;this.cal_min=0;this.slice_duration=0;this.toffset=0;this.description="";this.aux_file="";this.intent_name="";this.qform_code=0;this.sform_code=0;this.quatern_b=0;this.quatern_c=0;this.quatern_d=0;this.qoffset_x=0;this.qoffset_y=0;this.qoffset_z=0;this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];this.magic=0;this.isHDR=false;this.extensionFlag=[0,0,0,0];this.extensionSize=0;this.extensionCode=0};i.NIFTI1.TYPE_NONE=0;i.NIFTI1.TYPE_BINARY=1;i.NIFTI1.TYPE_UINT8=2;i.NIFTI1.TYPE_INT16=4;i.NIFTI1.TYPE_INT32=8;i.NIFTI1.TYPE_FLOAT32=16;i.NIFTI1.TYPE_COMPLEX64=32;i.NIFTI1.TYPE_FLOAT64=64;i.NIFTI1.TYPE_RGB24=128;i.NIFTI1.TYPE_INT8=256;i.NIFTI1.TYPE_UINT16=512;i.NIFTI1.TYPE_UINT32=768;i.NIFTI1.TYPE_INT64=1024;i.NIFTI1.TYPE_UINT64=1280;i.NIFTI1.TYPE_FLOAT128=1536;i.NIFTI1.TYPE_COMPLEX128=1792;i.NIFTI1.TYPE_COMPLEX256=2048;i.NIFTI1.XFORM_UNKNOWN=0;i.NIFTI1.XFORM_SCANNER_ANAT=1;i.NIFTI1.XFORM_ALIGNED_ANAT=2;i.NIFTI1.XFORM_TALAIRACH=3;i.NIFTI1.XFORM_MNI_152=4;i.NIFTI1.SPATIAL_UNITS_MASK=7;i.NIFTI1.TEMPORAL_UNITS_MASK=56;i.NIFTI1.UNITS_UNKNOWN=0;i.NIFTI1.UNITS_METER=1;i.NIFTI1.UNITS_MM=2;i.NIFTI1.UNITS_MICRON=3;i.NIFTI1.UNITS_SEC=8;i.NIFTI1.UNITS_MSEC=16;i.NIFTI1.UNITS_USEC=24;i.NIFTI1.UNITS_HZ=32;i.NIFTI1.UNITS_PPM=40;i.NIFTI1.UNITS_RADS=48;i.NIFTI1.MAGIC_COOKIE=348;i.NIFTI1.STANDARD_HEADER_SIZE=348;i.NIFTI1.MAGIC_NUMBER_LOCATION=344;i.NIFTI1.MAGIC_NUMBER=[110,43,49];i.NIFTI1.MAGIC_NUMBER2=[110,105,49];i.NIFTI1.EXTENSION_HEADER_SIZE=8;i.NIFTI1.prototype.readHeader=function(o){var p=new DataView(o),m=i.Utils.getIntAt(p,0,this.littleEndian),n,l,j,k;if(m!==i.NIFTI1.MAGIC_COOKIE){this.littleEndian=true;m=i.Utils.getIntAt(p,0,this.littleEndian)}if(m!==i.NIFTI1.MAGIC_COOKIE){throw new Error("This does not appear to be a NIFTI file!")}this.dim_info=i.Utils.getByteAt(p,39);for(n=0;n<8;n+=1){k=40+(n*2);this.dims[n]=i.Utils.getShortAt(p,k,this.littleEndian)}this.intent_p1=i.Utils.getFloatAt(p,56,this.littleEndian);this.intent_p2=i.Utils.getFloatAt(p,60,this.littleEndian);this.intent_p3=i.Utils.getFloatAt(p,64,this.littleEndian);this.intent_code=i.Utils.getShortAt(p,68,this.littleEndian);this.datatypeCode=i.Utils.getShortAt(p,70,this.littleEndian);this.numBitsPerVoxel=i.Utils.getShortAt(p,72,this.littleEndian);this.slice_start=i.Utils.getShortAt(p,74,this.littleEndian);for(n=0;n<8;n+=1){k=76+(n*4);this.pixDims[n]=i.Utils.getFloatAt(p,k,this.littleEndian)}this.vox_offset=i.Utils.getFloatAt(p,108,this.littleEndian);this.scl_slope=i.Utils.getFloatAt(p,112,this.littleEndian);this.scl_inter=i.Utils.getFloatAt(p,116,this.littleEndian);this.slice_end=i.Utils.getShortAt(p,120,this.littleEndian);this.slice_code=i.Utils.getByteAt(p,122);this.xyzt_units=i.Utils.getByteAt(p,123);this.cal_max=i.Utils.getFloatAt(p,124,this.littleEndian);this.cal_min=i.Utils.getFloatAt(p,128,this.littleEndian);this.slice_duration=i.Utils.getFloatAt(p,132,this.littleEndian);this.toffset=i.Utils.getFloatAt(p,136,this.littleEndian);this.description=i.Utils.getStringAt(p,148,228);this.aux_file=i.Utils.getStringAt(p,228,252);this.qform_code=i.Utils.getShortAt(p,252,this.littleEndian);this.sform_code=i.Utils.getShortAt(p,254,this.littleEndian);this.quatern_b=i.Utils.getFloatAt(p,256,this.littleEndian);this.quatern_c=i.Utils.getFloatAt(p,260,this.littleEndian);this.quatern_d=i.Utils.getFloatAt(p,264,this.littleEndian);this.qoffset_x=i.Utils.getFloatAt(p,268,this.littleEndian);this.qoffset_y=i.Utils.getFloatAt(p,272,this.littleEndian);this.qoffset_z=i.Utils.getFloatAt(p,276,this.littleEndian);for(l=0;l<3;l+=1){for(j=0;j<4;j+=1){k=280+(((l*4)+j)*4);this.affine[l][j]=i.Utils.getFloatAt(p,k,this.littleEndian)}}this.affine[3][0]=0;this.affine[3][1]=0;this.affine[3][2]=0;this.affine[3][3]=1;this.intent_name=i.Utils.getStringAt(p,328,344);this.magic=i.Utils.getStringAt(p,344,348);this.isHDR=(this.magic===i.NIFTI1.MAGIC_NUMBER2);if(p.byteLength>i.NIFTI1.MAGIC_COOKIE){this.extensionFlag[0]=i.Utils.getByteAt(p,348);this.extensionFlag[1]=i.Utils.getByteAt(p,348+1);this.extensionFlag[2]=i.Utils.getByteAt(p,348+2);this.extensionFlag[3]=i.Utils.getByteAt(p,348+3);if(this.extensionFlag[0]){this.extensionSize=this.getExtensionSize(p);this.extensionCode=this.getExtensionCode(p)}}};i.NIFTI1.prototype.toFormattedString=function(){var j=i.Utils.formatNumber,k="";k+=("Dim Info = "+this.dim_info+"\n");k+=("Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n");k+=("Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3)+"\n";k+=("Intent Code = "+this.intent_code+"\n");k+=("Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n");k+=("Bits Per Voxel = "+this.numBitsPerVoxel+"\n");k+=("Slice Start = "+this.slice_start+"\n");k+=("Voxel Dimensions (1-8): "+j(this.pixDims[0])+", "+j(this.pixDims[1])+", "+j(this.pixDims[2])+", "+j(this.pixDims[3])+", "+j(this.pixDims[4])+", "+j(this.pixDims[5])+", "+j(this.pixDims[6])+", "+j(this.pixDims[7])+"\n");k+=("Image Offset = "+this.vox_offset+"\n");k+=("Data Scale:  Slope = "+j(this.scl_slope)+"  Intercept = "+j(this.scl_inter)+"\n");k+=("Slice End = "+this.slice_end+"\n");k+=("Slice Code = "+this.slice_code+"\n");k+=("Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(i.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(i.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n");k+=("Display Range:  Max = "+j(this.cal_max)+"  Min = "+j(this.cal_min)+"\n");k+=("Slice Duration = "+this.slice_duration+"\n");k+=("Time Axis Shift = "+this.toffset+"\n");k+=('Description: "'+this.description+'"\n');k+=('Auxiliary File: "'+this.aux_file+'"\n');k+=("Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n");k+=("S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n");k+=("Quaternion Parameters:  b = "+j(this.quatern_b)+"  c = "+j(this.quatern_c)+"  d = "+j(this.quatern_d)+"\n");k+=("Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n");k+=("S-Form Parameters X: "+j(this.affine[0][0])+", "+j(this.affine[0][1])+", "+j(this.affine[0][2])+", "+j(this.affine[0][3])+"\n");k+=("S-Form Parameters Y: "+j(this.affine[1][0])+", "+j(this.affine[1][1])+", "+j(this.affine[1][2])+", "+j(this.affine[1][3])+"\n");k+=("S-Form Parameters Z: "+j(this.affine[2][0])+", "+j(this.affine[2][1])+", "+j(this.affine[2][2])+", "+j(this.affine[2][3])+"\n");k+=('Intent Name: "'+this.intent_name+'"\n');if(this.extensionFlag[0]){k+=("Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+"\n")}return k};i.NIFTI1.prototype.getDatatypeCodeString=function(j){if(j===i.NIFTI1.TYPE_UINT8){return"1-Byte Unsigned Integer"}else{if(j===i.NIFTI1.TYPE_INT16){return"2-Byte Signed Integer"}else{if(j===i.NIFTI1.TYPE_INT32){return"4-Byte Signed Integer"}else{if(j===i.NIFTI1.TYPE_FLOAT32){return"4-Byte Float"}else{if(j===i.NIFTI1.TYPE_FLOAT64){return"8-Byte Float"}else{if(j===i.NIFTI1.TYPE_RGB24){return"RGB"}else{if(j===i.NIFTI1.TYPE_INT8){return"1-Byte Signed Integer"}else{if(j===i.NIFTI1.TYPE_UINT16){return"2-Byte Unsigned Integer"}else{if(j===i.NIFTI1.TYPE_UINT32){return"4-Byte Unsigned Integer"}else{if(j===i.NIFTI1.TYPE_INT64){return"8-Byte Signed Integer"}else{if(j===i.NIFTI1.TYPE_UINT64){return"8-Byte Unsigned Integer"}else{return"Unknown"}}}}}}}}}}}};i.NIFTI1.prototype.getTransformCodeString=function(j){if(j===i.NIFTI1.XFORM_SCANNER_ANAT){return"Scanner"}else{if(j===i.NIFTI1.XFORM_ALIGNED_ANAT){return"Aligned"}else{if(j===i.NIFTI1.XFORM_TALAIRACH){return"Talairach"}else{if(j===i.NIFTI1.XFORM_MNI_152){return"MNI"}else{return"Unknown"}}}}};i.NIFTI1.prototype.getUnitsCodeString=function(j){if(j===i.NIFTI1.UNITS_METER){return"Meters"}else{if(j===i.NIFTI1.UNITS_MM){return"Millimeters"}else{if(j===i.NIFTI1.UNITS_MICRON){return"Microns"}else{if(j===i.NIFTI1.UNITS_SEC){return"Seconds"}else{if(j===i.NIFTI1.UNITS_MSEC){return"Milliseconds"}else{if(j===i.NIFTI1.UNITS_USEC){return"Microseconds"}else{if(j===i.NIFTI1.UNITS_HZ){return"Hz"}else{if(j===i.NIFTI1.UNITS_PPM){return"PPM"}else{if(j===i.NIFTI1.UNITS_RADS){return"Rads"}else{return"Unknown"}}}}}}}}}};i.NIFTI1.prototype.getQformMat=function(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])};i.NIFTI1.prototype.convertNiftiQFormToNiftiSForm=function(o,n,m,z,x,v,s,r,q,k){var l=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],A,y=o,w=n,u=m,t,j,p;l[3][0]=l[3][1]=l[3][2]=0;l[3][3]=1;A=1-(y*y+w*w+u*u);if(A<1e-7){A=1/Math.sqrt(y*y+w*w+u*u);y*=A;w*=A;u*=A;A=0}else{A=Math.sqrt(A)}t=(s>0)?s:1;j=(r>0)?r:1;p=(q>0)?q:1;if(k<0){p=-p}l[0][0]=(A*A+y*y-w*w-u*u)*t;l[0][1]=2*(y*w-A*u)*j;l[0][2]=2*(y*u+A*w)*p;l[1][0]=2*(y*w+A*u)*t;l[1][1]=(A*A+w*w-y*y-u*u)*j;l[1][2]=2*(w*u-A*y)*p;l[2][0]=2*(y*u-A*w)*t;l[2][1]=2*(w*u+A*y)*j;l[2][2]=(A*A+u*u-w*w-y*y)*p;l[0][3]=z;l[1][3]=x;l[2][3]=v;return l};i.NIFTI1.prototype.convertNiftiSFormToNEMA=function(u){var J,I,G,Z,W,U,y,w,t,aa,C,E,O,N,L,K,H,F,V,D,n,s,S,A,z,Y,v,x,T,B,m,X,l,o;L=0;v=[[0,0,0],[0,0,0],[0,0,0]];x=[[0,0,0],[0,0,0],[0,0,0]];J=u[0][0];I=u[0][1];G=u[0][2];Z=u[1][0];W=u[1][1];U=u[1][2];y=u[2][0];w=u[2][1];t=u[2][2];aa=Math.sqrt(J*J+Z*Z+y*y);if(aa===0){return null}J/=aa;Z/=aa;y/=aa;aa=Math.sqrt(I*I+W*W+w*w);if(aa===0){return null}I/=aa;W/=aa;w/=aa;aa=J*I+Z*W+y*w;if(Math.abs(aa)>0.0001){I-=aa*J;W-=aa*Z;w-=aa*y;aa=Math.sqrt(I*I+W*W+w*w);if(aa===0){return null}I/=aa;W/=aa;w/=aa}aa=Math.sqrt(G*G+U*U+t*t);if(aa===0){G=Z*w-y*W;U=y*I-w*J;t=J*W-Z*I}else{G/=aa;U/=aa;t/=aa}aa=J*G+Z*U+y*t;if(Math.abs(aa)>0.0001){G-=aa*J;U-=aa*Z;t-=aa*y;aa=Math.sqrt(G*G+U*U+t*t);if(aa===0){return null}G/=aa;U/=aa;t/=aa}aa=I*G+W*U+w*t;if(Math.abs(aa)>0.0001){G-=aa*I;U-=aa*W;t-=aa*w;aa=Math.sqrt(G*G+U*U+t*t);if(aa===0){return null}G/=aa;U/=aa;t/=aa}v[0][0]=J;v[0][1]=I;v[0][2]=G;v[1][0]=Z;v[1][1]=W;v[1][2]=U;v[2][0]=y;v[2][1]=w;v[2][2]=t;C=this.nifti_mat33_determ(v);if(C===0){return null}Y=-666;V=s=S=A=1;D=2;n=3;for(O=1;O<=3;O+=1){for(N=1;N<=3;N+=1){if(O!==N){for(L=1;L<=3;L+=1){if(!(O===L||N===L)){x[0][0]=x[0][1]=x[0][2]=x[1][0]=x[1][1]=x[1][2]=x[2][0]=x[2][1]=x[2][2]=0;for(K=-1;K<=1;K+=2){for(H=-1;H<=1;H+=2){for(F=-1;F<=1;F+=2){x[0][O-1]=K;x[1][N-1]=H;x[2][L-1]=F;E=this.nifti_mat33_determ(x);if((E*C)>0){z=this.nifti_mat33_mul(x,v);aa=z[0][0]+z[1][1]+z[2][2];if(aa>Y){Y=aa;V=O;D=N;n=L;s=K;S=H;A=F}}}}}}}}}}T=B=m=X=l=o=0;switch(V*s){case 1:T="X";X="+";break;case -1:T="X";X="-";break;case 2:T="Y";X="+";break;case -2:T="Y";X="-";break;case 3:T="Z";X="+";break;case -3:T="Z";X="-";break}switch(D*S){case 1:B="X";l="+";break;case -1:B="X";l="-";break;case 2:B="Y";l="+";break;case -2:B="Y";l="-";break;case 3:B="Z";l="+";break;case -3:B="Z";l="-";break}switch(n*A){case 1:m="X";o="+";break;case -1:m="X";o="-";break;case 2:m="Y";o="+";break;case -2:m="Y";o="-";break;case 3:m="Z";o="+";break;case -3:m="Z";o="-";break}return(T+B+m+X+l+o)};i.NIFTI1.prototype.nifti_mat33_mul=function(k,o){var n=[[0,0,0],[0,0,0],[0,0,0]],m,l;for(m=0;m<3;m+=1){for(l=0;l<3;l+=1){n[m][l]=k[m][0]*o[0][l]+k[m][1]*o[1][l]+k[m][2]*o[2][l]}}return n};i.NIFTI1.prototype.nifti_mat33_determ=function(m){var p,o,n,l,k,j,s,r,q;p=m[0][0];o=m[0][1];n=m[0][2];l=m[1][0];k=m[1][1];j=m[1][2];s=m[2][0];r=m[2][1];q=m[2][2];return(p*k*q-p*r*j-l*o*q+l*r*n+s*o*j-s*k*n)};i.NIFTI1.prototype.getExtensionLocation=function(){return i.NIFTI1.MAGIC_COOKIE+4};i.NIFTI1.prototype.getExtensionSize=function(j){return i.Utils.getIntAt(j,this.getExtensionLocation(),this.littleEndian)};i.NIFTI1.prototype.getExtensionCode=function(j){return i.Utils.getIntAt(j,this.getExtensionLocation()+4,this.littleEndian)};var h=typeof g;if((h!=="undefined")&&g.exports){g.exports=i.NIFTI1}},{"./utilities.js":20}],19:[function(f,g,e){var i=i||{};i.Utils=i.Utils||((typeof f!=="undefined")?f("./utilities.js"):null);i.NIFTI1=i.NIFTI1||((typeof f!=="undefined")?f("./nifti1.js"):null);i.NIFTI2=i.NIFTI2||function(){this.littleEndian=false;this.dim_info=0;this.dims=[];this.intent_p1=0;this.intent_p2=0;this.intent_p3=0;this.intent_code=0;this.datatypeCode=0;this.numBitsPerVoxel=0;this.slice_start=0;this.slice_end=0;this.slice_code=0;this.pixDims=[];this.vox_offset=0;this.scl_slope=1;this.scl_inter=0;this.xyzt_units=0;this.cal_max=0;this.cal_min=0;this.slice_duration=0;this.toffset=0;this.description="";this.aux_file="";this.intent_name="";this.qform_code=0;this.sform_code=0;this.quatern_b=0;this.quatern_c=0;this.quatern_d=0;this.qoffset_x=0;this.qoffset_y=0;this.qoffset_z=0;this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];this.magic=0;this.extensionFlag=[0,0,0,0]};i.NIFTI2.MAGIC_COOKIE=540;i.NIFTI2.MAGIC_NUMBER_LOCATION=4;i.NIFTI2.MAGIC_NUMBER=[110,43,50,0,13,10,26,10];i.NIFTI2.prototype.readHeader=function(o){var q=new DataView(o),m=i.Utils.getIntAt(q,0,this.littleEndian),n,l,j,k,p;if(m!==i.NIFTI2.MAGIC_COOKIE){this.littleEndian=true;m=i.Utils.getIntAt(q,0,this.littleEndian)}if(m!==i.NIFTI2.MAGIC_COOKIE){throw new Error("This does not appear to be a NIFTI file!")}this.datatypeCode=i.Utils.getShortAt(q,12,this.littleEndian);this.numBitsPerVoxel=i.Utils.getShortAt(q,14,this.littleEndian);for(n=0;n<8;n+=1){k=16+(n*8);this.dims[n]=i.Utils.getLongAt(q,k,this.littleEndian)}this.intent_p1=i.Utils.getDoubleAt(q,80,this.littleEndian);this.intent_p2=i.Utils.getDoubleAt(q,88,this.littleEndian);this.intent_p3=i.Utils.getDoubleAt(q,96,this.littleEndian);for(n=0;n<8;n+=1){k=104+(n*8);this.pixDims[n]=i.Utils.getDoubleAt(q,k,this.littleEndian)}this.vox_offset=i.Utils.getLongAt(q,168,this.littleEndian);this.scl_slope=i.Utils.getDoubleAt(q,176,this.littleEndian);this.scl_inter=i.Utils.getDoubleAt(q,184,this.littleEndian);this.cal_max=i.Utils.getDoubleAt(q,192,this.littleEndian);this.cal_min=i.Utils.getDoubleAt(q,200,this.littleEndian);this.slice_duration=i.Utils.getDoubleAt(q,208,this.littleEndian);this.toffset=i.Utils.getDoubleAt(q,216,this.littleEndian);this.slice_start=i.Utils.getLongAt(q,224,this.littleEndian);this.slice_end=i.Utils.getLongAt(q,232,this.littleEndian);this.description=i.Utils.getStringAt(q,240,240+80);this.aux_file=i.Utils.getStringAt(q,320,320+24);this.qform_code=i.Utils.getIntAt(q,344,this.littleEndian);this.sform_code=i.Utils.getIntAt(q,348,this.littleEndian);this.quatern_b=i.Utils.getDoubleAt(q,352,this.littleEndian);this.quatern_c=i.Utils.getDoubleAt(q,360,this.littleEndian);this.quatern_d=i.Utils.getDoubleAt(q,368,this.littleEndian);this.qoffset_x=i.Utils.getDoubleAt(q,376,this.littleEndian);this.qoffset_y=i.Utils.getDoubleAt(q,384,this.littleEndian);this.qoffset_z=i.Utils.getDoubleAt(q,392,this.littleEndian);for(l=0;l<3;l+=1){for(j=0;j<4;j+=1){k=400+(((l*4)+j)*8);this.affine[l][j]=i.Utils.getDoubleAt(q,k,this.littleEndian)}}this.affine[3][0]=0;this.affine[3][1]=0;this.affine[3][2]=0;this.affine[3][3]=1;this.slice_code=i.Utils.getIntAt(q,496,this.littleEndian);this.xyzt_units=i.Utils.getIntAt(q,500,this.littleEndian);this.intent_code=i.Utils.getIntAt(q,504,this.littleEndian);this.intent_name=i.Utils.getStringAt(q,508,508+16);this.dim_info=i.Utils.getByteAt(q,524);if(q.byteLength>i.NIFTI2.MAGIC_COOKIE){this.extensionFlag[0]=i.Utils.getByteAt(q,540);this.extensionFlag[1]=i.Utils.getByteAt(q,540+1);this.extensionFlag[2]=i.Utils.getByteAt(q,540+2);this.extensionFlag[3]=i.Utils.getByteAt(q,540+3);if(this.extensionFlag[0]){this.extensionSize=this.getExtensionSize(q);this.extensionCode=this.getExtensionCode(q)}}};i.NIFTI2.prototype.toFormattedString=function(){var j=i.Utils.formatNumber,k="";k+=("Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n");k+=("Bits Per Voxel =  = "+this.numBitsPerVoxel+"\n");k+=("Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n");k+=("Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3)+"\n";k+=("Voxel Dimensions (1-8): "+j(this.pixDims[0])+", "+j(this.pixDims[1])+", "+j(this.pixDims[2])+", "+j(this.pixDims[3])+", "+j(this.pixDims[4])+", "+j(this.pixDims[5])+", "+j(this.pixDims[6])+", "+j(this.pixDims[7])+"\n");k+=("Image Offset = "+this.vox_offset+"\n");k+=("Data Scale:  Slope = "+j(this.scl_slope)+"  Intercept = "+j(this.scl_inter)+"\n");k+=("Display Range:  Max = "+j(this.cal_max)+"  Min = "+j(this.cal_min)+"\n");k+=("Slice Duration = "+this.slice_duration+"\n");k+=("Time Axis Shift = "+this.toffset+"\n");k+=("Slice Start = "+this.slice_start+"\n");k+=("Slice End = "+this.slice_end+"\n");k+=('Description: "'+this.description+'"\n');k+=('Auxiliary File: "'+this.aux_file+'"\n');k+=("Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n");k+=("S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n");k+=("Quaternion Parameters:  b = "+j(this.quatern_b)+"  c = "+j(this.quatern_c)+"  d = "+j(this.quatern_d)+"\n");k+=("Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n");k+=("S-Form Parameters X: "+j(this.affine[0][0])+", "+j(this.affine[0][1])+", "+j(this.affine[0][2])+", "+j(this.affine[0][3])+"\n");k+=("S-Form Parameters Y: "+j(this.affine[1][0])+", "+j(this.affine[1][1])+", "+j(this.affine[1][2])+", "+j(this.affine[1][3])+"\n");k+=("S-Form Parameters Z: "+j(this.affine[2][0])+", "+j(this.affine[2][1])+", "+j(this.affine[2][2])+", "+j(this.affine[2][3])+"\n");k+=("Slice Code = "+this.slice_code+"\n");k+=("Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(i.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(i.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n");k+=("Intent Code = "+this.intent_code+"\n");k+=('Intent Name: "'+this.intent_name+'"\n');k+=("Dim Info = "+this.dim_info+"\n");return k};i.NIFTI2.prototype.getExtensionLocation=function(){return i.NIFTI2.MAGIC_COOKIE+4};i.NIFTI2.prototype.getExtensionSize=i.NIFTI1.prototype.getExtensionSize;i.NIFTI2.prototype.getExtensionCode=i.NIFTI1.prototype.getExtensionCode;i.NIFTI2.prototype.getDatatypeCodeString=i.NIFTI1.prototype.getDatatypeCodeString;i.NIFTI2.prototype.getTransformCodeString=i.NIFTI1.prototype.getTransformCodeString;i.NIFTI2.prototype.getUnitsCodeString=i.NIFTI1.prototype.getUnitsCodeString;i.NIFTI2.prototype.getQformMat=i.NIFTI1.prototype.getQformMat;i.NIFTI2.prototype.convertNiftiQFormToNiftiSForm=i.NIFTI1.prototype.convertNiftiQFormToNiftiSForm;i.NIFTI2.prototype.convertNiftiSFormToNEMA=i.NIFTI1.prototype.convertNiftiSFormToNEMA;i.NIFTI2.prototype.nifti_mat33_mul=i.NIFTI1.prototype.nifti_mat33_mul;i.NIFTI2.prototype.nifti_mat33_determ=i.NIFTI1.prototype.nifti_mat33_determ;var h=typeof g;if((h!=="undefined")&&g.exports){g.exports=i.NIFTI2}},{"./nifti1.js":18,"./utilities.js":20}],20:[function(f,g,e){var i=i||{};i.Utils=i.Utils||{};i.Utils.crcTable=null;i.Utils.GUNZIP_MAGIC_COOKIE1=31;i.Utils.GUNZIP_MAGIC_COOKIE2=139;i.Utils.getStringAt=function(m,o,j){var n="",l,k;for(l=o;l<j;l+=1){k=m.getUint8(l);if(k!==0){n+=String.fromCharCode(k)}}return n};i.Utils.getByteAt=function(j,k){return j.getInt8(k)};i.Utils.getShortAt=function(j,l,k){return j.getInt16(l,k)};i.Utils.getIntAt=function(j,l,k){return j.getInt32(l,k)};i.Utils.getFloatAt=function(j,l,k){return j.getFloat32(l,k)};i.Utils.getDoubleAt=function(j,l,k){return j.getFloat64(l,k)};i.Utils.getLongAt=function(l,o,m){var k,n=[],j=0;for(k=0;k<8;k+=1){n[k]=i.Utils.getByteAt(l,o+k,m)}for(k=n.length-1;k>=0;k--){j=(j*256)+n[k]}return j};i.Utils.toArrayBuffer=function(k){var m,j,l;m=new ArrayBuffer(k.length);j=new Uint8Array(m);for(l=0;l<k.length;l+=1){j[l]=k[l]}return m};i.Utils.isString=function(j){return(typeof j==="string"||j instanceof String)};i.Utils.formatNumber=function(k,j){var l=0;if(i.Utils.isString(k)){l=Number(k)}else{l=k}if(j){l=l.toPrecision(5)}else{l=l.toPrecision(7)}return parseFloat(l)};i.Utils.makeCRCTable=function(){var o;var j=[];for(var m=0;m<256;m++){o=m;for(var l=0;l<8;l++){o=((o&1)?(3988292384^(o>>>1)):(o>>>1))}j[m]=o}return j};i.Utils.crc32=function(m){var j=i.Utils.crcTable||(i.Utils.crcTable=i.Utils.makeCRCTable());var l=0^(-1);for(var k=0;k<m.byteLength;k++){l=(l>>>8)^j[(l^m.getUint8(k))&255]}return(l^(-1))>>>0};var h=typeof g;if((h!=="undefined")&&g.exports){g.exports=i.Utils}},{}]},{},[17])(17)});(function(b){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{var a;if(typeof window!=="undefined"){a=window}else{if(typeof global!=="undefined"){a=global}else{if(typeof self!=="undefined"){a=self}else{a=this}}}a.gifti=b()}}})(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(f,g,e){var i={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(k){var m=this._keyStr.indexOf(k.charAt(k.length-1));var l=this._keyStr.indexOf(k.charAt(k.length-2));var j=(k.length/4)*3;if(m==64){j--}if(l==64){j--}var n=new ArrayBuffer(j);this.decode(k,n,j);return n},decode:function(o,n,w){var m;var v,t,r;var u,s,q,p;var l=0;var k=0;if(n){m=new Uint8Array(n)}else{m=new Uint8Array(w)}o=o.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(l=0;l<w;l+=3){u=this._keyStr.indexOf(o.charAt(k++));s=this._keyStr.indexOf(o.charAt(k++));q=this._keyStr.indexOf(o.charAt(k++));p=this._keyStr.indexOf(o.charAt(k++));v=(u<<2)|(s>>4);t=((s&15)<<4)|(q>>2);r=((q&3)<<6)|p;m[l]=v;if(q!=64){m[l+1]=t}if(p!=64){m[l+2]=r}}return m}};var h=typeof g;if((h!=="undefined")&&g.exports){g.exports=i}},{}],2:[function(f,g,e){},{}],3:[function(f,g,e){(function(x){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
"use strict";var aH=f("base64-js");var j=f("ieee754");var i=f("isarray");e.Buffer=aF;e.SlowBuffer=aS;e.INSPECT_MAX_BYTES=50;aF.poolSize=8192;var a2={};aF.TYPED_ARRAY_SUPPORT=x.TYPED_ARRAY_SUPPORT!==undefined?x.TYPED_ARRAY_SUPPORT:aL();function aL(){try{var a5=new Uint8Array(1);a5.foo=function(){return 42};return a5.foo()===42&&typeof a5.subarray==="function"&&a5.subarray(1,1).byteLength===0}catch(a6){return false}}function ar(){return aF.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function aF(a5){if(!(this instanceof aF)){if(arguments.length>1){return new aF(a5,arguments[1])}return new aF(a5)}if(!aF.TYPED_ARRAY_SUPPORT){this.length=0;this.parent=undefined}if(typeof a5==="number"){return aw(this,a5)}if(typeof a5==="string"){return k(this,a5,arguments.length>1?arguments[1]:"utf8")}return ag(this,a5)}aF._augment=function(a5){a5.__proto__=aF.prototype;return a5};function aw(a7,a6){a7=o(a7,a6<0?0:aO(a6)|0);if(!aF.TYPED_ARRAY_SUPPORT){for(var a5=0;a5<a6;a5++){a7[a5]=0}}return a7}function k(a8,a5,a7){if(typeof a7!=="string"||a7===""){a7="utf8"}var a6=ax(a5,a7)|0;a8=o(a8,a6);a8.write(a5,a7);return a8}function ag(a6,a5){if(aF.isBuffer(a5)){return ac(a6,a5)}if(i(a5)){return aY(a6,a5)}if(a5==null){throw new TypeError("must start with number, buffer, array or string")}if(typeof ArrayBuffer!=="undefined"){if(a5.buffer instanceof ArrayBuffer){return R(a6,a5)}if(a5 instanceof ArrayBuffer){return am(a6,a5)}}if(a5.length){return O(a6,a5)}return az(a6,a5)}function ac(a7,a5){var a6=aO(a5.length)|0;a7=o(a7,a6);a5.copy(a7,0,0,a6);return a7}function aY(a7,a8){var a6=aO(a8.length)|0;a7=o(a7,a6);for(var a5=0;a5<a6;a5+=1){a7[a5]=a8[a5]&255}return a7}function R(a7,a8){var a6=aO(a8.length)|0;a7=o(a7,a6);for(var a5=0;a5<a6;a5+=1){a7[a5]=a8[a5]&255}return a7}function am(a5,a6){a6.byteLength;if(aF.TYPED_ARRAY_SUPPORT){a5=new Uint8Array(a6);a5.__proto__=aF.prototype}else{a5=R(a5,new Uint8Array(a6))}return a5}function O(a7,a8){var a6=aO(a8.length)|0;a7=o(a7,a6);for(var a5=0;a5<a6;a5+=1){a7[a5]=a8[a5]&255}return a7}function az(a8,a5){var a9;var a7=0;if(a5.type==="Buffer"&&i(a5.data)){a9=a5.data;a7=aO(a9.length)|0}a8=o(a8,a7);for(var a6=0;a6<a7;a6+=1){a8[a6]=a9[a6]&255}return a8}if(aF.TYPED_ARRAY_SUPPORT){aF.prototype.__proto__=Uint8Array.prototype;aF.__proto__=Uint8Array;if(typeof Symbol!=="undefined"&&Symbol.species&&aF[Symbol.species]===aF){Object.defineProperty(aF,Symbol.species,{value:null,configurable:true})}}else{aF.prototype.length=undefined;aF.prototype.parent=undefined}function o(a7,a6){if(aF.TYPED_ARRAY_SUPPORT){a7=new Uint8Array(a6);a7.__proto__=aF.prototype}else{a7.length=a6}var a5=a6!==0&&a6<=aF.poolSize>>>1;if(a5){a7.parent=a2}return a7}function aO(a5){if(a5>=ar()){throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ar().toString(16)+" bytes")}return a5|0}function aS(a6,a7){if(!(this instanceof aS)){return new aS(a6,a7)}var a5=new aF(a6,a7);delete a5.parent;return a5}aF.isBuffer=function A(a5){return !!(a5!=null&&a5._isBuffer)};aF.compare=function a1(a8,a7){if(!aF.isBuffer(a8)||!aF.isBuffer(a7)){throw new TypeError("Arguments must be Buffers")}if(a8===a7){return 0}var a6=a8.length;var ba=a7.length;var a9=0;var a5=Math.min(a6,ba);while(a9<a5){if(a8[a9]!==a7[a9]){break}++a9}if(a9!==a5){a6=a8[a9];ba=a7[a9]}if(a6<ba){return -1}if(ba<a6){return 1}return 0};aF.isEncoding=function X(a5){switch(String(a5).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};aF.concat=function aZ(a9,a8){if(!i(a9)){throw new TypeError("list argument must be an Array of Buffers.")}if(a9.length===0){return new aF(0)}var a6;if(a8===undefined){a8=0;for(a6=0;a6<a9.length;a6++){a8+=a9[a6].length}}var a5=new aF(a8);var ba=0;for(a6=0;a6<a9.length;a6++){var a7=a9[a6];a7.copy(a5,ba);ba+=a7.length}return a5};function ax(a6,a7){if(typeof a6!=="string"){a6=""+a6}var a5=a6.length;if(a5===0){return 0}var a8=false;for(;;){switch(a7){case"ascii":case"binary":case"raw":case"raws":return a5;case"utf8":case"utf-8":return aU(a6).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a5*2;case"hex":return a5>>>1;case"base64":return ah(a6).length;default:if(a8){return aU(a6).length}a7=(""+a7).toLowerCase();a8=true}}}aF.byteLength=ax;function Q(a6,a8,a5){var a7=false;a8=a8|0;a5=a5===undefined||a5===Infinity?this.length:a5|0;if(!a6){a6="utf8"}if(a8<0){a8=0}if(a5>this.length){a5=this.length}if(a5<=a8){return""}while(true){switch(a6){case"hex":return ae(this,a8,a5);case"utf8":case"utf-8":return aQ(this,a8,a5);case"ascii":return M(this,a8,a5);case"binary":return aR(this,a8,a5);case"base64":return aJ(this,a8,a5);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return al(this,a8,a5);default:if(a7){throw new TypeError("Unknown encoding: "+a6)}a6=(a6+"").toLowerCase();a7=true}}}aF.prototype._isBuffer=true;aF.prototype.toString=function at(){var a5=this.length|0;if(a5===0){return""}if(arguments.length===0){return aQ(this,0,a5)}return Q.apply(this,arguments)};aF.prototype.equals=function L(a5){if(!aF.isBuffer(a5)){throw new TypeError("Argument must be a Buffer")}if(this===a5){return true}return aF.compare(this,a5)===0};aF.prototype.inspect=function aV(){var a6="";var a5=e.INSPECT_MAX_BYTES;if(this.length>0){a6=this.toString("hex",0,a5).match(/.{2}/g).join(" ");if(this.length>a5){a6+=" ... "}}return"<Buffer "+a6+">"};aF.prototype.compare=function a1(a5){if(!aF.isBuffer(a5)){throw new TypeError("Argument must be a Buffer")}if(this===a5){return 0}return aF.compare(this,a5)};aF.prototype.indexOf=function n(a7,a6){if(a6>2147483647){a6=2147483647}else{if(a6<-2147483648){a6=-2147483648}}a6>>=0;if(this.length===0){return -1}if(a6>=this.length){return -1}if(a6<0){a6=Math.max(this.length+a6,0)}if(typeof a7==="string"){if(a7.length===0){return -1}return String.prototype.indexOf.call(this,a7,a6)}if(aF.isBuffer(a7)){return a5(this,a7,a6)}if(typeof a7==="number"){if(aF.TYPED_ARRAY_SUPPORT&&Uint8Array.prototype.indexOf==="function"){return Uint8Array.prototype.indexOf.call(this,a7,a6)}return a5(this,[a7],a6)}function a5(a8,bb,ba){var bc=-1;for(var a9=0;ba+a9<a8.length;a9++){if(a8[ba+a9]===bb[bc===-1?0:a9-bc]){if(bc===-1){bc=a9}if(a9-bc+1===bb.length){return ba+bc}}else{bc=-1}}return -1}throw new TypeError("val must be string, number or Buffer")};function u(a7,a6,bc,bb){bc=Number(bc)||0;var a9=a7.length-bc;if(!bb){bb=a9}else{bb=Number(bb);if(bb>a9){bb=a9}}var ba=a6.length;if(ba%2!==0){throw new Error("Invalid hex string")}if(bb>ba/2){bb=ba/2}for(var a8=0;a8<bb;a8++){var a5=parseInt(a6.substr(a8*2,2),16);if(isNaN(a5)){throw new Error("Invalid hex string")}a7[bc+a8]=a5}return a8}function Z(a6,a5,a8,a7){return Y(aU(a5,a6.length-a8),a6,a8,a7)}function a3(a6,a5,a8,a7){return Y(ai(a5),a6,a8,a7)}function aa(a6,a5,a8,a7){return a3(a6,a5,a8,a7)}function V(a6,a5,a8,a7){return Y(ah(a5),a6,a8,a7)}function z(a6,a5,a8,a7){return Y(av(a5,a6.length-a8),a6,a8,a7)}aF.prototype.write=function aX(a5,ba,a8,a7){if(ba===undefined){a7="utf8";a8=this.length;ba=0}else{if(a8===undefined&&typeof ba==="string"){a7=ba;a8=this.length;ba=0}else{if(isFinite(ba)){ba=ba|0;if(isFinite(a8)){a8=a8|0;if(a7===undefined){a7="utf8"}}else{a7=a8;a8=undefined}}else{var a9=a7;a7=ba;ba=a8|0;a8=a9}}}var a6=this.length-ba;if(a8===undefined||a8>a6){a8=a6}if((a5.length>0&&(a8<0||ba<0))||ba>this.length){throw new RangeError("attempt to write outside buffer bounds")}if(!a7){a7="utf8"}var bb=false;for(;;){switch(a7){case"hex":return u(this,a5,ba,a8);case"utf8":case"utf-8":return Z(this,a5,ba,a8);case"ascii":return a3(this,a5,ba,a8);case"binary":return aa(this,a5,ba,a8);case"base64":return V(this,a5,ba,a8);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,a5,ba,a8);default:if(bb){throw new TypeError("Unknown encoding: "+a7)}a7=(""+a7).toLowerCase();bb=true}}};aF.prototype.toJSON=function G(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function aJ(a6,a7,a5){if(a7===0&&a5===a6.length){return aH.fromByteArray(a6)}else{return aH.fromByteArray(a6.slice(a7,a5))}}function aQ(a7,a6,a9){a9=Math.min(a7.length,a9);var bc=[];var ba=a6;while(ba<a9){var be=a7[ba];var bd=null;var bg=(be>239)?4:(be>223)?3:(be>191)?2:1;if(ba+bg<=a9){var bf,a5,bb,a8;switch(bg){case 1:if(be<128){bd=be}break;case 2:bf=a7[ba+1];if((bf&192)===128){a8=(be&31)<<6|(bf&63);if(a8>127){bd=a8}}break;case 3:bf=a7[ba+1];a5=a7[ba+2];if((bf&192)===128&&(a5&192)===128){a8=(be&15)<<12|(bf&63)<<6|(a5&63);if(a8>2047&&(a8<55296||a8>57343)){bd=a8}}break;case 4:bf=a7[ba+1];a5=a7[ba+2];bb=a7[ba+3];if((bf&192)===128&&(a5&192)===128&&(bb&192)===128){a8=(be&15)<<18|(bf&63)<<12|(a5&63)<<6|(bb&63);if(a8>65535&&a8<1114112){bd=a8}}}}if(bd===null){bd=65533;bg=1}else{if(bd>65535){bd-=65536;bc.push(bd>>>10&1023|55296);bd=56320|bd&1023}}bc.push(bd);ba+=bg}return af(bc)}var W=4096;function af(a6){var a5=a6.length;if(a5<=W){return String.fromCharCode.apply(String,a6)}var a8="";var a7=0;while(a7<a5){a8+=String.fromCharCode.apply(String,a6.slice(a7,a7+=W))}return a8}function M(a7,a9,a5){var a6="";a5=Math.min(a7.length,a5);for(var a8=a9;a8<a5;a8++){a6+=String.fromCharCode(a7[a8]&127)}return a6}function aR(a7,a9,a5){var a6="";a5=Math.min(a7.length,a5);for(var a8=a9;a8<a5;a8++){a6+=String.fromCharCode(a7[a8])}return a6}function ae(a8,ba,a6){var a5=a8.length;if(!ba||ba<0){ba=0}if(!a6||a6<0||a6>a5){a6=a5}var a7="";for(var a9=ba;a9<a6;a9++){a7+=aB(a8[a9])}return a7}function al(a7,ba,a6){var a5=a7.slice(ba,a6);var a9="";for(var a8=0;a8<a5.length;a8+=2){a9+=String.fromCharCode(a5[a8]+a5[a8+1]*256)}return a9}aF.prototype.slice=function D(ba,a6){var a5=this.length;ba=~~ba;a6=a6===undefined?a5:~~a6;if(ba<0){ba+=a5;if(ba<0){ba=0}}else{if(ba>a5){ba=a5}}if(a6<0){a6+=a5;if(a6<0){a6=0}}else{if(a6>a5){a6=a5}}if(a6<ba){a6=ba}var a9;if(aF.TYPED_ARRAY_SUPPORT){a9=this.subarray(ba,a6);a9.__proto__=aF.prototype}else{var a8=a6-ba;a9=new aF(a8,undefined);for(var a7=0;a7<a8;a7++){a9[a7]=this[a7+ba]}}if(a9.length){a9.parent=this.parent||this}return a9};function au(a7,a5,a6){if((a7%1)!==0||a7<0){throw new RangeError("offset is not uint")}if(a7+a5>a6){throw new RangeError("Trying to access beyond buffer length")}}aF.prototype.readUIntLE=function m(ba,a5,a8){ba=ba|0;a5=a5|0;if(!a8){au(ba,a5,this.length)}var a9=this[ba];var a7=1;var a6=0;while(++a6<a5&&(a7*=256)){a9+=this[ba+a6]*a7}return a9};aF.prototype.readUIntBE=function aC(a9,a5,a7){a9=a9|0;a5=a5|0;if(!a7){au(a9,a5,this.length)}var a8=this[a9+ --a5];var a6=1;while(a5>0&&(a6*=256)){a8+=this[a9+ --a5]*a6}return a8};aF.prototype.readUInt8=function q(a6,a5){if(!a5){au(a6,1,this.length)}return this[a6]};aF.prototype.readUInt16LE=function t(a6,a5){if(!a5){au(a6,2,this.length)}return this[a6]|(this[a6+1]<<8)};aF.prototype.readUInt16BE=function aM(a6,a5){if(!a5){au(a6,2,this.length)}return(this[a6]<<8)|this[a6+1]};aF.prototype.readUInt32LE=function P(a6,a5){if(!a5){au(a6,4,this.length)}return((this[a6])|(this[a6+1]<<8)|(this[a6+2]<<16))+(this[a6+3]*16777216)};aF.prototype.readUInt32BE=function a4(a6,a5){if(!a5){au(a6,4,this.length)}return(this[a6]*16777216)+((this[a6+1]<<16)|(this[a6+2]<<8)|this[a6+3])};aF.prototype.readIntLE=function an(ba,a5,a8){ba=ba|0;a5=a5|0;if(!a8){au(ba,a5,this.length)}var a9=this[ba];var a7=1;var a6=0;while(++a6<a5&&(a7*=256)){a9+=this[ba+a6]*a7}a7*=128;if(a9>=a7){a9-=Math.pow(2,8*a5)}return a9};aF.prototype.readIntBE=function E(ba,a5,a8){ba=ba|0;a5=a5|0;if(!a8){au(ba,a5,this.length)}var a6=a5;var a7=1;var a9=this[ba+ --a6];while(a6>0&&(a7*=256)){a9+=this[ba+ --a6]*a7}a7*=128;if(a9>=a7){a9-=Math.pow(2,8*a5)}return a9};aF.prototype.readInt8=function aN(a6,a5){if(!a5){au(a6,1,this.length)}if(!(this[a6]&128)){return(this[a6])}return((255-this[a6]+1)*-1)};aF.prototype.readInt16LE=function ay(a7,a5){if(!a5){au(a7,2,this.length)}var a6=this[a7]|(this[a7+1]<<8);return(a6&32768)?a6|4294901760:a6};aF.prototype.readInt16BE=function N(a7,a5){if(!a5){au(a7,2,this.length)}var a6=this[a7+1]|(this[a7]<<8);return(a6&32768)?a6|4294901760:a6};aF.prototype.readInt32LE=function aW(a6,a5){if(!a5){au(a6,4,this.length)}return(this[a6])|(this[a6+1]<<8)|(this[a6+2]<<16)|(this[a6+3]<<24)};aF.prototype.readInt32BE=function ad(a6,a5){if(!a5){au(a6,4,this.length)}return(this[a6]<<24)|(this[a6+1]<<16)|(this[a6+2]<<8)|(this[a6+3])};aF.prototype.readFloatLE=function p(a6,a5){if(!a5){au(a6,4,this.length)}return j.read(this,a6,true,23,4)};aF.prototype.readFloatBE=function aG(a6,a5){if(!a5){au(a6,4,this.length)}return j.read(this,a6,false,23,4)};aF.prototype.readDoubleLE=function h(a6,a5){if(!a5){au(a6,8,this.length)}return j.read(this,a6,true,52,8)};aF.prototype.readDoubleBE=function ao(a6,a5){if(!a5){au(a6,8,this.length)}return j.read(this,a6,false,52,8)};function aP(a6,a9,ba,a8,a5,a7){if(!aF.isBuffer(a6)){throw new TypeError("buffer must be a Buffer instance")}if(a9>a5||a9<a7){throw new RangeError("value is out of bounds")}if(ba+a8>a6.length){throw new RangeError("index out of range")}}aF.prototype.writeUIntLE=function aq(a7,ba,a5,a9){a7=+a7;ba=ba|0;a5=a5|0;if(!a9){aP(this,a7,ba,a5,Math.pow(2,8*a5),0)}var a8=1;var a6=0;this[ba]=a7&255;while(++a6<a5&&(a8*=256)){this[ba+a6]=(a7/a8)&255}return ba+a5};aF.prototype.writeUIntBE=function J(a7,ba,a5,a9){a7=+a7;ba=ba|0;a5=a5|0;if(!a9){aP(this,a7,ba,a5,Math.pow(2,8*a5),0)}var a6=a5-1;var a8=1;this[ba+a6]=a7&255;while(--a6>=0&&(a8*=256)){this[ba+a6]=(a7/a8)&255}return ba+a5};aF.prototype.writeUInt8=function aD(a5,a7,a6){a5=+a5;a7=a7|0;if(!a6){aP(this,a5,a7,1,255,0)}if(!aF.TYPED_ARRAY_SUPPORT){a5=Math.floor(a5)}this[a7]=(a5&255);return a7+1};function aA(a6,a8,ba,a9){if(a8<0){a8=65535+a8+1}for(var a7=0,a5=Math.min(a6.length-ba,2);a7<a5;a7++){a6[ba+a7]=(a8&(255<<(8*(a9?a7:1-a7))))>>>(a9?a7:1-a7)*8}}aF.prototype.writeUInt16LE=function ab(a5,a7,a6){a5=+a5;a7=a7|0;if(!a6){aP(this,a5,a7,2,65535,0)}if(aF.TYPED_ARRAY_SUPPORT){this[a7]=(a5&255);this[a7+1]=(a5>>>8)}else{aA(this,a5,a7,true)}return a7+2};aF.prototype.writeUInt16BE=function l(a5,a7,a6){a5=+a5;a7=a7|0;if(!a6){aP(this,a5,a7,2,65535,0)}if(aF.TYPED_ARRAY_SUPPORT){this[a7]=(a5>>>8);this[a7+1]=(a5&255)}else{aA(this,a5,a7,false)}return a7+2};function U(a6,a8,ba,a9){if(a8<0){a8=4294967295+a8+1}for(var a7=0,a5=Math.min(a6.length-ba,4);a7<a5;a7++){a6[ba+a7]=(a8>>>(a9?a7:3-a7)*8)&255}}aF.prototype.writeUInt32LE=function ap(a5,a7,a6){a5=+a5;a7=a7|0;if(!a6){aP(this,a5,a7,4,4294967295,0)}if(aF.TYPED_ARRAY_SUPPORT){this[a7+3]=(a5>>>24);this[a7+2]=(a5>>>16);this[a7+1]=(a5>>>8);this[a7]=(a5&255)}else{U(this,a5,a7,true)}return a7+4};aF.prototype.writeUInt32BE=function H(a5,a7,a6){a5=+a5;a7=a7|0;if(!a6){aP(this,a5,a7,4,4294967295,0)}if(aF.TYPED_ARRAY_SUPPORT){this[a7]=(a5>>>24);this[a7+1]=(a5>>>16);this[a7+2]=(a5>>>8);this[a7+3]=(a5&255)}else{U(this,a5,a7,false)}return a7+4};aF.prototype.writeIntLE=function y(a9,bc,a6,bb){a9=+a9;bc=bc|0;if(!bb){var a5=Math.pow(2,8*a6-1);aP(this,a9,bc,a6,a5-1,-a5)}var a7=0;var ba=1;var a8=a9<0?1:0;this[bc]=a9&255;while(++a7<a6&&(ba*=256)){this[bc+a7]=((a9/ba)>>0)-a8&255}return bc+a6};aF.prototype.writeIntBE=function aT(a9,bc,a6,bb){a9=+a9;bc=bc|0;if(!bb){var a5=Math.pow(2,8*a6-1);aP(this,a9,bc,a6,a5-1,-a5)}var a7=a6-1;var ba=1;var a8=a9<0?1:0;this[bc+a7]=a9&255;while(--a7>=0&&(ba*=256)){this[bc+a7]=((a9/ba)>>0)-a8&255}return bc+a6};aF.prototype.writeInt8=function aj(a5,a7,a6){a5=+a5;a7=a7|0;if(!a6){aP(this,a5,a7,1,127,-128)}if(!aF.TYPED_ARRAY_SUPPORT){a5=Math.floor(a5)}if(a5<0){a5=255+a5+1}this[a7]=(a5&255);return a7+1};aF.prototype.writeInt16LE=function ak(a5,a7,a6){a5=+a5;a7=a7|0;if(!a6){aP(this,a5,a7,2,32767,-32768)}if(aF.TYPED_ARRAY_SUPPORT){this[a7]=(a5&255);this[a7+1]=(a5>>>8)}else{aA(this,a5,a7,true)}return a7+2};aF.prototype.writeInt16BE=function C(a5,a7,a6){a5=+a5;a7=a7|0;if(!a6){aP(this,a5,a7,2,32767,-32768)}if(aF.TYPED_ARRAY_SUPPORT){this[a7]=(a5>>>8);this[a7+1]=(a5&255)}else{aA(this,a5,a7,false)}return a7+2};aF.prototype.writeInt32LE=function aI(a5,a7,a6){a5=+a5;a7=a7|0;if(!a6){aP(this,a5,a7,4,2147483647,-2147483648)}if(aF.TYPED_ARRAY_SUPPORT){this[a7]=(a5&255);this[a7+1]=(a5>>>8);this[a7+2]=(a5>>>16);this[a7+3]=(a5>>>24)}else{U(this,a5,a7,true)}return a7+4};aF.prototype.writeInt32BE=function T(a5,a7,a6){a5=+a5;a7=a7|0;if(!a6){aP(this,a5,a7,4,2147483647,-2147483648)}if(a5<0){a5=4294967295+a5+1}if(aF.TYPED_ARRAY_SUPPORT){this[a7]=(a5>>>24);this[a7+1]=(a5>>>16);this[a7+2]=(a5>>>8);this[a7+3]=(a5&255)}else{U(this,a5,a7,false)}return a7+4};function S(a6,a9,ba,a8,a5,a7){if(ba+a8>a6.length){throw new RangeError("index out of range")}if(ba<0){throw new RangeError("index out of range")}}function B(a5,a6,a9,a8,a7){if(!a7){S(a5,a6,a9,4,3.4028234663852886e+38,-3.4028234663852886e+38)}j.write(a5,a6,a9,a8,23,4);return a9+4}aF.prototype.writeFloatLE=function r(a5,a7,a6){return B(this,a5,a7,true,a6)};aF.prototype.writeFloatBE=function aK(a5,a7,a6){return B(this,a5,a7,false,a6)};function w(a5,a6,a9,a8,a7){if(!a7){S(a5,a6,a9,8,1.7976931348623157e+308,-1.7976931348623157e+308)}j.write(a5,a6,a9,a8,52,8);return a9+8}aF.prototype.writeDoubleLE=function K(a5,a7,a6){return w(this,a5,a7,true,a6)};aF.prototype.writeDoubleBE=function a0(a5,a7,a6){return w(this,a5,a7,false,a6)};aF.prototype.copy=function I(a8,a9,ba,a6){if(!ba){ba=0}if(!a6&&a6!==0){a6=this.length}if(a9>=a8.length){a9=a8.length}if(!a9){a9=0}if(a6>0&&a6<ba){a6=ba}if(a6===ba){return 0}if(a8.length===0||this.length===0){return 0}if(a9<0){throw new RangeError("targetStart out of bounds")}if(ba<0||ba>=this.length){throw new RangeError("sourceStart out of bounds")}if(a6<0){throw new RangeError("sourceEnd out of bounds")}if(a6>this.length){a6=this.length}if(a8.length-a9<a6-ba){a6=a8.length-a9+ba}var a5=a6-ba;var a7;if(this===a8&&ba<a9&&a9<a6){for(a7=a5-1;a7>=0;a7--){a8[a7+a9]=this[a7+ba]}}else{if(a5<1000||!aF.TYPED_ARRAY_SUPPORT){for(a7=0;a7<a5;a7++){a8[a7+a9]=this[a7+ba]}}else{Uint8Array.prototype.set.call(a8,this.subarray(ba,ba+a5),a9)}}return a5};aF.prototype.fill=function F(a9,ba,a7){if(!a9){a9=0}if(!ba){ba=0}if(!a7){a7=this.length}if(a7<ba){throw new RangeError("end < start")}if(a7===ba){return}if(this.length===0){return}if(ba<0||ba>=this.length){throw new RangeError("start out of bounds")}if(a7<0||a7>this.length){throw new RangeError("end out of bounds")}var a8;if(typeof a9==="number"){for(a8=ba;a8<a7;a8++){this[a8]=a9}}else{var a6=aU(a9.toString());var a5=a6.length;for(a8=ba;a8<a7;a8++){this[a8]=a6[a8%a5]}}return this};var aE=/[^+\/0-9A-Za-z-_]/g;function s(a5){a5=v(a5).replace(aE,"");if(a5.length<2){return""}while(a5.length%4!==0){a5=a5+"="}return a5}function v(a5){if(a5.trim){return a5.trim()}return a5.replace(/^\s+|\s+$/g,"")}function aB(a5){if(a5<16){return"0"+a5.toString(16)}return a5.toString(16)}function aU(a8,a6){a6=a6||Infinity;var a7;var bb=a8.length;var ba=null;var a5=[];for(var a9=0;a9<bb;a9++){a7=a8.charCodeAt(a9);if(a7>55295&&a7<57344){if(!ba){if(a7>56319){if((a6-=3)>-1){a5.push(239,191,189)}continue}else{if(a9+1===bb){if((a6-=3)>-1){a5.push(239,191,189)}continue}}ba=a7;continue}if(a7<56320){if((a6-=3)>-1){a5.push(239,191,189)}ba=a7;continue}a7=(ba-55296<<10|a7-56320)+65536}else{if(ba){if((a6-=3)>-1){a5.push(239,191,189)}}}ba=null;if(a7<128){if((a6-=1)<0){break}a5.push(a7)}else{if(a7<2048){if((a6-=2)<0){break}a5.push(a7>>6|192,a7&63|128)}else{if(a7<65536){if((a6-=3)<0){break}a5.push(a7>>12|224,a7>>6&63|128,a7&63|128)}else{if(a7<1114112){if((a6-=4)<0){break}a5.push(a7>>18|240,a7>>12&63|128,a7>>6&63|128,a7&63|128)}else{throw new Error("Invalid code point")}}}}}return a5}function ai(a7){var a5=[];for(var a6=0;a6<a7.length;a6++){a5.push(a7.charCodeAt(a6)&255)}return a5}function av(ba,a6){var bb,a7,a9;var a5=[];for(var a8=0;a8<ba.length;a8++){if((a6-=2)<0){break}bb=ba.charCodeAt(a8);a7=bb>>8;a9=bb%256;a5.push(a9);a5.push(a7)}return a5}function ah(a5){return aH.toByteArray(s(a5))}function Y(a8,a9,a7,a6){for(var a5=0;a5<a6;a5++){if((a5+a7>=a9.length)||(a5>=a8.length)){break}a9[a5+a7]=a8[a5]}return a5}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"base64-js":4,ieee754:5,isarray:6}],4:[function(f,g,e){(function(m){var o;var j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var k=[];for(o=0;o<j.length;o++){k[o]=j[o]}var q=[];for(o=0;o<j.length;++o){q[j.charCodeAt(o)]=o}q["-".charCodeAt(0)]=62;q["_".charCodeAt(0)]=63;var r=(typeof Uint8Array!=="undefined")?Uint8Array:Array;function h(u){var i=q[u.charCodeAt(0)];return i!==undefined?i:-1}function p(u){var y,x,v,z,w,A;if(u.length%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var B=u.length;w=u.charAt(B-2)==="="?2:u.charAt(B-1)==="="?1:0;A=new r(u.length*3/4-w);v=w>0?u.length-4:u.length;var D=0;function C(i){A[D++]=i}for(y=0,x=0;y<v;y+=4,x+=3){z=(h(u.charAt(y))<<18)|(h(u.charAt(y+1))<<12)|(h(u.charAt(y+2))<<6)|h(u.charAt(y+3));C((z&16711680)>>16);C((z&65280)>>8);C(z&255)}if(w===2){z=(h(u.charAt(y))<<2)|(h(u.charAt(y+1))>>4);C(z&255)}else{if(w===1){z=(h(u.charAt(y))<<10)|(h(u.charAt(y+1))<<4)|(h(u.charAt(y+2))>>2);C((z>>8)&255);C(z&255)}}return A}function s(i){return k[i]}function n(i){return s(i>>18&63)+s(i>>12&63)+s(i>>6&63)+s(i&63)}function l(v,z,u){var x;var w=[];for(var y=z;y<u;y+=3){x=(v[y]<<16)+(v[y+1]<<8)+(v[y+2]);w.push(n(x))}return w.join("")}function t(u){var z;var y=u.length%3;var w="";var B=[];var v,A;var x=16383;for(z=0,A=u.length-y;z<A;z+=x){B.push(l(u,z,(z+x)>A?A:(z+x)))}switch(y){case 1:v=u[u.length-1];w+=s(v>>2);w+=s((v<<4)&63);w+="==";break;case 2:v=(u[u.length-2]<<8)+(u[u.length-1]);w+=s(v>>10);w+=s((v>>4)&63);w+=s((v<<2)&63);w+="=";break;default:break}B.push(w);return B.join("")}m.toByteArray=p;m.fromByteArray=t}(typeof e==="undefined"?(this.base64js={}):e))},{}],5:[function(f,g,e){e.read=function(p,o,k,j,t){var u,n;var l=t*8-j-1;var r=(1<<l)-1;var h=r>>1;var w=-7;var q=k?(t-1):0;var v=k?-1:1;var x=p[o+q];q+=v;u=x&((1<<(-w))-1);x>>=(-w);w+=l;for(;w>0;u=u*256+p[o+q],q+=v,w-=8){}n=u&((1<<(-w))-1);u>>=(-w);w+=j;for(;w>0;n=n*256+p[o+q],q+=v,w-=8){}if(u===0){u=1-h}else{if(u===r){return n?NaN:((x?-1:1)*Infinity)}else{n=n+Math.pow(2,j);u=u-h}}return(x?-1:1)*n*Math.pow(2,u-j)};e.write=function(q,y,p,k,j,u){var v,n,x;var l=u*8-j-1;var t=(1<<l)-1;var h=t>>1;var o=(j===23?Math.pow(2,-24)-Math.pow(2,-77):0);var r=k?0:(u-1);var w=k?1:-1;var z=y<0||(y===0&&1/y<0)?1:0;y=Math.abs(y);if(isNaN(y)||y===Infinity){n=isNaN(y)?1:0;v=t}else{v=Math.floor(Math.log(y)/Math.LN2);if(y*(x=Math.pow(2,-v))<1){v--;x*=2}if(v+h>=1){y+=o/x}else{y+=o*Math.pow(2,1-h)}if(y*x>=2){v++;x/=2}if(v+h>=t){n=0;v=t}else{if(v+h>=1){n=(y*x-1)*Math.pow(2,j);v=v+h}else{n=y*Math.pow(2,h-1)*Math.pow(2,j);v=0}}}for(;j>=8;q[p+r]=n&255,r+=w,n/=256,j-=8){}v=(v<<j)|n;l+=j;for(;l>0;q[p+r]=v&255,r+=w,v/=256,l-=8){}q[p+r-w]|=z*128}},{}],6:[function(f,g,e){var h={}.toString;g.exports=Array.isArray||function(i){return h.call(i)=="[object Array]"}},{}],7:[function(i,j,g){function k(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}j.exports=k;k.EventEmitter=k;k.prototype._events=undefined;k.prototype._maxListeners=undefined;k.defaultMaxListeners=10;k.prototype.setMaxListeners=function(m){if(!h(m)||m<0||isNaN(m)){throw TypeError("n must be a positive number")}this._maxListeners=m;return this};k.prototype.emit=function(r){var s,q,m,n,o,p;if(!this._events){this._events={}}if(r==="error"){if(!this._events.error||(e(this._events.error)&&!this._events.error.length)){s=arguments[1];if(s instanceof Error){throw s}throw TypeError('Uncaught, unspecified "error" event.')}}q=this._events[r];if(f(q)){return false}if(l(q)){switch(arguments.length){case 1:q.call(this);break;case 2:q.call(this,arguments[1]);break;case 3:q.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1);q.apply(this,n)}}else{if(e(q)){n=Array.prototype.slice.call(arguments,1);p=q.slice();m=p.length;for(o=0;o<m;o++){p[o].apply(this,n)}}}return true};k.prototype.addListener=function(o,p){var n;if(!l(p)){throw TypeError("listener must be a function")}if(!this._events){this._events={}}if(this._events.newListener){this.emit("newListener",o,l(p.listener)?p.listener:p)}if(!this._events[o]){this._events[o]=p}else{if(e(this._events[o])){this._events[o].push(p)}else{this._events[o]=[this._events[o],p]}}if(e(this._events[o])&&!this._events[o].warned){if(!f(this._maxListeners)){n=this._maxListeners}else{n=k.defaultMaxListeners}if(n&&n>0&&this._events[o].length>n){this._events[o].warned=true;console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[o].length);if(typeof console.trace==="function"){console.trace()}}}return this};k.prototype.on=k.prototype.addListener;k.prototype.once=function(m,o){if(!l(o)){throw TypeError("listener must be a function")}var p=false;function n(){this.removeListener(m,n);if(!p){p=true;o.apply(this,arguments)}}n.listener=o;this.on(m,n);return this};k.prototype.removeListener=function(o,r){var q,m,p,n;if(!l(r)){throw TypeError("listener must be a function")}if(!this._events||!this._events[o]){return this}q=this._events[o];p=q.length;m=-1;if(q===r||(l(q.listener)&&q.listener===r)){delete this._events[o];if(this._events.removeListener){this.emit("removeListener",o,r)}}else{if(e(q)){for(n=p;n-->0;){if(q[n]===r||(q[n].listener&&q[n].listener===r)){m=n;break}}if(m<0){return this}if(q.length===1){q.length=0;delete this._events[o]}else{q.splice(m,1)}if(this._events.removeListener){this.emit("removeListener",o,r)}}}return this};k.prototype.removeAllListeners=function(o){var m,n;if(!this._events){return this}if(!this._events.removeListener){if(arguments.length===0){this._events={}}else{if(this._events[o]){delete this._events[o]}}return this}if(arguments.length===0){for(m in this._events){if(m==="removeListener"){continue}this.removeAllListeners(m)}this.removeAllListeners("removeListener");this._events={};return this}n=this._events[o];if(l(n)){this.removeListener(o,n)}else{if(n){while(n.length){this.removeListener(o,n[n.length-1])}}}delete this._events[o];return this};k.prototype.listeners=function(n){var m;if(!this._events||!this._events[n]){m=[]}else{if(l(this._events[n])){m=[this._events[n]]}else{m=this._events[n].slice()}}return m};k.prototype.listenerCount=function(m){if(this._events){var n=this._events[m];if(l(n)){return 1}else{if(n){return n.length}}}return 0};k.listenerCount=function(n,m){return n.listenerCount(m)};function l(m){return typeof m==="function"}function h(m){return typeof m==="number"}function e(m){return typeof m==="object"&&m!==null}function f(m){return m===void 0}},{}],8:[function(f,g,e){if(typeof Object.create==="function"){g.exports=function h(j,i){j.super_=i;j.prototype=Object.create(i.prototype,{constructor:{value:j,enumerable:false,writable:true,configurable:true}})}}else{g.exports=function h(j,i){j.super_=i;var k=function(){};k.prototype=i.prototype;j.prototype=new k();j.prototype.constructor=j}}},{}],9:[function(f,g,e){g.exports=function(h){return !!(h!=null&&(h._isBuffer||(h.constructor&&typeof h.constructor.isBuffer==="function"&&h.constructor.isBuffer(h))))}},{}],10:[function(f,g,e){g.exports=Array.isArray||function(h){return Object.prototype.toString.call(h)=="[object Array]"}},{}],11:[function(g,f,i){var e=f.exports={};var j=[];var n=false;var k;var l=-1;function m(){n=false;if(k.length){j=k.concat(j)}else{l=-1}if(j.length){p()}}function p(){if(n){return}var r=setTimeout(m);n=true;var q=j.length;while(q){k=j;j=[];while(++l<q){if(k){k[l].run()}}l=-1;q=j.length}k=null;n=false;clearTimeout(r)}e.nextTick=function(q){var r=new Array(arguments.length-1);if(arguments.length>1){for(var s=1;s<arguments.length;s++){r[s-1]=arguments[s]}}j.push(new h(q,r));if(j.length===1&&!n){setTimeout(p,0)}};function h(q,r){this.fun=q;this.array=r}h.prototype.run=function(){this.fun.apply(null,this.array)};e.title="browser";e.browser=true;e.env={};e.argv=[];e.version="";e.versions={};function o(){}e.on=o;e.addListener=o;e.once=o;e.off=o;e.removeListener=o;e.removeAllListeners=o;e.emit=o;e.binding=function(q){throw new Error("process.binding is not supported")};e.cwd=function(){return"/"};e.chdir=function(q){throw new Error("process.chdir is not supported")};e.umask=function(){return 0}},{}],12:[function(f,g,e){g.exports=f("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":13}],13:[function(i,g,k){var j=Object.keys||function(v){var u=[];for(var t in v){u.push(t)}return u};g.exports=l;var q=i("process-nextick-args");var n=i("core-util-is");n.inherits=i("inherits");var f=i("./_stream_readable");var m=i("./_stream_writable");n.inherits(l,f);var r=j(m.prototype);for(var p=0;p<r.length;p++){var e=r[p];if(!l.prototype[e]){l.prototype[e]=m.prototype[e]}}function l(t){if(!(this instanceof l)){return new l(t)}f.call(this,t);m.call(this,t);if(t&&t.readable===false){this.readable=false}if(t&&t.writable===false){this.writable=false}this.allowHalfOpen=true;if(t&&t.allowHalfOpen===false){this.allowHalfOpen=false}this.once("end",s)}function s(){if(this.allowHalfOpen||this._writableState.ended){return}q(h,this)}function h(t){t.end()}function o(u,w){for(var v=0,t=u.length;v<t;v++){w(u[v],v)}}},{"./_stream_readable":15,"./_stream_writable":17,"core-util-is":18,inherits:8,"process-nextick-args":19}],14:[function(i,j,g){j.exports=e;var h=i("./_stream_transform");var f=i("core-util-is");f.inherits=i("inherits");f.inherits(e,h);function e(k){if(!(this instanceof e)){return new e(k)}h.call(this,k)}e.prototype._transform=function(l,m,k){k(null,l)}},{"./_stream_transform":16,"core-util-is":18,inherits:8}],15:[function(f,g,e){(function(I){g.exports=v;var H=f("process-nextick-args");var A=f("isarray");var u=f("buffer").Buffer;v.ReadableState=i;var h=f("events");var y=function(R,Q){return R.listeners(Q).length};var r;(function(){try{r=f("stream")}catch(Q){}finally{if(!r){r=f("events").EventEmitter}}}());var u=f("buffer").Buffer;var j=f("core-util-is");j.inherits=f("inherits");var P=f("util");var J;if(P&&P.debuglog){J=P.debuglog("stream")}else{J=function(){}}var E;j.inherits(v,r);var p;function i(Q,S){p=p||f("./_stream_duplex");Q=Q||{};this.objectMode=!!Q.objectMode;if(S instanceof p){this.objectMode=this.objectMode||!!Q.readableObjectMode}var R=Q.highWaterMark;var T=this.objectMode?16:16*1024;this.highWaterMark=(R||R===0)?R:T;this.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.defaultEncoding=Q.defaultEncoding||"utf8";this.ranOut=false;this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(Q.encoding){if(!E){E=f("string_decoder/").StringDecoder}this.decoder=new E(Q.encoding);this.encoding=Q.encoding}}var p;function v(Q){p=p||f("./_stream_duplex");if(!(this instanceof v)){return new v(Q)}this._readableState=new i(Q,this);this.readable=true;if(Q&&typeof Q.read==="function"){this._read=Q.read}r.call(this)}v.prototype.push=function(Q,R){var S=this._readableState;if(!S.objectMode&&typeof Q==="string"){R=R||S.defaultEncoding;if(R!==S.encoding){Q=new u(Q,R);R=""}}return k(this,S,Q,R,false)};v.prototype.unshift=function(Q){var R=this._readableState;return k(this,R,Q,"",true)};v.prototype.isPaused=function(){return this._readableState.flowing===false};function k(V,T,Q,S,R){var W=o(T,Q);if(W){V.emit("error",W)}else{if(Q===null){T.reading=false;M(V,T)}else{if(T.objectMode||Q&&Q.length>0){if(T.ended&&!R){var U=new Error("stream.push() after EOF");V.emit("error",U)}else{if(T.endEmitted&&R){var U=new Error("stream.unshift() after end event");V.emit("error",U)}else{if(T.decoder&&!R&&!S){Q=T.decoder.write(Q)}if(!R){T.reading=false}if(T.flowing&&T.length===0&&!T.sync){V.emit("data",Q);V.read(0)}else{T.length+=T.objectMode?1:Q.length;if(R){T.buffer.unshift(Q)}else{T.buffer.push(Q)}if(T.needReadable){w(V)}}O(V,T)}}}else{if(!R){T.reading=false}}}}return G(T)}function G(Q){return !Q.ended&&(Q.needReadable||Q.length<Q.highWaterMark||Q.length===0)}v.prototype.setEncoding=function(Q){if(!E){E=f("string_decoder/").StringDecoder}this._readableState.decoder=new E(Q);this._readableState.encoding=Q;return this};var F=8388608;function x(Q){if(Q>=F){Q=F}else{Q--;Q|=Q>>>1;Q|=Q>>>2;Q|=Q>>>4;Q|=Q>>>8;Q|=Q>>>16;Q++}return Q}function z(R,Q){if(Q.length===0&&Q.ended){return 0}if(Q.objectMode){return R===0?0:1}if(R===null||isNaN(R)){if(Q.flowing&&Q.buffer.length){return Q.buffer[0].length}else{return Q.length}}if(R<=0){return 0}if(R>Q.highWaterMark){Q.highWaterMark=x(R)}if(R>Q.length){if(!Q.ended){Q.needReadable=true;return 0}else{return Q.length}}return R}v.prototype.read=function(U){J("read",U);var T=this._readableState;var S=U;if(typeof U!=="number"||U>0){T.emittedReadable=false}if(U===0&&T.needReadable&&(T.length>=T.highWaterMark||T.ended)){J("read: emitReadable",T.length,T.ended);if(T.length===0&&T.ended){N(this)}else{w(this)}return null}U=z(U,T);if(U===0&&T.ended){if(T.length===0){N(this)}return null}var Q=T.needReadable;J("need readable",Q);if(T.length===0||T.length-U<T.highWaterMark){Q=true;J("length less than watermark",Q)}if(T.ended||T.reading){Q=false;J("reading or ended",Q)}if(Q){J("do read");T.reading=true;T.sync=true;if(T.length===0){T.needReadable=true}this._read(T.highWaterMark);T.sync=false}if(Q&&!T.reading){U=z(S,T)}var R;if(U>0){R=B(U,T)}else{R=null}if(R===null){T.needReadable=true;U=0}T.length-=U;if(T.length===0&&!T.ended){T.needReadable=true}if(S!==U&&T.ended&&T.length===0){N(this)}if(R!==null){this.emit("data",R)}return R};function o(R,Q){var S=null;if(!(u.isBuffer(Q))&&typeof Q!=="string"&&Q!==null&&Q!==undefined&&!R.objectMode){S=new TypeError("Invalid non-string/buffer chunk")}return S}function M(S,R){if(R.ended){return}if(R.decoder){var Q=R.decoder.end();if(Q&&Q.length){R.buffer.push(Q);R.length+=R.objectMode?1:Q.length}}R.ended=true;w(S)}function w(R){var Q=R._readableState;Q.needReadable=false;if(!Q.emittedReadable){J("emitReadable",Q.flowing);Q.emittedReadable=true;if(Q.sync){H(K,R)}else{K(R)}}}function K(Q){J("emit readable");Q.emit("readable");t(Q)}function O(R,Q){if(!Q.readingMore){Q.readingMore=true;H(q,R,Q)}}function q(S,R){var Q=R.length;while(!R.reading&&!R.flowing&&!R.ended&&R.length<R.highWaterMark){J("maybeReadMore read 0");S.read(0);if(Q===R.length){break}else{Q=R.length}}R.readingMore=false}v.prototype._read=function(Q){this.emit("error",new Error("not implemented"))};v.prototype.pipe=function(ac,aa){var Q=this;var R=this._readableState;switch(R.pipesCount){case 0:R.pipes=ac;break;case 1:R.pipes=[R.pipes,ac];break;default:R.pipes.push(ac);break}R.pipesCount+=1;J("pipe count=%d opts=%j",R.pipesCount,aa);var ab=(!aa||aa.end!==false)&&ac!==I.stdout&&ac!==I.stderr;var T=ab?af:S;if(R.endEmitted){H(T)}else{Q.once("end",T)}ac.on("unpipe",X);function X(ag){J("onunpipe");if(ag===Q){S()}}function af(){J("onend");ac.end()}var U=n(Q);ac.on("drain",U);var W=false;function S(){J("cleanup");ac.removeListener("close",ae);ac.removeListener("finish",V);ac.removeListener("drain",U);ac.removeListener("error",Z);ac.removeListener("unpipe",X);Q.removeListener("end",af);Q.removeListener("end",S);Q.removeListener("data",ad);W=true;if(R.awaitDrain&&(!ac._writableState||ac._writableState.needDrain)){U()}}Q.on("data",ad);function ad(ah){J("ondata");var ag=ac.write(ah);if(false===ag){if(R.pipesCount===1&&R.pipes[0]===ac&&Q.listenerCount("data")===1&&!W){J("false write response, pause",Q._readableState.awaitDrain);Q._readableState.awaitDrain++}Q.pause()}}function Z(ag){J("onerror",ag);Y();ac.removeListener("error",Z);if(y(ac,"error")===0){ac.emit("error",ag)}}if(!ac._events||!ac._events.error){ac.on("error",Z)}else{if(A(ac._events.error)){ac._events.error.unshift(Z)}else{ac._events.error=[Z,ac._events.error]}}function ae(){ac.removeListener("finish",V);Y()}ac.once("close",ae);function V(){J("onfinish");ac.removeListener("close",ae);Y()}ac.once("finish",V);function Y(){J("unpipe");Q.unpipe(ac)}ac.emit("pipe",Q);if(!R.flowing){J("pipe resume");Q.resume()}return ac};function n(Q){return function(){var R=Q._readableState;J("pipeOnDrain",R.awaitDrain);if(R.awaitDrain){R.awaitDrain--}if(R.awaitDrain===0&&y(Q,"data")){R.flowing=true;t(Q)}}}v.prototype.unpipe=function(R){var T=this._readableState;if(T.pipesCount===0){return this}if(T.pipesCount===1){if(R&&R!==T.pipes){return this}if(!R){R=T.pipes}T.pipes=null;T.pipesCount=0;T.flowing=false;if(R){R.emit("unpipe",this)}return this}if(!R){var U=T.pipes;var Q=T.pipesCount;T.pipes=null;T.pipesCount=0;T.flowing=false;for(var S=0;S<Q;S++){U[S].emit("unpipe",this)}return this}var S=l(T.pipes,R);if(S===-1){return this}T.pipes.splice(S,1);T.pipesCount-=1;if(T.pipesCount===1){T.pipes=T.pipes[0]}R.emit("unpipe",this);return this};v.prototype.on=function(S,R){var Q=r.prototype.on.call(this,S,R);if(S==="data"&&false!==this._readableState.flowing){this.resume()}if(S==="readable"&&this.readable){var T=this._readableState;if(!T.readableListening){T.readableListening=true;T.emittedReadable=false;T.needReadable=true;if(!T.reading){H(D,this)}else{if(T.length){w(this,T)}}}}return Q};v.prototype.addListener=v.prototype.on;function D(Q){J("readable nexttick read 0");Q.read(0)}v.prototype.resume=function(){var Q=this._readableState;if(!Q.flowing){J("resume");Q.flowing=true;m(this,Q)}return this};function m(R,Q){if(!Q.resumeScheduled){Q.resumeScheduled=true;H(C,R,Q)}}function C(R,Q){if(!Q.reading){J("resume read 0");R.read(0)}Q.resumeScheduled=false;R.emit("resume");t(R);if(Q.flowing&&!Q.reading){R.read(0)}}v.prototype.pause=function(){J("call pause flowing=%j",this._readableState.flowing);if(false!==this._readableState.flowing){J("pause");this._readableState.flowing=false;this.emit("pause")}return this};function t(S){var R=S._readableState;J("flow",R.flowing);if(R.flowing){do{var Q=S.read()}while(null!==Q&&R.flowing)}}v.prototype.wrap=function(V){var U=this._readableState;var T=false;var Q=this;V.on("end",function(){J("wrapped end");if(U.decoder&&!U.ended){var W=U.decoder.end();if(W&&W.length){Q.push(W)}}Q.push(null)});V.on("data",function(X){J("wrapped data");if(U.decoder){X=U.decoder.write(X)}if(U.objectMode&&(X===null||X===undefined)){return}else{if(!U.objectMode&&(!X||!X.length)){return}}var W=Q.push(X);if(!W){T=true;V.pause()}});for(var S in V){if(this[S]===undefined&&typeof V[S]==="function"){this[S]=function(W){return function(){return V[W].apply(V,arguments)}}(S)}}var R=["error","close","destroy","pause","resume"];L(R,function(W){V.on(W,Q.emit.bind(Q,W))});Q._read=function(W){J("wrapped _read",W);if(T){T=false;V.resume()}};return Q};v._fromList=B;function B(T,Q){var X=Q.buffer;var R=Q.length;var Z=!!Q.decoder;var ab=!!Q.objectMode;var Y;if(X.length===0){return null}if(R===0){Y=null}else{if(ab){Y=X.shift()}else{if(!T||T>=R){if(Z){Y=X.join("")}else{if(X.length===1){Y=X[0]}else{Y=u.concat(X,R)}}X.length=0}else{if(T<X[0].length){var S=X[0];Y=S.slice(0,T);X[0]=S.slice(T)}else{if(T===X[0].length){Y=X.shift()}else{if(Z){Y=""}else{Y=new u(T)}var aa=0;for(var W=0,V=X.length;W<V&&aa<T;W++){var S=X[0];var U=Math.min(T-aa,S.length);if(Z){Y+=S.slice(0,U)}else{S.copy(Y,aa,0,U)}if(U<S.length){X[0]=S.slice(U)}else{X.shift()}aa+=U}}}}}}return Y}function N(R){var Q=R._readableState;if(Q.length>0){throw new Error("endReadable called on non-empty stream")}if(!Q.endEmitted){Q.ended=true;H(s,Q,R)}}function s(Q,R){if(!Q.endEmitted&&Q.length===0){Q.endEmitted=true;R.readable=false;R.emit("end")}}function L(R,T){for(var S=0,Q=R.length;S<Q;S++){T(R[S],S)}}function l(S,Q){for(var T=0,R=S.length;T<R;T++){if(S[T]===Q){return T}}return -1}}).call(this,f("_process"))},{"./_stream_duplex":13,_process:11,buffer:3,"core-util-is":18,events:7,inherits:8,isarray:10,"process-nextick-args":19,"string_decoder/":26,util:2}],16:[function(f,e,i){e.exports=h;var j=f("./_stream_duplex");var k=f("core-util-is");k.inherits=f("inherits");k.inherits(h,j);function m(n){this.afterTransform=function(p,o){return l(n,p,o)};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null}function l(r,s,q){var p=r._transformState;p.transforming=false;var n=p.writecb;if(!n){return r.emit("error",new Error("no writecb in Transform class"))}p.writechunk=null;p.writecb=null;if(q!==null&&q!==undefined){r.push(q)}if(n){n(s)}var o=r._readableState;o.reading=false;if(o.needReadable||o.length<o.highWaterMark){r._read(o.highWaterMark)}}function h(n){if(!(this instanceof h)){return new h(n)}j.call(this,n);this._transformState=new m(this);var o=this;this._readableState.needReadable=true;this._readableState.sync=false;if(n){if(typeof n.transform==="function"){this._transform=n.transform}if(typeof n.flush==="function"){this._flush=n.flush}}this.once("prefinish",function(){if(typeof this._flush==="function"){this._flush(function(p){g(o,p)})}else{g(o)}})}h.prototype.push=function(n,o){this._transformState.needTransform=false;return j.prototype.push.call(this,n,o)};h.prototype._transform=function(o,p,n){throw new Error("not implemented")};h.prototype._write=function(p,r,n){var q=this._transformState;q.writecb=n;q.writechunk=p;q.writeencoding=r;if(!q.transforming){var o=this._readableState;if(q.needTransform||o.needReadable||o.length<o.highWaterMark){this._read(o.highWaterMark)}}};h.prototype._read=function(p){var o=this._transformState;if(o.writechunk!==null&&o.writecb&&!o.transforming){o.transforming=true;this._transform(o.writechunk,o.writeencoding,o.afterTransform)}else{o.needTransform=true}};function g(p,q){if(q){return p.emit("error",q)}var n=p._writableState;var o=p._transformState;if(n.length){throw new Error("calling transform done when ws.length != 0")}if(o.transforming){throw new Error("calling transform done when still transforming")}return p.push(null)}},{"./_stream_duplex":13,"core-util-is":18,inherits:8}],17:[function(s,h,H){h.exports=o;var w=s("process-nextick-args");var m=s("buffer").Buffer;o.WritableState=g;var e=s("core-util-is");e.inherits=s("inherits");var C={deprecate:s("util-deprecate")};var l;(function(){try{l=s("stream")}catch(I){}finally{if(!l){l=s("events").EventEmitter}}}());var m=s("buffer").Buffer;e.inherits(o,l);function n(){}function r(J,K,I){this.chunk=J;this.encoding=K;this.callback=I;this.next=null}var i;function g(I,L){i=i||s("./_stream_duplex");I=I||{};this.objectMode=!!I.objectMode;if(L instanceof i){this.objectMode=this.objectMode||!!I.writableObjectMode}var K=I.highWaterMark;var M=this.objectMode?16:16*1024;this.highWaterMark=(K||K===0)?K:M;this.highWaterMark=~~this.highWaterMark;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;var J=I.decodeStrings===false;this.decodeStrings=!J;this.defaultEncoding=I.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(N){k(L,N)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false}g.prototype.getBuffer=function F(){var J=this.bufferedRequest;var I=[];while(J){I.push(J);J=J.next}return I};(function(){try{Object.defineProperty(g.prototype,"buffer",{get:C.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(I){}}());var i;function o(I){i=i||s("./_stream_duplex");if(!(this instanceof o)&&!(this instanceof i)){return new o(I)}this._writableState=new g(I,this);this.writable=true;if(I){if(typeof I.write==="function"){this._write=I.write}if(typeof I.writev==="function"){this._writev=I.writev}}l.call(this)}o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function D(J,I){var K=new Error("write after end");J.emit("error",K);w(I,K)}function v(M,L,J,I){var K=true;if(!(m.isBuffer(J))&&typeof J!=="string"&&J!==null&&J!==undefined&&!L.objectMode){var N=new TypeError("Invalid non-string/buffer chunk");M.emit("error",N);w(I,N);K=false}return K}o.prototype.write=function(K,L,I){var M=this._writableState;var J=false;if(typeof L==="function"){I=L;L=null}if(m.isBuffer(K)){L="buffer"}else{if(!L){L=M.defaultEncoding}}if(typeof I!=="function"){I=n}if(M.ended){D(this,I)}else{if(v(this,M,K,I)){M.pendingcb++;J=x(this,M,K,L,I)}}return J};o.prototype.cork=function(){var I=this._writableState;I.corked++};o.prototype.uncork=function(){var I=this._writableState;if(I.corked){I.corked--;if(!I.writing&&!I.corked&&!I.finished&&!I.bufferProcessing&&I.bufferedRequest){f(this,I)}}};o.prototype.setDefaultEncoding=function y(I){if(typeof I==="string"){I=I.toLowerCase()}if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((I+"").toLowerCase())>-1)){throw new TypeError("Unknown encoding: "+I)}this._writableState.defaultEncoding=I};function B(K,I,J){if(!K.objectMode&&K.decodeStrings!==false&&typeof I==="string"){I=new m(I,J)}return I}function x(P,O,L,N,J){L=B(O,L,N);if(m.isBuffer(L)){N="buffer"}var I=O.objectMode?1:L.length;O.length+=I;var K=O.length<O.highWaterMark;if(!K){O.needDrain=true}if(O.writing||O.corked){var M=O.lastBufferedRequest;O.lastBufferedRequest=new r(L,N,J);if(M){M.next=O.lastBufferedRequest}else{O.bufferedRequest=O.lastBufferedRequest}}else{A(P,O,false,I,L,N,J)}return K}function A(O,N,L,J,K,M,I){N.writelen=J;N.writecb=I;N.writing=true;N.sync=true;if(L){O._writev(K,N.onwrite)}else{O._write(K,M,N.onwrite)}N.sync=false}function t(L,K,J,M,I){--K.pendingcb;if(J){w(I,M)}else{I(M)}L._writableState.errorEmitted=true;L.emit("error",M)}function q(I){I.writing=false;I.writecb=null;I.length-=I.writelen;I.writelen=0}function k(L,N){var K=L._writableState;var J=K.sync;var I=K.writecb;q(K);if(N){t(L,K,J,N,I)}else{var M=j(K);if(!M&&!K.corked&&!K.bufferProcessing&&K.bufferedRequest){f(L,K)}if(J){w(z,L,K,M,I)}else{z(L,K,M,I)}}}function z(K,J,L,I){if(!L){u(K,J)}J.pendingcb--;I();p(K,J)}function u(J,I){if(I.length===0&&I.needDrain){I.needDrain=false;J.emit("drain")}}function f(Q,I){I.bufferProcessing=true;var P=I.bufferedRequest;if(Q._writev&&P&&P.next){var L=[];var M=[];while(P){M.push(P.callback);L.push(P);P=P.next}I.pendingcb++;I.lastBufferedRequest=null;A(Q,I,true,I.length,L,"",function(S){for(var R=0;R<M.length;R++){I.pendingcb--;M[R](S)}})}else{while(P){var O=P.chunk;var J=P.encoding;var K=P.callback;var N=I.objectMode?1:O.length;A(Q,I,false,N,O,J,K);P=P.next;if(I.writing){break}}if(P===null){I.lastBufferedRequest=null}}I.bufferedRequest=P;I.bufferProcessing=false}o.prototype._write=function(J,K,I){I(new Error("not implemented"))};o.prototype._writev=null;o.prototype.end=function(J,K,I){var L=this._writableState;if(typeof J==="function"){I=J;J=null;K=null}else{if(typeof K==="function"){I=K;K=null}}if(J!==null&&J!==undefined){this.write(J,K)}if(L.corked){L.corked=1;this.uncork()}if(!L.ending&&!L.finished){E(this,L,I)}};function j(I){return(I.ending&&I.length===0&&I.bufferedRequest===null&&!I.finished&&!I.writing)}function G(J,I){if(!I.prefinished){I.prefinished=true;J.emit("prefinish")}}function p(K,J){var I=j(J);if(I){if(J.pendingcb===0){G(K,J);J.finished=true;K.emit("finish")}else{G(K,J)}}return I}function E(K,J,I){J.ending=true;p(K,J);if(I){if(J.finished){w(I)}else{K.once("finish",I)}}J.ended=true}},{"./_stream_duplex":13,buffer:3,"core-util-is":18,events:7,inherits:8,"process-nextick-args":19,"util-deprecate":20}],18:[function(f,g,e){(function(o){function q(x){if(Array.isArray){return Array.isArray(x)}return p(x)==="[object Array]"}e.isArray=q;function k(x){return typeof x==="boolean"}e.isBoolean=k;function h(x){return x===null}e.isNull=h;function s(x){return x==null}e.isNullOrUndefined=s;function w(x){return typeof x==="number"}e.isNumber=w;function i(x){return typeof x==="string"}e.isString=i;function u(x){return typeof x==="symbol"}e.isSymbol=u;function n(x){return x===void 0}e.isUndefined=n;function m(x){return p(x)==="[object RegExp]"}e.isRegExp=m;function v(x){return typeof x==="object"&&x!==null}e.isObject=v;function t(x){return p(x)==="[object Date]"}e.isDate=t;function r(x){return(p(x)==="[object Error]"||x instanceof Error)}e.isError=r;function j(x){return typeof x==="function"}e.isFunction=j;function l(x){return x===null||typeof x==="boolean"||typeof x==="number"||typeof x==="string"||typeof x==="symbol"||typeof x==="undefined"}e.isPrimitive=l;e.isBuffer=o.isBuffer;function p(x){return Object.prototype.toString.call(x)}}).call(this,{isBuffer:f("../../../../insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../insert-module-globals/node_modules/is-buffer/index.js":9}],19:[function(f,g,e){(function(h){if(!h.version||h.version.indexOf("v0.")===0||h.version.indexOf("v1.")===0&&h.version.indexOf("v1.8.")!==0){g.exports=i}else{g.exports=h.nextTick}function i(l){var j=new Array(arguments.length-1);var k=0;while(k<j.length){j[k++]=arguments[k]}h.nextTick(function m(){l.apply(null,j)})}}).call(this,f("_process"))},{_process:11}],20:[function(f,g,e){(function(j){g.exports=i;function i(m,n){if(h("noDeprecation")){return m}var l=false;function k(){if(!l){if(h("throwDeprecation")){throw new Error(n)}else{if(h("traceDeprecation")){console.trace(n)}else{console.warn(n)}}l=true}return m.apply(this,arguments)}return k}function h(l){try{if(!j.localStorage){return false}}catch(k){return false}var m=j.localStorage[l];if(null==m){return false}return String(m).toLowerCase()==="true"}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],21:[function(f,g,e){g.exports=f("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":14}],22:[function(f,g,e){var h=(function(){try{return f("stream")}catch(i){}}());e=g.exports=f("./lib/_stream_readable.js");e.Stream=h||e;e.Readable=e;e.Writable=f("./lib/_stream_writable.js");e.Duplex=f("./lib/_stream_duplex.js");e.Transform=f("./lib/_stream_transform.js");e.PassThrough=f("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":13,"./lib/_stream_passthrough.js":14,"./lib/_stream_readable.js":15,"./lib/_stream_transform.js":16,"./lib/_stream_writable.js":17}],23:[function(f,g,e){g.exports=f("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":16}],24:[function(f,g,e){g.exports=f("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":17}],25:[function(g,h,f){h.exports=i;var e=g("events").EventEmitter;var j=g("inherits");j(i,e);i.Readable=g("readable-stream/readable.js");i.Writable=g("readable-stream/writable.js");i.Duplex=g("readable-stream/duplex.js");i.Transform=g("readable-stream/transform.js");i.PassThrough=g("readable-stream/passthrough.js");i.Stream=i;function i(){e.call(this)}i.prototype.pipe=function(p,t){var k=this;function q(u){if(p.writable){if(false===p.write(u)&&k.pause){k.pause()}}}k.on("data",q);function m(){if(k.readable&&k.resume){k.resume()}}p.on("drain",m);if(!p._isStdio&&(!t||t.end!==false)){k.on("end",s);k.on("close",r)}var n=false;function s(){if(n){return}n=true;p.end()}function r(){if(n){return}n=true;if(typeof p.destroy==="function"){p.destroy()}}function o(u){l();if(e.listenerCount(this,"error")===0){throw u}}k.on("error",o);p.on("error",o);function l(){k.removeListener("data",q);p.removeListener("drain",m);k.removeListener("end",s);k.removeListener("close",r);k.removeListener("error",o);p.removeListener("error",o);k.removeListener("end",l);k.removeListener("close",l);p.removeListener("close",l)}k.on("end",l);k.on("close",l);p.on("close",l);p.emit("pipe",k);return p}},{events:7,inherits:8,"readable-stream/duplex.js":12,"readable-stream/passthrough.js":21,"readable-stream/readable.js":22,"readable-stream/transform.js":23,"readable-stream/writable.js":24}],26:[function(h,f,j){var i=h("buffer").Buffer;var n=i.isEncoding||function(o){switch(o&&o.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function g(o){if(o&&!n(o)){throw new Error("Unknown encoding: "+o)}}var m=j.StringDecoder=function(o){this.encoding=(o||"utf8").toLowerCase().replace(/[-_]/,"");g(o);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=e;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=l;break;default:this.write=k;return}this.charBuffer=new i(6);this.charReceived=0;this.charLength=0};m.prototype.write=function(q){var s="";while(this.charLength){var t=(q.length>=this.charLength-this.charReceived)?this.charLength-this.charReceived:q.length;q.copy(this.charBuffer,this.charReceived,0,t);this.charReceived+=t;if(this.charReceived<this.charLength){return""}q=q.slice(t,q.length);s=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var p=s.charCodeAt(s.length-1);if(p>=55296&&p<=56319){this.charLength+=this.surrogateSize;s="";continue}this.charReceived=this.charLength=0;if(q.length===0){return s}break}this.detectIncompleteChar(q);var o=q.length;if(this.charLength){q.copy(this.charBuffer,0,q.length-this.charReceived,o);o-=this.charReceived}s+=q.toString(this.encoding,0,o);var o=s.length-1;var p=s.charCodeAt(o);if(p>=55296&&p<=56319){var r=this.surrogateSize;this.charLength+=r;this.charReceived+=r;this.charBuffer.copy(this.charBuffer,r,0,r);q.copy(this.charBuffer,0,0,r);return s.substring(0,o)}return s};m.prototype.detectIncompleteChar=function(o){var p=(o.length>=3)?3:o.length;for(;p>0;p--){var q=o[o.length-p];if(p==1&&q>>5==6){this.charLength=2;break}if(p<=2&&q>>4==14){this.charLength=3;break}if(p<=3&&q>>3==30){this.charLength=4;break}}this.charReceived=p};m.prototype.end=function(o){var r="";if(o&&o.length){r=this.write(o)}if(this.charReceived){var s=this.charReceived;var q=this.charBuffer;var p=this.encoding;r+=q.slice(0,s).toString(p)}return r};function k(o){return o.toString(this.encoding)}function e(o){this.charReceived=o.length%2;this.charLength=this.charReceived?2:0}function l(o){this.charReceived=o.length%3;this.charLength=this.charReceived?3:0}},{buffer:3}],27:[function(g,j,f){var e=g("./lib/utils/common").assign;var i=g("./lib/deflate");var l=g("./lib/inflate");var h=g("./lib/zlib/constants");var k={};e(k,i,l,h);j.exports=k},{"./lib/deflate":28,"./lib/inflate":29,"./lib/utils/common":30,"./lib/zlib/constants":33}],28:[function(l,e,x){var p=l("./zlib/deflate");var v=l("./utils/common");var i=l("./utils/strings");var k=l("./zlib/messages");var u=l("./zlib/zstream");var s=Object.prototype.toString;var r=0;var y=4;var j=0;var n=1;var q=2;var f=-1;var g=0;var o=8;function w(A){if(!(this instanceof w)){return new w(A)}this.options=v.assign({level:f,method:o,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},A||{});var B=this.options;if(B.raw&&(B.windowBits>0)){B.windowBits=-B.windowBits}else{if(B.gzip&&(B.windowBits>0)&&(B.windowBits<16)){B.windowBits+=16}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new u();this.strm.avail_out=0;var z=p.deflateInit2(this.strm,B.level,B.method,B.windowBits,B.memLevel,B.strategy);if(z!==j){throw new Error(k[z])}if(B.header){p.deflateSetHeader(this.strm,B.header)}}w.prototype.push=function(C,D){var A=this.strm;var E=this.options.chunkSize;var z,B;if(this.ended){return false}B=(D===~~D)?D:((D===true)?y:r);if(typeof C==="string"){A.input=i.string2buf(C)}else{if(s.call(C)==="[object ArrayBuffer]"){A.input=new Uint8Array(C)}else{A.input=C}}A.next_in=0;A.avail_in=A.input.length;do{if(A.avail_out===0){A.output=new v.Buf8(E);A.next_out=0;A.avail_out=E}z=p.deflate(A,B);if(z!==n&&z!==j){this.onEnd(z);this.ended=true;return false}if(A.avail_out===0||(A.avail_in===0&&(B===y||B===q))){if(this.options.to==="string"){this.onData(i.buf2binstring(v.shrinkBuf(A.output,A.next_out)))}else{this.onData(v.shrinkBuf(A.output,A.next_out))}}}while((A.avail_in>0||A.avail_out===0)&&z!==n);if(B===y){z=p.deflateEnd(this.strm);this.onEnd(z);this.ended=true;return z===j}if(B===q){this.onEnd(j);A.avail_out=0;return true}return true};w.prototype.onData=function(z){this.chunks.push(z)};w.prototype.onEnd=function(z){if(z===j){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=v.flattenChunks(this.chunks)}}this.chunks=[];this.err=z;this.msg=this.strm.msg};function m(z,A){var B=new w(A);B.push(z,true);if(B.err){throw B.msg}return B.result}function t(z,A){A=A||{};A.raw=true;return m(z,A)}function h(z,A){A=A||{};A.gzip=true;return m(z,A)}x.Deflate=w;x.deflate=m;x.deflateRaw=t;x.gzip=h},{"./utils/common":30,"./utils/strings":31,"./zlib/deflate":35,"./zlib/messages":40,"./zlib/zstream":42}],29:[function(j,g,k){var e=j("./zlib/inflate");var o=j("./utils/common");var p=j("./utils/strings");var n=j("./zlib/constants");var i=j("./zlib/messages");var r=j("./zlib/zstream");var m=j("./zlib/gzheader");var f=Object.prototype.toString;function l(t){if(!(this instanceof l)){return new l(t)}this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var u=this.options;if(u.raw&&(u.windowBits>=0)&&(u.windowBits<16)){u.windowBits=-u.windowBits;if(u.windowBits===0){u.windowBits=-15}}if((u.windowBits>=0)&&(u.windowBits<16)&&!(t&&t.windowBits)){u.windowBits+=32}if((u.windowBits>15)&&(u.windowBits<48)){if((u.windowBits&15)===0){u.windowBits|=15}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new r();this.strm.avail_out=0;var s=e.inflateInit2(this.strm,u.windowBits);if(s!==n.Z_OK){throw new Error(i[s])}this.header=new m();e.inflateGetHeader(this.strm,this.header)}l.prototype.push=function(x,y){var B=this.strm;var v=this.options.chunkSize;var w,u;var t,z,s;var A=false;if(this.ended){return false}u=(y===~~y)?y:((y===true)?n.Z_FINISH:n.Z_NO_FLUSH);if(typeof x==="string"){B.input=p.binstring2buf(x)}else{if(f.call(x)==="[object ArrayBuffer]"){B.input=new Uint8Array(x)}else{B.input=x}}B.next_in=0;B.avail_in=B.input.length;do{if(B.avail_out===0){B.output=new o.Buf8(v);B.next_out=0;B.avail_out=v}w=e.inflate(B,n.Z_NO_FLUSH);if(w===n.Z_BUF_ERROR&&A===true){w=n.Z_OK;A=false}if(w!==n.Z_STREAM_END&&w!==n.Z_OK){this.onEnd(w);this.ended=true;return false}if(B.next_out){if(B.avail_out===0||w===n.Z_STREAM_END||(B.avail_in===0&&(u===n.Z_FINISH||u===n.Z_SYNC_FLUSH))){if(this.options.to==="string"){t=p.utf8border(B.output,B.next_out);z=B.next_out-t;s=p.buf2string(B.output,t);B.next_out=z;B.avail_out=v-z;if(z){o.arraySet(B.output,B.output,t,z,0)}this.onData(s)}else{this.onData(o.shrinkBuf(B.output,B.next_out))}}}if(B.avail_in===0&&B.avail_out===0){A=true}}while((B.avail_in>0||B.avail_out===0)&&w!==n.Z_STREAM_END);if(w===n.Z_STREAM_END){u=n.Z_FINISH}if(u===n.Z_FINISH){w=e.inflateEnd(this.strm);this.onEnd(w);this.ended=true;return w===n.Z_OK}if(u===n.Z_SYNC_FLUSH){this.onEnd(n.Z_OK);B.avail_out=0;return true}return true};l.prototype.onData=function(s){this.chunks.push(s)};l.prototype.onEnd=function(s){if(s===n.Z_OK){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=o.flattenChunks(this.chunks)}}this.chunks=[];this.err=s;this.msg=this.strm.msg};function q(s,t){var u=new l(t);u.push(s,true);if(u.err){throw u.msg}return u.result}function h(s,t){t=t||{};t.raw=true;return q(s,t)}k.Inflate=l;k.inflate=q;k.inflateRaw=h;k.ungzip=q},{"./utils/common":30,"./utils/strings":31,"./zlib/constants":33,"./zlib/gzheader":36,"./zlib/inflate":38,"./zlib/messages":40,"./zlib/zstream":42}],30:[function(f,g,e){var j=(typeof Uint8Array!=="undefined")&&(typeof Uint16Array!=="undefined")&&(typeof Int32Array!=="undefined");e.assign=function(n){var k=Array.prototype.slice.call(arguments,1);while(k.length){var l=k.shift();if(!l){continue}if(typeof l!=="object"){throw new TypeError(l+"must be non-object")}for(var m in l){if(l.hasOwnProperty(m)){n[m]=l[m]}}}return n};e.shrinkBuf=function(k,l){if(k.length===l){return k}if(k.subarray){return k.subarray(0,l)}k.length=l;return k};var h={arraySet:function(l,n,p,k,o){if(n.subarray&&l.subarray){l.set(n.subarray(p,p+k),o);return}for(var m=0;m<k;m++){l[o+m]=n[p+m]}},flattenChunks:function(r){var p,n,m,q,o,k;m=0;for(p=0,n=r.length;p<n;p++){m+=r[p].length}k=new Uint8Array(m);q=0;for(p=0,n=r.length;p<n;p++){o=r[p];k.set(o,q);q+=o.length}return k}};var i={arraySet:function(l,n,p,k,o){for(var m=0;m<k;m++){l[o+m]=n[p+m]}},flattenChunks:function(k){return[].concat.apply([],k)}};e.setTyped=function(k){if(k){e.Buf8=Uint8Array;e.Buf16=Uint16Array;e.Buf32=Int32Array;e.assign(e,h)}else{e.Buf8=Array;e.Buf16=Array;e.Buf32=Array;e.assign(e,i)}};e.setTyped(j)},{}],31:[function(h,f,i){var n=h("./common");var l=true;var j=true;try{String.fromCharCode.apply(null,[0])}catch(m){l=false}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(m){j=false}var g=new n.Buf8(256);for(var e=0;e<256;e++){g[e]=(e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1)}g[254]=g[254]=1;i.string2buf=function(u){var o,v,q,r,p,t=u.length,s=0;for(r=0;r<t;r++){v=u.charCodeAt(r);if((v&64512)===55296&&(r+1<t)){q=u.charCodeAt(r+1);if((q&64512)===56320){v=65536+((v-55296)<<10)+(q-56320);r++}}s+=v<128?1:v<2048?2:v<65536?3:4}o=new n.Buf8(s);for(p=0,r=0;p<s;r++){v=u.charCodeAt(r);if((v&64512)===55296&&(r+1<t)){q=u.charCodeAt(r+1);if((q&64512)===56320){v=65536+((v-55296)<<10)+(q-56320);r++}}if(v<128){o[p++]=v}else{if(v<2048){o[p++]=192|(v>>>6);o[p++]=128|(v&63)}else{if(v<65536){o[p++]=224|(v>>>12);o[p++]=128|(v>>>6&63);o[p++]=128|(v&63)}else{o[p++]=240|(v>>>18);o[p++]=128|(v>>>12&63);o[p++]=128|(v>>>6&63);o[p++]=128|(v&63)}}}}return o};function k(q,p){if(p<65537){if((q.subarray&&j)||(!q.subarray&&l)){return String.fromCharCode.apply(null,n.shrinkBuf(q,p))}}var o="";for(var r=0;r<p;r++){o+=String.fromCharCode(q[r])}return o}i.buf2binstring=function(o){return k(o,o.length)};i.binstring2buf=function(r){var p=new n.Buf8(r.length);for(var q=0,o=p.length;q<o;q++){p[q]=r.charCodeAt(q)}return p};i.buf2string=function(t,q){var u,s,v,r;var p=q||t.length;var o=new Array(p*2);for(s=0,u=0;u<p;){v=t[u++];if(v<128){o[s++]=v;continue}r=g[v];if(r>4){o[s++]=65533;u+=r-1;continue}v&=r===2?31:r===3?15:7;while(r>1&&u<p){v=(v<<6)|(t[u++]&63);r--}if(r>1){o[s++]=65533;continue}if(v<65536){o[s++]=v}else{v-=65536;o[s++]=55296|((v>>10)&1023);o[s++]=56320|(v&1023)}}return k(o,s)};i.utf8border=function(p,o){var q;o=o||p.length;if(o>p.length){o=p.length}q=o-1;while(q>=0&&(p[q]&192)===128){q--}if(q<0){return o}if(q===0){return o}return(q+g[p[q]]>o)?q:o}},{"./common":30}],32:[function(f,g,e){function h(l,k,i,p){var m=(l&65535)|0,j=((l>>>16)&65535)|0,o=0;while(i!==0){o=i>2000?2000:i;i-=o;do{m=(m+k[p++])|0;j=(j+m)|0}while(--o);m%=65521;j%=65521}return(m|(j<<16))|0}g.exports=h},{}],33:[function(f,g,e){g.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],34:[function(g,h,f){function i(){var p,m=[];for(var o=0;o<256;o++){p=o;for(var l=0;l<8;l++){p=((p&1)?(3988292384^(p>>>1)):(p>>>1))}m[o]=p}return m}var e=i();function j(p,m,k,q){var o=e,l=q+k;p^=-1;for(var n=q;n<l;n++){p=(p>>>8)^o[(p^m[n])&255]}return(p^(-1))}h.exports=j},{}],35:[function(ao,aC,L){var S=ao("../utils/common");var aA=ao("./trees");var K=ao("./adler32");var Z=ao("./crc32");var F=ao("./messages");var N=0;var Y=1;var at=3;var n=4;var T=5;var t=0;var x=1;var ap=-2;var w=-3;var i=-5;var k=-1;var O=1;var D=2;var z=3;var u=4;var au=0;var J=2;var X=8;var av=9;var Q=15;var p=8;var ak=29;var az=256;var aB=az+1+ak;var C=30;var af=19;var am=2*aB+1;var R=15;var H=3;var aq=258;var g=(aq+H+1);var l=32;var V=42;var r=69;var aa=73;var al=91;var s=103;var aE=113;var B=666;var an=1;var v=2;var U=3;var h=4;var ar=3;function ag(aF,aG){aF.msg=F[aG];return aG}function P(aF){return((aF)<<1)-((aF)>4?9:0)}function ay(aG){var aF=aG.length;while(--aF>=0){aG[aF]=0}}function j(aG){var aH=aG.state;var aF=aH.pending;if(aF>aG.avail_out){aF=aG.avail_out}if(aF===0){return}S.arraySet(aG.output,aH.pending_buf,aH.pending_out,aF,aG.next_out);aG.next_out+=aF;aH.pending_out+=aF;aG.total_out+=aF;aG.avail_out-=aF;aH.pending-=aF;if(aH.pending===0){aH.pending_out=0}}function m(aF,aG){aA._tr_flush_block(aF,(aF.block_start>=0?aF.block_start:-1),aF.strstart-aF.block_start,aG);aF.block_start=aF.strstart;j(aF.strm)}function f(aG,aF){aG.pending_buf[aG.pending++]=aF}function A(aG,aF){aG.pending_buf[aG.pending++]=(aF>>>8)&255;aG.pending_buf[aG.pending++]=aF&255}function E(aG,aH,aJ,aI){var aF=aG.avail_in;if(aF>aI){aF=aI}if(aF===0){return 0}aG.avail_in-=aF;S.arraySet(aH,aG.input,aG.next_in,aF,aJ);if(aG.state.wrap===1){aG.adler=K(aG.adler,aH,aF,aJ)}else{if(aG.state.wrap===2){aG.adler=Z(aG.adler,aH,aF,aJ)}}aG.next_in+=aF;aG.total_in+=aF;return aF}function ax(aS,aJ){var aM=aS.max_chain_length;var aT=aS.strstart;var aK;var aL;var aF=aS.prev_length;var aG=aS.nice_match;var aI=(aS.strstart>(aS.w_size-g))?aS.strstart-(aS.w_size-g):0;var aQ=aS.window;var aN=aS.w_mask;var aH=aS.prev;var aP=aS.strstart+aq;var aR=aQ[aT+aF-1];var aO=aQ[aT+aF];if(aS.prev_length>=aS.good_match){aM>>=2}if(aG>aS.lookahead){aG=aS.lookahead}do{aK=aJ;if(aQ[aK+aF]!==aO||aQ[aK+aF-1]!==aR||aQ[aK]!==aQ[aT]||aQ[++aK]!==aQ[aT+1]){continue}aT+=2;aK++;do{}while(aQ[++aT]===aQ[++aK]&&aQ[++aT]===aQ[++aK]&&aQ[++aT]===aQ[++aK]&&aQ[++aT]===aQ[++aK]&&aQ[++aT]===aQ[++aK]&&aQ[++aT]===aQ[++aK]&&aQ[++aT]===aQ[++aK]&&aQ[++aT]===aQ[++aK]&&aT<aP);aL=aq-(aP-aT);aT=aP-aq;if(aL>aF){aS.match_start=aJ;aF=aL;if(aL>=aG){break}aR=aQ[aT+aF-1];aO=aQ[aT+aF]}}while((aJ=aH[aJ&aN])>aI&&--aM!==0);if(aF<=aS.lookahead){return aF}return aS.lookahead}function aj(aH){var aL=aH.w_size;var aI,aK,aF,aG,aJ;do{aG=aH.window_size-aH.lookahead-aH.strstart;if(aH.strstart>=aL+(aL-g)){S.arraySet(aH.window,aH.window,aL,aL,0);aH.match_start-=aL;aH.strstart-=aL;aH.block_start-=aL;aK=aH.hash_size;aI=aK;do{aF=aH.head[--aI];aH.head[aI]=(aF>=aL?aF-aL:0)}while(--aK);aK=aL;aI=aK;do{aF=aH.prev[--aI];aH.prev[aI]=(aF>=aL?aF-aL:0)}while(--aK);aG+=aL}if(aH.strm.avail_in===0){break}aK=E(aH.strm,aH.window,aH.strstart+aH.lookahead,aG);aH.lookahead+=aK;if(aH.lookahead+aH.insert>=H){aJ=aH.strstart-aH.insert;aH.ins_h=aH.window[aJ];aH.ins_h=((aH.ins_h<<aH.hash_shift)^aH.window[aJ+1])&aH.hash_mask;while(aH.insert){aH.ins_h=((aH.ins_h<<aH.hash_shift)^aH.window[aJ+H-1])&aH.hash_mask;aH.prev[aJ&aH.w_mask]=aH.head[aH.ins_h];aH.head[aH.ins_h]=aJ;aJ++;aH.insert--;if(aH.lookahead+aH.insert<H){break}}}}while(aH.lookahead<g&&aH.strm.avail_in!==0)}function M(aI,aF){var aH=65535;if(aH>aI.pending_buf_size-5){aH=aI.pending_buf_size-5}for(;;){if(aI.lookahead<=1){aj(aI);if(aI.lookahead===0&&aF===N){return an}if(aI.lookahead===0){break}}aI.strstart+=aI.lookahead;aI.lookahead=0;var aG=aI.block_start+aH;if(aI.strstart===0||aI.strstart>=aG){aI.lookahead=aI.strstart-aG;aI.strstart=aG;m(aI,false);if(aI.strm.avail_out===0){return an}}if(aI.strstart-aI.block_start>=(aI.w_size-g)){m(aI,false);if(aI.strm.avail_out===0){return an}}}aI.insert=0;if(aF===n){m(aI,true);if(aI.strm.avail_out===0){return U}return h}if(aI.strstart>aI.block_start){m(aI,false);if(aI.strm.avail_out===0){return an}}return an}function o(aH,aF){var aI;var aG;for(;;){if(aH.lookahead<g){aj(aH);if(aH.lookahead<g&&aF===N){return an}if(aH.lookahead===0){break}}aI=0;if(aH.lookahead>=H){aH.ins_h=((aH.ins_h<<aH.hash_shift)^aH.window[aH.strstart+H-1])&aH.hash_mask;aI=aH.prev[aH.strstart&aH.w_mask]=aH.head[aH.ins_h];aH.head[aH.ins_h]=aH.strstart}if(aI!==0&&((aH.strstart-aI)<=(aH.w_size-g))){aH.match_length=ax(aH,aI)}if(aH.match_length>=H){aG=aA._tr_tally(aH,aH.strstart-aH.match_start,aH.match_length-H);aH.lookahead-=aH.match_length;if(aH.match_length<=aH.max_lazy_match&&aH.lookahead>=H){aH.match_length--;do{aH.strstart++;aH.ins_h=((aH.ins_h<<aH.hash_shift)^aH.window[aH.strstart+H-1])&aH.hash_mask;aI=aH.prev[aH.strstart&aH.w_mask]=aH.head[aH.ins_h];aH.head[aH.ins_h]=aH.strstart}while(--aH.match_length!==0);aH.strstart++}else{aH.strstart+=aH.match_length;aH.match_length=0;aH.ins_h=aH.window[aH.strstart];aH.ins_h=((aH.ins_h<<aH.hash_shift)^aH.window[aH.strstart+1])&aH.hash_mask}}else{aG=aA._tr_tally(aH,0,aH.window[aH.strstart]);aH.lookahead--;aH.strstart++}if(aG){m(aH,false);if(aH.strm.avail_out===0){return an}}}aH.insert=((aH.strstart<(H-1))?aH.strstart:H-1);if(aF===n){m(aH,true);if(aH.strm.avail_out===0){return U}return h}if(aH.last_lit){m(aH,false);if(aH.strm.avail_out===0){return an}}return v}function ah(aI,aG){var aJ;var aH;var aF;for(;;){if(aI.lookahead<g){aj(aI);if(aI.lookahead<g&&aG===N){return an}if(aI.lookahead===0){break}}aJ=0;if(aI.lookahead>=H){aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aI.strstart+H-1])&aI.hash_mask;aJ=aI.prev[aI.strstart&aI.w_mask]=aI.head[aI.ins_h];aI.head[aI.ins_h]=aI.strstart}aI.prev_length=aI.match_length;aI.prev_match=aI.match_start;aI.match_length=H-1;if(aJ!==0&&aI.prev_length<aI.max_lazy_match&&aI.strstart-aJ<=(aI.w_size-g)){aI.match_length=ax(aI,aJ);if(aI.match_length<=5&&(aI.strategy===O||(aI.match_length===H&&aI.strstart-aI.match_start>4096))){aI.match_length=H-1}}if(aI.prev_length>=H&&aI.match_length<=aI.prev_length){aF=aI.strstart+aI.lookahead-H;aH=aA._tr_tally(aI,aI.strstart-1-aI.prev_match,aI.prev_length-H);aI.lookahead-=aI.prev_length-1;aI.prev_length-=2;do{if(++aI.strstart<=aF){aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aI.strstart+H-1])&aI.hash_mask;aJ=aI.prev[aI.strstart&aI.w_mask]=aI.head[aI.ins_h];aI.head[aI.ins_h]=aI.strstart}}while(--aI.prev_length!==0);aI.match_available=0;aI.match_length=H-1;aI.strstart++;if(aH){m(aI,false);if(aI.strm.avail_out===0){return an}}}else{if(aI.match_available){aH=aA._tr_tally(aI,0,aI.window[aI.strstart-1]);if(aH){m(aI,false)}aI.strstart++;aI.lookahead--;if(aI.strm.avail_out===0){return an}}else{aI.match_available=1;aI.strstart++;aI.lookahead--}}}if(aI.match_available){aH=aA._tr_tally(aI,0,aI.window[aI.strstart-1]);aI.match_available=0}aI.insert=aI.strstart<H-1?aI.strstart:H-1;if(aG===n){m(aI,true);if(aI.strm.avail_out===0){return U}return h}if(aI.last_lit){m(aI,false);if(aI.strm.avail_out===0){return an}}return v}function ad(aJ,aG){var aI;var aK;var aH,aF;var aL=aJ.window;for(;;){if(aJ.lookahead<=aq){aj(aJ);if(aJ.lookahead<=aq&&aG===N){return an}if(aJ.lookahead===0){break}}aJ.match_length=0;if(aJ.lookahead>=H&&aJ.strstart>0){aH=aJ.strstart-1;aK=aL[aH];if(aK===aL[++aH]&&aK===aL[++aH]&&aK===aL[++aH]){aF=aJ.strstart+aq;do{}while(aK===aL[++aH]&&aK===aL[++aH]&&aK===aL[++aH]&&aK===aL[++aH]&&aK===aL[++aH]&&aK===aL[++aH]&&aK===aL[++aH]&&aK===aL[++aH]&&aH<aF);aJ.match_length=aq-(aF-aH);if(aJ.match_length>aJ.lookahead){aJ.match_length=aJ.lookahead}}}if(aJ.match_length>=H){aI=aA._tr_tally(aJ,1,aJ.match_length-H);aJ.lookahead-=aJ.match_length;aJ.strstart+=aJ.match_length;aJ.match_length=0}else{aI=aA._tr_tally(aJ,0,aJ.window[aJ.strstart]);aJ.lookahead--;aJ.strstart++}if(aI){m(aJ,false);if(aJ.strm.avail_out===0){return an}}}aJ.insert=0;if(aG===n){m(aJ,true);if(aJ.strm.avail_out===0){return U}return h}if(aJ.last_lit){m(aJ,false);if(aJ.strm.avail_out===0){return an}}return v}function ae(aH,aF){var aG;for(;;){if(aH.lookahead===0){aj(aH);if(aH.lookahead===0){if(aF===N){return an}break}}aH.match_length=0;aG=aA._tr_tally(aH,0,aH.window[aH.strstart]);aH.lookahead--;aH.strstart++;if(aG){m(aH,false);if(aH.strm.avail_out===0){return an}}}aH.insert=0;if(aF===n){m(aH,true);if(aH.strm.avail_out===0){return U}return h}if(aH.last_lit){m(aH,false);if(aH.strm.avail_out===0){return an}}return v}function ac(aF,aJ,aG,aI,aH){this.good_length=aF;this.max_lazy=aJ;this.nice_length=aG;this.max_chain=aI;this.func=aH}var ab;ab=[new ac(0,0,0,0,M),new ac(4,4,8,4,o),new ac(4,5,16,8,o),new ac(4,6,32,32,o),new ac(4,4,16,16,ah),new ac(8,16,32,32,ah),new ac(8,16,128,128,ah),new ac(8,32,128,256,ah),new ac(32,128,258,1024,ah),new ac(32,258,258,4096,ah)];function I(aF){aF.window_size=2*aF.w_size;ay(aF.head);aF.max_lazy_match=ab[aF.level].max_lazy;aF.good_match=ab[aF.level].good_length;aF.nice_match=ab[aF.level].nice_length;aF.max_chain_length=ab[aF.level].max_chain;aF.strstart=0;aF.block_start=0;aF.lookahead=0;aF.insert=0;aF.match_length=aF.prev_length=H-1;aF.match_available=0;aF.ins_h=0}function e(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=X;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new S.Buf16(am*2);this.dyn_dtree=new S.Buf16((2*C+1)*2);this.bl_tree=new S.Buf16((2*af+1)*2);ay(this.dyn_ltree);ay(this.dyn_dtree);ay(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new S.Buf16(R+1);this.heap=new S.Buf16(2*aB+1);ay(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new S.Buf16(2*aB+1);ay(this.depth);this.l_buf=0;this.lit_bufsize=0;this.last_lit=0;this.d_buf=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}function ai(aF){var aG;if(!aF||!aF.state){return ag(aF,ap)}aF.total_in=aF.total_out=0;aF.data_type=J;aG=aF.state;aG.pending=0;aG.pending_out=0;if(aG.wrap<0){aG.wrap=-aG.wrap}aG.status=(aG.wrap?V:aE);aF.adler=(aG.wrap===2)?0:1;aG.last_flush=N;aA._tr_init(aG);return t}function y(aF){var aG=ai(aF);if(aG===t){I(aF.state)}return aG}function aD(aF,aG){if(!aF||!aF.state){return ap}if(aF.state.wrap!==2){return ap}aF.state.gzhead=aG;return t}function G(aF,aM,aL,aI,aK,aJ){if(!aF){return ap}var aH=1;if(aM===k){aM=6}if(aI<0){aH=0;aI=-aI}else{if(aI>15){aH=2;aI-=16}}if(aK<1||aK>av||aL!==X||aI<8||aI>15||aM<0||aM>9||aJ<0||aJ>u){return ag(aF,ap)}if(aI===8){aI=9}var aG=new e();aF.state=aG;aG.strm=aF;aG.wrap=aH;aG.gzhead=null;aG.w_bits=aI;aG.w_size=1<<aG.w_bits;aG.w_mask=aG.w_size-1;aG.hash_bits=aK+7;aG.hash_size=1<<aG.hash_bits;aG.hash_mask=aG.hash_size-1;aG.hash_shift=~~((aG.hash_bits+H-1)/H);aG.window=new S.Buf8(aG.w_size*2);aG.head=new S.Buf16(aG.hash_size);aG.prev=new S.Buf16(aG.w_size);aG.lit_bufsize=1<<(aK+6);aG.pending_buf_size=aG.lit_bufsize*4;aG.pending_buf=new S.Buf8(aG.pending_buf_size);aG.d_buf=aG.lit_bufsize>>1;aG.l_buf=(1+2)*aG.lit_bufsize;aG.level=aM;aG.strategy=aJ;aG.method=aL;return y(aF)}function W(aF,aG){return G(aF,aG,X,Q,p,au)}function q(aK,aL){var aJ,aN;var aI,aG;if(!aK||!aK.state||aL>T||aL<0){return aK?ag(aK,ap):ap}aN=aK.state;if(!aK.output||(!aK.input&&aK.avail_in!==0)||(aN.status===B&&aL!==n)){return ag(aK,(aK.avail_out===0)?i:ap)}aN.strm=aK;aJ=aN.last_flush;aN.last_flush=aL;if(aN.status===V){if(aN.wrap===2){aK.adler=0;f(aN,31);f(aN,139);f(aN,8);if(!aN.gzhead){f(aN,0);f(aN,0);f(aN,0);f(aN,0);f(aN,0);f(aN,aN.level===9?2:(aN.strategy>=D||aN.level<2?4:0));f(aN,ar);aN.status=aE}else{f(aN,(aN.gzhead.text?1:0)+(aN.gzhead.hcrc?2:0)+(!aN.gzhead.extra?0:4)+(!aN.gzhead.name?0:8)+(!aN.gzhead.comment?0:16));f(aN,aN.gzhead.time&255);f(aN,(aN.gzhead.time>>8)&255);f(aN,(aN.gzhead.time>>16)&255);f(aN,(aN.gzhead.time>>24)&255);f(aN,aN.level===9?2:(aN.strategy>=D||aN.level<2?4:0));f(aN,aN.gzhead.os&255);if(aN.gzhead.extra&&aN.gzhead.extra.length){f(aN,aN.gzhead.extra.length&255);f(aN,(aN.gzhead.extra.length>>8)&255)}if(aN.gzhead.hcrc){aK.adler=Z(aK.adler,aN.pending_buf,aN.pending,0)}aN.gzindex=0;aN.status=r}}else{var aH=(X+((aN.w_bits-8)<<4))<<8;var aM=-1;if(aN.strategy>=D||aN.level<2){aM=0}else{if(aN.level<6){aM=1}else{if(aN.level===6){aM=2}else{aM=3}}}aH|=(aM<<6);if(aN.strstart!==0){aH|=l}aH+=31-(aH%31);aN.status=aE;A(aN,aH);if(aN.strstart!==0){A(aN,aK.adler>>>16);A(aN,aK.adler&65535)}aK.adler=1}}if(aN.status===r){if(aN.gzhead.extra){aI=aN.pending;while(aN.gzindex<(aN.gzhead.extra.length&65535)){if(aN.pending===aN.pending_buf_size){if(aN.gzhead.hcrc&&aN.pending>aI){aK.adler=Z(aK.adler,aN.pending_buf,aN.pending-aI,aI)}j(aK);aI=aN.pending;if(aN.pending===aN.pending_buf_size){break}}f(aN,aN.gzhead.extra[aN.gzindex]&255);aN.gzindex++}if(aN.gzhead.hcrc&&aN.pending>aI){aK.adler=Z(aK.adler,aN.pending_buf,aN.pending-aI,aI)}if(aN.gzindex===aN.gzhead.extra.length){aN.gzindex=0;aN.status=aa}}else{aN.status=aa}}if(aN.status===aa){if(aN.gzhead.name){aI=aN.pending;do{if(aN.pending===aN.pending_buf_size){if(aN.gzhead.hcrc&&aN.pending>aI){aK.adler=Z(aK.adler,aN.pending_buf,aN.pending-aI,aI)}j(aK);aI=aN.pending;if(aN.pending===aN.pending_buf_size){aG=1;break}}if(aN.gzindex<aN.gzhead.name.length){aG=aN.gzhead.name.charCodeAt(aN.gzindex++)&255}else{aG=0}f(aN,aG)}while(aG!==0);if(aN.gzhead.hcrc&&aN.pending>aI){aK.adler=Z(aK.adler,aN.pending_buf,aN.pending-aI,aI)}if(aG===0){aN.gzindex=0;aN.status=al}}else{aN.status=al}}if(aN.status===al){if(aN.gzhead.comment){aI=aN.pending;do{if(aN.pending===aN.pending_buf_size){if(aN.gzhead.hcrc&&aN.pending>aI){aK.adler=Z(aK.adler,aN.pending_buf,aN.pending-aI,aI)}j(aK);aI=aN.pending;if(aN.pending===aN.pending_buf_size){aG=1;break}}if(aN.gzindex<aN.gzhead.comment.length){aG=aN.gzhead.comment.charCodeAt(aN.gzindex++)&255}else{aG=0}f(aN,aG)}while(aG!==0);if(aN.gzhead.hcrc&&aN.pending>aI){aK.adler=Z(aK.adler,aN.pending_buf,aN.pending-aI,aI)}if(aG===0){aN.status=s}}else{aN.status=s}}if(aN.status===s){if(aN.gzhead.hcrc){if(aN.pending+2>aN.pending_buf_size){j(aK)}if(aN.pending+2<=aN.pending_buf_size){f(aN,aK.adler&255);f(aN,(aK.adler>>8)&255);aK.adler=0;aN.status=aE}}else{aN.status=aE}}if(aN.pending!==0){j(aK);if(aK.avail_out===0){aN.last_flush=-1;return t}}else{if(aK.avail_in===0&&P(aL)<=P(aJ)&&aL!==n){return ag(aK,i)}}if(aN.status===B&&aK.avail_in!==0){return ag(aK,i)}if(aK.avail_in!==0||aN.lookahead!==0||(aL!==N&&aN.status!==B)){var aF=(aN.strategy===D)?ae(aN,aL):(aN.strategy===z?ad(aN,aL):ab[aN.level].func(aN,aL));if(aF===U||aF===h){aN.status=B}if(aF===an||aF===U){if(aK.avail_out===0){aN.last_flush=-1}return t}if(aF===v){if(aL===Y){aA._tr_align(aN)}else{if(aL!==T){aA._tr_stored_block(aN,0,0,false);if(aL===at){ay(aN.head);if(aN.lookahead===0){aN.strstart=0;aN.block_start=0;aN.insert=0}}}}j(aK);if(aK.avail_out===0){aN.last_flush=-1;return t}}}if(aL!==n){return t}if(aN.wrap<=0){return x}if(aN.wrap===2){f(aN,aK.adler&255);f(aN,(aK.adler>>8)&255);f(aN,(aK.adler>>16)&255);f(aN,(aK.adler>>24)&255);f(aN,aK.total_in&255);f(aN,(aK.total_in>>8)&255);f(aN,(aK.total_in>>16)&255);f(aN,(aK.total_in>>24)&255)}else{A(aN,aK.adler>>>16);A(aN,aK.adler&65535)}j(aK);if(aN.wrap>0){aN.wrap=-aN.wrap}return aN.pending!==0?t:x}function aw(aG){var aF;if(!aG||!aG.state){return ap}aF=aG.state.status;if(aF!==V&&aF!==r&&aF!==aa&&aF!==al&&aF!==s&&aF!==aE&&aF!==B){return ag(aG,ap)}aG.state=null;return aF===aE?ag(aG,w):t}L.deflateInit=W;L.deflateInit2=G;L.deflateReset=y;L.deflateResetKeep=ai;L.deflateSetHeader=aD;L.deflate=q;L.deflateEnd=aw;L.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":30,"./adler32":32,"./crc32":34,"./messages":40,"./trees":41}],36:[function(f,g,e){function h(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=false}g.exports=h},{}],37:[function(g,h,f){var i=30;var j=12;h.exports=function e(I,p){var q;var K;var v;var J;var u;var o;var B;var l;var z;var m;var C;var y;var F;var D;var G;var t;var w;var k;var s;var H;var A;var E;var n;var x,r;q=I.state;K=I.next_in;x=I.input;v=K+(I.avail_in-5);J=I.next_out;r=I.output;u=J-(p-I.avail_out);o=J+(I.avail_out-257);B=q.dmax;l=q.wsize;z=q.whave;m=q.wnext;C=q.window;y=q.hold;F=q.bits;D=q.lencode;G=q.distcode;t=(1<<q.lenbits)-1;w=(1<<q.distbits)-1;top:do{if(F<15){y+=x[K++]<<F;F+=8;y+=x[K++]<<F;F+=8}k=D[y&t];dolen:for(;;){s=k>>>24;y>>>=s;F-=s;s=(k>>>16)&255;if(s===0){r[J++]=k&65535}else{if(s&16){H=k&65535;s&=15;if(s){if(F<s){y+=x[K++]<<F;F+=8}H+=y&((1<<s)-1);y>>>=s;F-=s}if(F<15){y+=x[K++]<<F;F+=8;y+=x[K++]<<F;F+=8}k=G[y&w];dodist:for(;;){s=k>>>24;y>>>=s;F-=s;s=(k>>>16)&255;if(s&16){A=k&65535;s&=15;if(F<s){y+=x[K++]<<F;F+=8;if(F<s){y+=x[K++]<<F;F+=8}}A+=y&((1<<s)-1);if(A>B){I.msg="invalid distance too far back";q.mode=i;break top}y>>>=s;F-=s;s=J-u;if(A>s){s=A-s;if(s>z){if(q.sane){I.msg="invalid distance too far back";q.mode=i;break top}}E=0;n=C;if(m===0){E+=l-s;if(s<H){H-=s;do{r[J++]=C[E++]}while(--s);E=J-A;n=r}}else{if(m<s){E+=l+m-s;s-=m;if(s<H){H-=s;do{r[J++]=C[E++]}while(--s);E=0;if(m<H){s=m;H-=s;do{r[J++]=C[E++]}while(--s);E=J-A;n=r}}}else{E+=m-s;if(s<H){H-=s;do{r[J++]=C[E++]}while(--s);E=J-A;n=r}}}while(H>2){r[J++]=n[E++];r[J++]=n[E++];r[J++]=n[E++];H-=3}if(H){r[J++]=n[E++];if(H>1){r[J++]=n[E++]}}}else{E=J-A;do{r[J++]=r[E++];r[J++]=r[E++];r[J++]=r[E++];H-=3}while(H>2);if(H){r[J++]=r[E++];if(H>1){r[J++]=r[E++]}}}}else{if((s&64)===0){k=G[(k&65535)+(y&((1<<s)-1))];continue dodist}else{I.msg="invalid distance code";q.mode=i;break top}}break}}else{if((s&64)===0){k=D[(k&65535)+(y&((1<<s)-1))];continue dolen}else{if(s&32){q.mode=j;break top}else{I.msg="invalid literal/length code";q.mode=i;break top}}}}break}}while(K<v&&J<o);H=F>>3;K-=H;F-=H<<3;y&=(1<<F)-1;I.next_in=K;I.next_out=J;I.avail_in=(K<v?5+(v-K):5-(K-v));I.avail_out=(J<o?257+(o-J):257-(J-o));q.hold=y;q.bits=F;return}},{}],38:[function(ar,ax,N){var S=ar("../utils/common");var M=ar("./adler32");var ad=ar("./crc32");var ap=ar("./inffast");var n=ar("./inftrees");var ac=0;var ae=1;var J=2;var p=4;var T=5;var C=6;var v=0;var z=1;var t=2;var at=-2;var x=-3;var L=-4;var j=-5;var aa=8;var al=1;var ak=2;var k=3;var ag=4;var E=5;var f=6;var s=7;var Y=8;var r=9;var aq=10;var w=11;var m=12;var ai=13;var h=14;var az=15;var ao=16;var o=17;var A=18;var U=19;var Z=20;var e=21;var aw=22;var V=23;var au=24;var D=25;var F=26;var an=27;var W=28;var B=29;var g=30;var ay=31;var G=32;var X=852;var P=592;var Q=15;var K=Q;function u(aA){return(((aA>>>24)&255)+((aA>>>8)&65280)+((aA&65280)<<8)+((aA&255)<<24))}function af(){this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new S.Buf16(320);this.work=new S.Buf16(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}function R(aA){var aB;if(!aA||!aA.state){return at}aB=aA.state;aA.total_in=aA.total_out=aB.total=0;aA.msg="";if(aB.wrap){aA.adler=aB.wrap&1}aB.mode=al;aB.last=0;aB.havedict=0;aB.dmax=32768;aB.head=null;aB.hold=0;aB.bits=0;aB.lencode=aB.lendyn=new S.Buf32(X);aB.distcode=aB.distdyn=new S.Buf32(P);aB.sane=1;aB.back=-1;return v}function av(aA){var aB;if(!aA||!aA.state){return at}aB=aA.state;aB.wsize=0;aB.whave=0;aB.wnext=0;return R(aA)}function y(aA,aC){var aB;var aD;if(!aA||!aA.state){return at}aD=aA.state;if(aC<0){aB=0;aC=-aC}else{aB=(aC>>4)+1;if(aC<48){aC&=15}}if(aC&&(aC<8||aC>15)){return at}if(aD.window!==null&&aD.wbits!==aC){aD.window=null}aD.wrap=aB;aD.wbits=aC;return av(aA)}function q(aA,aC){var aB;var aD;if(!aA){return at}aD=new af();aA.state=aD;aD.window=null;aB=y(aA,aC);if(aB!==v){aA.state=null}return aB}function I(aA){return q(aA,K)}var ah=true;var am,l;function H(aB){if(ah){var aA;am=new S.Buf32(512);l=new S.Buf32(32);aA=0;while(aA<144){aB.lens[aA++]=8}while(aA<256){aB.lens[aA++]=9}while(aA<280){aB.lens[aA++]=7}while(aA<288){aB.lens[aA++]=8}n(ae,aB.lens,0,288,am,0,aB.work,{bits:9});aA=0;while(aA<32){aB.lens[aA++]=5}n(J,aB.lens,0,32,l,0,aB.work,{bits:5});ah=false}aB.lencode=am;aB.lenbits=9;aB.distcode=l;aB.distbits=5}function O(aB,aE,aA,aF){var aD;var aC=aB.state;if(aC.window===null){aC.wsize=1<<aC.wbits;aC.wnext=0;aC.whave=0;aC.window=new S.Buf8(aC.wsize)}if(aF>=aC.wsize){S.arraySet(aC.window,aE,aA-aC.wsize,aC.wsize,0);aC.wnext=0;aC.whave=aC.wsize}else{aD=aC.wsize-aC.wnext;if(aD>aF){aD=aF}S.arraySet(aC.window,aE,aA-aF,aD,aC.wnext);aF-=aD;if(aF){S.arraySet(aC.window,aE,aA-aF,aF,0);aC.wnext=aF;aC.whave=aC.wsize}else{aC.wnext+=aD;if(aC.wnext===aC.wsize){aC.wnext=0}if(aC.whave<aC.wsize){aC.whave+=aD}}}return 0}function ab(aX,aR){var aF;var aK,aI;var aP;var aG;var aD,aE;var aN;var aT;var a1,a0;var aS;var aU;var aC;var aA=0;var aY,aJ,aZ;var aO,aB,aL;var aW;var a2;var aH=new S.Buf8(4);var aM;var aQ;var aV=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!aX||!aX.state||!aX.output||(!aX.input&&aX.avail_in!==0)){return at}aF=aX.state;if(aF.mode===m){aF.mode=ai}aG=aX.next_out;aI=aX.output;aE=aX.avail_out;aP=aX.next_in;aK=aX.input;aD=aX.avail_in;aN=aF.hold;aT=aF.bits;a1=aD;a0=aE;a2=v;inf_leave:for(;;){switch(aF.mode){case al:if(aF.wrap===0){aF.mode=ai;break}while(aT<16){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if((aF.wrap&2)&&aN===35615){aF.check=0;aH[0]=aN&255;aH[1]=(aN>>>8)&255;aF.check=ad(aF.check,aH,2,0);aN=0;aT=0;aF.mode=ak;break}aF.flags=0;if(aF.head){aF.head.done=false}if(!(aF.wrap&1)||(((aN&255)<<8)+(aN>>8))%31){aX.msg="incorrect header check";aF.mode=g;break}if((aN&15)!==aa){aX.msg="unknown compression method";aF.mode=g;break}aN>>>=4;aT-=4;aW=(aN&15)+8;if(aF.wbits===0){aF.wbits=aW}else{if(aW>aF.wbits){aX.msg="invalid window size";aF.mode=g;break}}aF.dmax=1<<aW;aX.adler=aF.check=1;aF.mode=aN&512?aq:m;aN=0;aT=0;break;case ak:while(aT<16){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.flags=aN;if((aF.flags&255)!==aa){aX.msg="unknown compression method";aF.mode=g;break}if(aF.flags&57344){aX.msg="unknown header flags set";aF.mode=g;break}if(aF.head){aF.head.text=((aN>>8)&1)}if(aF.flags&512){aH[0]=aN&255;aH[1]=(aN>>>8)&255;aF.check=ad(aF.check,aH,2,0)}aN=0;aT=0;aF.mode=k;case k:while(aT<32){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aF.head){aF.head.time=aN}if(aF.flags&512){aH[0]=aN&255;aH[1]=(aN>>>8)&255;aH[2]=(aN>>>16)&255;aH[3]=(aN>>>24)&255;aF.check=ad(aF.check,aH,4,0)}aN=0;aT=0;aF.mode=ag;case ag:while(aT<16){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aF.head){aF.head.xflags=(aN&255);aF.head.os=(aN>>8)}if(aF.flags&512){aH[0]=aN&255;aH[1]=(aN>>>8)&255;aF.check=ad(aF.check,aH,2,0)}aN=0;aT=0;aF.mode=E;case E:if(aF.flags&1024){while(aT<16){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.length=aN;if(aF.head){aF.head.extra_len=aN}if(aF.flags&512){aH[0]=aN&255;aH[1]=(aN>>>8)&255;aF.check=ad(aF.check,aH,2,0)}aN=0;aT=0}else{if(aF.head){aF.head.extra=null}}aF.mode=f;case f:if(aF.flags&1024){aS=aF.length;if(aS>aD){aS=aD}if(aS){if(aF.head){aW=aF.head.extra_len-aF.length;if(!aF.head.extra){aF.head.extra=new Array(aF.head.extra_len)}S.arraySet(aF.head.extra,aK,aP,aS,aW)}if(aF.flags&512){aF.check=ad(aF.check,aK,aS,aP)}aD-=aS;aP+=aS;aF.length-=aS}if(aF.length){break inf_leave}}aF.length=0;aF.mode=s;case s:if(aF.flags&2048){if(aD===0){break inf_leave}aS=0;do{aW=aK[aP+aS++];if(aF.head&&aW&&(aF.length<65536)){aF.head.name+=String.fromCharCode(aW)}}while(aW&&aS<aD);if(aF.flags&512){aF.check=ad(aF.check,aK,aS,aP)}aD-=aS;aP+=aS;if(aW){break inf_leave}}else{if(aF.head){aF.head.name=null}}aF.length=0;aF.mode=Y;case Y:if(aF.flags&4096){if(aD===0){break inf_leave}aS=0;do{aW=aK[aP+aS++];if(aF.head&&aW&&(aF.length<65536)){aF.head.comment+=String.fromCharCode(aW)}}while(aW&&aS<aD);if(aF.flags&512){aF.check=ad(aF.check,aK,aS,aP)}aD-=aS;aP+=aS;if(aW){break inf_leave}}else{if(aF.head){aF.head.comment=null}}aF.mode=r;case r:if(aF.flags&512){while(aT<16){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aN!==(aF.check&65535)){aX.msg="header crc mismatch";aF.mode=g;break}aN=0;aT=0}if(aF.head){aF.head.hcrc=((aF.flags>>9)&1);aF.head.done=true}aX.adler=aF.check=0;aF.mode=m;break;case aq:while(aT<32){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aX.adler=aF.check=u(aN);aN=0;aT=0;aF.mode=w;case w:if(aF.havedict===0){aX.next_out=aG;aX.avail_out=aE;aX.next_in=aP;aX.avail_in=aD;aF.hold=aN;aF.bits=aT;return t}aX.adler=aF.check=1;aF.mode=m;case m:if(aR===T||aR===C){break inf_leave}case ai:if(aF.last){aN>>>=aT&7;aT-=aT&7;aF.mode=an;break}while(aT<3){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.last=(aN&1);aN>>>=1;aT-=1;switch((aN&3)){case 0:aF.mode=h;break;case 1:H(aF);aF.mode=Z;if(aR===C){aN>>>=2;aT-=2;break inf_leave}break;case 2:aF.mode=o;break;case 3:aX.msg="invalid block type";aF.mode=g}aN>>>=2;aT-=2;break;case h:aN>>>=aT&7;aT-=aT&7;while(aT<32){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if((aN&65535)!==((aN>>>16)^65535)){aX.msg="invalid stored block lengths";aF.mode=g;break}aF.length=aN&65535;aN=0;aT=0;aF.mode=az;if(aR===C){break inf_leave}case az:aF.mode=ao;case ao:aS=aF.length;if(aS){if(aS>aD){aS=aD}if(aS>aE){aS=aE}if(aS===0){break inf_leave}S.arraySet(aI,aK,aP,aS,aG);aD-=aS;aP+=aS;aE-=aS;aG+=aS;aF.length-=aS;break}aF.mode=m;break;case o:while(aT<14){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.nlen=(aN&31)+257;aN>>>=5;aT-=5;aF.ndist=(aN&31)+1;aN>>>=5;aT-=5;aF.ncode=(aN&15)+4;aN>>>=4;aT-=4;if(aF.nlen>286||aF.ndist>30){aX.msg="too many length or distance symbols";aF.mode=g;break}aF.have=0;aF.mode=A;case A:while(aF.have<aF.ncode){while(aT<3){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.lens[aV[aF.have++]]=(aN&7);aN>>>=3;aT-=3}while(aF.have<19){aF.lens[aV[aF.have++]]=0}aF.lencode=aF.lendyn;aF.lenbits=7;aM={bits:aF.lenbits};a2=n(ac,aF.lens,0,19,aF.lencode,0,aF.work,aM);aF.lenbits=aM.bits;if(a2){aX.msg="invalid code lengths set";aF.mode=g;break}aF.have=0;aF.mode=U;case U:while(aF.have<aF.nlen+aF.ndist){for(;;){aA=aF.lencode[aN&((1<<aF.lenbits)-1)];aY=aA>>>24;aJ=(aA>>>16)&255;aZ=aA&65535;if((aY)<=aT){break}if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aZ<16){aN>>>=aY;aT-=aY;aF.lens[aF.have++]=aZ}else{if(aZ===16){aQ=aY+2;while(aT<aQ){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aN>>>=aY;aT-=aY;if(aF.have===0){aX.msg="invalid bit length repeat";aF.mode=g;break}aW=aF.lens[aF.have-1];aS=3+(aN&3);aN>>>=2;aT-=2}else{if(aZ===17){aQ=aY+3;while(aT<aQ){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aN>>>=aY;aT-=aY;aW=0;aS=3+(aN&7);aN>>>=3;aT-=3}else{aQ=aY+7;while(aT<aQ){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aN>>>=aY;aT-=aY;aW=0;aS=11+(aN&127);aN>>>=7;aT-=7}}if(aF.have+aS>aF.nlen+aF.ndist){aX.msg="invalid bit length repeat";aF.mode=g;break}while(aS--){aF.lens[aF.have++]=aW}}}if(aF.mode===g){break}if(aF.lens[256]===0){aX.msg="invalid code -- missing end-of-block";aF.mode=g;break}aF.lenbits=9;aM={bits:aF.lenbits};a2=n(ae,aF.lens,0,aF.nlen,aF.lencode,0,aF.work,aM);aF.lenbits=aM.bits;if(a2){aX.msg="invalid literal/lengths set";aF.mode=g;break}aF.distbits=6;aF.distcode=aF.distdyn;aM={bits:aF.distbits};a2=n(J,aF.lens,aF.nlen,aF.ndist,aF.distcode,0,aF.work,aM);aF.distbits=aM.bits;if(a2){aX.msg="invalid distances set";aF.mode=g;break}aF.mode=Z;if(aR===C){break inf_leave}case Z:aF.mode=e;case e:if(aD>=6&&aE>=258){aX.next_out=aG;aX.avail_out=aE;aX.next_in=aP;aX.avail_in=aD;aF.hold=aN;aF.bits=aT;ap(aX,a0);aG=aX.next_out;aI=aX.output;aE=aX.avail_out;aP=aX.next_in;aK=aX.input;aD=aX.avail_in;aN=aF.hold;aT=aF.bits;if(aF.mode===m){aF.back=-1}break}aF.back=0;for(;;){aA=aF.lencode[aN&((1<<aF.lenbits)-1)];aY=aA>>>24;aJ=(aA>>>16)&255;aZ=aA&65535;if(aY<=aT){break}if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aJ&&(aJ&240)===0){aO=aY;aB=aJ;aL=aZ;for(;;){aA=aF.lencode[aL+((aN&((1<<(aO+aB))-1))>>aO)];aY=aA>>>24;aJ=(aA>>>16)&255;aZ=aA&65535;if((aO+aY)<=aT){break}if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aN>>>=aO;aT-=aO;aF.back+=aO}aN>>>=aY;aT-=aY;aF.back+=aY;aF.length=aZ;if(aJ===0){aF.mode=F;break}if(aJ&32){aF.back=-1;aF.mode=m;break}if(aJ&64){aX.msg="invalid literal/length code";aF.mode=g;break}aF.extra=aJ&15;aF.mode=aw;case aw:if(aF.extra){aQ=aF.extra;while(aT<aQ){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.length+=aN&((1<<aF.extra)-1);aN>>>=aF.extra;aT-=aF.extra;aF.back+=aF.extra}aF.was=aF.length;aF.mode=V;case V:for(;;){aA=aF.distcode[aN&((1<<aF.distbits)-1)];aY=aA>>>24;aJ=(aA>>>16)&255;aZ=aA&65535;if((aY)<=aT){break}if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if((aJ&240)===0){aO=aY;aB=aJ;aL=aZ;for(;;){aA=aF.distcode[aL+((aN&((1<<(aO+aB))-1))>>aO)];aY=aA>>>24;aJ=(aA>>>16)&255;aZ=aA&65535;if((aO+aY)<=aT){break}if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aN>>>=aO;aT-=aO;aF.back+=aO}aN>>>=aY;aT-=aY;aF.back+=aY;if(aJ&64){aX.msg="invalid distance code";aF.mode=g;break}aF.offset=aZ;aF.extra=(aJ)&15;aF.mode=au;case au:if(aF.extra){aQ=aF.extra;while(aT<aQ){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}aF.offset+=aN&((1<<aF.extra)-1);aN>>>=aF.extra;aT-=aF.extra;aF.back+=aF.extra}if(aF.offset>aF.dmax){aX.msg="invalid distance too far back";aF.mode=g;break}aF.mode=D;case D:if(aE===0){break inf_leave}aS=a0-aE;if(aF.offset>aS){aS=aF.offset-aS;if(aS>aF.whave){if(aF.sane){aX.msg="invalid distance too far back";aF.mode=g;break}}if(aS>aF.wnext){aS-=aF.wnext;aU=aF.wsize-aS}else{aU=aF.wnext-aS}if(aS>aF.length){aS=aF.length}aC=aF.window}else{aC=aI;aU=aG-aF.offset;aS=aF.length}if(aS>aE){aS=aE}aE-=aS;aF.length-=aS;do{aI[aG++]=aC[aU++]}while(--aS);if(aF.length===0){aF.mode=e}break;case F:if(aE===0){break inf_leave}aI[aG++]=aF.length;aE--;aF.mode=e;break;case an:if(aF.wrap){while(aT<32){if(aD===0){break inf_leave}aD--;aN|=aK[aP++]<<aT;aT+=8}a0-=aE;aX.total_out+=a0;aF.total+=a0;if(a0){aX.adler=aF.check=(aF.flags?ad(aF.check,aI,a0,aG-a0):M(aF.check,aI,a0,aG-a0))}a0=aE;if((aF.flags?aN:u(aN))!==aF.check){aX.msg="incorrect data check";aF.mode=g;break}aN=0;aT=0}aF.mode=W;case W:if(aF.wrap&&aF.flags){while(aT<32){if(aD===0){break inf_leave}aD--;aN+=aK[aP++]<<aT;aT+=8}if(aN!==(aF.total&4294967295)){aX.msg="incorrect length check";aF.mode=g;break}aN=0;aT=0}aF.mode=B;case B:a2=z;break inf_leave;case g:a2=x;break inf_leave;case ay:return L;case G:default:return at}}aX.next_out=aG;aX.avail_out=aE;aX.next_in=aP;aX.avail_in=aD;aF.hold=aN;aF.bits=aT;if(aF.wsize||(a0!==aX.avail_out&&aF.mode<g&&(aF.mode<an||aR!==p))){if(O(aX,aX.output,aX.next_out,a0-aX.avail_out)){aF.mode=ay;return L}}a1-=aX.avail_in;a0-=aX.avail_out;aX.total_in+=a1;aX.total_out+=a0;aF.total+=a0;if(aF.wrap&&a0){aX.adler=aF.check=(aF.flags?ad(aF.check,aI,a0,aX.next_out-a0):M(aF.check,aI,a0,aX.next_out-a0))}aX.data_type=aF.bits+(aF.last?64:0)+(aF.mode===m?128:0)+(aF.mode===Z||aF.mode===az?256:0);if(((a1===0&&a0===0)||aR===p)&&a2===v){a2=j}return a2}function aj(aA){if(!aA||!aA.state){return at}var aB=aA.state;if(aB.window){aB.window=null}aA.state=null;return v}function i(aA,aB){var aC;if(!aA||!aA.state){return at}aC=aA.state;if((aC.wrap&2)===0){return at}aC.head=aB;aB.done=false;return v}N.inflateReset=av;N.inflateReset2=y;N.inflateResetKeep=R;N.inflateInit=I;N.inflateInit2=q;N.inflate=ab;N.inflateEnd=aj;N.inflateGetHeader=i;N.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":30,"./adler32":32,"./crc32":34,"./inffast":37,"./inftrees":39}],39:[function(h,f,i){var r=h("../utils/common");var q=15;var n=852;var m=592;var p=0;var k=1;var g=2;var o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var j=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var e=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];f.exports=function l(v,aa,I,X,W,U,H,E){var L=E.bits;var S=0;var D=0;var K=0,R=0;var J=0;var V=0;var B=0;var w=0;var z=0;var Q=0;var P;var M;var ab;var O;var G;var y=null;var F=0;var u;var A=new r.Buf16(q+1);var x=new r.Buf16(q+1);var t=null;var Z=0;var T,C,Y;for(S=0;S<=q;S++){A[S]=0}for(D=0;D<X;D++){A[aa[I+D]]++}J=L;for(R=q;R>=1;R--){if(A[R]!==0){break}}if(J>R){J=R}if(R===0){W[U++]=(1<<24)|(64<<16)|0;W[U++]=(1<<24)|(64<<16)|0;E.bits=1;return 0}for(K=1;K<R;K++){if(A[K]!==0){break}}if(J<K){J=K}w=1;for(S=1;S<=q;S++){w<<=1;w-=A[S];if(w<0){return -1}}if(w>0&&(v===p||R!==1)){return -1}x[1]=0;for(S=1;S<q;S++){x[S+1]=x[S]+A[S]}for(D=0;D<X;D++){if(aa[I+D]!==0){H[x[aa[I+D]]++]=D}}if(v===p){y=t=H;u=19}else{if(v===k){y=o;F-=257;t=s;Z-=257;u=256}else{y=j;t=e;u=-1}}Q=0;D=0;S=K;G=U;V=J;B=0;ab=-1;z=1<<J;O=z-1;if((v===k&&z>n)||(v===g&&z>m)){return 1}var N=0;for(;;){N++;T=S-B;if(H[D]<u){C=0;Y=H[D]}else{if(H[D]>u){C=t[Z+H[D]];Y=y[F+H[D]]}else{C=32+64;Y=0}}P=1<<(S-B);M=1<<V;K=M;do{M-=P;W[G+(Q>>B)+M]=(T<<24)|(C<<16)|Y|0}while(M!==0);P=1<<(S-1);while(Q&P){P>>=1}if(P!==0){Q&=P-1;Q+=P}else{Q=0}D++;if(--A[S]===0){if(S===R){break}S=aa[I+H[D]]}if(S>J&&(Q&O)!==ab){if(B===0){B=J}G+=K;V=S-B;w=1<<V;while(V+B<R){w-=A[V+B];if(w<=0){break}V++;w<<=1}z+=1<<V;if((v===k&&z>n)||(v===g&&z>m)){return 1}ab=Q&O;W[ab]=(J<<24)|(V<<16)|(G-U)|0}}if(Q!==0){W[G+Q]=((S-B)<<24)|(64<<16)|0}E.bits=J;return 0}},{"../utils/common":30}],40:[function(f,g,e){g.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],41:[function(m,k,al){var aw=m("../utils/common");var T=4;var u=0;var E=1;var F=2;function e(ay){var ax=ay.length;while(--ax>=0){ay[ax]=0}}var X=0;var an=1;var M=2;var av=3;var G=258;var r=29;var h=256;var i=h+1+r;var f=30;var x=19;var j=2*i+1;var ar=15;var A=16;var ag=7;var g=256;var J=16;var I=17;var N=18;var l=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var V=512;var P=new Array((i+2)*2);e(P);var ab=new Array(f*2);e(ab);var ah=new Array(V);e(ah);var B=new Array(G-av+1);e(B);var O=new Array(r);e(O);var aq=new Array(f);e(aq);function ae(aA,az,ay,ax,aB){this.static_tree=aA;this.extra_bits=az;this.extra_base=ay;this.elems=ax;this.max_length=aB;this.has_stree=aA&&aA.length}var aj;var aa;var z;function au(ay,ax){this.dyn_tree=ay;this.max_code=0;this.stat_desc=ax}function ac(ax){return ax<256?ah[ax]:ah[256+(ax>>>7)]}function p(ay,ax){ay.pending_buf[ay.pending++]=(ax)&255;ay.pending_buf[ay.pending++]=(ax>>>8)&255}function ai(ax,az,ay){if(ax.bi_valid>(A-ay)){ax.bi_buf|=(az<<ax.bi_valid)&65535;p(ax,ax.bi_buf);ax.bi_buf=az>>(A-ax.bi_valid);ax.bi_valid+=ay-A}else{ax.bi_buf|=(az<<ax.bi_valid)&65535;ax.bi_valid+=ay}}function am(ay,az,ax){ai(ay,ax[az*2],ax[az*2+1])}function C(az,ax){var ay=0;do{ay|=az&1;az>>>=1;ay<<=1}while(--ax>0);return ay>>>1}function w(ax){if(ax.bi_valid===16){p(ax,ax.bi_buf);ax.bi_buf=0;ax.bi_valid=0}else{if(ax.bi_valid>=8){ax.pending_buf[ax.pending++]=ax.bi_buf&255;ax.bi_buf>>=8;ax.bi_valid-=8}}}function o(aL,aG){var aM=aG.dyn_tree;var aH=aG.max_code;var aK=aG.stat_desc.static_tree;var az=aG.stat_desc.has_stree;var aB=aG.stat_desc.extra_bits;var ax=aG.stat_desc.extra_base;var aJ=aG.stat_desc.max_length;var aE;var ay,aA;var aI;var aD;var aF;var aC=0;for(aI=0;aI<=ar;aI++){aL.bl_count[aI]=0}aM[aL.heap[aL.heap_max]*2+1]=0;for(aE=aL.heap_max+1;aE<j;aE++){ay=aL.heap[aE];aI=aM[aM[ay*2+1]*2+1]+1;if(aI>aJ){aI=aJ;aC++}aM[ay*2+1]=aI;if(ay>aH){continue}aL.bl_count[aI]++;aD=0;if(ay>=ax){aD=aB[ay-ax]}aF=aM[ay*2];aL.opt_len+=aF*(aI+aD);if(az){aL.static_len+=aF*(aK[ay*2+1]+aD)}}if(aC===0){return}do{aI=aJ-1;while(aL.bl_count[aI]===0){aI--}aL.bl_count[aI]--;aL.bl_count[aI+1]+=2;aL.bl_count[aJ]--;aC-=2}while(aC>0);for(aI=aJ;aI!==0;aI--){ay=aL.bl_count[aI];while(ay!==0){aA=aL.heap[--aE];if(aA>aH){continue}if(aM[aA*2+1]!==aI){aL.opt_len+=(aI-aM[aA*2+1])*aM[aA*2];aM[aA*2+1]=aI}ay--}}}function ak(ay,aE,az){var aB=new Array(ar+1);var aA=0;var aC;var aD;for(aC=1;aC<=ar;aC++){aB[aC]=aA=(aA+az[aC-1])<<1}for(aD=0;aD<=aE;aD++){var ax=ay[aD*2+1];if(ax===0){continue}ay[aD*2]=C(aB[ax]++,ax)}}function W(){var aC;var aA;var az;var ay;var aB;var ax=new Array(ar+1);az=0;for(ay=0;ay<r-1;ay++){O[ay]=az;for(aC=0;aC<(1<<l[ay]);aC++){B[az++]=ay}}B[az-1]=ay;aB=0;for(ay=0;ay<16;ay++){aq[ay]=aB;for(aC=0;aC<(1<<y[ay]);aC++){ah[aB++]=ay}}aB>>=7;for(;ay<f;ay++){aq[ay]=aB<<7;for(aC=0;aC<(1<<(y[ay]-7));aC++){ah[256+aB++]=ay}}for(aA=0;aA<=ar;aA++){ax[aA]=0}aC=0;while(aC<=143){P[aC*2+1]=8;aC++;ax[8]++}while(aC<=255){P[aC*2+1]=9;aC++;ax[9]++}while(aC<=279){P[aC*2+1]=7;aC++;ax[7]++}while(aC<=287){P[aC*2+1]=8;aC++;ax[8]++}ak(P,i+1,ax);for(aC=0;aC<f;aC++){ab[aC*2+1]=5;ab[aC*2]=C(aC,5)}aj=new ae(P,l,h+1,i,ar);aa=new ae(ab,y,0,f,ar);z=new ae(new Array(0),D,0,x,ag)}function L(ax){var ay;for(ay=0;ay<i;ay++){ax.dyn_ltree[ay*2]=0}for(ay=0;ay<f;ay++){ax.dyn_dtree[ay*2]=0}for(ay=0;ay<x;ay++){ax.bl_tree[ay*2]=0}ax.dyn_ltree[g*2]=1;ax.opt_len=ax.static_len=0;ax.last_lit=ax.matches=0}function n(ax){if(ax.bi_valid>8){p(ax,ax.bi_buf)}else{if(ax.bi_valid>0){ax.pending_buf[ax.pending++]=ax.bi_buf}}ax.bi_buf=0;ax.bi_valid=0}function t(az,ay,ax,aA){n(az);if(aA){p(az,ax);p(az,~ax)}aw.arraySet(az.pending_buf,az.window,ay,ax,az.pending);az.pending+=ax}function Z(ay,aC,ax,aB){var aA=aC*2;var az=ax*2;return(ay[aA]<ay[az]||(ay[aA]===ay[az]&&aB[aC]<=aB[ax]))}function at(aB,ax,az){var ay=aB.heap[az];var aA=az<<1;while(aA<=aB.heap_len){if(aA<aB.heap_len&&Z(ax,aB.heap[aA+1],aB.heap[aA],aB.depth)){aA++}if(Z(ax,ay,aB.heap[aA],aB.depth)){break}aB.heap[az]=aB.heap[aA];az=aA;aA<<=1}aB.heap[az]=ay}function ap(ay,aE,aB){var aD;var aA;var aC=0;var az;var ax;if(ay.last_lit!==0){do{aD=(ay.pending_buf[ay.d_buf+aC*2]<<8)|(ay.pending_buf[ay.d_buf+aC*2+1]);aA=ay.pending_buf[ay.l_buf+aC];aC++;if(aD===0){am(ay,aA,aE)}else{az=B[aA];am(ay,az+h+1,aE);ax=l[az];if(ax!==0){aA-=O[az];ai(ay,aA,ax)}aD--;az=ac(aD);am(ay,az,aB);ax=y[az];if(ax!==0){aD-=aq[az];ai(ay,aD,ax)}}}while(aC<ay.last_lit)}am(ay,g,aE)}function Y(aF,aC){var aG=aC.dyn_tree;var aE=aC.stat_desc.static_tree;var az=aC.stat_desc.has_stree;var ax=aC.stat_desc.elems;var ay,aB;var aD=-1;var aA;aF.heap_len=0;aF.heap_max=j;for(ay=0;ay<ax;ay++){if(aG[ay*2]!==0){aF.heap[++aF.heap_len]=aD=ay;aF.depth[ay]=0}else{aG[ay*2+1]=0}}while(aF.heap_len<2){aA=aF.heap[++aF.heap_len]=(aD<2?++aD:0);aG[aA*2]=1;aF.depth[aA]=0;aF.opt_len--;if(az){aF.static_len-=aE[aA*2+1]}}aC.max_code=aD;for(ay=(aF.heap_len>>1);ay>=1;ay--){at(aF,aG,ay)}aA=ax;do{ay=aF.heap[1];aF.heap[1]=aF.heap[aF.heap_len--];at(aF,aG,1);aB=aF.heap[1];aF.heap[--aF.heap_max]=ay;aF.heap[--aF.heap_max]=aB;aG[aA*2]=aG[ay*2]+aG[aB*2];aF.depth[aA]=(aF.depth[ay]>=aF.depth[aB]?aF.depth[ay]:aF.depth[aB])+1;aG[ay*2+1]=aG[aB*2+1]=aA;aF.heap[1]=aA++;at(aF,aG,1)}while(aF.heap_len>=2);aF.heap[--aF.heap_max]=aF.heap[1];o(aF,aC);ak(aG,aD,aF.bl_count)}function s(aF,aG,aE){var ay;var aC=-1;var ax;var aA=aG[0*2+1];var aB=0;var az=7;var aD=4;if(aA===0){az=138;aD=3}aG[(aE+1)*2+1]=65535;for(ay=0;ay<=aE;ay++){ax=aA;aA=aG[(ay+1)*2+1];if(++aB<az&&ax===aA){continue}else{if(aB<aD){aF.bl_tree[ax*2]+=aB}else{if(ax!==0){if(ax!==aC){aF.bl_tree[ax*2]++}aF.bl_tree[J*2]++}else{if(aB<=10){aF.bl_tree[I*2]++}else{aF.bl_tree[N*2]++}}}}aB=0;aC=ax;if(aA===0){az=138;aD=3}else{if(ax===aA){az=6;aD=3}else{az=7;aD=4}}}}function v(aF,aG,aE){var ay;var aC=-1;var ax;var aA=aG[0*2+1];var aB=0;var az=7;var aD=4;if(aA===0){az=138;aD=3}for(ay=0;ay<=aE;ay++){ax=aA;aA=aG[(ay+1)*2+1];if(++aB<az&&ax===aA){continue}else{if(aB<aD){do{am(aF,ax,aF.bl_tree)}while(--aB!==0)}else{if(ax!==0){if(ax!==aC){am(aF,ax,aF.bl_tree);aB--}am(aF,J,aF.bl_tree);ai(aF,aB-3,2)}else{if(aB<=10){am(aF,I,aF.bl_tree);ai(aF,aB-3,3)}else{am(aF,N,aF.bl_tree);ai(aF,aB-11,7)}}}}aB=0;aC=ax;if(aA===0){az=138;aD=3}else{if(ax===aA){az=6;aD=3}else{az=7;aD=4}}}}function H(ay){var ax;s(ay,ay.dyn_ltree,ay.l_desc.max_code);s(ay,ay.dyn_dtree,ay.d_desc.max_code);Y(ay,ay.bl_desc);for(ax=x-1;ax>=3;ax--){if(ay.bl_tree[U[ax]*2+1]!==0){break}}ay.opt_len+=3*(ax+1)+5+5+4;return ax}function R(ay,az,ax,aA){var aB;ai(ay,az-257,5);ai(ay,ax-1,5);ai(ay,aA-4,4);for(aB=0;aB<aA;aB++){ai(ay,ay.bl_tree[U[aB]*2+1],3)}v(ay,ay.dyn_ltree,az-1);v(ay,ay.dyn_dtree,ax-1)}function Q(ay){var ax=4093624447;var az;for(az=0;az<=31;az++,ax>>>=1){if((ax&1)&&(ay.dyn_ltree[az*2]!==0)){return u}}if(ay.dyn_ltree[9*2]!==0||ay.dyn_ltree[10*2]!==0||ay.dyn_ltree[13*2]!==0){return E}for(az=32;az<h;az++){if(ay.dyn_ltree[az*2]!==0){return E}}return u}var af=false;function K(ax){if(!af){W();af=true}ax.l_desc=new au(ax.dyn_ltree,aj);ax.d_desc=new au(ax.dyn_dtree,aa);ax.bl_desc=new au(ax.bl_tree,z);ax.bi_buf=0;ax.bi_valid=0;L(ax)}function S(az,ax,ay,aA){ai(az,(X<<1)+(aA?1:0),3);t(az,ax,ay,true)}function ad(ax){ai(ax,an<<1,3);am(ax,g,P);w(ax)}function q(aC,az,aB,aD){var ay,ax;var aA=0;if(aC.level>0){if(aC.strm.data_type===F){aC.strm.data_type=Q(aC)}Y(aC,aC.l_desc);Y(aC,aC.d_desc);aA=H(aC);ay=(aC.opt_len+3+7)>>>3;ax=(aC.static_len+3+7)>>>3;if(ax<=ay){ay=ax}}else{ay=ax=aB+5}if((aB+4<=ay)&&(az!==-1)){S(aC,az,aB,aD)}else{if(aC.strategy===T||ax===ay){ai(aC,(an<<1)+(aD?1:0),3);ap(aC,P,ab)}else{ai(aC,(M<<1)+(aD?1:0),3);R(aC,aC.l_desc.max_code+1,aC.d_desc.max_code+1,aA+1);ap(aC,aC.dyn_ltree,aC.dyn_dtree)}}L(aC);if(aD){n(aC)}}function ao(ax,az,ay){ax.pending_buf[ax.d_buf+ax.last_lit*2]=(az>>>8)&255;ax.pending_buf[ax.d_buf+ax.last_lit*2+1]=az&255;ax.pending_buf[ax.l_buf+ax.last_lit]=ay&255;ax.last_lit++;if(az===0){ax.dyn_ltree[ay*2]++}else{ax.matches++;az--;ax.dyn_ltree[(B[ay]+h+1)*2]++;ax.dyn_dtree[ac(az)*2]++}return(ax.last_lit===ax.lit_bufsize-1)}al._tr_init=K;al._tr_stored_block=S;al._tr_flush_block=q;al._tr_tally=ao;al._tr_align=ad},{"../utils/common":30}],42:[function(f,g,e){function h(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}g.exports=h},{}],43:[function(f,g,e){(function(h){(function(T){T.parser=function(s,S){return new R(s,S)};T.SAXParser=R;T.SAXStream=k;T.createStream=u;T.MAX_BUFFER_LENGTH=64*1024;var K=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];T.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function R(s,S){if(!(this instanceof R)){return new R(s,S)}var af=this;v(af);af.q=af.c="";af.bufferCheckPosition=T.MAX_BUFFER_LENGTH;af.opt=S||{};af.opt.lowercase=af.opt.lowercase||af.opt.lowercasetags;af.looseCase=af.opt.lowercase?"toLowerCase":"toUpperCase";af.tags=[];af.closed=af.closedRoot=af.sawRoot=false;af.tag=af.error=null;af.strict=!!s;af.noscript=!!(s||af.opt.noscript);af.state=r.BEGIN;af.strictEntities=af.opt.strictEntities;af.ENTITIES=af.strictEntities?Object.create(T.XML_ENTITIES):Object.create(T.ENTITIES);af.attribList=[];if(af.opt.xmlns){af.ns=Object.create(y)}af.trackPosition=af.opt.position!==false;if(af.trackPosition){af.position=af.line=af.column=0}E(af,"onready")}if(!Object.create){Object.create=function(af){function S(){}S.prototype=af;var s=new S();return s}}if(!Object.keys){Object.keys=function(af){var s=[];for(var S in af){if(af.hasOwnProperty(S)){s.push(S)}}return s}}function B(aj){var ai=Math.max(T.MAX_BUFFER_LENGTH,10);var ah=0;for(var ag=0,af=K.length;ag<af;ag++){var S=aj[K[ag]].length;if(S>ai){switch(K[ag]){case"textNode":i(aj);break;case"cdata":m(aj,"oncdata",aj.cdata);aj.cdata="";break;case"script":m(aj,"onscript",aj.script);aj.script="";break;default:N(aj,"Max buffer length exceeded: "+K[ag])}}ah=Math.max(ah,S)}var s=T.MAX_BUFFER_LENGTH-ah;aj.bufferCheckPosition=s+aj.position}function v(af){for(var S=0,s=K.length;S<s;S++){af[K[S]]=""}}function ab(s){i(s);if(s.cdata!==""){m(s,"oncdata",s.cdata);s.cdata=""}if(s.script!==""){m(s,"onscript",s.script);s.script=""}}R.prototype={end:function(){D(this)},write:w,resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){ab(this)}};var H;try{H=f("stream").Stream}catch(U){H=function(){}}var A=T.EVENTS.filter(function(s){return s!=="error"&&s!=="end"});function u(s,S){return new k(s,S)}function k(s,S){if(!(this instanceof k)){return new k(s,S)}H.apply(this);this._parser=new R(s,S);this.writable=true;this.readable=true;var af=this;this._parser.onend=function(){af.emit("end")};this._parser.onerror=function(ag){af.emit("error",ag);af._parser.error=null};this._decoder=null;A.forEach(function(ag){Object.defineProperty(af,"on"+ag,{get:function(){return af._parser["on"+ag]},set:function(ah){if(!ah){af.removeAllListeners(ag);af._parser["on"+ag]=ah;return ah}af.on(ag,ah)},enumerable:true,configurable:false})})}k.prototype=Object.create(H.prototype,{constructor:{value:k}});k.prototype.write=function(s){if(typeof h==="function"&&typeof h.isBuffer==="function"&&h.isBuffer(s)){if(!this._decoder){var S=f("string_decoder").StringDecoder;this._decoder=new S("utf8")}s=this._decoder.write(s)}this._parser.write(s.toString());this.emit("data",s);return true};k.prototype.end=function(s){if(s&&s.length){this.write(s)}this._parser.end();return true};k.prototype.on=function(af,s){var S=this;if(!S._parser["on"+af]&&A.indexOf(af)!==-1){S._parser["on"+af]=function(){var ag=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);ag.splice(0,0,af);S.emit.apply(S,ag)}}return H.prototype.on.call(S,af,s)};var O="\r\n\t ";var ae="0124356789";var p="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";var C="'\"";var n=O+">";var ad="[CDATA[";var ac="DOCTYPE";var x="http://www.w3.org/XML/1998/namespace";var G="http://www.w3.org/2000/xmlns/";var y={xml:x,xmlns:G};O=I(O);ae=I(ae);p=I(p);var o=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;var V=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;var P=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;var z=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;C=I(C);n=I(n);function I(s){return s.split("").reduce(function(S,af){S[af]=true;return S},{})}function q(s){return Object.prototype.toString.call(s)==="[object RegExp]"}function M(s,S){return q(s)?!!S.match(s):s[S]}function Y(s,S){return !M(s,S)}var r=0;T.STATE={BEGIN:r++,BEGIN_WHITESPACE:r++,TEXT:r++,TEXT_ENTITY:r++,OPEN_WAKA:r++,SGML_DECL:r++,SGML_DECL_QUOTED:r++,DOCTYPE:r++,DOCTYPE_QUOTED:r++,DOCTYPE_DTD:r++,DOCTYPE_DTD_QUOTED:r++,COMMENT_STARTING:r++,COMMENT:r++,COMMENT_ENDING:r++,COMMENT_ENDED:r++,CDATA:r++,CDATA_ENDING:r++,CDATA_ENDING_2:r++,PROC_INST:r++,PROC_INST_BODY:r++,PROC_INST_ENDING:r++,OPEN_TAG:r++,OPEN_TAG_SLASH:r++,ATTRIB:r++,ATTRIB_NAME:r++,ATTRIB_NAME_SAW_WHITE:r++,ATTRIB_VALUE:r++,ATTRIB_VALUE_QUOTED:r++,ATTRIB_VALUE_CLOSED:r++,ATTRIB_VALUE_UNQUOTED:r++,ATTRIB_VALUE_ENTITY_Q:r++,ATTRIB_VALUE_ENTITY_U:r++,CLOSE_TAG:r++,CLOSE_TAG_SAW_WHITE:r++,SCRIPT:r++,SCRIPT_ENDING:r++};T.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};T.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(T.ENTITIES).forEach(function(S){var ag=T.ENTITIES[S];var af=typeof ag==="number"?String.fromCharCode(ag):ag;T.ENTITIES[S]=af});for(var W in T.STATE){T.STATE[T.STATE[W]]=W}r=T.STATE;function E(af,s,S){af[s]&&af[s](S)}function m(af,s,S){if(af.textNode){i(af)}E(af,s,S)}function i(s){s.textNode=j(s.opt,s.textNode);if(s.textNode){E(s,"ontext",s.textNode)}s.textNode=""}function j(s,S){if(s.trim){S=S.trim()}if(s.normalize){S=S.replace(/\s+/g," ")}return S}function N(S,s){i(S);if(S.trackPosition){s+="\nLine: "+S.line+"\nColumn: "+S.column+"\nChar: "+S.c}s=new Error(s);S.error=s;E(S,"onerror",s);return S}function D(s){if(s.sawRoot&&!s.closedRoot){aa(s,"Unclosed root tag")}if((s.state!==r.BEGIN)&&(s.state!==r.BEGIN_WHITESPACE)&&(s.state!==r.TEXT)){N(s,"Unexpected end")}i(s);s.c="";s.closed=true;E(s,"onend");R.call(s,s.strict,s.opt);return s}function aa(S,s){if(typeof S!=="object"||!(S instanceof R)){throw new Error("bad call to strictFail")}if(S.strict){N(S,s)}}function L(af){if(!af.strict){af.tagName=af.tagName[af.looseCase]()}var S=af.tags[af.tags.length-1]||af;var s=af.tag={name:af.tagName,attributes:{}};if(af.opt.xmlns){s.ns=S.ns}af.attribList.length=0}function F(s,ah){var af=s.indexOf(":");var ag=af<0?["",s]:s.split(":");var ai=ag[0];var S=ag[1];if(ah&&s==="xmlns"){ai="xmlns";S=""}return{prefix:ai,local:S}}function J(ai){if(!ai.strict){ai.attribName=ai.attribName[ai.looseCase]()}if(ai.attribList.indexOf(ai.attribName)!==-1||ai.tag.attributes.hasOwnProperty(ai.attribName)){ai.attribName=ai.attribValue="";return}if(ai.opt.xmlns){var ag=F(ai.attribName,true);var ah=ag.prefix;var S=ag.local;if(ah==="xmlns"){if(S==="xml"&&ai.attribValue!==x){aa(ai,"xml: prefix must be bound to "+x+"\nActual: "+ai.attribValue)}else{if(S==="xmlns"&&ai.attribValue!==G){aa(ai,"xmlns: prefix must be bound to "+G+"\nActual: "+ai.attribValue)}else{var s=ai.tag;var af=ai.tags[ai.tags.length-1]||ai;if(s.ns===af.ns){s.ns=Object.create(af.ns)}s.ns[S]=ai.attribValue}}}ai.attribList.push([ai.attribName,ai.attribValue])}else{ai.tag.attributes[ai.attribName]=ai.attribValue;m(ai,"onattribute",{name:ai.attribName,value:ai.attribValue})}ai.attribName=ai.attribValue=""}function t(S,ak){if(S.opt.xmlns){var ar=S.tag;var ap=F(S.tagName);ar.prefix=ap.prefix;ar.local=ap.local;ar.uri=ar.ns[ap.prefix]||"";if(ar.prefix&&!ar.uri){aa(S,"Unbound namespace prefix: "+JSON.stringify(S.tagName));ar.uri=ap.prefix}var ao=S.tags[S.tags.length-1]||S;if(ar.ns&&ao.ns!==ar.ns){Object.keys(ar.ns).forEach(function(at){m(S,"onopennamespace",{prefix:at,uri:ar.ns[at]})})}for(var ah=0,ag=S.attribList.length;ah<ag;ah++){var aj=S.attribList[ah];var s=aj[0];var an=aj[1];var aq=F(s,true);var ai=aq.prefix;var al=aq.local;var af=ai===""?"":(ar.ns[ai]||"");var am={name:s,value:an,prefix:ai,local:al,uri:af};if(ai&&ai!=="xmlns"&&!af){aa(S,"Unbound namespace prefix: "+JSON.stringify(ai));am.uri=ai}S.tag.attributes[s]=am;m(S,"onattribute",am)}S.attribList.length=0}S.tag.isSelfClosing=!!ak;S.sawRoot=true;S.tags.push(S.tag);m(S,"onopentag",S.tag);if(!ak){if(!S.noscript&&S.tagName.toLowerCase()==="script"){S.state=r.SCRIPT}else{S.state=r.TEXT}S.tag=null;S.tagName=""}S.attribName=S.attribValue="";S.attribList.length=0}function Z(S){if(!S.tagName){aa(S,"Weird empty close tag.");S.textNode+="</>";S.state=r.TEXT;return}if(S.script){if(S.tagName!=="script"){S.script+="</"+S.tagName+">";S.tagName="";S.state=r.SCRIPT;return}m(S,"onscript",S.script);S.script=""}var al=S.tags.length;var ag=S.tagName;if(!S.strict){ag=ag[S.looseCase]()}var af=ag;while(al--){var ak=S.tags[al];if(ak.name!==af){aa(S,"Unexpected close tag")}else{break}}if(al<0){aa(S,"Unmatched closing tag: "+S.tagName);S.textNode+="</"+S.tagName+">";S.state=r.TEXT;return}S.tagName=ag;var am=S.tags.length;while(am-->al){var an=S.tag=S.tags.pop();S.tagName=S.tag.name;m(S,"onclosetag",S.tagName);var ai={};for(var ah in an.ns){ai[ah]=an.ns[ah]}var aj=S.tags[S.tags.length-1]||S;if(S.opt.xmlns&&an.ns!==aj.ns){Object.keys(an.ns).forEach(function(s){var ao=an.ns[s];m(S,"onclosenamespace",{prefix:s,uri:ao})})}}if(al===0){S.closedRoot=true}S.tagName=S.attribValue=S.attribName="";S.attribList.length=0;S.state=r.TEXT}function Q(ah){var s=ah.entity;var ag=s.toLowerCase();var S;var af="";if(ah.ENTITIES[s]){return ah.ENTITIES[s]}if(ah.ENTITIES[ag]){return ah.ENTITIES[ag]}s=ag;if(s.charAt(0)==="#"){if(s.charAt(1)==="x"){s=s.slice(2);S=parseInt(s,16);af=S.toString(16)}else{s=s.slice(1);S=parseInt(s,10);af=S.toString(10)}}s=s.replace(/^0+/,"");if(af.toLowerCase()!==s){aa(ah,"Invalid character entity");return"&"+ah.entity+";"}return String.fromCodePoint(S)}function l(S,s){if(s==="<"){S.state=r.OPEN_WAKA;S.startTagPosition=S.position}else{if(Y(O,s)){aa(S,"Non-whitespace before first tag.");S.textNode=s;S.state=r.TEXT}}}function X(S,af){var s="";if(af<S.length){s=S.charAt(af)}return s}function w(S){var ak=this;if(this.error){throw this.error}if(ak.closed){return N(ak,"Cannot write after close. Assign an onready handler.")}if(S===null){return D(ak)}var af=0;var aj="";while(true){aj=X(S,af++);ak.c=aj;if(!aj){break}if(ak.trackPosition){ak.position++;if(aj==="\n"){ak.line++;ak.column=0}else{ak.column++}}switch(ak.state){case r.BEGIN:ak.state=r.BEGIN_WHITESPACE;if(aj==="\uFEFF"){continue}l(ak,aj);continue;case r.BEGIN_WHITESPACE:l(ak,aj);continue;case r.TEXT:if(ak.sawRoot&&!ak.closedRoot){var ah=af-1;while(aj&&aj!=="<"&&aj!=="&"){aj=X(S,af++);if(aj&&ak.trackPosition){ak.position++;if(aj==="\n"){ak.line++;ak.column=0}else{ak.column++}}}ak.textNode+=S.substring(ah,af-1)}if(aj==="<"&&!(ak.sawRoot&&ak.closedRoot&&!ak.strict)){ak.state=r.OPEN_WAKA;ak.startTagPosition=ak.position}else{if(Y(O,aj)&&(!ak.sawRoot||ak.closedRoot)){aa(ak,"Text data outside of root node.")}if(aj==="&"){ak.state=r.TEXT_ENTITY}else{ak.textNode+=aj}}continue;case r.SCRIPT:if(aj==="<"){ak.state=r.SCRIPT_ENDING}else{ak.script+=aj}continue;case r.SCRIPT_ENDING:if(aj==="/"){ak.state=r.CLOSE_TAG}else{ak.script+="<"+aj;ak.state=r.SCRIPT}continue;case r.OPEN_WAKA:if(aj==="!"){ak.state=r.SGML_DECL;ak.sgmlDecl=""}else{if(M(O,aj)){}else{if(M(o,aj)){ak.state=r.OPEN_TAG;ak.tagName=aj}else{if(aj==="/"){ak.state=r.CLOSE_TAG;ak.tagName=""}else{if(aj==="?"){ak.state=r.PROC_INST;ak.procInstName=ak.procInstBody=""}else{aa(ak,"Unencoded <");if(ak.startTagPosition+1<ak.position){var ai=ak.position-ak.startTagPosition;aj=new Array(ai).join(" ")+aj}ak.textNode+="<"+aj;ak.state=r.TEXT}}}}}continue;case r.SGML_DECL:if((ak.sgmlDecl+aj).toUpperCase()===ad){m(ak,"onopencdata");ak.state=r.CDATA;ak.sgmlDecl="";ak.cdata=""}else{if(ak.sgmlDecl+aj==="--"){ak.state=r.COMMENT;ak.comment="";ak.sgmlDecl=""}else{if((ak.sgmlDecl+aj).toUpperCase()===ac){ak.state=r.DOCTYPE;if(ak.doctype||ak.sawRoot){aa(ak,"Inappropriately located doctype declaration")}ak.doctype="";ak.sgmlDecl=""}else{if(aj===">"){m(ak,"onsgmldeclaration",ak.sgmlDecl);ak.sgmlDecl="";ak.state=r.TEXT}else{if(M(C,aj)){ak.state=r.SGML_DECL_QUOTED;ak.sgmlDecl+=aj}else{ak.sgmlDecl+=aj}}}}}continue;case r.SGML_DECL_QUOTED:if(aj===ak.q){ak.state=r.SGML_DECL;ak.q=""}ak.sgmlDecl+=aj;continue;case r.DOCTYPE:if(aj===">"){ak.state=r.TEXT;m(ak,"ondoctype",ak.doctype);ak.doctype=true}else{ak.doctype+=aj;if(aj==="["){ak.state=r.DOCTYPE_DTD}else{if(M(C,aj)){ak.state=r.DOCTYPE_QUOTED;ak.q=aj}}}continue;case r.DOCTYPE_QUOTED:ak.doctype+=aj;if(aj===ak.q){ak.q="";ak.state=r.DOCTYPE}continue;case r.DOCTYPE_DTD:ak.doctype+=aj;if(aj==="]"){ak.state=r.DOCTYPE}else{if(M(C,aj)){ak.state=r.DOCTYPE_DTD_QUOTED;ak.q=aj}}continue;case r.DOCTYPE_DTD_QUOTED:ak.doctype+=aj;if(aj===ak.q){ak.state=r.DOCTYPE_DTD;ak.q=""}continue;case r.COMMENT:if(aj==="-"){ak.state=r.COMMENT_ENDING}else{ak.comment+=aj}continue;case r.COMMENT_ENDING:if(aj==="-"){ak.state=r.COMMENT_ENDED;ak.comment=j(ak.opt,ak.comment);if(ak.comment){m(ak,"oncomment",ak.comment)}ak.comment=""}else{ak.comment+="-"+aj;ak.state=r.COMMENT}continue;case r.COMMENT_ENDED:if(aj!==">"){aa(ak,"Malformed comment");ak.comment+="--"+aj;ak.state=r.COMMENT}else{ak.state=r.TEXT}continue;case r.CDATA:if(aj==="]"){ak.state=r.CDATA_ENDING}else{ak.cdata+=aj}continue;case r.CDATA_ENDING:if(aj==="]"){ak.state=r.CDATA_ENDING_2}else{ak.cdata+="]"+aj;ak.state=r.CDATA}continue;case r.CDATA_ENDING_2:if(aj===">"){if(ak.cdata){m(ak,"oncdata",ak.cdata)}m(ak,"onclosecdata");ak.cdata="";ak.state=r.TEXT}else{if(aj==="]"){ak.cdata+="]"}else{ak.cdata+="]]"+aj;ak.state=r.CDATA}}continue;case r.PROC_INST:if(aj==="?"){ak.state=r.PROC_INST_ENDING}else{if(M(O,aj)){ak.state=r.PROC_INST_BODY}else{ak.procInstName+=aj}}continue;case r.PROC_INST_BODY:if(!ak.procInstBody&&M(O,aj)){continue}else{if(aj==="?"){ak.state=r.PROC_INST_ENDING}else{ak.procInstBody+=aj}}continue;case r.PROC_INST_ENDING:if(aj===">"){m(ak,"onprocessinginstruction",{name:ak.procInstName,body:ak.procInstBody});ak.procInstName=ak.procInstBody="";ak.state=r.TEXT}else{ak.procInstBody+="?"+aj;ak.state=r.PROC_INST_BODY}continue;case r.OPEN_TAG:if(M(V,aj)){ak.tagName+=aj}else{L(ak);if(aj===">"){t(ak)}else{if(aj==="/"){ak.state=r.OPEN_TAG_SLASH}else{if(Y(O,aj)){aa(ak,"Invalid character in tag name")}ak.state=r.ATTRIB}}}continue;case r.OPEN_TAG_SLASH:if(aj===">"){t(ak,true);Z(ak)}else{aa(ak,"Forward-slash in opening tag not followed by >");ak.state=r.ATTRIB}continue;case r.ATTRIB:if(M(O,aj)){continue}else{if(aj===">"){t(ak)}else{if(aj==="/"){ak.state=r.OPEN_TAG_SLASH}else{if(M(o,aj)){ak.attribName=aj;ak.attribValue="";ak.state=r.ATTRIB_NAME}else{aa(ak,"Invalid attribute name")}}}}continue;case r.ATTRIB_NAME:if(aj==="="){ak.state=r.ATTRIB_VALUE}else{if(aj===">"){aa(ak,"Attribute without value");ak.attribValue=ak.attribName;J(ak);t(ak)}else{if(M(O,aj)){ak.state=r.ATTRIB_NAME_SAW_WHITE}else{if(M(V,aj)){ak.attribName+=aj}else{aa(ak,"Invalid attribute name")}}}}continue;case r.ATTRIB_NAME_SAW_WHITE:if(aj==="="){ak.state=r.ATTRIB_VALUE}else{if(M(O,aj)){continue}else{aa(ak,"Attribute without value");ak.tag.attributes[ak.attribName]="";ak.attribValue="";m(ak,"onattribute",{name:ak.attribName,value:""});ak.attribName="";if(aj===">"){t(ak)}else{if(M(o,aj)){ak.attribName=aj;ak.state=r.ATTRIB_NAME}else{aa(ak,"Invalid attribute name");ak.state=r.ATTRIB}}}}continue;case r.ATTRIB_VALUE:if(M(O,aj)){continue}else{if(M(C,aj)){ak.q=aj;ak.state=r.ATTRIB_VALUE_QUOTED}else{aa(ak,"Unquoted attribute value");ak.state=r.ATTRIB_VALUE_UNQUOTED;ak.attribValue=aj}}continue;case r.ATTRIB_VALUE_QUOTED:if(aj!==ak.q){if(aj==="&"){ak.state=r.ATTRIB_VALUE_ENTITY_Q}else{ak.attribValue+=aj}continue}J(ak);ak.q="";ak.state=r.ATTRIB_VALUE_CLOSED;continue;case r.ATTRIB_VALUE_CLOSED:if(M(O,aj)){ak.state=r.ATTRIB}else{if(aj===">"){t(ak)}else{if(aj==="/"){ak.state=r.OPEN_TAG_SLASH}else{if(M(o,aj)){aa(ak,"No whitespace between attributes");ak.attribName=aj;ak.attribValue="";ak.state=r.ATTRIB_NAME}else{aa(ak,"Invalid attribute name")}}}}continue;case r.ATTRIB_VALUE_UNQUOTED:if(Y(n,aj)){if(aj==="&"){ak.state=r.ATTRIB_VALUE_ENTITY_U}else{ak.attribValue+=aj}continue}J(ak);if(aj===">"){t(ak)}else{ak.state=r.ATTRIB}continue;case r.CLOSE_TAG:if(!ak.tagName){if(M(O,aj)){continue}else{if(Y(o,aj)){if(ak.script){ak.script+="</"+aj;ak.state=r.SCRIPT}else{aa(ak,"Invalid tagname in closing tag.")}}else{ak.tagName=aj}}}else{if(aj===">"){Z(ak)}else{if(M(V,aj)){ak.tagName+=aj}else{if(ak.script){ak.script+="</"+ak.tagName;ak.tagName="";ak.state=r.SCRIPT}else{if(Y(O,aj)){aa(ak,"Invalid tagname in closing tag")}ak.state=r.CLOSE_TAG_SAW_WHITE}}}}continue;case r.CLOSE_TAG_SAW_WHITE:if(M(O,aj)){continue}if(aj===">"){Z(ak)}else{aa(ak,"Invalid characters in closing tag")}continue;case r.TEXT_ENTITY:case r.ATTRIB_VALUE_ENTITY_Q:case r.ATTRIB_VALUE_ENTITY_U:var ag;var s;switch(ak.state){case r.TEXT_ENTITY:ag=r.TEXT;s="textNode";break;case r.ATTRIB_VALUE_ENTITY_Q:ag=r.ATTRIB_VALUE_QUOTED;s="attribValue";break;case r.ATTRIB_VALUE_ENTITY_U:ag=r.ATTRIB_VALUE_UNQUOTED;s="attribValue";break}if(aj===";"){ak[s]+=Q(ak);ak.entity="";ak.state=ag}else{if(M(ak.entity.length?z:P,aj)){ak.entity+=aj}else{aa(ak,"Invalid character in entity name");ak[s]+="&"+ak.entity+aj;ak.entity="";ak.state=ag}}continue;default:throw new Error(ak,"Unknown state: "+ak.state)}}if(ak.position>=ak.bufferCheckPosition){B(ak)}return ak}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */
if(!String.fromCodePoint){(function(){var af=String.fromCharCode;var S=Math.floor;var s=function(){var an=16384;var aj=[];var am;var al;var ai=-1;var ak=arguments.length;if(!ak){return""}var ag="";while(++ai<ak){var ah=Number(arguments[ai]);if(!isFinite(ah)||ah<0||ah>1114111||S(ah)!==ah){throw RangeError("Invalid code point: "+ah)}if(ah<=65535){aj.push(ah)}else{ah-=65536;am=(ah>>10)+55296;al=(ah%1024)+56320;aj.push(am,al)}if(ai+1===ak||aj.length>an){ag+=af.apply(null,aj);aj.length=0}}return ag};if(Object.defineProperty){Object.defineProperty(String,"fromCodePoint",{value:s,configurable:true,writable:true})}else{String.fromCodePoint=s}}())}})(typeof e==="undefined"?this.sax={}:e)}).call(this,f("buffer").Buffer)},{buffer:3,stream:25,string_decoder:26}],44:[function(f,g,e){var k=k||{};k.Transform=k.Transform||((typeof f!=="undefined")?f("./transform.js"):null);var j=j||((typeof f!=="undefined")?f("../lib/base64-binary.js"):null);var i=i||((typeof f!=="undefined")?f("pako"):null);k.NIFTI_INTENT_GENMATRIX="NIFTI_INTENT_GENMATRIX";k.NIFTI_INTENT_LABEL="NIFTI_INTENT_LABEL";k.NIFTI_INTENT_NODE_INDEX="NIFTI_INTENT_NODE_INDEX";k.NIFTI_INTENT_POINTSET="NIFTI_INTENT_POINTSET";k.NIFTI_INTENT_RGB_VECTOR="NIFTI_INTENT_RGB_VECTOR";k.NIFTI_INTENT_RGBA_VECTOR="NIFTI_INTENT_RGBA_VECTOR";k.NIFTI_INTENT_SHAPE="NIFTI_INTENT_SHAPE";k.NIFTI_INTENT_TIME_SERIES="NIFTI_INTENT_TIME_SERIES";k.NIFTI_INTENT_TRIANGLE="NIFTI_INTENT_TRIANGLE";k.NIFTI_INTENT_NONE="NIFTI_INTENT_NONE";k.NIFTI_INTENT_VECTOR="NIFTI_INTENT_VECTOR";k.ATT_ARRAYINDEXINGORDER="ArrayIndexingOrder";k.ATT_DATATYPE="DataType";k.ATT_DIMENSIONALITY="Dimensionality";k.ATT_DIMN="Dim";k.ATT_ENCODING="Encoding";k.ATT_ENDIAN="Endian";k.ATT_EXTERNALFILENAME="ExternalFileName";k.ATT_EXTERNALFILEOFFSET="ExternalFileOffset";k.ATT_INTENT="Intent";k.ENCODING_ASCII="ASCII";k.ENCODING_BASE64BINARY="Base64Binary";k.ENCODING_GZIPBASE64BINARY="GZipBase64Binary";k.ENCODING_EXTERNALFILEBINARY="ExternalFileBinary";k.TYPE_NIFTI_TYPE_UINT8="NIFTI_TYPE_UINT8";k.TYPE_NIFTI_TYPE_INT32="NIFTI_TYPE_INT32";k.TYPE_NIFTI_TYPE_FLOAT32="NIFTI_TYPE_FLOAT32";k.DataArray=k.DataArray||function(){this.attributes=null;this.metadata={};this.transforms=[];this.data=null;this.dataConverted=false};k.DataArray.prototype.isPointSet=function(){return this.attributes[k.ATT_INTENT]===k.NIFTI_INTENT_POINTSET};k.DataArray.prototype.isTriangles=function(){return this.attributes[k.ATT_INTENT]===k.NIFTI_INTENT_TRIANGLE};k.DataArray.prototype.isNormals=function(){return this.attributes[k.ATT_INTENT]===k.NIFTI_INTENT_VECTOR};k.DataArray.prototype.isColors=function(){return(this.attributes[k.ATT_INTENT]===k.NIFTI_INTENT_RGB_VECTOR)||(this.attributes[k.ATT_INTENT]===k.NIFTI_INTENT_RGBA_VECTOR)};k.DataArray.prototype.getDimensions=function(){return parseInt(this.attributes[k.ATT_DIMENSIONALITY])};k.DataArray.prototype.getNumElements=function(l){if(l===undefined){l=0}return parseInt(this.attributes[k.ATT_DIMN+l])};k.DataArray.prototype.isScalar=function(){return(this.getDimensions()==1)};k.DataArray.prototype.isTriple=function(){return((this.getDimensions()==2)&&(this.getNumElements(1)==3))};k.DataArray.prototype.isQuad=function(){return((this.getDimensions()==2)&&(this.getNumElements(1)==4))};k.DataArray.prototype.isAscii=function(){return(k.ENCODING_ASCII===this.attributes[k.ATT_ENCODING])};k.DataArray.prototype.isBase64Binary=function(){return(k.ENCODING_BASE64BINARY===this.attributes[k.ATT_ENCODING])};k.DataArray.prototype.isGzipBase64Binary=function(){return(k.ENCODING_GZIPBASE64BINARY===this.attributes[k.ATT_ENCODING])};k.DataArray.prototype.isBase64Encoded=function(){return this.isBase64Binary()||this.isGzipBase64Binary()};k.DataArray.prototype.isFloat32=function(){return(k.TYPE_NIFTI_TYPE_FLOAT32===this.attributes[k.ATT_DATATYPE])};k.DataArray.prototype.isInt32=function(){return(k.TYPE_NIFTI_TYPE_INT32===this.attributes[k.ATT_DATATYPE])};k.DataArray.prototype.isUnsignedInt8=function(){return(k.TYPE_NIFTI_TYPE_UINT8===this.attributes[k.ATT_DATATYPE])};k.DataArray.prototype.getData=function(){if(!this.dataConverted){this.dataConverted=true;if(this.isAscii()){if(this.isUnsignedInt8()){k.DataArray.readUnsignedInt8ASCII(this)}else{if(this.isInt32()){k.DataArray.readSignedInt32ASCII(this)}else{k.DataArray.readFloat32ASCII(this)}}}else{if(this.isBase64Binary()){if(this.isUnsignedInt8()){k.DataArray.readUnsignedInt8Base64(this)}else{if(this.isInt32()){k.DataArray.readSignedInt32Base64(this)}else{k.DataArray.readFloat32Base64(this)}}}else{if(this.isGzipBase64Binary()){if(this.isUnsignedInt8()){k.DataArray.readUnsignedInt8GZIPBase64(this)}else{if(this.isInt32()){k.DataArray.readSignedInt32GZIPBase64(this)}else{k.DataArray.readFloat32GZIPBase64(this)}}}}}}return this.data};k.DataArray.prototype.getDataAsync=function(m,l){if(!this.dataConverted){this.dataConverted=true;if(this.isAscii()){if(this.isUnsignedInt8()){k.DataArray.readUnsignedInt8ASCII(this)}else{if(this.isInt32()){k.DataArray.readSignedInt32ASCII(this)}else{k.DataArray.readFloat32ASCII(this)}}l()}else{if(this.isBase64Binary()){if(this.isUnsignedInt8()){k.DataArray.readUnsignedInt8Base64(this)}else{if(this.isInt32()){k.DataArray.readSignedInt32Base64(this)}else{k.DataArray.readFloat32Base64(this)}}l()}else{if(this.isGzipBase64Binary()){if(this.isUnsignedInt8()){k.DataArray.readUnsignedInt8GZIPBase64Async(this,m,l)}else{if(this.isInt32()){k.DataArray.readSignedInt32GZIPBase64Async(this,m,l)}else{k.DataArray.readFloat32GZIPBase64Async(this,m,l)}}}}}}};k.DataArray.readFloat32ASCII=function(m){var l=/[+-]?\d+(\.\d+)?/g;m.data=new Float32Array(m.data.match(l).map(function(n){return parseFloat(n)}))};k.DataArray.readSignedInt32ASCII=function(m){var l=/[+-]?\d+(\.\d+)?/g;m.data=new Int32Array(m.data.match(l).map(function(n){return parseInt(n)}))};k.DataArray.readUnsignedInt8ASCII=function(m){var l=/[+-]?\d+(\.\d+)?/g;m.data=new Uint8Array(m.data.match(l).map(function(n){return parseInt(n)}))};k.DataArray.readUnsignedInt8Base64=function(l){var m=j.decodeArrayBuffer(l.data);l.data=new Uint8Array(m,0,m.byteLength)};k.DataArray.readSignedInt32Base64=function(l){var m=j.decodeArrayBuffer(l.data);l.data=new Int32Array(m,0,m.byteLength/4)};k.DataArray.readFloat32Base64=function(l){var m=j.decodeArrayBuffer(l.data);l.data=new Float32Array(m,0,m.byteLength/4)};k.DataArray.readUnsignedInt8GZIPBase64=function(l){var m=j.decodeArrayBuffer(l.data);m=i.inflate(m).buffer;l.data=new Uint8Array(m,0,m.byteLength)};k.DataArray.readUnsignedInt8GZIPBase64Async=function(p,o,n){var q=j.decodeArrayBuffer(p.data);var m=new i.Inflate();var l=function(){p.data=new Uint8Array(m.result.buffer,0,m.result.buffer.byteLength);n(p.data)};setTimeout(function(){k.DataArray.readNext(m,q,0,o,l)},0)};k.DataArray.readSignedInt32GZIPBase64=function(l){var m=j.decodeArrayBuffer(l.data);m=i.inflate(m).buffer;l.data=new Int32Array(m,0,m.byteLength/4)};k.DataArray.readSignedInt32GZIPBase64Async=function(p,o,n){var q=j.decodeArrayBuffer(p.data);var m=new i.Inflate();var l=function(){p.data=new Int32Array(m.result.buffer,0,m.result.buffer.byteLength/4);n(p.data)};setTimeout(function(){k.DataArray.readNext(m,q,0,o,l)},0)};k.DataArray.readFloat32GZIPBase64=function(l){var m=j.decodeArrayBuffer(l.data);m=i.inflate(m).buffer;l.data=new Float32Array(m,0,m.byteLength/4)};k.DataArray.readFloat32GZIPBase64Async=function(p,o,n){var q=j.decodeArrayBuffer(p.data);var m=new i.Inflate();var l=function(){p.data=new Float32Array(m.result.buffer,0,m.result.buffer.byteLength/4);n(p.data)};setTimeout(function(){k.DataArray.readNext(m,q,0,o,l)},0)};k.DataArray.readNext=function(o,r,m,p,n){var l=m+4096*8;var q=(l>=r.byteLength);o.push(r.slice(m,m+4096*8),q);if(q){n()}else{p(l/r.byteLength);setTimeout(function(){k.DataArray.readNext(o,r,l,p,n)},0)}};var h=typeof g;if((h!=="undefined")&&g.exports){g.exports=k.DataArray}},{"../lib/base64-binary.js":1,"./transform.js":46,pako:27}],45:[function(f,g,e){var j=j||{};j.Utils=j.Utils||((typeof f!=="undefined")?f("./utilities.js"):null);j.DataArray=j.DataArray||((typeof f!=="undefined")?f("./dataArray.js"):null);j.Transform=j.Transform||((typeof f!=="undefined")?f("./transform.js"):null);var i=i||((typeof f!=="undefined")?f("sax"):null);j.TAG_TRANSFORM="CoordinateSystemTransformMatrix";j.TAG_DATA="Data";j.TAG_DATAARRAY="DataArray";j.TAG_DATASPACE="DataSpace";j.TAG_GIFTI="GIFTI";j.TAG_LABEL="Label";j.TAG_LABELTABLE="LabelTable";j.TAG_MATRIXDATA="MatrixData";j.TAG_METADATA="MetaData";j.TAG_MD="MD";j.TAG_NAME="Name";j.TAG_TRANSFORMEDSPACE="TransformedSpace";j.TAG_VALUE="Value";j.GIFTI=j.GIFTI||function(){this.attributes=null;this.metadata={};this.dataArrays=[]};j.GIFTI.prototype.getPointsDataArray=function(){var k;for(k=0;k<this.dataArrays.length;k+=1){if(this.dataArrays[k].isPointSet()){return this.dataArrays[k]}}return null};j.GIFTI.prototype.getTrianglesDataArray=function(){var k;for(k=0;k<this.dataArrays.length;k+=1){if(this.dataArrays[k].isTriangles()){return this.dataArrays[k]}}return null};j.GIFTI.prototype.getNormalsDataArray=function(){var k;for(k=0;k<this.dataArrays.length;k+=1){if(this.dataArrays[k].isNormals()){return this.dataArrays[k]}}return null};j.GIFTI.prototype.getColorsDataArray=function(){var k;for(k=0;k<this.dataArrays.length;k+=1){if(this.dataArrays[k].isColors()){return this.dataArrays[k]}}return null};j.GIFTI.prototype.getNumPoints=function(){var k;for(k=0;k<this.dataArrays.length;k+=1){if(this.dataArrays[k].isPointSet()){return this.dataArrays[k].getNumElements()}}return 0};j.GIFTI.prototype.getNumTriangles=function(){var k;for(k=0;k<this.dataArrays.length;k+=1){if(this.dataArrays[k].isTriangles()){return this.dataArrays[k].getNumElements()}}return 0};j.isThisFormat=function(k){return(k.indexOf(".gii")!==-1)};j.parse=function(n){var o=i.parser(true),t=null,k=null,A=null,p=null,m=null,u=null,l="",q=false,w=false,s=false,y=false,z=false,B=false,D=false,r=false,C=false,v=false,x=false;o.onopentag=function(E){if(E.name===j.TAG_GIFTI){q=true;A=t=new j.GIFTI();t.attributes=E.attributes}else{if(E.name===j.TAG_METADATA){w=true}else{if(E.name===j.TAG_MD){s=true}else{if(E.name===j.TAG_NAME){y=true}else{if(E.name===j.TAG_VALUE){z=true}else{if(E.name===j.TAG_DATAARRAY){B=true;A=k=new j.DataArray();t.dataArrays.push(k);k.attributes=E.attributes}else{if(E.name===j.TAG_TRANSFORM){D=true;u=new j.Transform();k.transforms.push(u)}else{if(E.name===j.TAG_DATASPACE){r=true}else{if(E.name===j.TAG_TRANSFORMEDSPACE){C=true}else{if(E.name===j.TAG_MATRIXDATA){v=true}else{if(E.name===j.TAG_DATA){x=true}}}}}}}}}}}};o.ontext=o.oncdata=function(E){if(y){l+=E}else{if(z){l+=E}else{if(r){l+=E}else{if(C){l+=E}else{if(v){l+=E}else{if(x){l+=E}}}}}}};o.onclosetag=function(E){if(E===j.TAG_GIFTI){q=false}else{if(E===j.TAG_METADATA){w=false}else{if(E===j.TAG_MD){s=false;if(A){A.metadata[p]=m}}else{if(E===j.TAG_NAME){y=false;p=l;l=""}else{if(E===j.TAG_VALUE){z=false;m=l;l=""}else{if(E===j.TAG_DATAARRAY){B=false}else{if(E===j.TAG_TRANSFORM){D=false}else{if(E===j.TAG_DATASPACE){r=false;u.dataSpace=l;l=""}else{if(E===j.TAG_TRANSFORMEDSPACE){C=false;u.transformedSpace=l;l=""}else{if(E===j.TAG_MATRIXDATA){v=false;u.matrixData=l;l=""}else{if(E===j.TAG_DATA){x=false;k.data=l;l=""}}}}}}}}}}}};o.onerror=function(E){console.log(E)};o.write(n).close();return t};var h=typeof g;if((h!=="undefined")&&g.exports){g.exports=j}},{"./dataArray.js":44,"./transform.js":46,"./utilities.js":47,sax:43}],46:[function(f,g,e){var i=i||{};i.Transform=i.Transform||function(){this.dataSpace=null;this.transformedSpace=null;this.matrixData=null};var h=typeof g;if((h!=="undefined")&&g.exports){g.exports=i.Transform}},{}],47:[function(f,g,e){var i=i||{};i.Utils=i.Utils||{};i.Utils.crcTable=null;i.Utils.makeCRCTable=function(){var o;var j=[];for(var m=0;m<256;m++){o=m;for(var l=0;l<8;l++){o=((o&1)?(3988292384^(o>>>1)):(o>>>1))}j[m]=o}return j};i.Utils.crc32=function(m){var j=i.Utils.crcTable||(i.Utils.crcTable=i.Utils.makeCRCTable());var l=0^(-1);for(var k=0;k<m.byteLength;k++){l=(l>>>8)^j[(l^m.getUint8(k))&255]}return(l^(-1))>>>0};var h=typeof g;if((h!=="undefined")&&g.exports){g.exports=i.Utils}},{}]},{},[45])(45)});glMatrixArrayType=typeof Float32Array!="undefined"?Float32Array:typeof WebGLFloatArray!="undefined"?WebGLFloatArray:Array;var vec3={};vec3.create=function(d){var c=new glMatrixArrayType(3);if(d){c[0]=d[0];c[1]=d[1];c[2]=d[2]}return c};vec3.set=function(d,c){c[0]=d[0];c[1]=d[1];c[2]=d[2];return c};vec3.add=function(e,d,f){if(!f||e==f){e[0]+=d[0];e[1]+=d[1];e[2]+=d[2];return e}f[0]=e[0]+d[0];f[1]=e[1]+d[1];f[2]=e[2]+d[2];return f};vec3.subtract=function(e,d,f){if(!f||e==f){e[0]-=d[0];e[1]-=d[1];e[2]-=d[2];return e}f[0]=e[0]-d[0];f[1]=e[1]-d[1];f[2]=e[2]-d[2];return f};vec3.negate=function(d,c){c||(c=d);c[0]=-d[0];c[1]=-d[1];c[2]=-d[2];return c};vec3.scale=function(e,d,f){if(!f||e==f){e[0]*=d;e[1]*=d;e[2]*=d;return e}f[0]=e[0]*d;f[1]=e[1]*d;f[2]=e[2]*d;return f};vec3.normalize=function(h,f){f||(f=h);var l=h[0],k=h[1],j=h[2],i=Math.sqrt(l*l+k*k+j*j);if(i){if(i==1){f[0]=l;f[1]=k;f[2]=j;return f}}else{f[0]=0;f[1]=0;f[2]=0;return f}i=1/i;f[0]=l*i;f[1]=k*i;f[2]=j*i;return f};vec3.cross=function(i,h,n){n||(n=i);var m=i[0],l=i[1];i=i[2];var j=h[0],k=h[1];h=h[2];n[0]=l*h-i*k;n[1]=i*j-m*h;n[2]=m*k-l*j;return n};vec3.length=function(e){var d=e[0],f=e[1];e=e[2];return Math.sqrt(d*d+f*f+e*e)};vec3.dot=function(d,c){return d[0]*c[0]+d[1]*c[1]+d[2]*c[2]};vec3.direction=function(g,f,j){j||(j=g);var i=g[0]-f[0],h=g[1]-f[1];g=g[2]-f[2];f=Math.sqrt(i*i+h*h+g*g);if(!f){j[0]=0;j[1]=0;j[2]=0;return j}f=1/f;j[0]=i*f;j[1]=h*f;j[2]=g*f;return j};vec3.lerp=function(f,e,h,g){g||(g=f);g[0]=f[0]+h*(e[0]-f[0]);g[1]=f[1]+h*(e[1]-f[1]);g[2]=f[2]+h*(e[2]-f[2]);return g};vec3.str=function(b){return"["+b[0]+", "+b[1]+", "+b[2]+"]"};var mat3={};mat3.create=function(d){var c=new glMatrixArrayType(9);if(d){c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9]}return c};mat3.set=function(d,c){c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];return c};mat3.identity=function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};mat3.transpose=function(g,f){if(!f||g==f){var j=g[1],i=g[2],h=g[5];g[1]=g[3];g[2]=g[6];g[3]=j;g[5]=g[7];g[6]=i;g[7]=h;return g}f[0]=g[0];f[1]=g[3];f[2]=g[6];f[3]=g[1];f[4]=g[4];f[5]=g[7];f[6]=g[2];f[7]=g[5];f[8]=g[8];return f};mat3.toMat4=function(d,c){c||(c=mat4.create());c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=0;c[4]=d[3];c[5]=d[4];c[6]=d[5];c[7]=0;c[8]=d[6];c[9]=d[7];c[10]=d[8];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};mat3.str=function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+"]"};var mat4={};mat4.create=function(d){var c=new glMatrixArrayType(16);if(d){c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15]}return c};mat4.set=function(d,c){c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return c};mat4.identity=function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};mat4.transpose=function(j,i){if(!i||j==i){var p=j[1],o=j[2],n=j[3],l=j[6],m=j[7],k=j[11];j[1]=j[4];j[2]=j[8];j[3]=j[12];j[4]=p;j[6]=j[9];j[7]=j[13];j[8]=o;j[9]=l;j[11]=j[14];j[12]=n;j[13]=m;j[14]=k;return j}i[0]=j[0];i[1]=j[4];i[2]=j[8];i[3]=j[12];i[4]=j[1];i[5]=j[5];i[6]=j[9];i[7]=j[13];i[8]=j[2];i[9]=j[6];i[10]=j[10];i[11]=j[14];i[12]=j[3];i[13]=j[7];i[14]=j[11];i[15]=j[15];return i};mat4.determinant=function(F){var E=F[0],D=F[1],C=F[2],B=F[3],z=F[4],A=F[5],y=F[6],x=F[7],w=F[8],v=F[9],u=F[10],r=F[11],t=F[12],s=F[13],q=F[14];F=F[15];return t*v*y*B-w*s*y*B-t*A*u*B+z*s*u*B+w*A*q*B-z*v*q*B-t*v*C*x+w*s*C*x+t*D*u*x-E*s*u*x-w*D*q*x+E*v*q*x+t*A*C*r-z*s*C*r-t*D*y*r+E*s*y*r+z*D*q*r-E*A*q*r-w*A*C*F+z*v*C*F+w*D*y*F-E*v*y*F-z*D*u*F+E*A*u*F};mat4.inverse=function(aj,ai){ai||(ai=aj);var ah=aj[0],ag=aj[1],af=aj[2],ad=aj[3],ae=aj[4],ac=aj[5],ab=aj[6],aa=aj[7],Z=aj[8],Y=aj[9],V=aj[10],X=aj[11],W=aj[12],U=aj[13],Q=aj[14],O=aj[15],T=ah*ac-ag*ae,S=ah*ab-af*ae,M=ah*aa-ad*ae,K=ag*ab-af*ac,J=ag*aa-ad*ac,I=af*aa-ad*ab,H=Z*U-Y*W,G=Z*Q-V*W,F=Z*O-X*W,P=Y*Q-V*U,N=Y*O-X*U,L=V*O-X*Q,R=1/(T*L-S*N+M*P+K*F-J*G+I*H);ai[0]=(ac*L-ab*N+aa*P)*R;ai[1]=(-ag*L+af*N-ad*P)*R;ai[2]=(U*I-Q*J+O*K)*R;ai[3]=(-Y*I+V*J-X*K)*R;ai[4]=(-ae*L+ab*F-aa*G)*R;ai[5]=(ah*L-af*F+ad*G)*R;ai[6]=(-W*I+Q*M-O*S)*R;ai[7]=(Z*I-V*M+X*S)*R;ai[8]=(ae*N-ac*F+aa*H)*R;ai[9]=(-ah*N+ag*F-ad*H)*R;ai[10]=(W*J-U*M+O*T)*R;ai[11]=(-Z*J+Y*M-X*T)*R;ai[12]=(-ae*P+ac*G-ab*H)*R;ai[13]=(ah*P-ag*G+af*H)*R;ai[14]=(-W*K+U*S-Q*T)*R;ai[15]=(Z*K-Y*S+V*T)*R;return ai};mat4.toRotationMat=function(d,c){c||(c=mat4.create());c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};mat4.toMat3=function(d,c){c||(c=mat3.create());c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[4];c[4]=d[5];c[5]=d[6];c[6]=d[8];c[7]=d[9];c[8]=d[10];return c};mat4.toInverseMat3=function(D,C){var B=D[0],A=D[1],z=D[2],x=D[4],y=D[5],w=D[6],v=D[8],u=D[9],t=D[10],s=t*y-w*u,p=-t*x+w*v,r=u*x-y*v,q=B*s+A*p+z*r;if(!q){return null}q=1/q;C||(C=mat3.create());C[0]=s*q;C[1]=(-t*A+z*u)*q;C[2]=(w*A-z*y)*q;C[3]=p*q;C[4]=(t*B-z*v)*q;C[5]=(-w*B+z*x)*q;C[6]=r*q;C[7]=(-u*B+A*v)*q;C[8]=(y*B-A*x)*q;return C};mat4.multiply=function(an,am,al){al||(al=an);var ak=an[0],aj=an[1],ah=an[2],ai=an[3],ag=an[4],af=an[5],ae=an[6],ad=an[7],ac=an[8],Z=an[9],ab=an[10],aa=an[11],Y=an[12],U=an[13],S=an[14];an=an[15];var X=am[0],W=am[1],Q=am[2],O=am[3],M=am[4],K=am[5],J=am[6],I=am[7],H=am[8],T=am[9],R=am[10],P=am[11],V=am[12],N=am[13],L=am[14];am=am[15];al[0]=X*ak+W*ag+Q*ac+O*Y;al[1]=X*aj+W*af+Q*Z+O*U;al[2]=X*ah+W*ae+Q*ab+O*S;al[3]=X*ai+W*ad+Q*aa+O*an;al[4]=M*ak+K*ag+J*ac+I*Y;al[5]=M*aj+K*af+J*Z+I*U;al[6]=M*ah+K*ae+J*ab+I*S;al[7]=M*ai+K*ad+J*aa+I*an;al[8]=H*ak+T*ag+R*ac+P*Y;al[9]=H*aj+T*af+R*Z+P*U;al[10]=H*ah+T*ae+R*ab+P*S;al[11]=H*ai+T*ad+R*aa+P*an;al[12]=V*ak+N*ag+L*ac+am*Y;al[13]=V*aj+N*af+L*Z+am*U;al[14]=V*ah+N*ae+L*ab+am*S;al[15]=V*ai+N*ad+L*aa+am*an;return al};mat4.multiplyVec3=function(g,f,j){j||(j=f);var i=f[0],h=f[1];f=f[2];j[0]=g[0]*i+g[4]*h+g[8]*f+g[12];j[1]=g[1]*i+g[5]*h+g[9]*f+g[13];j[2]=g[2]*i+g[6]*h+g[10]*f+g[14];return j};mat4.multiplyVec4=function(h,f,l){l||(l=f);var k=f[0],j=f[1],i=f[2];f=f[3];l[0]=h[0]*k+h[4]*j+h[8]*i+h[12]*f;l[1]=h[1]*k+h[5]*j+h[9]*i+h[13]*f;l[2]=h[2]*k+h[6]*j+h[10]*i+h[14]*f;l[3]=h[3]*k+h[7]*j+h[11]*i+h[15]*f;return l};mat4.translate=function(H,G,F){var E=G[0],D=G[1];G=G[2];if(!F||H==F){H[12]=H[0]*E+H[4]*D+H[8]*G+H[12];H[13]=H[1]*E+H[5]*D+H[9]*G+H[13];H[14]=H[2]*E+H[6]*D+H[10]*G+H[14];H[15]=H[3]*E+H[7]*D+H[11]*G+H[15];return H}var B=H[0],C=H[1],A=H[2],z=H[3],y=H[4],x=H[5],w=H[6],t=H[7],v=H[8],u=H[9],s=H[10],q=H[11];F[0]=B;F[1]=C;F[2]=A;F[3]=z;F[4]=y;F[5]=x;F[6]=w;F[7]=t;F[8]=v;F[9]=u;F[10]=s;F[11]=q;F[12]=B*E+y*D+v*G+H[12];F[13]=C*E+x*D+u*G+H[13];F[14]=A*E+w*D+s*G+H[14];F[15]=z*E+t*D+q*G+H[15];return F};mat4.scale=function(g,f,j){var i=f[0],h=f[1];f=f[2];if(!j||g==j){g[0]*=i;g[1]*=i;g[2]*=i;g[3]*=i;g[4]*=h;g[5]*=h;g[6]*=h;g[7]*=h;g[8]*=f;g[9]*=f;g[10]*=f;g[11]*=f;return g}j[0]=g[0]*i;j[1]=g[1]*i;j[2]=g[2]*i;j[3]=g[3]*i;j[4]=g[4]*h;j[5]=g[5]*h;j[6]=g[6]*h;j[7]=g[7]*h;j[8]=g[8]*f;j[9]=g[9]*f;j[10]=g[10]*f;j[11]=g[11]*f;j[12]=g[12];j[13]=g[13];j[14]=g[14];j[15]=g[15];return j};mat4.rotate=function(ab,aa,Z,Y){var X=Z[0],V=Z[1];Z=Z[2];var W=Math.sqrt(X*X+V*V+Z*Z);if(!W){return null}if(W!=1){W=1/W;X*=W;V*=W;Z*=W}var U=Math.sin(aa),T=Math.cos(aa),S=1-T;aa=ab[0];W=ab[1];var R=ab[2],Q=ab[3],N=ab[4],P=ab[5],O=ab[6],M=ab[7],J=ab[8],I=ab[9],L=ab[10],K=ab[11],H=X*X*S+T,G=V*X*S+Z*U,F=Z*X*S-V*U,E=X*V*S-Z*U,D=V*V*S+T,C=Z*V*S+X*U,q=X*Z*S+V*U;X=V*Z*S-X*U;V=Z*Z*S+T;if(Y){if(ab!=Y){Y[12]=ab[12];Y[13]=ab[13];Y[14]=ab[14];Y[15]=ab[15]}}else{Y=ab}Y[0]=aa*H+N*G+J*F;Y[1]=W*H+P*G+I*F;Y[2]=R*H+O*G+L*F;Y[3]=Q*H+M*G+K*F;Y[4]=aa*E+N*D+J*C;Y[5]=W*E+P*D+I*C;Y[6]=R*E+O*D+L*C;Y[7]=Q*E+M*D+K*C;Y[8]=aa*q+N*X+J*V;Y[9]=W*q+P*X+I*V;Y[10]=R*q+O*X+L*V;Y[11]=Q*q+M*X+K*V;return Y};mat4.rotateX=function(x,w,v){var u=Math.sin(w);w=Math.cos(w);var t=x[4],r=x[5],s=x[6],q=x[7],p=x[8],o=x[9],n=x[10],m=x[11];if(v){if(x!=v){v[0]=x[0];v[1]=x[1];v[2]=x[2];v[3]=x[3];v[12]=x[12];v[13]=x[13];v[14]=x[14];v[15]=x[15]}}else{v=x}v[4]=t*w+p*u;v[5]=r*w+o*u;v[6]=s*w+n*u;v[7]=q*w+m*u;v[8]=t*-u+p*w;v[9]=r*-u+o*w;v[10]=s*-u+n*w;v[11]=q*-u+m*w;return v};mat4.rotateY=function(x,w,v){var u=Math.sin(w);w=Math.cos(w);var t=x[0],r=x[1],s=x[2],q=x[3],p=x[8],o=x[9],n=x[10],m=x[11];if(v){if(x!=v){v[4]=x[4];v[5]=x[5];v[6]=x[6];v[7]=x[7];v[12]=x[12];v[13]=x[13];v[14]=x[14];v[15]=x[15]}}else{v=x}v[0]=t*w+p*-u;v[1]=r*w+o*-u;v[2]=s*w+n*-u;v[3]=q*w+m*-u;v[8]=t*u+p*w;v[9]=r*u+o*w;v[10]=s*u+n*w;v[11]=q*u+m*w;return v};mat4.rotateZ=function(x,w,v){var u=Math.sin(w);w=Math.cos(w);var t=x[0],r=x[1],s=x[2],q=x[3],p=x[4],o=x[5],n=x[6],m=x[7];if(v){if(x!=v){v[8]=x[8];v[9]=x[9];v[10]=x[10];v[11]=x[11];v[12]=x[12];v[13]=x[13];v[14]=x[14];v[15]=x[15]}}else{v=x}v[0]=t*w+p*u;v[1]=r*w+o*u;v[2]=s*w+n*u;v[3]=q*w+m*u;v[4]=t*-u+p*w;v[5]=r*-u+o*w;v[6]=s*-u+n*w;v[7]=q*-u+m*w;return v};mat4.frustum=function(t,s,r,q,p,n,o){o||(o=mat4.create());var m=s-t,l=q-r,k=n-p;o[0]=p*2/m;o[1]=0;o[2]=0;o[3]=0;o[4]=0;o[5]=p*2/l;o[6]=0;o[7]=0;o[8]=(s+t)/m;o[9]=(q+r)/l;o[10]=-(n+p)/k;o[11]=-1;o[12]=0;o[13]=0;o[14]=-(n*p*2)/k;o[15]=0;return o};mat4.perspective=function(g,f,j,i,h){g=j*Math.tan(g*Math.PI/360);f=g*f;return mat4.frustum(-f,f,-g,g,j,i,h)};mat4.ortho=function(t,s,r,q,p,n,o){o||(o=mat4.create());var m=s-t,l=q-r,k=n-p;o[0]=2/m;o[1]=0;o[2]=0;o[3]=0;o[4]=0;o[5]=2/l;o[6]=0;o[7]=0;o[8]=0;o[9]=0;o[10]=-2/k;o[11]=0;o[12]=-(t+s)/m;o[13]=-(q+r)/l;o[14]=-(n+p)/k;o[15]=1;return o};mat4.lookAt=function(B,A,z,y){y||(y=mat4.create());var x=B[0],v=B[1];B=B[2];var w=z[0],u=z[1],t=z[2];z=A[1];var s=A[2];if(x==A[0]&&v==z&&B==s){return mat4.identity(y)}var r,q,n,p;z=x-A[0];s=v-A[1];A=B-A[2];p=1/Math.sqrt(z*z+s*s+A*A);z*=p;s*=p;A*=p;r=u*A-t*s;t=t*z-w*A;w=w*s-u*z;if(p=Math.sqrt(r*r+t*t+w*w)){p=1/p;r*=p;t*=p;w*=p}else{w=t=r=0}u=s*w-A*t;q=A*r-z*w;n=z*t-s*r;if(p=Math.sqrt(u*u+q*q+n*n)){p=1/p;u*=p;q*=p;n*=p}else{n=q=u=0}y[0]=r;y[1]=u;y[2]=z;y[3]=0;y[4]=t;y[5]=q;y[6]=s;y[7]=0;y[8]=w;y[9]=n;y[10]=A;y[11]=0;y[12]=-(r*x+t*v+w*B);y[13]=-(u*x+q*v+n*B);y[14]=-(z*x+s*v+A*B);y[15]=1;return y};mat4.str=function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+"]"};quat4={};quat4.create=function(d){var c=new glMatrixArrayType(4);if(d){c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3]}return c};quat4.set=function(d,c){c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];return c};quat4.calculateW=function(g,f){var j=g[0],i=g[1],h=g[2];if(!f||g==f){g[3]=-Math.sqrt(Math.abs(1-j*j-i*i-h*h));return g}f[0]=j;f[1]=i;f[2]=h;f[3]=-Math.sqrt(Math.abs(1-j*j-i*i-h*h));return f};quat4.inverse=function(d,c){if(!c||d==c){d[0]*=1;d[1]*=1;d[2]*=1;return d}c[0]=-d[0];c[1]=-d[1];c[2]=-d[2];c[3]=d[3];return c};quat4.length=function(f){var e=f[0],h=f[1],g=f[2];f=f[3];return Math.sqrt(e*e+h*h+g*g+f*f)};quat4.normalize=function(i,h){h||(h=i);var n=i[0],m=i[1],l=i[2],j=i[3],k=Math.sqrt(n*n+m*m+l*l+j*j);if(k==0){h[0]=0;h[1]=0;h[2]=0;h[3]=0;return h}k=1/k;h[0]=n*k;h[1]=m*k;h[2]=l*k;h[3]=j*k;return h};quat4.multiply=function(r,q,p){p||(p=r);var o=r[0],n=r[1],l=r[2];r=r[3];var m=q[0],k=q[1],j=q[2];q=q[3];p[0]=o*q+r*m+n*j-l*k;p[1]=n*q+r*k+l*m-o*j;p[2]=l*q+r*j+o*k-n*m;p[3]=r*q-o*m-n*k-l*j;return p};quat4.multiplyVec3=function(v,u,t){t||(t=u);var s=u[0],r=u[1],p=u[2];u=v[0];var q=v[1],o=v[2];v=v[3];var n=v*s+q*p-o*r,m=v*r+o*s-u*p,l=v*p+u*r-q*s;s=-u*s-q*r-o*p;t[0]=n*v+s*-u+m*-o-l*-q;t[1]=m*v+s*-q+l*-u-n*-o;t[2]=l*v+s*-o+n*-q-m*-u;return t};quat4.toMat3=function(x,w){w||(w=mat3.create());var v=x[0],u=x[1],t=x[2],r=x[3],s=v+v,q=u+u,p=t+t,o=v*s,n=v*q;v=v*p;var m=u*q;u=u*p;t=t*p;s=r*s;q=r*q;r=r*p;w[0]=1-(m+t);w[1]=n-r;w[2]=v+q;w[3]=n+r;w[4]=1-(o+t);w[5]=u-s;w[6]=v-q;w[7]=u+s;w[8]=1-(o+m);return w};quat4.toMat4=function(x,w){w||(w=mat4.create());var v=x[0],u=x[1],t=x[2],r=x[3],s=v+v,q=u+u,p=t+t,o=v*s,n=v*q;v=v*p;var m=u*q;u=u*p;t=t*p;s=r*s;q=r*q;r=r*p;w[0]=1-(m+t);w[1]=n-r;w[2]=v+q;w[3]=0;w[4]=n+r;w[5]=1-(o+t);w[6]=u-s;w[7]=0;w[8]=v-q;w[9]=u+s;w[10]=1-(o+m);w[11]=0;w[12]=0;w[13]=0;w[14]=0;w[15]=1;return w};quat4.slerp=function(g,f,j,i){i||(i=g);var h=j;if(g[0]*f[0]+g[1]*f[1]+g[2]*f[2]+g[3]*f[3]<0){h=-1*j}i[0]=1-j*g[0]+h*f[0];i[1]=1-j*g[1]+h*f[1];i[2]=1-j*g[2]+h*f[2];i[3]=1-j*g[3]+h*f[3];return i};quat4.str=function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+"]"};var GLU={};(function(a){a.unProject=function(j,g,f,e,c,k,h){var i=[j,g,f,1];var b=[];a.multMatrices(e,c,b);if(!a.invertMatrix(b,b)){return(false)}i[0]=(i[0]-k[0])/k[2];i[1]=(i[1]-k[1])/k[3];i[0]=i[0]*2-1;i[1]=i[1]*2-1;i[2]=i[2]*2-1;var d=[];a.multMatrixVec(b,i,d);if(d[3]===0){return false}d[0]/=d[3];d[1]/=d[3];d[2]/=d[3];h[0]=d[0];h[1]=d[1];h[2]=d[2];return true};a.multMatrixVec=function(b,e,c){for(var d=0;d<4;d=d+1){c[d]=e[0]*b[0*4+d]+e[1]*b[1*4+d]+e[2]*b[2*4+d]+e[3]*b[3*4+d]}};a.multMatrices=function(d,c,g){for(var f=0;f<4;f=f+1){for(var e=0;e<4;e=e+1){g[f*4+e]=d[f*4+0]*c[0*4+e]+d[f*4+1]*c[1*4+e]+d[f*4+2]*c[2*4+e]+d[f*4+3]*c[3*4+e]}}};a.invertMatrix=function(c,f){var b=[];b[0]=c[5]*c[10]*c[15]-c[5]*c[11]*c[14]-c[9]*c[6]*c[15]+c[9]*c[7]*c[14]+c[13]*c[6]*c[11]-c[13]*c[7]*c[10];b[4]=-c[4]*c[10]*c[15]+c[4]*c[11]*c[14]+c[8]*c[6]*c[15]-c[8]*c[7]*c[14]-c[12]*c[6]*c[11]+c[12]*c[7]*c[10];b[8]=c[4]*c[9]*c[15]-c[4]*c[11]*c[13]-c[8]*c[5]*c[15]+c[8]*c[7]*c[13]+c[12]*c[5]*c[11]-c[12]*c[7]*c[9];b[12]=-c[4]*c[9]*c[14]+c[4]*c[10]*c[13]+c[8]*c[5]*c[14]-c[8]*c[6]*c[13]-c[12]*c[5]*c[10]+c[12]*c[6]*c[9];b[1]=-c[1]*c[10]*c[15]+c[1]*c[11]*c[14]+c[9]*c[2]*c[15]-c[9]*c[3]*c[14]-c[13]*c[2]*c[11]+c[13]*c[3]*c[10];b[5]=c[0]*c[10]*c[15]-c[0]*c[11]*c[14]-c[8]*c[2]*c[15]+c[8]*c[3]*c[14]+c[12]*c[2]*c[11]-c[12]*c[3]*c[10];b[9]=-c[0]*c[9]*c[15]+c[0]*c[11]*c[13]+c[8]*c[1]*c[15]-c[8]*c[3]*c[13]-c[12]*c[1]*c[11]+c[12]*c[3]*c[9];b[13]=c[0]*c[9]*c[14]-c[0]*c[10]*c[13]-c[8]*c[1]*c[14]+c[8]*c[2]*c[13]+c[12]*c[1]*c[10]-c[12]*c[2]*c[9];b[2]=c[1]*c[6]*c[15]-c[1]*c[7]*c[14]-c[5]*c[2]*c[15]+c[5]*c[3]*c[14]+c[13]*c[2]*c[7]-c[13]*c[3]*c[6];b[6]=-c[0]*c[6]*c[15]+c[0]*c[7]*c[14]+c[4]*c[2]*c[15]-c[4]*c[3]*c[14]-c[12]*c[2]*c[7]+c[12]*c[3]*c[6];b[10]=c[0]*c[5]*c[15]-c[0]*c[7]*c[13]-c[4]*c[1]*c[15]+c[4]*c[3]*c[13]+c[12]*c[1]*c[7]-c[12]*c[3]*c[5];b[14]=-c[0]*c[5]*c[14]+c[0]*c[6]*c[13]+c[4]*c[1]*c[14]-c[4]*c[2]*c[13]-c[12]*c[1]*c[6]+c[12]*c[2]*c[5];b[3]=-c[1]*c[6]*c[11]+c[1]*c[7]*c[10]+c[5]*c[2]*c[11]-c[5]*c[3]*c[10]-c[9]*c[2]*c[7]+c[9]*c[3]*c[6];b[7]=c[0]*c[6]*c[11]-c[0]*c[7]*c[10]-c[4]*c[2]*c[11]+c[4]*c[3]*c[10]+c[8]*c[2]*c[7]-c[8]*c[3]*c[6];b[11]=-c[0]*c[5]*c[11]+c[0]*c[7]*c[9]+c[4]*c[1]*c[11]-c[4]*c[3]*c[9]-c[8]*c[1]*c[7]+c[8]*c[3]*c[5];b[15]=c[0]*c[5]*c[10]-c[0]*c[6]*c[9]-c[4]*c[1]*c[10]+c[4]*c[2]*c[9]+c[8]*c[1]*c[6]-c[8]*c[2]*c[5];var e=c[0]*b[0]+c[1]*b[4]+c[2]*b[8]+c[3]*b[12];if(e===0){return false}e=1/e;for(var d=0;d<16;d=d+1){f[d]=b[d]*e}return true}}(GLU));var PAPAYA_BROWSER_MIN_FIREFOX=7,PAPAYA_BROWSER_MIN_CHROME=7,PAPAYA_BROWSER_MIN_SAFARI=6,PAPAYA_BROWSER_MIN_IE=10,PAPAYA_BROWSER_MIN_OPERA=12;var PAPAYA_SURFACE_BROWSER_MIN_FIREFOX=7,PAPAYA_SURFACE_BROWSER_MIN_CHROME=8,PAPAYA_SURFACE_BROWSER_MIN_SAFARI=6,PAPAYA_SURFACE_BROWSER_MIN_IE=11,PAPAYA_SURFACE_BROWSER_MIN_OPERA=12;var PAPAYA_CONTAINER_CLASS_NAME="papaya",PAPAYA_CONTAINER_COLLAPSABLE="papaya-collapsable",PAPAYA_CONTAINER_COLLAPSABLE_EXEMPT="papaya-collapsable-exempt",PAPAYA_CONTAINER_FULLSCREEN="papaya-fullscreen";var PAPAYA_VIEWER_CSS="papaya-viewer";var PAPAYA_TOOLBAR_CSS="papaya-toolbar",PAPAYA_TITLEBAR_CSS="papaya-titlebar",PAPAYA_SLIDER_CSS="papaya-slider-slice",PAPAYA_KIOSK_CONTROLS_CSS="papaya-kiosk-controls";var PAPAYA_DISPLAY_CSS="papaya-display";var PAPAYA_DIALOG_CSS="papaya-dialog",PAPAYA_DIALOG_CONTENT_CSS="papaya-dialog-content",PAPAYA_DIALOG_CONTENT_NOWRAP_CSS="papaya-dialog-content-nowrap",PAPAYA_DIALOG_CONTENT_LABEL_CSS="papaya-dialog-content-label",PAPAYA_DIALOG_CONTENT_CONTROL_CSS="papaya-dialog-content-control",PAPAYA_DIALOG_TITLE_CSS="papaya-dialog-title",PAPAYA_DIALOG_BUTTON_CSS="papaya-dialog-button",PAPAYA_DIALOG_BACKGROUND="papaya-dialog-background",PAPAYA_DIALOG_STOPSCROLL="papaya-dialog-stopscroll",PAPAYA_DIALOG_CONTENT_HELP="papaya-dialog-content-help";var PAPAYA_MENU_CSS="papaya-menu",PAPAYA_MENU_LABEL_CSS="papaya-menu-label",PAPAYA_MENU_TITLEBAR_CSS="papaya-menu-titlebar",PAPAYA_MENU_ICON_CSS="papaya-menu-icon",PAPAYA_MENU_HOVERING_CSS="papaya-menu-hovering",PAPAYA_MENU_SPACER_CSS="papaya-menu-spacer",PAPAYA_MENU_UNSELECTABLE="papaya-menu-unselectable",PAPAYA_MENU_FILECHOOSER="papaya-menu-filechooser",PAPAYA_MENU_BUTTON_CSS="papaya-menu-button",PAPAYA_MENU_BUTTON_HOVERING_CSS="papaya-menu-button-hovering",PAPAYA_MENU_COLORTABLE_CSS="papaya-menu-colortable",PAPAYA_MENU_INPUT_FIELD="papaya-menu-input",PAPAYA_MENU_SLIDER="papaya-menu-slider";var PAPAYA_CONTROL_INCREMENT_BUTTON_CSS="papaya-control-increment",PAPAYA_CONTROL_GOTO_CENTER_BUTTON_CSS="papaya-control-goto-center",PAPAYA_CONTROL_GOTO_ORIGIN_BUTTON_CSS="papaya-control-goto-origin",PAPAYA_CONTROL_SWAP_BUTTON_CSS="papaya-control-swap",PAPAYA_CONTROL_DIRECTION_SLIDER="papaya-direction-slider",PAPAYA_CONTROL_MAIN_SLIDER="papaya-main-slider",PAPAYA_CONTROL_MAIN_INCREMENT_BUTTON_CSS="papaya-main-increment",PAPAYA_CONTROL_MAIN_DECREMENT_BUTTON_CSS="papaya-main-decrement",PAPAYA_CONTROL_MAIN_SWAP_BUTTON_CSS="papaya-main-swap",PAPAYA_CONTROL_MAIN_GOTO_CENTER_BUTTON_CSS="papaya-main-goto-center",PAPAYA_CONTROL_MAIN_GOTO_ORIGIN_BUTTON_CSS="papaya-main-goto-origin",PAPAYA_CONTROL_BAR_LABELS_CSS="papaya-controlbar-label";var PAPAYA_UTILS_CHECKFORJS_CSS="checkForJS",PAPAYA_UTILS_UNSUPPORTED_CSS="papaya-utils-unsupported",PAPAYA_UTILS_UNSUPPORTED_MESSAGE_CSS="papaya-utils-unsupported-message";var PAPAYA_DEFAULT_VIEWER_ID="papayaViewer",PAPAYA_DEFAULT_DISPLAY_ID="papayaDisplay",PAPAYA_DEFAULT_TOOLBAR_ID="papayaToolbar",PAPAYA_DEFAULT_CONTAINER_ID="papayaContainer",PAPAYA_DEFAULT_SLIDER_ID="papayaSliceSlider";var PAPAYA_SPACING=3,PAPAYA_PADDING=8,PAPAYA_CONTAINER_PADDING=20,PAPAYA_CONTAINER_PADDING_TOP=PAPAYA_CONTAINER_PADDING,PAPAYA_MANGO_INSTALLED="mangoinstalled",PAPAYA_CUSTOM_PROTOCOL="mango";var GUNZIP_MAGIC_COOKIE1=31,GUNZIP_MAGIC_COOKIE2=139;"use strict";var papaya=papaya||{};papaya.utilities=papaya.utilities||{};papaya.utilities.ArrayUtils=papaya.utilities.ArrayUtils||{};papaya.utilities.ArrayUtils.createArray=function(c){var a=new Array(c||0),d;if(arguments.length>1){var b=Array.prototype.slice.call(arguments,1);for(d=0;d<c;d+=1){a[d]=papaya.utilities.ArrayUtils.createArray.apply(this,b)}}return a};papaya.utilities.ArrayUtils.contains=function(b,d){var c=b.length;while(c--){if(b[c]===d){return true}}return false};papaya.utilities.ArrayUtils.cleanArray=function(c){var a=new Array();for(var b=0;b<c.length;b++){if(c[b]){a.push(c[b])}}return a};Array.prototype.clone=function(){var a,b;a=this.slice(0);for(b=0;b<this.length;b+=1){if(this[b].clone){a[b]=this[b].clone()}}return a};"use strict";var papaya=papaya||{};papaya.utilities=papaya.utilities||{};papaya.utilities.MathUtils=papaya.utilities.MathUtils||{};papaya.utilities.MathUtils.EPSILON=1e-8;papaya.utilities.MathUtils.signum=function(a){return a?a<0?-1:1:0};papaya.utilities.MathUtils.lineDistance=function(e,d,a,f){var b,c;b=a-e;b=b*b;c=f-d;c=c*c;return Math.sqrt(b+c)};papaya.utilities.MathUtils.lineDistance3d=function(h,g,f,d,c,b){var a,i,e;a=d-h;a=a*a;i=c-g;i=i*i;e=b-f;e=e*e;return Math.sqrt(a+i+e)};papaya.utilities.MathUtils.essentiallyEqual=function(d,c){return(d===c)||(Math.abs(d-c)<=((Math.abs(d)>Math.abs(c)?Math.abs(c):Math.abs(d))*papaya.utilities.MathUtils.EPSILON))};papaya.utilities.MathUtils.getPowerOfTwo=function(b,a){var a=a||1;while(a<b){a*=2}return a};function papayaRoundFast(a){if(a>0){return(a+0.5)|0}return(a-0.5)|0}function papayaFloorFast(a){return a|0}"use strict";var papaya=papaya||{};papaya.utilities=papaya.utilities||{};papaya.utilities.ObjectUtils=papaya.utilities.ObjectUtils||{};papaya.utilities.ObjectUtils.bind=function(d,c,b,a){if(arguments.length===2){return function(){return c.apply(d,arguments)}}var f=c,e=Array.prototype.slice;return function(){var g=b||arguments;if(a===true){g=e.call(arguments,0);g=g.concat(b)}else{if(typeof a==="number"){g=e.call(arguments,0);Ext.Array.insert(g,a,b)}}return f.apply(d||window,g)}};papaya.utilities.ObjectUtils.isString=function(a){return(typeof a==="string"||a instanceof String)};papaya.utilities.ObjectUtils.dereference=function(a){return papaya.utilities.ObjectUtils.dereferenceIn(window,a)};papaya.utilities.ObjectUtils.dereferenceIn=function(b,a){var c,d;if(!papaya.utilities.ObjectUtils.isString(a)){return null}d=a.replace(/(^[' "]+|[" ']+$)/g,"").match(/(^[\w\$]+(\.[\w\$]+)*)/);if(d){d=d[1].split(".");c=b[d.shift()];while(c&&d.length){c=c[d.shift()]}}return c||null};"use strict";var papaya=papaya||{};papaya.utilities=papaya.utilities||{};papaya.utilities.PlatformUtils=papaya.utilities.PlatformUtils||{};var console=console||{};console.log=console.log||function(){};console.warn=console.warn||function(){};console.error=console.error||function(){};console.info=console.info||function(){};papaya.utilities.PlatformUtils.os=null;papaya.utilities.PlatformUtils.browser=bowser.name;papaya.utilities.PlatformUtils.browserVersion=bowser.version;papaya.utilities.PlatformUtils.ios=bowser.ios;papaya.utilities.PlatformUtils.mobile=bowser.mobile;papaya.utilities.PlatformUtils.lastScrollEventTimestamp=0;papaya.utilities.PlatformUtils.smallScreen=window.matchMedia&&window.matchMedia("only screen and (max-width: 760px)").matches;papaya.utilities.PlatformUtils.detectOs=function(){if(navigator.appVersion.indexOf("Win")!==-1){return"Windows"}else{if(navigator.appVersion.indexOf("Mac")!==-1){return"MacOS"}else{if((navigator.appVersion.indexOf("X11")!==-1)||(navigator.appVersion.indexOf("Linux")!==-1)){return"Linux"}else{return"Unknown"}}}};papaya.utilities.PlatformUtils.os=papaya.utilities.PlatformUtils.detectOs();papaya.utilities.PlatformUtils.checkForBrowserCompatibility=function(){if(papaya.utilities.PlatformUtils.browser==="Firefox"){if(papaya.utilities.PlatformUtils.browserVersion<PAPAYA_BROWSER_MIN_FIREFOX){return("Papaya requires Firefox version "+PAPAYA_BROWSER_MIN_FIREFOX+" or higher.")}}else{if(papaya.utilities.PlatformUtils.browser==="Chrome"){if(papaya.utilities.PlatformUtils.browserVersion<PAPAYA_BROWSER_MIN_CHROME){return("Papaya requires Chrome version "+PAPAYA_BROWSER_MIN_CHROME+" or higher.")}}else{if(papaya.utilities.PlatformUtils.browser==="Internet Explorer"){if(papaya.utilities.PlatformUtils.browserVersion<PAPAYA_BROWSER_MIN_IE){return("Papaya requires Internet Explorer version "+PAPAYA_BROWSER_MIN_IE+" or higher.")}}else{if(papaya.utilities.PlatformUtils.browser==="Safari"){if(papaya.utilities.PlatformUtils.browserVersion<PAPAYA_BROWSER_MIN_SAFARI){return("Papaya requires Safari version "+PAPAYA_BROWSER_MIN_SAFARI+" or higher.")}}else{if(papaya.utilities.PlatformUtils.browser==="Opera"){if(papaya.utilities.PlatformUtils.browserVersion<PAPAYA_BROWSER_MIN_OPERA){return("Papaya requires Opera version "+PAPAYA_BROWSER_MIN_OPERA+" or higher.")}}}}}}return null};papaya.utilities.PlatformUtils.isWebGLSupported=function(){var b;var a;var c;try{b=document.createElement("canvas");a=b.getContext("webgl")||b.getContext("experimental-webgl");c=a.getExtension("OES_element_index_uint");if(!c){return false}}catch(d){console.log("There was a problem detecting WebGL! "+d);return false}b=null;a=null;c=null;return true};papaya.utilities.PlatformUtils.getMousePositionX=function(a){var b;if(a.originalEvent){a=a.originalEvent}if(a.targetTouches){if(a.targetTouches.length===1){b=a.targetTouches[0];if(b){return b.pageX}}}else{if(a.changedTouches){if(a.changedTouches.length===1){b=a.changedTouches[0];if(b){return b.pageX}}}}return a.pageX};papaya.utilities.PlatformUtils.getMousePositionY=function(a){var b;if(a.targetTouches){if(a.targetTouches.length===1){b=a.targetTouches[0];if(b){return b.pageY}}}else{if(a.changedTouches){if(a.changedTouches.length===1){b=a.changedTouches[0];if(b){return b.pageY}}}}return a.pageY};papaya.utilities.PlatformUtils.getScrollSign=function(c,f){var g,a,e,d;if(f){g=75}else{if(papaya.utilities.PlatformUtils.browser==="Firefox"){g=10}else{if(papaya.utilities.PlatformUtils.browser==="Chrome"){g=50}else{if(papaya.utilities.PlatformUtils.browser==="Internet Explorer"){g=0}else{if(papaya.utilities.PlatformUtils.browser==="Safari"){g=50}else{g=10}}}}}var b=Date.now();if((b-papaya.utilities.PlatformUtils.lastScrollEventTimestamp)>g){papaya.utilities.PlatformUtils.lastScrollEventTimestamp=b;e=papaya.utilities.PlatformUtils.normalizeWheel(c).spinY;a=(-1*papaya.utilities.PlatformUtils.normalizeWheel(c).spinY)>0?1:-1;d=Math.ceil(Math.abs(e/10))*a;return d}return 0};papaya.utilities.PlatformUtils.makeSlice=function(b,d,c){var a=(typeof File);if(a==="undefined"){return function(){}}if(File.prototype.slice){return b.slice(d,d+c)}if(File.prototype.mozSlice){return b.mozSlice(d,c)}if(File.prototype.webkitSlice){return b.webkitSlice(d,c)}return null};papaya.utilities.PlatformUtils.isPlatformLittleEndian=function(){var a=new ArrayBuffer(2);new DataView(a).setInt16(0,256,true);return new Int16Array(a)[0]===256};papaya.utilities.PlatformUtils.isInputRangeSupported=function(){var a=document.createElement("input");a.setAttribute("type","range");return(a.type==="range")};papaya.utilities.PlatformUtils.launchCustomProtocol=function(a,b,h){var e,f,d,g=false;if(papaya.utilities.PlatformUtils.browser==="Internet Explorer"){f=window.open("","","width=0,height=0");f.document.write("<iframe src='"+b+"'></iframe>");setTimeout(function(){try{f.location.href;g=true}catch(i){console.log(i)}if(g){f.setTimeout("window.close()",100)}else{f.close()}h(g)},100)}else{if(papaya.utilities.PlatformUtils.browser==="Firefox"){try{e=$("<iframe />");e.css({display:"none"});e.appendTo("body");e[0].contentWindow.location.href=b;g=true}catch(c){g=false}e.remove();h(g)}else{if(papaya.utilities.PlatformUtils.browser==="Chrome"){a.viewerHtml.css({outline:0});a.viewerHtml.attr("tabindex","1");a.viewerHtml.focus();a.viewerHtml.blur(function(){g=true;h(true)});location.href=b;setTimeout(function(){a.viewerHtml.off("blur");a.viewerHtml.removeAttr("tabindex");if(!g){h(false)}},2000)}else{d=papaya.utilities.UrlUtils.readCookie(papaya.viewer.Preferences.COOKIE_PREFIX+PAPAYA_MANGO_INSTALLED);if(d||papaya.mangoinstalled){g=true}else{if(confirm("This feature requires that "+(papaya.utilities.PlatformUtils.ios?"iMango":"Mango")+" is installed.  Continue?")){papaya.utilities.UrlUtils.createCookie(papaya.viewer.Preferences.COOKIE_PREFIX+PAPAYA_MANGO_INSTALLED,true,papaya.viewer.Preferences.COOKIE_EXPIRY_DAYS);g=true}}if(g){location.href=b}h(g)}}}};papaya.utilities.PlatformUtils.getSupportedScrollEvent=function(){var a;if(papaya.utilities.PlatformUtils.browser==="Firefox"){a="DOMMouseScroll"}else{a="onwheel" in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll"}return a};var PIXEL_STEP=10;var LINE_HEIGHT=40;var PAGE_HEIGHT=800;papaya.utilities.PlatformUtils.normalizeWheel=function(c){var e=0,d=0,b=0,a=0;if("detail" in c){d=c.detail}if("wheelDelta" in c){d=-c.wheelDelta/120}if("wheelDeltaY" in c){d=-c.wheelDeltaY/120}if("wheelDeltaX" in c){e=-c.wheelDeltaX/120}if("axis" in c&&c.axis===c.HORIZONTAL_AXIS){e=d;d=0}b=e*PIXEL_STEP;a=d*PIXEL_STEP;if("deltaY" in c){a=c.deltaY}if("deltaX" in c){b=c.deltaX}if((b||a)&&c.deltaMode){if(c.deltaMode==1){b*=LINE_HEIGHT;a*=LINE_HEIGHT}else{b*=PAGE_HEIGHT;a*=PAGE_HEIGHT}}if(b&&!e){e=(b<1)?-1:1}if(a&&!d){d=(a<1)?-1:1}return{spinX:e,spinY:d,pixelX:b,pixelY:a}};"use strict";var papaya=papaya||{};papaya.utilities=papaya.utilities||{};papaya.utilities.StringUtils=papaya.utilities.StringUtils||{};papaya.utilities.StringUtils.isStringBlank=function(a){if(a&&(typeof a).toLowerCase()=="string"){return(a.trim().length===0)}return true};papaya.utilities.StringUtils.formatNumber=function(b,a){var c=0;if(papaya.utilities.ObjectUtils.isString(b)){c=Number(b)}else{c=b}if(a){c=c.toPrecision(5)}else{c=c.toPrecision(7)}return parseFloat(c)};papaya.utilities.StringUtils.getSizeString=function(b){var a=null;if(b>1048576){a=papaya.utilities.StringUtils.formatNumber(b/1048576,true)+" Mb"}else{if(b>1024){a=papaya.utilities.StringUtils.formatNumber(b/1024,true)+" Kb"}else{a=b+" Bytes"}}return a};papaya.utilities.StringUtils.wordwrap=function(e,b,a,d){a=a||"\n";b=b||75;d=d||false;if(!e){return e}var c=".{1,"+b+"}(\\s|$)"+(d?"|.{"+b+"}|.+$":"|\\S+?(\\s|$)");return e.match(new RegExp(c,"g")).join(a)};papaya.utilities.StringUtils.truncateMiddleString=function(e,c){if(e.length<=c){return e}var f="...",g=f.length,a=c-g,d=Math.ceil(a/2),b=Math.floor(a/2);return e.substr(0,d)+f+e.substr(e.length-b)};papaya.utilities.StringUtils.pad=function(a,b){return("000000000"+a).substr(-b)};papaya.utilities.StringUtils.arrayBufferToString=function(b){var a=new Uint8Array(b);var c=String.fromCharCode.apply(String,a);if(/[\u0080-\uffff]/.test(c)){throw new Error("this string seems to contain (still encoded) multibytes")}return c};if(typeof String.prototype.startsWith!=="function"){String.prototype.startsWith=function(a){return this.indexOf(a)===0}}if(typeof String.prototype.endsWith!=="function"){String.prototype.endsWith=function(a){return this.indexOf(a,this.length-a.length)!==-1}}if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}"use strict";var papaya=papaya||{};papaya.utilities=papaya.utilities||{};papaya.utilities.UrlUtils=papaya.utilities.UrlUtils||{};papaya.utilities.UrlUtils.createCookie=function(c,d,e){var b,a;if(e){b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));a="; expires="+b.toGMTString()}else{a=""}document.cookie=c+"="+d+a+"; path=/"};papaya.utilities.UrlUtils.readCookie=function(b){var e,a,d,f;e=b+"=";a=document.cookie.split(";");for(d=0;d<a.length;d+=1){f=a[d];while(f.charAt(0)===" "){f=f.substring(1,f.length)}if(f.indexOf(e)===0){return f.substring(e.length,f.length)}}return null};papaya.utilities.UrlUtils.eraseCookie=function(a){papaya.utilities.UrlUtils.createCookie(a,"",-1)};papaya.utilities.UrlUtils.getQueryParams=function(d){var c,a,b=/[?&]?([^=]+)=([^&]*)/g;if(document.location.href.indexOf("?")!==-1){a=document.location.href.substring(document.location.href.indexOf("?")+1);a=a.split("+").join(" ");c=b.exec(a);while(c){d[decodeURIComponent(c[1])]=decodeURIComponent(c[2]);c=b.exec(a)}}};papaya.utilities.UrlUtils.getAbsoluteUrl=function(f,d){var c,b,a,e;c=window.location.href;c=c.substring(0,c.lastIndexOf("/"));b=document.createElement("a");b.href=c+"/"+d;a=b.host;e=b.pathname;if(e.charAt(0)!=="/"){e="/"+e}return(f+"://"+a+e)};"use strict";var papaya=papaya||{};papaya.core=papaya.core||{};papaya.core.Coordinate=papaya.core.Coordinate||function(c,b,a){this.x=c;this.y=b;this.z=a};papaya.core.Coordinate.prototype.setCoordinate=function(d,c,b,a){if(a){this.x=Math.round(d);this.y=Math.round(c);this.z=Math.round(b)}else{this.x=d;this.y=c;this.z=b}};papaya.core.Coordinate.prototype.toString=function(){return"("+this.x+","+this.y+","+this.z+")"};papaya.core.Coordinate.prototype.isAllZeros=function(){return((this.x===0)&&(this.y===0)&&(this.z===0))};"use strict";var papaya=papaya||{};papaya.core=papaya.core||{};papaya.core.Point=papaya.core.Point||function(b,a){this.x=b;this.y=a};"use strict";var papaya=papaya||{};papaya.volume=papaya.volume||{};papaya.volume.Header=papaya.volume.Header||function(a){this.fileFormat=null;this.imageDimensions=null;this.voxelDimensions=null;this.imageDescription=null;this.imageType=null;this.orientation=null;this.imageRange=null;this.error=null;this.origin=null;this.pad=a;this.orientationCertainty=papaya.volume.Header.ORIENTATION_CERTAINTY_UNKNOWN;this.onFinishedFileFormatRead=null};papaya.volume.Header.HEADER_TYPE_UNKNOWN=0;papaya.volume.Header.HEADER_TYPE_NIFTI=1;papaya.volume.Header.HEADER_TYPE_DICOM=2;papaya.volume.Header.ERROR_UNRECOGNIZED_FORMAT="This format is not recognized!";papaya.volume.Header.INVALID_IMAGE_DIMENSIONS="Image dimensions are not valid!";papaya.volume.Header.INVALID_VOXEL_DIMENSIONS="Voxel dimensions are not valid!";papaya.volume.Header.INVALID_DATATYPE="Datatype is not valid or not supported!";papaya.volume.Header.INVALID_IMAGE_RANGE="Image range is not valid!";papaya.volume.Header.ORIENTATION_CERTAINTY_UNKNOWN=0;papaya.volume.Header.ORIENTATION_CERTAINTY_LOW=1;papaya.volume.Header.ORIENTATION_CERTAINTY_HIGH=2;papaya.volume.Header.prototype.findHeaderType=function(a,b){if(papaya.volume.nifti.HeaderNIFTI.isThisFormat(a,b)){return papaya.volume.Header.HEADER_TYPE_NIFTI}else{if(papaya.Container.DICOM_SUPPORT&&papaya.volume.dicom.HeaderDICOM.isThisFormat(a,b)){return papaya.volume.Header.HEADER_TYPE_DICOM}}return papaya.volume.Header.HEADER_TYPE_UNKNOWN};papaya.volume.Header.prototype.readHeaderData=function(b,e,c,d,f){var a=this.findHeaderType(b,e);this.onFinishedFileFormatRead=f;if(a===papaya.volume.Header.HEADER_TYPE_NIFTI){this.fileFormat=new papaya.volume.nifti.HeaderNIFTI();this.fileFormat.readHeaderData(e,c,d,papaya.utilities.ObjectUtils.bind(this,this.onFinishedHeaderRead))}else{if(a===papaya.volume.Header.HEADER_TYPE_DICOM){this.fileFormat=new papaya.volume.dicom.HeaderDICOM();this.fileFormat.readHeaderData(e,c,d,papaya.utilities.ObjectUtils.bind(this,this.onFinishedHeaderRead))}else{this.error=new Error(papaya.volume.Header.ERROR_UNRECOGNIZED_FORMAT);this.onFinishedFileFormatRead()}}};papaya.volume.Header.prototype.onFinishedHeaderRead=function(){if(this.fileFormat.hasError()){this.error=this.fileFormat.error}else{this.imageType=this.fileFormat.getImageType();if(!this.imageType.isValid()){this.error=new Error(papaya.volume.Header.INVALID_DATATYPE)}this.imageDimensions=this.fileFormat.getImageDimensions();if(!this.imageDimensions.isValid()){this.error=new Error(papaya.volume.Header.INVALID_IMAGE_DIMENSIONS)}this.voxelDimensions=this.fileFormat.getVoxelDimensions();if(!this.voxelDimensions.isValid()){this.error=new Error(papaya.volume.Header.INVALID_VOXEL_DIMENSIONS)}if(this.pad){this.imageDimensions.padIsometric(this.voxelDimensions)}this.orientation=this.fileFormat.getOrientation();if(!this.orientation.isValid()){this.orientation=new papaya.volume.Orientation(papaya.volume.Orientation.DEFAULT);this.orientationCertainty=papaya.volume.Header.ORIENTATION_CERTAINTY_UNKNOWN}else{this.orientationCertainty=this.fileFormat.getOrientationCertainty()}this.orientation.createInfo(this.imageDimensions,this.voxelDimensions);this.origin=this.orientation.convertCoordinate(this.fileFormat.getOrigin(),new papaya.core.Coordinate(0,0,0));this.imageRange=this.fileFormat.getImageRange();if(!this.imageRange.isValid()){this.error=new Error(papaya.volume.Header.INVALID_IMAGE_RANGE)}this.imageDescription=this.fileFormat.getImageDescription()}this.onFinishedFileFormatRead()};papaya.volume.Header.prototype.getName=function(){return this.fileFormat.getName()};papaya.volume.Header.prototype.getSeriesLabels=function(){return this.fileFormat.getSeriesLabels()};papaya.volume.Header.prototype.readImageData=function(a,b){this.fileFormat.readImageData(a,b)};papaya.volume.Header.prototype.hasError=function(){return(this.error!==null)};papaya.volume.Header.prototype.getBestTransform=function(){return this.fileFormat.getBestTransform()};papaya.volume.Header.prototype.getBestTransformOrigin=function(){return this.fileFormat.getBestTransformOrigin()};papaya.volume.Header.prototype.toString=function(){return this.fileFormat.toString()};"use strict";var papaya=papaya||{};papaya.volume=papaya.volume||{};papaya.volume.ImageData=papaya.volume.ImageData||function(a){this.data=null;this.pad=a};papaya.volume.ImageData.prototype.readFileData=function(h,a,d){var g,e,f,b,c;if(this.pad){a=this.padIsometric(h,a)}if(h.imageType.datatype===papaya.volume.ImageType.DATATYPE_RGB){g=a.byteLength/3;b=2*g;c=h.imageType.rgbBySample;e=new DataView(a,0);this.data=new Uint32Array(g);if(c){for(f=0;f<g;f+=1){this.data[f]|=((e.getUint8(f)<<16))}for(f=0;f<g;f+=1){this.data[f]|=((e.getUint8(f+g)<<8))}for(f=0;f<g;f+=1){this.data[f]|=((e.getUint8(f+b)))}}else{for(f=0;f<g;f+=1){this.data[f]=((e.getUint8(f*3)<<16)|(e.getUint8(f*3+1)<<8)|e.getUint8(f*3+2))}}}else{if((h.imageType.datatype===papaya.volume.ImageType.DATATYPE_INTEGER_SIGNED)&&(h.imageType.numBytes===1)){this.data=new Int8Array(a,0,a.byteLength)}else{if((h.imageType.datatype===papaya.volume.ImageType.DATATYPE_INTEGER_UNSIGNED)&&(h.imageType.numBytes===1)){this.data=new Uint8Array(a,0,a.byteLength)}else{if((h.imageType.datatype===papaya.volume.ImageType.DATATYPE_INTEGER_SIGNED)&&(h.imageType.numBytes===2)){this.data=new Int16Array(a,0,a.byteLength/2)}else{if((h.imageType.datatype===papaya.volume.ImageType.DATATYPE_INTEGER_UNSIGNED)&&(h.imageType.numBytes===2)){this.data=new Uint16Array(a,0,a.byteLength/2)}else{if((h.imageType.datatype===papaya.volume.ImageType.DATATYPE_INTEGER_SIGNED)&&(h.imageType.numBytes===4)){this.data=new Int32Array(a,0,a.byteLength/4)}else{if((h.imageType.datatype===papaya.volume.ImageType.DATATYPE_INTEGER_UNSIGNED)&&(h.imageType.numBytes===4)){this.data=new Uint32Array(a,0,a.byteLength/4)}else{if((h.imageType.datatype===papaya.volume.ImageType.DATATYPE_FLOAT)&&(h.imageType.numBytes===4)){if(h.imageType.swapped){g=a.byteLength/Float32Array.BYTES_PER_ELEMENT;e=new DataView(a,0);this.data=new Float32Array(g);for(f=0;f<g;f+=1){this.data[f]=e.getFloat32(f*Float32Array.BYTES_PER_ELEMENT)}}else{this.data=new Float32Array(a,0,a.byteLength/4)}}else{if((h.imageType.datatype===papaya.volume.ImageType.DATATYPE_FLOAT)&&(h.imageType.numBytes===8)){if(h.imageType.swapped){g=a.byteLength/Float64Array.BYTES_PER_ELEMENT;e=new DataView(a,0);this.data=new Float64Array(g);for(f=0;f<g;f+=1){this.data[f]=e.getFloat64(f*Float64Array.BYTES_PER_ELEMENT)}}else{this.data=new Float64Array(a,0,a.byteLength/8)}}}}}}}}}}d()};papaya.volume.ImageData.prototype.padIsometric=function(w,D){var t=w.imageDimensions,a=w.voxelDimensions,s=w.imageType.numBytes,y=new Uint8Array(D,0,D.byteLength),m=t.colsOrig,l=t.rowsOrig,b=t.slicesOrig,e=(m*a.colSize),x=(l*a.rowSize),o=(b*a.sliceSize),v=Math.max(Math.max(e,x),o),c=parseInt((v-e)/a.colSize/2,10),B=parseInt((v-x)/a.rowSize/2,10),d=parseInt((v-o)/a.sliceSize/2,10),p=(m+2*c),i=(l+2*B),q=(b+2*d),r=m*s,k=c*s,j=B*p*s,u=d*(p*i)*s,n=0,h=0;var z=new ArrayBuffer(p*i*q*s);var f=new Uint8Array(z,0,z.byteLength);n+=u;for(var A=0;A<b;A+=1){n+=j;for(var C=0;C<l;C+=1){n+=k;for(var g=0;g<r;g+=1,h++,n++){f[n]=y[h]}n+=k}n+=j}return z};"use strict";var papaya=papaya||{};papaya.volume=papaya.volume||{};papaya.volume.ImageDescription=papaya.volume.ImageDescription||function(a){this.notes="(none)";if(!papaya.utilities.StringUtils.isStringBlank(a)){this.notes=a}};"use strict";var papaya=papaya||{};papaya.volume=papaya.volume||{};papaya.volume.ImageDimensions=papaya.volume.ImageDimensions||function(c,a,d,b){this.cols=c;this.rows=a;this.slices=d;this.colsOrig=c;this.rowsOrig=a;this.slicesOrig=d;this.xDim=-1;this.yDim=-1;this.zDim=-1;this.timepoints=b||1;this.dataOffsets=[];this.dataLengths=[]};papaya.volume.ImageDimensions.prototype.padIsometric=function(f){var b=this,h=b.cols,l=b.rows,k=b.slices,i=(h*f.colSize),d=(l*f.rowSize),c=(k*f.sliceSize),j=Math.max(Math.max(i,d),c),e=parseInt((j-i)/f.colSize/2,10),g=parseInt((j-d)/f.rowSize/2,10),a=parseInt((j-c)/f.sliceSize/2,10);this.cols=(h+2*e);this.rows=(l+2*g);this.slices=(k+2*a)};papaya.volume.ImageDimensions.prototype.getNumVoxelsSeries=function(){return this.cols*this.rows*this.slices*this.timepoints};papaya.volume.ImageDimensions.prototype.getNumVoxelsSlice=function(){return this.rows*this.cols};papaya.volume.ImageDimensions.prototype.getNumVoxelsVolume=function(){return this.rows*this.cols*this.slices};papaya.volume.ImageDimensions.prototype.isValid=function(){return((this.cols>0)&&(this.rows>0)&&(this.slices>0)&&(this.timepoints>0)&&(this.dataOffsets[0]>=0)&&(this.dataLengths[0]>=0))};var moduleType=typeof module;if((moduleType!=="undefined")&&module.exports){module.exports.ImageDimensions=papaya.volume.ImageDimensions}"use strict";var papaya=papaya||{};papaya.volume=papaya.volume||{};papaya.volume.ImageRange=papaya.volume.ImageRange||function(b,a){this.displayMin=b;this.displayMax=a;this.imageMin=0;this.imageMax=0;this.dataScaleSlopes=[];this.dataScaleIntercepts=[];this.globalDataScaleSlope=1;this.globalDataScaleIntercept=0;this.usesGlobalDataScale=false};papaya.volume.ImageRange.DEFAULT_SCALE=1;papaya.volume.ImageRange.DEFAULT_INTERCEPT=0;papaya.volume.ImageRange.prototype.isValid=function(){return true};papaya.volume.ImageRange.prototype.setGlobalDataScale=function(b,a){this.globalDataScaleSlope=b;this.globalDataScaleIntercept=a;this.usesGlobalDataScale=true;this.dataScaleSlopes=[];this.dataScaleIntercepts=[]};papaya.volume.ImageRange.prototype.validateDataScale=function(){var b,a,c=false;if((this.globalDataScaleSlope!==1)||(this.globalDataScaleIntercept!==0)){this.dataScaleSlopes=[];this.dataScaleIntercepts=[];this.usesGlobalDataScale=true}else{if((this.dataScaleSlopes.length>0)&&(this.dataScaleIntercepts.length>0)){a=this.dataScaleSlopes[0];for(b=1;b<this.dataScaleSlopes.length;b+=1){if(a!==this.dataScaleSlopes[b]){c=true;break}}a=this.dataScaleIntercepts[0];for(b=1;b<this.dataScaleIntercepts.length;b+=1){if(a!==this.dataScaleIntercepts[b]){c=true;break}}if(c){this.usesGlobalDataScale=false}else{this.setGlobalDataScale(this.dataScaleSlopes[0],this.dataScaleIntercepts[0])}}else{this.setGlobalDataScale(1,0)}}};"use strict";var papaya=papaya||{};papaya.volume=papaya.volume||{};papaya.volume.ImageType=papaya.volume.ImageType||function(c,a,d,b){this.datatype=c;this.numBytes=a;this.littleEndian=d;this.swapped=false;this.compressed=b;this.rgbBySample=false};papaya.volume.ImageType.DATATYPE_UNKNOWN=0;papaya.volume.ImageType.DATATYPE_INTEGER_SIGNED=1;papaya.volume.ImageType.DATATYPE_INTEGER_UNSIGNED=2;papaya.volume.ImageType.DATATYPE_FLOAT=3;papaya.volume.ImageType.DATATYPE_RGB=4;papaya.volume.ImageType.MAX_SUPPORTED_BYTES_FLOAT=8;papaya.volume.ImageType.MAX_SUPPORTED_BYTES_INTEGER=4;papaya.volume.ImageType.prototype.isValid=function(){return((this.datatype<=papaya.volume.ImageType.DATATYPE_RGB)&&(this.datatype>papaya.volume.ImageType.DATATYPE_UNKNOWN)&&(this.numBytes>0)&&(((this.datatype===papaya.volume.ImageType.DATATYPE_FLOAT)&&(this.numBytes<=papaya.volume.ImageType.MAX_SUPPORTED_BYTES_FLOAT))||((this.datatype!==papaya.volume.ImageType.DATATYPE_FLOAT)&&(this.numBytes<=papaya.volume.ImageType.MAX_SUPPORTED_BYTES_INTEGER))))};papaya.volume.ImageType.prototype.getTypeDescription=function(){if(this.datatype===papaya.volume.ImageType.DATATYPE_INTEGER_SIGNED){return"Signed Integer"}if(this.datatype===papaya.volume.ImageType.DATATYPE_INTEGER_UNSIGNED){return"Unsigned Integer"}if(this.datatype===papaya.volume.ImageType.DATATYPE_FLOAT){return"Float"}if(this.datatype===papaya.volume.ImageType.DATATYPE_RGB){return"RGB"}return"Unknown"};papaya.volume.ImageType.prototype.getOrderDescription=function(){if(this.numBytes>1){if(this.littleEndian){return"Little Endian"}return"Big Endian"}return null};"use strict";var papaya=papaya||{};papaya.volume=papaya.volume||{};papaya.volume.nifti=papaya.volume.nifti||{};var xss=xss||((typeof require!=="undefined")?require("xss"):null);papaya.volume.nifti.HeaderNIFTI=papaya.volume.nifti.HeaderNIFTI||function(){this.nifti=null;this.isNIFTI2=false;this.compressed=false;this.ext=null;this.imageData=null};papaya.volume.nifti.HeaderNIFTI.ORIENTATION_DEFAULT="XYZ-++";papaya.volume.nifti.HeaderNIFTI.SPATIAL_UNITS_MASK=7;papaya.volume.nifti.HeaderNIFTI.TEMPORAL_UNITS_MASK=56;papaya.volume.nifti.HeaderNIFTI.isThisFormat=function(a,b){if(a.indexOf(".nii")!==-1){return true}return nifti.isNIFTI(b[0])};papaya.volume.nifti.HeaderNIFTI.prototype.readHeaderData=function(d,a,c,e){this.nifti=nifti.readHeader(d[0]);this.isNIFTI2=nifti.isNIFTI2(d[0]);try{if(nifti.hasExtension(this.nifti)){this.ext=nifti.readExtensionData(this.nifti,d[0])}}catch(b){console.log("Problem reading NIFTI extension.")}this.imageData=nifti.readImage(this.nifti,d[0]);e()};papaya.volume.nifti.HeaderNIFTI.prototype.readImageData=function(a,b){b(this.imageData);this.imageData=null};papaya.volume.nifti.HeaderNIFTI.prototype.getImageDimensions=function(){var a=new papaya.volume.ImageDimensions(this.nifti.dims[1],this.nifti.dims[2],this.nifti.dims[3],this.nifti.dims[4]);a.dataOffsets[0]=this.nifti.vox_offset;a.dataLengths[0]=(a.getNumVoxelsSeries()*(this.nifti.numBitsPerVoxel/8));return a};papaya.volume.nifti.HeaderNIFTI.prototype.getName=function(){return null};papaya.volume.nifti.HeaderNIFTI.prototype.getSeriesLabels=function(){var f=null;if(this.ext){try{var e=papaya.utilities.StringUtils.arrayBufferToString(this.ext).replace(/[^\x20-\x7F]/g,"").trim();var h=$.parseXML(e),a=$(h),g=a.find("MangoVolume");if(g.length){var i=g.find("Series");if(i.length){var d=i.find("Point");var b=i.attr("length");f=new Array(b);d.each(function(){var k=$(this).attr("index"),j=$(this).attr("name");f[parseInt(k)]=j})}}}catch(c){console.log("Unrecognized NIFTI extension found.")}}return f};papaya.volume.nifti.HeaderNIFTI.prototype.getVoxelDimensions=function(){var a;a=new papaya.volume.VoxelDimensions(this.nifti.pixDims[1],this.nifti.pixDims[2],this.nifti.pixDims[3],this.nifti.pixDims[4]);a.spatialUnit=(this.nifti.xyzt_units&papaya.volume.nifti.HeaderNIFTI.SPATIAL_UNITS_MASK);a.temporalUnit=(this.nifti.xyzt_units&papaya.volume.nifti.HeaderNIFTI.TEMPORAL_UNITS_MASK);a.flip=(this.nifti.pixDims[0]===-1);return a};papaya.volume.nifti.HeaderNIFTI.prototype.getImageType=function(){var a=papaya.volume.ImageType.DATATYPE_UNKNOWN;if((this.nifti.datatypeCode===nifti.NIFTI1.TYPE_UINT8)||(this.nifti.datatypeCode===nifti.NIFTI1.TYPE_UINT16)||(this.nifti.datatypeCode===nifti.NIFTI1.TYPE_UINT32)||(this.nifti.datatypeCode===nifti.NIFTI1.TYPE_UINT64)){a=papaya.volume.ImageType.DATATYPE_INTEGER_UNSIGNED}else{if((this.nifti.datatypeCode===nifti.NIFTI1.TYPE_INT8)||(this.nifti.datatypeCode===nifti.NIFTI1.TYPE_INT16)||(this.nifti.datatypeCode===nifti.NIFTI1.TYPE_INT32)||(this.nifti.datatypeCode===nifti.NIFTI1.TYPE_INT64)){a=papaya.volume.ImageType.DATATYPE_INTEGER_SIGNED}else{if((this.nifti.datatypeCode===nifti.NIFTI1.TYPE_FLOAT32)||(this.nifti.datatypeCode===nifti.NIFTI1.TYPE_FLOAT64)){a=papaya.volume.ImageType.DATATYPE_FLOAT}else{if(this.nifti.datatypeCode===nifti.NIFTI1.TYPE_RGB24){a=papaya.volume.ImageType.DATATYPE_RGB}}}}return new papaya.volume.ImageType(a,this.nifti.numBitsPerVoxel/8,this.nifti.littleEndian,this.compressed)};papaya.volume.nifti.HeaderNIFTI.prototype.getOrientation=function(){var a=null;if((this.nifti.qform_code>0)&&!this.qFormHasRotations()){a=this.getOrientationQform()}if((this.nifti.sform_code>this.nifti.qform_code)&&!this.sFormHasRotations()){a=this.getOrientationSform()}if(a===null){a=papaya.volume.nifti.HeaderNIFTI.ORIENTATION_DEFAULT}return new papaya.volume.Orientation(a)};papaya.volume.nifti.HeaderNIFTI.prototype.getOrientationQform=function(){var a=papaya.volume.nifti.HeaderNIFTI.ORIENTATION_DEFAULT,b=this.nifti.convertNiftiQFormToNiftiSForm(this.nifti.quatern_b,this.nifti.quatern_c,this.nifti.quatern_d,this.nifti.qoffset_x,this.nifti.qoffset_y,this.nifti.qoffset_z,this.nifti.pixDims[1],this.nifti.pixDims[2],this.nifti.pixDims[3],this.nifti.pixDims[0]);if(this.nifti.qform_code>0){a=this.nifti.convertNiftiSFormToNEMA(b);if(!papaya.volume.Orientation.isValidOrientationString(a)){a=papaya.volume.nifti.HeaderNIFTI.ORIENTATION_DEFAULT}}else{a=papaya.volume.nifti.HeaderNIFTI.ORIENTATION_DEFAULT}return a};papaya.volume.nifti.HeaderNIFTI.prototype.getOrientationSform=function(){var a=this.nifti.convertNiftiSFormToNEMA(this.nifti.affine);if(!papaya.volume.Orientation.isValidOrientationString(a)){a=papaya.volume.nifti.HeaderNIFTI.ORIENTATION_DEFAULT}return a};papaya.volume.nifti.HeaderNIFTI.prototype.getQformMatCopy=function(){return this.nifti.getQformMat().clone()};papaya.volume.nifti.HeaderNIFTI.prototype.getSformMatCopy=function(){return this.nifti.affine.clone()};papaya.volume.nifti.HeaderNIFTI.prototype.getOrigin=function(o,m){var p=new papaya.core.Coordinate(0,0,0),b,j,q,k,c,g,l,d,a,i,n,h,f,e;if((this.nifti.qform_code>0)&&!m){if(this.qFormHasRotations()){j=this.nifti.getQformMat();q=numeric.inv(j);p.setCoordinate(q[0][3],q[1][3],q[2][3])}else{b=this.nifti.convertNiftiQFormToNiftiSForm(this.nifti.quatern_b,this.nifti.quatern_c,this.nifti.quatern_d,this.nifti.qoffset_x,this.nifti.qoffset_y,this.nifti.qoffset_z,this.nifti.pixDims[1],this.nifti.pixDims[2],this.nifti.pixDims[3],this.nifti.pixDims[0]);c=this.nifti.convertNiftiSFormToNEMA(b);if(!papaya.volume.Orientation.isValidOrientationString(c)){c=papaya.volume.nifti.HeaderNIFTI.ORIENTATION_DEFAULT}l=c.substring(0,3).toUpperCase();d=c.substring(3);a=l.indexOf("X");i=l.indexOf("Y");n=l.indexOf("Z");h=(d.charAt(a)==="+");f=(d.charAt(i)==="+");e=(d.charAt(n)==="+");g=new Array(3);g[0]=((this.nifti.qoffset_x/this.nifti.pixDims[a+1]))*(h?-1:1);g[1]=((this.nifti.qoffset_y/this.nifti.pixDims[i+1]))*(f?-1:1);g[2]=((this.nifti.qoffset_z/this.nifti.pixDims[n+1]))*(e?-1:1);p.setCoordinate(g[0],g[1],g[2],true)}}else{if((this.nifti.sform_code>0)&&!o){if(this.sFormHasRotations()){k=numeric.inv(this.nifti.affine);p.setCoordinate(k[0][3],k[1][3],k[2][3])}else{c=this.nifti.convertNiftiSFormToNEMA(this.nifti.affine);if(!papaya.volume.Orientation.isValidOrientationString(c)){c=papaya.volume.nifti.HeaderNIFTI.ORIENTATION_DEFAULT}l=c.substring(0,3).toUpperCase();d=c.substring(3);a=l.indexOf("X");i=l.indexOf("Y");n=l.indexOf("Z");h=(d.charAt(a)==="+");f=(d.charAt(i)==="+");e=(d.charAt(n)==="+");g=new Array(3);g[0]=((this.nifti.affine[0][3]/this.nifti.pixDims[a+1]))*(h?-1:1);g[1]=((this.nifti.affine[1][3]/this.nifti.pixDims[i+1]))*(f?-1:1);g[2]=((this.nifti.affine[2][3]/this.nifti.pixDims[n+1]))*(e?-1:1);p.setCoordinate(g[0],g[1],g[2],true)}}}if(p.isAllZeros()){p.setCoordinate(this.nifti.dims[1]/2,this.nifti.dims[2]/2,this.nifti.dims[3]/2)}return p};papaya.volume.nifti.HeaderNIFTI.prototype.qFormHasRotations=function(){return papaya.volume.Transform.hasRotations(this.getQformMatCopy())};papaya.volume.nifti.HeaderNIFTI.prototype.sFormHasRotations=function(){return papaya.volume.Transform.hasRotations(this.getSformMatCopy())};papaya.volume.nifti.HeaderNIFTI.prototype.getImageRange=function(){var c=new papaya.volume.ImageRange(this.nifti.cal_min,this.nifti.cal_max),a=this.nifti.scl_slope,b=this.getImageDimensions();if(a===0){a=1}c.setGlobalDataScale(a,this.nifti.scl_inter,b.slices*b.timepoints);c.validateDataScale();return c};papaya.volume.nifti.HeaderNIFTI.prototype.hasError=function(){return false};papaya.volume.nifti.HeaderNIFTI.prototype.getImageDescription=function(){return new papaya.volume.ImageDescription(this.nifti.description)};papaya.volume.nifti.HeaderNIFTI.prototype.getOrientationCertainty=function(){var b,a;b=papaya.volume.Header.ORIENTATION_CERTAINTY_UNKNOWN;if((this.nifti.qform_code>0)||(this.nifti.sform_code>0)){b=papaya.volume.Header.ORIENTATION_CERTAINTY_LOW;a=this.getOrigin();if((a!==null)&&!a.isAllZeros()){b=papaya.volume.Header.ORIENTATION_CERTAINTY_HIGH}}return b};papaya.volume.nifti.HeaderNIFTI.prototype.getBestTransform=function(){if((this.nifti.qform_code>0)&&(this.nifti.qform_code>this.nifti.sform_code)&&this.qFormHasRotations()){return this.getQformMatCopy()}if((this.nifti.sform_code>0)&&(this.nifti.sform_code>=this.nifti.qform_code)&&this.sFormHasRotations()){return this.getSformMatCopy()}return null};papaya.volume.nifti.HeaderNIFTI.prototype.getBestTransformOrigin=function(){if((this.nifti.qform_code>0)&&(this.nifti.qform_code>this.nifti.sform_code)&&this.qFormHasRotations()){return this.getOrigin(true,false)}if((this.nifti.sform_code>0)&&(this.nifti.sform_code>=this.nifti.qform_code)&&this.sFormHasRotations()){return this.getOrigin(false,true)}return null};papaya.volume.nifti.HeaderNIFTI.prototype.toString=function(){var a=papaya.utilities.StringUtils.formatNumber,b="";if(this.isNIFTI2){b+=("<span style='color:#B5CBD3'>Datatype</span><span style='color:gray'> = </span>"+this.nifti.datatypeCode+" ("+this.nifti.getDatatypeCodeString(this.nifti.datatypeCode)+")<br />");b+=("<span style='color:#B5CBD3'>Bits Per Voxel</span><span style='color:gray'> = </span>"+this.nifti.numBitsPerVoxel+"<br />");b+=("<span style='color:#B5CBD3'>Image Dimensions</span> (1-8): "+this.nifti.dims[0]+", "+this.nifti.dims[1]+", "+this.nifti.dims[2]+", "+this.nifti.dims[3]+", "+this.nifti.dims[4]+", "+this.nifti.dims[5]+", "+this.nifti.dims[6]+", "+this.nifti.dims[7]+"<br />");b+=("<span style='color:#B5CBD3'>Intent Parameters</span> (1-3): "+this.nifti.intent_p1+", "+this.nifti.intent_p2+", "+this.nifti.intent_p3)+"<br />";b+=("<span style='color:#B5CBD3'>Voxel Dimensions</span> (1-8): "+a(this.nifti.pixDims[0])+", "+a(this.nifti.pixDims[1])+", "+a(this.nifti.pixDims[2])+", "+a(this.nifti.pixDims[3])+", "+a(this.nifti.pixDims[4])+", "+a(this.nifti.pixDims[5])+", "+a(this.nifti.pixDims[6])+", "+a(this.nifti.pixDims[7])+"<br />");b+=("<span style='color:#B5CBD3'>Image Offset</span><span style='color:gray'> = </span>"+this.nifti.vox_offset+"<br />");b+=("<span style='color:#B5CBD3'>Data Scale:  Slope</span><span style='color:gray'> = </span>"+this.nifti.scl_slope+"  <span style='color:#B5CBD3'>Intercept</span><span style='color:gray'> = </span>"+this.nifti.scl_inter+"<br />");b+=("<span style='color:#B5CBD3'>Display Range:  Max</span><span style='color:gray'> = </span>"+this.nifti.cal_max+"  <span style='color:#B5CBD3'>Min</span><span style='color:gray'> = </span>"+this.nifti.cal_min+"<br />");b+=("<span style='color:#B5CBD3'>Slice Duration</span><span style='color:gray'> = </span>"+this.nifti.slice_duration+"<br />");b+=("<span style='color:#B5CBD3'>Time Axis Shift</span><span style='color:gray'> = </span>"+this.nifti.toffset+"<br />");b+=("<span style='color:#B5CBD3'>Slice Start</span><span style='color:gray'> = </span>"+this.nifti.slice_start+"<br />");b+=("<span style='color:#B5CBD3'>Slice End</span><span style='color:gray'> = </span>"+this.nifti.slice_end+"<br />");b+=("<span style='color:#B5CBD3'>Description</span>: \""+filterXSS(this.nifti.description)+'"<br />');b+=("<span style='color:#B5CBD3'>Auxiliary File</span>: \""+filterXSS(this.nifti.aux_file)+'"<br />');b+=("<span style='color:#B5CBD3'>Q-Form Code</span><span style='color:gray'> = </span>"+this.nifti.qform_code+" ("+this.nifti.getTransformCodeString(this.nifti.qform_code)+")<br />");b+=("<span style='color:#B5CBD3'>S-Form Code</span><span style='color:gray'> = </span>"+this.nifti.sform_code+" ("+this.nifti.getTransformCodeString(this.nifti.sform_code)+")<br />");b+=("<span style='color:#B5CBD3'>Quaternion Parameters</span>:  <span style='color:#B5CBD3'>b</span> <span style='color:gray'>=</span> "+a(this.nifti.quatern_b)+"  <span style='color:#B5CBD3'>c</span> <span style='color:gray'>=</span> "+a(this.nifti.quatern_c)+"  <span style='color:#B5CBD3'>d</span> <span style='color:gray'>=</span> "+a(this.nifti.quatern_d)+"<br />");b+=("<span style='color:#B5CBD3'>Quaternion Offsets</span>:  <span style='color:#B5CBD3'>x</span> <span style='color:gray'>=</span> "+this.nifti.qoffset_x+"  <span style='color:#B5CBD3'>y</span> <span style='color:gray'>=</span> "+this.nifti.qoffset_y+"  <span style='color:#B5CBD3'>z</span> <span style='color:gray'>=</span> "+this.nifti.qoffset_z+"<br />");b+=("<span style='color:#B5CBD3'>S-Form Parameters X</span>: "+a(this.nifti.affine[0][0])+", "+a(this.nifti.affine[0][1])+", "+a(this.nifti.affine[0][2])+", "+a(this.nifti.affine[0][3])+"<br />");b+=("<span style='color:#B5CBD3'>S-Form Parameters Y</span>: "+a(this.nifti.affine[1][0])+", "+a(this.nifti.affine[1][1])+", "+a(this.nifti.affine[1][2])+", "+a(this.nifti.affine[1][3])+"<br />");b+=("<span style='color:#B5CBD3'>S-Form Parameters Z</span>: "+a(this.nifti.affine[2][0])+", "+a(this.nifti.affine[2][1])+", "+a(this.nifti.affine[2][2])+", "+a(this.nifti.affine[2][3])+"<br />");b+=("<span style='color:#B5CBD3'>Slice Code</span><span style='color:gray'> = </span>"+this.nifti.slice_code+"<br />");b+=("<span style='color:#B5CBD3'>Units Code</span><span style='color:gray'> = </span>"+this.nifti.xyzt_units+" ("+this.nifti.getUnitsCodeString(nifti.NIFTI1.SPATIAL_UNITS_MASK&this.nifti.xyzt_units)+", "+this.nifti.getUnitsCodeString(nifti.NIFTI1.TEMPORAL_UNITS_MASK&this.nifti.xyzt_units)+")<br />");b+=("<span style='color:#B5CBD3'>Intent Code </span><span style='color:gray'> = </span>"+this.nifti.intent_code+"<br />");b+=("<span style='color:#B5CBD3'>Intent Name</span>: \""+filterXSS(this.nifti.intent_name)+'"<br />');b+=("<span style='color:#B5CBD3'>Dim Info </span><span style='color:gray'> = </span>"+this.nifti.dim_info+"<br />")}else{b+=("<span style='color:#B5CBD3'>Dim Info</span><span style='color:gray'> = </span>"+this.nifti.dim_info+"<br />");b+=("<span style='color:#B5CBD3'>Image Dimensions</span> (1-8): "+this.nifti.dims[0]+", "+this.nifti.dims[1]+", "+this.nifti.dims[2]+", "+this.nifti.dims[3]+", "+this.nifti.dims[4]+", "+this.nifti.dims[5]+", "+this.nifti.dims[6]+", "+this.nifti.dims[7]+"<br />");b+=("<span style='color:#B5CBD3'>Intent Parameters</span> (1-3): "+this.nifti.intent_p1+", "+this.nifti.intent_p2+", "+this.nifti.intent_p3)+"<br />";b+=("<span style='color:#B5CBD3'>Intent Code</span><span style='color:gray'> = </span>"+this.nifti.intent_code+"<br />");b+=("<span style='color:#B5CBD3'>Datatype</span><span style='color:gray'> = </span>"+this.nifti.datatypeCode+" ("+this.nifti.getDatatypeCodeString(this.nifti.datatypeCode)+")<br />");b+=("<span style='color:#B5CBD3'>Bits Per Voxel</span><span style='color:gray'> = </span>"+this.nifti.numBitsPerVoxel+"<br />");b+=("<span style='color:#B5CBD3'>Slice Start</span><span style='color:gray'> = </span>"+this.nifti.slice_start+"<br />");b+=("<span style='color:#B5CBD3'>Voxel Dimensions</span> (1-8): "+a(this.nifti.pixDims[0])+", "+a(this.nifti.pixDims[1])+", "+a(this.nifti.pixDims[2])+", "+a(this.nifti.pixDims[3])+", "+a(this.nifti.pixDims[4])+", "+a(this.nifti.pixDims[5])+", "+a(this.nifti.pixDims[6])+", "+a(this.nifti.pixDims[7])+"<br />");b+=("<span style='color:#B5CBD3'>Image Offset</span><span style='color:gray'> = </span>"+this.nifti.vox_offset+"<br />");b+=("<span style='color:#B5CBD3'>Data Scale</span>:  <span style='color:#B5CBD3'>Slope</span> = "+this.nifti.scl_slope+"  <span style='color:#B5CBD3'>Intercept</span> = "+this.nifti.scl_inter+"<br />");b+=("<span style='color:#B5CBD3'>Slice End</span><span style='color:gray'> = </span>"+this.nifti.slice_end+"<br />");b+=("<span style='color:#B5CBD3'>Slice Code</span><span style='color:gray'> = </span>"+this.nifti.slice_code+"<br />");b+=("<span style='color:#B5CBD3'>Units Code</span><span style='color:gray'> = </span>"+this.nifti.xyzt_units+" ("+this.nifti.getUnitsCodeString(nifti.NIFTI1.SPATIAL_UNITS_MASK&this.nifti.xyzt_units)+", "+this.nifti.getUnitsCodeString(nifti.NIFTI1.TEMPORAL_UNITS_MASK&this.nifti.xyzt_units)+")<br />");b+=("<span style='color:#B5CBD3'>Display Range</span>:  <span style='color:#B5CBD3'>Max</span><span style='color:gray'> = </span>"+this.nifti.cal_max+"  <span style='color:#B5CBD3'>Min</span><span style='color:gray'> = </span>"+this.nifti.cal_min+"<br />");b+=("<span style='color:#B5CBD3'>Slice Duration</span><span style='color:gray'> = </span>"+this.nifti.slice_duration+"<br />");b+=("<span style='color:#B5CBD3'>Time Axis Shift</span><span style='color:gray'> = </span>"+this.nifti.toffset+"<br />");b+=("<span style='color:#B5CBD3'>Description</span>: \""+filterXSS(this.nifti.description)+'"<br />');b+=("<span style='color:#B5CBD3'>Auxiliary File</span>: \""+filterXSS(this.nifti.aux_file)+'"<br />');b+=("<span style='color:#B5CBD3'>Q-Form Code</span><span style='color:gray'> = </span>"+this.nifti.qform_code+" ("+this.nifti.getTransformCodeString(this.nifti.qform_code)+")<br />");b+=("<span style='color:#B5CBD3'>S-Form Code</span><span style='color:gray'> = </span>"+this.nifti.sform_code+" ("+this.nifti.getTransformCodeString(this.nifti.sform_code)+")<br />");b+=("<span style='color:#B5CBD3'>Quaternion Parameters</span>:  <span style='color:#B5CBD3'>b</span><span style='color:gray'> = </span>"+a(this.nifti.quatern_b)+"  <span style='color:#B5CBD3'>c</span><span style='color:gray'> = </span>"+a(this.nifti.quatern_c)+"  <span style='color:#B5CBD3'>d</span><span style='color:gray'> = </span>"+a(this.nifti.quatern_d)+"<br />");b+=("<span style='color:#B5CBD3'>Quaternion Offsets</span>:  <span style='color:#B5CBD3'>x</span><span style='color:gray'> = </span>"+this.nifti.qoffset_x+"  <span style='color:#B5CBD3'>y</span><span style='color:gray'> = </span>"+this.nifti.qoffset_y+"  <span style='color:#B5CBD3'>z</span><span style='color:gray'> = </span>"+this.nifti.qoffset_z+"<br />");b+=("<span style='color:#B5CBD3'>S-Form Parameters X</span>: "+a(this.nifti.affine[0][0])+", "+a(this.nifti.affine[0][1])+", "+a(this.nifti.affine[0][2])+", "+a(this.nifti.affine[0][3])+"<br />");b+=("<span style='color:#B5CBD3'>S-Form Parameters Y</span>: "+a(this.nifti.affine[1][0])+", "+a(this.nifti.affine[1][1])+", "+a(this.nifti.affine[1][2])+", "+a(this.nifti.affine[1][3])+"<br />");b+=("<span style='color:#B5CBD3'>S-Form Parameters Z</span>: "+a(this.nifti.affine[2][0])+", "+a(this.nifti.affine[2][1])+", "+a(this.nifti.affine[2][2])+", "+a(this.nifti.affine[2][3])+"<br />");b+=("<span style='color:#B5CBD3'>Intent Name</span>: \""+filterXSS(this.nifti.intent_name)+'"<br />')}return b};"use strict";var papaya=papaya||{};papaya.volume=papaya.volume||{};papaya.volume.dicom=papaya.volume.dicom||{};papaya.volume.dicom.HeaderDICOM=papaya.volume.dicom.HeaderDICOM||function(){this.series=null;this.seriesMap=[];this.error=null;this.onFinishedHeaderRead=null;this.dialogHandler=null};papaya.volume.dicom.HeaderDICOM.ORIENTATION_DEFAULT="XYZ+--";papaya.volume.dicom.HeaderDICOM.SUPPORTED_TRANSFER_SYNTAXES=["1.2.840.10008.1.2","1.2.840.10008.1.2.1","1.2.840.10008.1.2.2","1.2.840.10008.1.2.1.99","1.2.840.10008.1.2.4.50","1.2.840.10008.1.2.4.51","1.2.840.10008.1.2.4.57","1.2.840.10008.1.2.4.70","1.2.840.10008.1.2.4.80","1.2.840.10008.1.2.4.81","1.2.840.10008.1.2.4.90","1.2.840.10008.1.2.4.91","1.2.840.10008.1.2.5"];papaya.volume.dicom.HeaderDICOM.isThisFormat=function(a,f){var c,e,g,d,h=0,b,i;if(a.indexOf(".dcm")!==-1){return true}c=new DataView(f[0]);e=daikon.Parser.MAGIC_COOKIE_OFFSET;g=daikon.Parser.MAGIC_COOKIE.length;for(d=0;d<g;d+=1){if(c.getUint8(e+d)===daikon.Parser.MAGIC_COOKIE[d]){h+=1}}if(h===4){return true}b=new daikon.Parser();i=b.testForValidTag(c);return((i!==null)&&(i.group<=8)&&!b.hasError())};papaya.volume.dicom.HeaderDICOM.prototype.setSeries=function(a,c){var b;for(b=0;b<Object.keys(this.seriesMap).length;b+=1){if(Object.keys(this.seriesMap)[b].indexOf(c)!==-1){this.series=this.seriesMap[Object.keys(this.seriesMap)[b]];break}}};papaya.volume.dicom.HeaderDICOM.prototype.getDataScaleSlope=function(a,b){if(a){return(b.getDataScaleElscint()||1)}return(b.getDataScaleSlope()||1)};papaya.volume.dicom.HeaderDICOM.prototype.getDataScaleIntercept=function(a,b){if(a){return 0}return(b.getDataScaleIntercept()||0)};papaya.volume.dicom.HeaderDICOM.prototype.finishedHeaderRead=function(){var a,b,c;if(this.error){this.onFinishedHeaderRead()}else{if(Object.keys(this.seriesMap).length>1){this.series=this.seriesMap[Object.keys(this.seriesMap)[0]];b=[];for(c=0;c<Object.keys(this.seriesMap).length;c+=1){b.push(this.seriesMap[Object.keys(this.seriesMap)[c]])}a={items:[{label:"Select:",field:"series",options:b}]};this.dialogHandler.showDialog("Select DICOM Series",a,this,papaya.utilities.ObjectUtils.bind(this,this.setSeries),papaya.utilities.ObjectUtils.bind(this,this.finishedSeriesSelection))}else{this.series=this.seriesMap[Object.keys(this.seriesMap)[0]];if(this.series.images.length>0){this.series.buildSeries();if(!this.isTransferSyntaxSupported()){this.error=new Error("This transfer syntax is currently not supported!")}}else{this.error=new Error("No images found!")}this.onFinishedHeaderRead()}}};papaya.volume.dicom.HeaderDICOM.prototype.isTransferSyntaxSupported=function(){var a=this.series.images[0].getTransferSyntax();return(papaya.utilities.StringUtils.isStringBlank(a)||papaya.utilities.ArrayUtils.contains(papaya.volume.dicom.HeaderDICOM.SUPPORTED_TRANSFER_SYNTAXES,a))};papaya.volume.dicom.HeaderDICOM.prototype.finishedSeriesSelection=function(){if(this.series.images.length>0){this.series.buildSeries();if(!this.isTransferSyntaxSupported()){this.error=new Error("This transfer syntax is currently not supported!")}}else{this.error=new Error("No images found!")}this.seriesMap=null;this.onFinishedHeaderRead()};papaya.volume.dicom.HeaderDICOM.prototype.readHeaderData=function(c,a,b,d){this.onFinishedHeaderRead=d;this.dialogHandler=b;this.readNextHeaderData(c,0,a,papaya.utilities.ObjectUtils.bind(this,this.finishedHeaderRead))};papaya.volume.dicom.HeaderDICOM.prototype.readNextHeaderData=function(d,a,c,f){var e,b;if(a>=d.length){c.drawProgress(1,"Reading DICOM Headers");f()}else{e=daikon.Series.parseImage(new DataView(d[a]));if(e===null){this.error=daikon.Series.parserError}else{if(e.hasPixelData()){b=this.findSeries(e.getSeriesId());if(!b){b=new daikon.Series();this.seriesMap[e.getSeriesId()]=b}b.addImage(e)}else{this.error=new Error("No pixel data found!")}}if(this.error){f()}else{c.drawProgress(a/d.length,"Reading DICOM Headers");setTimeout(function(){this.readNextHeaderData(d,a+1,c,f)}.bind(this),0)}}};papaya.volume.dicom.HeaderDICOM.prototype.getName=function(){var a=this.series.getName();if(a){return a}else{return null}};papaya.volume.dicom.HeaderDICOM.prototype.getSeriesLabels=function(){return null};papaya.volume.dicom.HeaderDICOM.prototype.findSeries=function(a){if(Object.keys(this.seriesMap).length===0){return null}else{return this.seriesMap[a]}};papaya.volume.dicom.HeaderDICOM.prototype.readImageData=function(a,b){this.series.concatenateImageData(a,b)};papaya.volume.dicom.HeaderDICOM.prototype.getImageDimensions=function(){var b,d,c,a;if(this.series.isMosaic){d=this.series.images[0].getMosaicCols()*this.series.images[0].getMosaicRows();b=new papaya.volume.ImageDimensions(parseInt(this.series.images[0].getCols()/this.series.images[0].getMosaicCols()),parseInt(this.series.images[0].getRows()/this.series.images[0].getMosaicRows()),d,this.series.images.length)}else{if(this.series.isMultiFrameVolume){b=new papaya.volume.ImageDimensions(this.series.images[0].getCols(),this.series.images[0].getRows(),this.series.numberOfFrames,1)}else{if(this.series.isMultiFrameTimeseries){b=new papaya.volume.ImageDimensions(this.series.images[0].getCols(),this.series.images[0].getRows(),this.series.numberOfFramesInFile,this.series.numberOfFrames)}else{if(this.series.isImplicitTimeseries){b=new papaya.volume.ImageDimensions(this.series.images[0].getCols(),this.series.images[0].getRows(),parseInt(this.series.images.length/this.series.numberOfFrames),this.series.numberOfFrames)}else{b=new papaya.volume.ImageDimensions(this.series.images[0].getCols(),this.series.images[0].getRows(),this.series.images.length,1)}}}}a=parseInt((b.getNumVoxelsSeries()*parseInt(this.series.images[0].getBitsAllocated()/8))/this.series.images.length);for(c=0;c<this.series.images.length;c+=1){b.dataOffsets[c]=this.series.images[c].getPixelData().offsetValue;b.dataLengths[c]=a}return b};papaya.volume.dicom.HeaderDICOM.prototype.getVoxelDimensions=function(){var d,b,c,a;a=(this.series.images[0].getPixelSpacing()||[0,0]);b=Math.max(this.series.images[0].getSliceGap(),this.series.images[0].getSliceThickness());if(daikon.Series.useExplicitSpacing){b=daikon.Series.useExplicitSpacing}if(this.series.isMosaic||this.series.isMultiFrame){d=new papaya.volume.VoxelDimensions(a[1],a[0],b,this.series.images[0].getTR()/1000)}else{if((this.series.images.length===1)||daikon.Series.useExplicitOrdering){d=new papaya.volume.VoxelDimensions(a[1],a[0],b,this.series.images[0].getTR()/1000)}else{c=Math.abs(this.series.images[0].getSliceLocation()-this.series.images[1].getSliceLocation());if(c===0){c=Math.max(this.series.images[0].getSliceGap(),this.series.images[0].getSliceThickness())}d=new papaya.volume.VoxelDimensions(a[1],a[0],c,this.series.images[0].getTR()/1000)}}if(!d.isValid()){if(d.rowSize===0){d.rowSize=1}if(d.colSize===0){d.colSize=1}if(d.sliceSize===0){d.sliceSize=1}}d.spatialUnit=papaya.volume.VoxelDimensions.UNITS_MM;d.temporalUnit=papaya.volume.VoxelDimensions.UNITS_SEC;return d};papaya.volume.dicom.HeaderDICOM.prototype.getImageType=function(){var b,a,c;b=this.series.images[0].getDataType();if(b===daikon.Image.BYTE_TYPE_INTEGER){a=papaya.volume.ImageType.DATATYPE_INTEGER_SIGNED}else{if(b===daikon.Image.BYTE_TYPE_INTEGER_UNSIGNED){a=papaya.volume.ImageType.DATATYPE_INTEGER_UNSIGNED}else{if(b===daikon.Image.BYTE_TYPE_FLOAT){a=papaya.volume.ImageType.DATATYPE_FLOAT}else{if(b===daikon.Image.BYTE_TYPE_RGB){a=papaya.volume.ImageType.DATATYPE_RGB}else{a=papaya.volume.ImageType.DATATYPE_UNKNOWN}}}}c=new papaya.volume.ImageType(a,parseInt(this.series.images[0].getBitsAllocated()/8),this.series.images[0].littleEndian,false);c.rgbBySample=(this.series.images[0].getPlanarConfig()===1);return c};papaya.volume.dicom.HeaderDICOM.prototype.getImageRange=function(){var f,m,j,r,s,u,o,x,t,v,p,n,q,d,e,l=[],c=[],i,w,a,h,g,b=[],k=[];m=0;j=0;for(u=0;u<this.series.images.length;u+=1){o=this.series.images[u];s=(o.getImageMax()*this.getDataScaleSlope(this.series.isElscint,o))+(o.getDataScaleIntercept()||0);r=(o.getImageMin()*this.getDataScaleSlope(this.series.isElscint,o))+(o.getDataScaleIntercept()||0);if(u===0){m=s;j=r}else{if(s>m){m=s}if(r<j){j=r}}}x=0;t=0;if(this.series.isElscint){for(u=0;u<this.series.images.length;u+=1){o=this.series.images[u];p=o.getWindowWidth()*o.getDataScaleElscint();v=o.getWindowCenter()*o.getDataScaleElscint();if(u===0){x=p;t=v}else{if(t<v){x=p;t=v}}}}else{for(u=0;u<this.series.images.length;u+=1){o=this.series.images[u];p=o.getWindowWidth();v=o.getWindowCenter();if(u===0){x=p;t=v}else{if(t<v){x=p;t=v}}}}f=new papaya.volume.ImageRange(j,m);f.displayMin=(t-(x/2));f.displayMax=(t+(x/2));n=this.getImageDimensions();if(this.series.isMosaic){d=n.slices;e=d*this.series.images.length;for(u=0;u<e;u+=1){o=this.series.images[parseInt(u/d)];l[u]=this.getDataScaleSlope(this.series.isElscint,o);c[u]=this.getDataScaleIntercept(this.series.isElscint,o)}f.dataScaleSlopes=l;f.dataScaleIntercepts=c}else{if(this.series.isMultiFrame){i=n.slices*n.timepoints;w=[];a=[];h=parseInt(i/this.series.images.length);for(u=0;u<this.series.images.length;u+=1){for(q=0;q<h;q+=1){o=this.series.images[u];w[(u*h)+q]=this.getDataScaleSlope(this.series.isElscint,o);a[(u*h)+q]=this.getDataScaleIntercept(this.series.isElscint,o)}}f.dataScaleSlopes=w;f.dataScaleIntercepts=a}else{if(this.series.isImplicitTimeseries){g=n.slices*n.timepoints;if(this.series.images.length!==g){f.setGlobalDataScale(this.getDataScaleSlope(this.series.isElscint,this.series.images[0]),this.getDataScaleIntercept(this.series.isElscint,this.series.images[0]),this.series.numberOfFrames)}else{for(u=0;u<this.series.images.length;u+=1){o=this.series.images[u];b[u]=this.getDataScaleSlope(this.series.isElscint,o);k[u]=this.getDataScaleIntercept(this.series.isElscint,o)}f.dataScaleSlopes=b;f.dataScaleIntercepts=k}}else{for(u=0;u<this.series.images.length;u+=1){o=this.series.images[u];b[u]=this.getDataScaleSlope(this.series.isElscint,o);k[u]=this.getDataScaleIntercept(this.series.isElscint,o)}f.dataScaleSlopes=b;f.dataScaleIntercepts=k}}}f.validateDataScale();return f};papaya.volume.dicom.HeaderDICOM.prototype.getOrientation=function(){var a=this.series.images[0].getOrientation();if(a===null){a=papaya.volume.dicom.HeaderDICOM.ORIENTATION_DEFAULT}a=a.substring(0,5)+(this.series.sliceSense?"+":"-");return new papaya.volume.Orientation(a)};papaya.volume.dicom.HeaderDICOM.prototype.getOrientationCertainty=function(){var a=this.series.images[0].getOrientation();if(a===null){return papaya.volume.Header.ORIENTATION_CERTAINTY_UNKNOWN}else{if(this.series.isMosaic||this.series.isMultiFrameVolume){return papaya.volume.Header.ORIENTATION_CERTAINTY_LOW}else{return papaya.volume.Header.ORIENTATION_CERTAINTY_HIGH}}};papaya.volume.dicom.HeaderDICOM.prototype.getOrigin=function(){var a=this.getBestTransform();if(a){var b=numeric.inv(a);return new papaya.core.Coordinate(b[0][3],b[1][3],b[2][3])}else{return new papaya.core.Coordinate(0,0,0)}};papaya.volume.dicom.HeaderDICOM.prototype.hasError=function(){return(this.error!==null)};papaya.volume.dicom.HeaderDICOM.prototype.getImageDescription=function(){var f,a,e,b,d,c="";f=this.series.images[0].getPatientName();a=this.series.images[0].getPatientID();e=this.series.images[0].getStudyTime();b=this.series.images[0].getStudyDate();d=this.series.images[0].getImageDescription();if(f){c+=(" "+f)}if(a){c+=(" "+a)}if(e){c+=(" "+e)}if(b){c+=(" "+b)}if(d){c+=(" "+d)}return new papaya.volume.ImageDescription(c.trim())};papaya.volume.dicom.HeaderDICOM.prototype.getBestTransform=function(){var d=this.series.images[0].getImageDirections(),a=null;if(d){var g=this.getVoxelDimensions();var f=this.series.images[0].getImagePosition();var e=[d[0],d[1],d[2]];var c=[d[3],d[4],d[5]];var b=[e[1]*c[2]-e[2]*c[1],e[2]*c[0]-e[0]*c[2],e[0]*c[1]-e[1]*c[0]];a=[[e[0]*g.colSize*-1,c[0]*g.rowSize*-1,b[0]*g.sliceSize*-1,-1*f[0]],[e[1]*g.colSize*-1,c[1]*g.rowSize*-1,b[1]*g.sliceSize*-1,-1*f[1]],[e[2]*g.colSize,c[2]*g.rowSize,b[2]*g.sliceSize,f[2]],[0,0,0,1]]}return a};papaya.volume.dicom.HeaderDICOM.prototype.getBestTransformOrigin=function(){return this.getOrigin()};papaya.volume.dicom.HeaderDICOM.prototype.toString=function(){return this.series.images[0].toString()};"use strict";var papaya=papaya||{};papaya.volume=papaya.volume||{};papaya.volume.Orientation=papaya.volume.Orientation||function(a){this.orientation=a;this.orientMat=null;this.xIncrement=-1;this.yIncrement=-1;this.zIncrement=-1};papaya.volume.Orientation.DEFAULT="XYZ+--";papaya.volume.Orientation.isValidOrientationString=function(c){var a,b=true;if(c===null||(c.length!==6)){b=false}a=c.toUpperCase().indexOf("X");if(a===-1||a>2||(c.toUpperCase().lastIndexOf("X")!==a)){b=false}a=c.toUpperCase().indexOf("Y");if(a===-1||a>2||(c.toUpperCase().lastIndexOf("Y")!==a)){b=false}a=c.toUpperCase().indexOf("Z");if(a===-1||a>2||(c.toUpperCase().lastIndexOf("Z")!==a)){b=false}if((c.charAt(3)!=="+")&&(c.charAt(3)!=="-")){b=false}if((c.charAt(4)!=="+")&&(c.charAt(4)!=="-")){b=false}if((c.charAt(5)!=="+")&&(c.charAt(5)!=="-")){b=false}return b};papaya.volume.Orientation.prototype.convertIndexToOffsetNative=function(c,b,a){return(c*this.xIncrement)+(b*this.yIncrement)+(a*this.zIncrement)};papaya.volume.Orientation.prototype.convertIndexToOffset=function(e,c,a){var d,b,f;d=papayaFloorFast((e*this.orientMat[0][0])+(c*this.orientMat[0][1])+(a*this.orientMat[0][2])+(this.orientMat[0][3]));b=papayaFloorFast((e*this.orientMat[1][0])+(c*this.orientMat[1][1])+(a*this.orientMat[1][2])+(this.orientMat[1][3]));f=papayaFloorFast((e*this.orientMat[2][0])+(c*this.orientMat[2][1])+(a*this.orientMat[2][2])+(this.orientMat[2][3]));return(d*this.xIncrement)+(b*this.yIncrement)+(f*this.zIncrement)};papaya.volume.Orientation.prototype.convertCoordinate=function(b,a){a.x=papayaRoundFast((b.x*this.orientMat[0][0])+(b.y*this.orientMat[0][1])+(b.z*this.orientMat[0][2])+(this.orientMat[0][3]));a.y=papayaRoundFast((b.x*this.orientMat[1][0])+(b.y*this.orientMat[1][1])+(b.z*this.orientMat[1][2])+(this.orientMat[1][3]));a.z=papayaRoundFast((b.x*this.orientMat[2][0])+(b.y*this.orientMat[2][1])+(b.z*this.orientMat[2][2])+(this.orientMat[2][3]));return a};papaya.volume.Orientation.prototype.createInfo=function(k,g){var n,e,m,r,l,q,i,b,p,h,d,j,o,c,a,f;h=k.cols;d=k.rows;j=k.slices;o=k.getNumVoxelsSlice();c=g.colSize;a=g.rowSize;f=g.sliceSize;i=(this.orientation.charAt(3)==="+");b=(this.orientation.charAt(4)==="+");p=(this.orientation.charAt(5)==="+");if(this.orientation.toUpperCase().indexOf("XYZ")!==-1){k.xDim=h;k.yDim=d;k.zDim=j;g.xSize=c;g.ySize=a;g.zSize=f;this.xIncrement=1;this.yIncrement=h;this.zIncrement=o;if(i){n=1;r=0}else{n=-1;r=h-1}if(b){e=-1;l=d-1}else{e=1;l=0}if(p){m=-1;q=j-1}else{m=1;q=0}}else{if(this.orientation.toUpperCase().indexOf("XZY")!==-1){k.xDim=h;k.yDim=j;k.zDim=d;g.xSize=c;g.ySize=f;g.zSize=a;this.xIncrement=1;this.yIncrement=o;this.zIncrement=h;if(i){n=1;r=0}else{n=-1;r=h-1}if(b){m=-1;q=d-1}else{m=1;q=0}if(p){e=-1;l=j-1}else{e=1;l=0}}else{if(this.orientation.toUpperCase().indexOf("YXZ")!==-1){k.xDim=d;k.yDim=h;k.zDim=j;g.xSize=a;g.ySize=c;g.zSize=f;this.xIncrement=h;this.yIncrement=1;this.zIncrement=o;if(i){e=-1;l=h-1}else{e=1;l=0}if(b){n=1;r=0}else{n=-1;r=d-1}if(p){m=-1;q=j-1}else{m=1;q=0}}else{if(this.orientation.toUpperCase().indexOf("YZX")!==-1){k.xDim=j;k.yDim=h;k.zDim=d;g.xSize=f;g.ySize=c;g.zSize=a;this.xIncrement=o;this.yIncrement=1;this.zIncrement=h;if(i){e=-1;l=h-1}else{e=1;l=0}if(b){m=-1;q=d-1}else{m=1;q=0}if(p){n=1;r=0}else{n=-1;r=j-1}}else{if(this.orientation.toUpperCase().indexOf("ZXY")!==-1){k.xDim=d;k.yDim=j;k.zDim=h;g.xSize=a;g.ySize=f;g.zSize=c;this.xIncrement=h;this.yIncrement=o;this.zIncrement=1;if(i){m=-1;q=h-1}else{m=1;q=0}if(b){n=1;r=0}else{n=-1;r=d-1}if(p){e=-1;l=j-1}else{e=1;l=0}}else{if(this.orientation.toUpperCase().indexOf("ZYX")!==-1){k.xDim=j;k.yDim=d;k.zDim=h;g.xSize=f;g.ySize=a;g.zSize=c;this.xIncrement=o;this.yIncrement=h;this.zIncrement=1;if(i){m=-1;q=h-1}else{m=1;q=0}if(b){e=-1;l=d-1}else{e=1;l=0}if(p){n=1;r=0}else{n=-1;r=j-1}}}}}}}this.orientMat=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];this.orientMat[0][0]=n;this.orientMat[0][1]=0;this.orientMat[0][2]=0;this.orientMat[0][3]=r;this.orientMat[1][0]=0;this.orientMat[1][1]=e;this.orientMat[1][2]=0;this.orientMat[1][3]=l;this.orientMat[2][0]=0;this.orientMat[2][1]=0;this.orientMat[2][2]=m;this.orientMat[2][3]=q;this.orientMat[3][0]=0;this.orientMat[3][1]=0;this.orientMat[3][2]=0;this.orientMat[3][3]=1};papaya.volume.Orientation.prototype.isValid=function(){return papaya.volume.Orientation.isValidOrientationString(this.orientation)};papaya.volume.Orientation.prototype.getOrientationDescription=function(){var a=this.orientation;return("Cols ("+a.charAt(0)+a.charAt(3)+"), Rows ("+a.charAt(1)+a.charAt(4)+"), Slices ("+a.charAt(2)+a.charAt(5)+")")};"use strict";var papaya=papaya||{};papaya.volume=papaya.volume||{};papaya.volume.Transform=papaya.volume.Transform||function(a,b){this.voxelValue=new papaya.volume.VoxelValue(b.imageData,b.header.imageType,b.header.imageDimensions,b.header.imageRange,b.header.orientation);this.voxelDimensions=b.header.voxelDimensions;this.imageDimensions=b.header.imageDimensions;this.volume=b;this.mat=papaya.volume.Transform.IDENTITY.clone();this.indexMat=papaya.volume.Transform.IDENTITY.clone();this.sizeMat=papaya.volume.Transform.IDENTITY.clone();this.sizeMatInverse=papaya.volume.Transform.IDENTITY.clone();this.mmMat=papaya.volume.Transform.IDENTITY.clone();this.worldMat=papaya.volume.Transform.IDENTITY.clone();this.worldMatNifti=null;this.originMat=papaya.volume.Transform.IDENTITY.clone();this.tempMat=papaya.volume.Transform.IDENTITY.clone();this.tempMat2=papaya.volume.Transform.IDENTITY.clone();this.orientMat=papaya.volume.Transform.IDENTITY.clone();this.centerMat=papaya.volume.Transform.IDENTITY.clone();this.centerMatInverse=papaya.volume.Transform.IDENTITY.clone();this.rotMatX=papaya.volume.Transform.IDENTITY.clone();this.rotMatY=papaya.volume.Transform.IDENTITY.clone();this.rotMatZ=papaya.volume.Transform.IDENTITY.clone();this.rotMat=papaya.volume.Transform.IDENTITY.clone();this.updateTransforms(a)};papaya.volume.Transform.IDENTITY=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];papaya.volume.Transform.EPSILON=0.00001;papaya.volume.Transform.printTransform=function(a){console.log(a[0][0]+" "+a[0][1]+" "+a[0][2]+" "+a[0][3]);console.log(a[1][0]+" "+a[1][1]+" "+a[1][2]+" "+a[1][3]);console.log(a[2][0]+" "+a[2][1]+" "+a[2][2]+" "+a[2][3]);console.log(a[3][0]+" "+a[3][1]+" "+a[3][2]+" "+a[3][3])};papaya.volume.Transform.decompose=function(C){var k,q,s,t,w,D,I,b,n,o,l,i,g,e,c,H,G,F,E,B,A,z,y,x,p,m,j,h,f,d,r,a,v,u;u=[];k=papaya.volume.Transform.validateNum(C[0][3]);q=papaya.volume.Transform.validateNum(C[1][3]);s=papaya.volume.Transform.validateNum(C[2][3]);t=papaya.volume.Transform.validateNum(Math.atan(C[2][1]/C[2][2]));w=0;if(t===0){w=papaya.volume.Transform.validateNum(Math.atan(-1*Math.cos(t)*(C[2][0]/C[2][2])))}else{w=papaya.volume.Transform.validateNum(Math.atan(-1*Math.sin(t)*(C[2][0]/C[2][1])))}if(w===0){w=papaya.volume.Transform.EPSILON}n=papaya.volume.Transform.validateScale(C[2][2]/(Math.cos(w)*Math.cos(t)));o=Math.cos(t);l=(Math.sin(t)*Math.sin(w))+(Math.sin(t)*(Math.cos(w)/Math.tan(w)));i=(C[1][0]*(Math.sin(t)/Math.tan(w)))+C[1][1];g=-1*Math.sin(t);e=(Math.cos(t)*Math.sin(w))+(Math.cos(t)*(Math.cos(w)/Math.tan(w)));c=(C[1][0]*(Math.cos(t)/Math.tan(w)))+C[1][2];D=papaya.volume.Transform.validateNum(Math.atan((((o*c)-(i*g))/((i*e)-(l*c)))));b=papaya.volume.Transform.validateScale((i/((Math.cos(D)*o)+(Math.sin(D)*l))));r=papaya.volume.Transform.validateNum((((b*Math.sin(D)*Math.cos(w))-C[1][0])/(n*Math.sin(w))));H=Math.cos(w)*Math.cos(D);G=b*Math.cos(w)*Math.sin(D);F=-1*n*Math.sin(w);E=(Math.sin(t)*Math.sin(w)*Math.cos(D))-(Math.cos(t)*Math.sin(D));B=(Math.sin(t)*Math.sin(w)*Math.sin(D))+(Math.cos(t)*Math.cos(D));A=n*Math.sin(t)*Math.cos(w);z=(Math.cos(t)*Math.sin(w)*Math.cos(D))+(Math.sin(t)*Math.sin(D));y=(Math.cos(t)*Math.sin(w)*Math.sin(D))-(Math.sin(t)*Math.cos(D));x=n*Math.cos(t)*Math.cos(w);p=(G*E)-(H*B);m=(F*E)-(H*A);j=(E*C[0][0])-(H*C[0][1]);h=(G*z)-(H*y);f=(F*z)-(H*x);d=(z*C[0][0])-(H*C[0][2]);a=papaya.volume.Transform.validateNum((((h*j)-(d*p))/((m*h)-(p*f))));v=papaya.volume.Transform.validateNum((((j*f)-(m*d))/((p*f)-(m*h))));I=papaya.volume.Transform.validateScale(((C[0][0]-(v*G)-(a*F))/H));if(w===papaya.volume.Transform.EPSILON){w=0}t*=(180/Math.PI);w*=(180/Math.PI);D*=(180/Math.PI);u[0]=papaya.volume.Transform.validateZero(k);u[1]=papaya.volume.Transform.validateZero(q);u[2]=papaya.volume.Transform.validateZero(s);u[3]=papaya.volume.Transform.validateZero(t);u[4]=papaya.volume.Transform.validateZero(w);u[5]=papaya.volume.Transform.validateZero(D);u[6]=I;u[7]=b;u[8]=n;u[9]=papaya.volume.Transform.validateZero(r);u[10]=papaya.volume.Transform.validateZero(a);u[11]=papaya.volume.Transform.validateZero(v);return u};papaya.volume.Transform.hasRotations=function(c){var b,f,e,d,a;if(c!==null){b=papaya.volume.Transform.decompose(c);f=0.01;e=(Math.abs(1-(Math.abs(b[3])/90))%1);d=(Math.abs(1-(Math.abs(b[4])/90))%1);a=(Math.abs(1-(Math.abs(b[5])/90))%1);return((e>f)||(d>f)||(a>f))}return false};papaya.volume.Transform.validateNum=function(a){if((a===Number.POSITIVE_INFINITY)||(a===Number.NEGATIVE_INFINITY)){return 0}if(isNaN(a)){return 0}if(a===0){return 0}return a};papaya.volume.Transform.validateScale=function(a){if((a===Number.POSITIVE_INFINITY)||(a===Number.NEGATIVE_INFINITY)){return 1}if(isNaN(a)){return 1}return a};papaya.volume.Transform.validateZero=function(a){if(Math.abs(a)<papaya.volume.Transform.EPSILON){return 0}return a};papaya.volume.Transform.prototype.updateSizeMat=function(){this.sizeMat[0][0]=this.voxelDimensions.xSize;this.sizeMat[1][1]=this.voxelDimensions.ySize;this.sizeMat[2][2]=this.voxelDimensions.zSize;this.sizeMat[3][3]=1;this.sizeMatInverse[0][0]=1/this.voxelDimensions.xSize;this.sizeMatInverse[1][1]=1/this.voxelDimensions.ySize;this.sizeMatInverse[2][2]=1/this.voxelDimensions.zSize;this.sizeMatInverse[3][3]=1};papaya.volume.Transform.prototype.updateOrientMat=function(){this.orientMat=this.volume.header.orientation.orientMat};papaya.volume.Transform.prototype.updateIndexTransform=function(){var b,a;for(b=0;b<4;b+=1){for(a=0;a<4;a+=1){this.indexMat[b][a]=(this.orientMat[b][0]*this.mat[0][a])+(this.orientMat[b][1]*this.mat[1][a])+(this.orientMat[b][2]*this.mat[2][a])+(this.orientMat[b][3]*this.mat[3][a])}}};papaya.volume.Transform.prototype.updateMmTransform=function(){var b,a;for(b=0;b<4;b+=1){for(a=0;a<4;a+=1){this.mmMat[b][a]=(this.indexMat[b][0]*this.sizeMatInverse[0][a])+(this.indexMat[b][1]*this.sizeMatInverse[1][a])+(this.indexMat[b][2]*this.sizeMatInverse[2][a])+(this.indexMat[b][3]*this.sizeMatInverse[3][a])}}};papaya.volume.Transform.prototype.updateOriginMat=function(){this.originMat[0][0]=1;this.originMat[1][1]=-1;this.originMat[2][2]=-1;this.originMat[3][3]=1;this.originMat[0][3]=this.volume.header.origin.x;this.originMat[1][3]=this.volume.header.origin.y;this.originMat[2][3]=this.volume.header.origin.z};papaya.volume.Transform.prototype.updateImageMat=function(h,g,f,e,c,b){var d,i,a,k,j;this.updateCenterMat(h,g,f);d=(e*Math.PI)/180;i=Math.cos(d);a=Math.sin(d);this.rotMatX[1][1]=i;this.rotMatX[1][2]=a;this.rotMatX[2][1]=-1*a;this.rotMatX[2][2]=i;d=(c*Math.PI)/180;i=Math.cos(d);a=Math.sin(d);this.rotMatY[0][0]=i;this.rotMatY[0][2]=-1*a;this.rotMatY[2][0]=a;this.rotMatY[2][2]=i;d=(b*Math.PI)/180;i=Math.cos(d);a=Math.sin(d);this.rotMatZ[0][0]=i;this.rotMatZ[0][1]=a;this.rotMatZ[1][0]=-1*a;this.rotMatZ[1][1]=i;for(k=0;k<4;k+=1){for(j=0;j<4;j+=1){this.tempMat[k][j]=(this.rotMatX[k][0]*this.rotMatY[0][j])+(this.rotMatX[k][1]*this.rotMatY[1][j])+(this.rotMatX[k][2]*this.rotMatY[2][j])+(this.rotMatX[k][3]*this.rotMatY[3][j])}}for(k=0;k<4;k+=1){for(j=0;j<4;j+=1){this.rotMat[k][j]=(this.tempMat[k][0]*this.rotMatZ[0][j])+(this.tempMat[k][1]*this.rotMatZ[1][j])+(this.tempMat[k][2]*this.rotMatZ[2][j])+(this.tempMat[k][3]*this.rotMatZ[3][j])}}for(k=0;k<4;k+=1){for(j=0;j<4;j+=1){this.tempMat[k][j]=(this.sizeMatInverse[k][0]*this.centerMatInverse[0][j])+(this.sizeMatInverse[k][1]*this.centerMatInverse[1][j])+(this.sizeMatInverse[k][2]*this.centerMatInverse[2][j])+(this.sizeMatInverse[k][3]*this.centerMatInverse[3][j])}}for(k=0;k<4;k+=1){for(j=0;j<4;j+=1){this.tempMat2[k][j]=(this.tempMat[k][0]*this.rotMat[0][j])+(this.tempMat[k][1]*this.rotMat[1][j])+(this.tempMat[k][2]*this.rotMat[2][j])+(this.tempMat[k][3]*this.rotMat[3][j])}}for(k=0;k<4;k+=1){for(j=0;j<4;j+=1){this.tempMat[k][j]=(this.tempMat2[k][0]*this.centerMat[0][j])+(this.tempMat2[k][1]*this.centerMat[1][j])+(this.tempMat2[k][2]*this.centerMat[2][j])+(this.tempMat2[k][3]*this.centerMat[3][j])}}for(k=0;k<4;k+=1){for(j=0;j<4;j+=1){this.tempMat2[k][j]=(this.tempMat[k][0]*this.sizeMat[0][j])+(this.tempMat[k][1]*this.sizeMat[1][j])+(this.tempMat[k][2]*this.sizeMat[2][j])+(this.tempMat[k][3]*this.sizeMat[3][j])}}this.volume.transform.updateTransforms(this.tempMat2)};papaya.volume.Transform.prototype.updateCenterMat=function(a,c,b){this.centerMat[0][0]=1;this.centerMat[1][1]=1;this.centerMat[2][2]=1;this.centerMat[3][3]=1;this.centerMat[0][3]=-1*a;this.centerMat[1][3]=-1*c;this.centerMat[2][3]=-1*b;this.centerMatInverse[0][0]=1;this.centerMatInverse[1][1]=1;this.centerMatInverse[2][2]=1;this.centerMatInverse[3][3]=1;this.centerMatInverse[0][3]=a;this.centerMatInverse[1][3]=c;this.centerMatInverse[2][3]=b};papaya.volume.Transform.prototype.updateWorldMat=function(){var d,a,c,b;if(this.worldMatNifti){c=[[-1,0,0,this.imageDimensions.xDim-1],[0,1,0,0],[0,0,1,0],[0,0,0,1]];b=papaya.volume.Transform.IDENTITY.clone();b[0][0]=-1;b[1][1]=-1;b[2][2]=-1;b[3][3]=1;b[0][3]=this.volume.header.origin.x;b[1][3]=this.volume.header.origin.y;b[2][3]=this.volume.header.origin.z;for(d=0;d<4;d+=1){for(a=0;a<4;a+=1){this.tempMat[d][a]=(this.sizeMat[d][0]*b[0][a])+(this.sizeMat[d][1]*b[1][a])+(this.sizeMat[d][2]*b[2][a])+(this.sizeMat[d][3]*b[3][a])}}for(d=0;d<4;d+=1){for(a=0;a<4;a+=1){this.tempMat2[d][a]=(this.tempMat[d][0]*c[0][a])+(this.tempMat[d][1]*c[1][a])+(this.tempMat[d][2]*c[2][a])+(this.tempMat[d][3]*c[3][a])}}for(d=0;d<4;d+=1){for(a=0;a<4;a+=1){this.tempMat[d][a]=(this.tempMat2[d][0]*this.mat[0][a])+(this.tempMat2[d][1]*this.mat[1][a])+(this.tempMat2[d][2]*this.mat[2][a])+(this.tempMat2[d][3]*this.mat[3][a])}}for(d=0;d<4;d+=1){for(a=0;a<4;a+=1){this.tempMat2[d][a]=(this.tempMat[d][0]*c[0][a])+(this.tempMat[d][1]*c[1][a])+(this.tempMat[d][2]*c[2][a])+(this.tempMat[d][3]*c[3][a])}}for(d=0;d<4;d+=1){for(a=0;a<4;a+=1){this.tempMat[d][a]=(this.tempMat2[d][0]*b[0][a])+(this.tempMat2[d][1]*b[1][a])+(this.tempMat2[d][2]*b[2][a])+(this.tempMat2[d][3]*b[3][a])}}for(d=0;d<4;d+=1){for(a=0;a<4;a+=1){this.tempMat2[d][a]=(this.tempMat[d][0]*this.sizeMatInverse[0][a])+(this.tempMat[d][1]*this.sizeMatInverse[1][a])+(this.tempMat[d][2]*this.sizeMatInverse[2][a])+(this.tempMat[d][3]*this.sizeMatInverse[3][a])}}for(d=0;d<4;d+=1){for(a=0;a<4;a+=1){this.worldMat[d][a]=(this.worldMatNifti[d][0]*this.tempMat2[0][a])+(this.worldMatNifti[d][1]*this.tempMat2[1][a])+(this.worldMatNifti[d][2]*this.tempMat2[2][a])+(this.worldMatNifti[d][3]*this.tempMat2[3][a])}}}else{for(d=0;d<4;d+=1){for(a=0;a<4;a+=1){this.tempMat[d][a]=(this.indexMat[d][0]*this.originMat[0][a])+(this.indexMat[d][1]*this.originMat[1][a])+(this.indexMat[d][2]*this.originMat[2][a])+(this.indexMat[d][3]*this.originMat[3][a])}}for(d=0;d<4;d+=1){for(a=0;a<4;a+=1){this.worldMat[d][a]=(this.tempMat[d][0]*this.sizeMatInverse[0][a])+(this.tempMat[d][1]*this.sizeMatInverse[1][a])+(this.tempMat[d][2]*this.sizeMatInverse[2][a])+(this.tempMat[d][3]*this.sizeMatInverse[3][a])}}}};papaya.volume.Transform.prototype.updateMat=function(c){var a,b;for(b=0;b<4;b+=1){for(a=0;a<4;a+=1){this.mat[b][a]=c[b][a]}}};papaya.volume.Transform.prototype.updateTransforms=function(a){this.updateMat(a);this.updateSizeMat();this.updateOrientMat();this.updateOriginMat();this.updateIndexTransform();this.updateMmTransform();this.updateWorldMat()};papaya.volume.Transform.prototype.getVoxelAtIndexNative=function(d,c,b,a,e){return this.voxelValue.getVoxelAtIndexNative(d,c,b,a,e)};papaya.volume.Transform.prototype.getVoxelAtIndex=function(d,c,b,a,e){return this.voxelValue.getVoxelAtIndex(d,c,b,a,e)};papaya.volume.Transform.prototype.getVoxelAtCoordinate=function(h,f,d,e,g){var c,b,a;c=((h*this.worldMat[0][0])+(f*this.worldMat[0][1])+(d*this.worldMat[0][2])+(this.worldMat[0][3]));b=((h*this.worldMat[1][0])+(f*this.worldMat[1][1])+(d*this.worldMat[1][2])+(this.worldMat[1][3]));a=((h*this.worldMat[2][0])+(f*this.worldMat[2][1])+(d*this.worldMat[2][2])+(this.worldMat[2][3]));return this.voxelValue.getVoxelAtIndexNative(c,b,a,e,g)};papaya.volume.Transform.prototype.getVoxelAtMM=function(h,f,d,e,g){var c,b,a;c=((h*this.mmMat[0][0])+(f*this.mmMat[0][1])+(d*this.mmMat[0][2])+(this.mmMat[0][3]));b=((h*this.mmMat[1][0])+(f*this.mmMat[1][1])+(d*this.mmMat[1][2])+(this.mmMat[1][3]));a=((h*this.mmMat[2][0])+(f*this.mmMat[2][1])+(d*this.mmMat[2][2])+(this.mmMat[2][3]));return this.voxelValue.getVoxelAtIndexNative(c,b,a,e,g)};"use strict";var papaya=papaya||{};papaya.volume=papaya.volume||{};papaya.volume.Volume=papaya.volume.Volume||function(a,b,c){this.progressMeter=a;this.dialogHandler=b;this.files=[];this.rawData=[];this.fileLength=0;this.urls=null;this.fileName=null;this.compressed=false;this.transform=null;this.numTimepoints=0;this.onFinishedRead=null;this.error=null;this.transform=null;this.isLoaded=false;this.numTimepoints=1;this.loaded=false;this.params=c;this.header=new papaya.volume.Header((this.params!==undefined)&&this.params.padAllImages);this.imageData=new papaya.volume.ImageData((this.params!==undefined)&&this.params.padAllImages)};papaya.volume.Volume.PROGRESS_LABEL_LOADING="Loading";papaya.volume.Volume.prototype.fileIsCompressed=function(b,e){var d,c,a;if(b&&b.indexOf(".gz")!==-1){return true}if(e){d=new DataView(e);c=d.getUint8(0);a=d.getUint8(1);if(c===GUNZIP_MAGIC_COOKIE1){return true}if(a===GUNZIP_MAGIC_COOKIE2){return true}}return false};papaya.volume.Volume.prototype.readFiles=function(a,b){this.files=a;this.fileName=a[0].name;this.onFinishedRead=b;this.compressed=this.fileIsCompressed(this.fileName);this.fileLength=this.files[0].size;this.readNextFile(this,0)};papaya.volume.Volume.prototype.readNextFile=function(d,c){var b;if(c<this.files.length){b=papaya.utilities.PlatformUtils.makeSlice(this.files[c],0,this.files[c].size);try{var a=new FileReader();a.onloadend=papaya.utilities.ObjectUtils.bind(d,function(f){if(f.target.readyState===FileReader.DONE){d.rawData[c]=f.target.result;setTimeout(function(){d.readNextFile(d,c+1)},0)}});a.onerror=papaya.utilities.ObjectUtils.bind(d,function(f){d.error=new Error("There was a problem reading that file:\n\n"+f.getMessage());d.finishedLoad()});a.readAsArrayBuffer(b)}catch(e){d.error=new Error("There was a problem reading that file:\n\n"+e.message);d.finishedLoad()}}else{setTimeout(function(){d.decompress(d)},0)}};papaya.volume.Volume.prototype.readURLs=function(b,c){var a=this;this.urls=b;this.fileName=b[0].substr(b[0].lastIndexOf("/")+1,b[0].length);this.onFinishedRead=c;this.compressed=this.fileIsCompressed(this.fileName);if(this.fileName.indexOf("?")!==-1){this.fileName=this.fileName.substr(0,this.fileName.indexOf("?"))}this.rawData=[];this.loadedFileCount=0;this.readEachURL(this).done(function(){setTimeout(function(){a.decompress(a)},0)}).fail(function(d,f,g){var e=f.message||"";if(typeof g!=="undefined"){e="Response status = "+g.status}d.error=new Error("There was a problem reading that file ("+d.fileName+"):\n\n"+e);d.finishedLoad()})};papaya.volume.Volume.prototype.loadURL=function(a,c,e){var b,f,g,h,d;f=jQuery.Deferred();b=typeof new XMLHttpRequest().responseType==="string";if(b){g=new XMLHttpRequest();g.open("GET",a,true);g.responseType="arraybuffer";g.onreadystatechange=function(){if(g.readyState===4){if(g.status===200){c.fileLength=c.rawData.byteLength;f.resolve(g.response)}else{f.reject(c,false,g)}}};g.onprogress=function(j){if(j.lengthComputable){f.notify(j.loaded,j.total)}};g.send(null)}else{c.error=new Error("There was a problem reading that file ("+c.fileName+"):\n\nResponse type is not supported.");c.finishedLoad()}var i=f.promise().done(function(j){c.loadedFileCount++;c.rawData[e]=j}).fail(function(j,k,l){console.error(j,k,l)}).progress(function(j,k){h=parseInt(100*(c.loadedFileCount)/c.urls.length,10);d=papaya.volume.Volume.PROGRESS_LABEL_LOADING+" image "+(c.loadedFileCount+1)+" of "+c.urls.length+" ("+h+"%)";c.progressMeter.drawProgress(j/k,d)});return i};papaya.volume.Volume.prototype.readEachURL=function(b){var d=[];for(var a=0;a<b.urls.length;a++){var c=b.loadURL(b.urls[a],b,a);d.push(c)}return $.when.apply($,d)};papaya.volume.Volume.prototype.readBinaryData=function(d,c){var a=null;try{if(d[0] instanceof ArrayBuffer){this.fileName="unknown"}else{this.fileName=d[0]}this.onFinishedRead=c;a=this;this.fileLength=0;a.readNextBinaryData(a,0,d)}catch(b){if(a){a.error=new Error("There was a problem reading that file:\n\n"+b.message);a.finishedLoad()}}};papaya.volume.Volume.prototype.readNextBinaryData=function(b,a,d){if(a<d.length){try{if(d[a] instanceof ArrayBuffer){b.rawData[a]=d[a]}else{b.rawData[a]=papaya.utilities.ObjectUtils.dereference(d[a])}b.compressed=this.fileIsCompressed(this.fileName,b.rawData[a]);setTimeout(function(){b.readNextBinaryData(b,a+1,d)},0)}catch(c){if(b){b.error=new Error("There was a problem reading that file:\n\n"+c.message);b.finishedLoad()}}}else{b.decompress(b)}};papaya.volume.Volume.prototype.readEncodedData=function(d,c){var a=null;try{this.fileName=d[0];this.onFinishedRead=c;a=this;this.fileLength=0;a.readNextEncodedData(a,0,d)}catch(b){if(a){a.error=new Error("There was a problem reading that file:\n\n"+b.message);a.finishedLoad()}}};papaya.volume.Volume.prototype.readNextEncodedData=function(b,a,e){if(a<e.length){try{var d=papaya.utilities.ObjectUtils.dereference(e[a]);if(d){b.rawData[a]=Base64Binary.decodeArrayBuffer(d)}else{this.fileName="unknown";b.rawData[a]=Base64Binary.decodeArrayBuffer(e[a])}b.compressed=this.fileIsCompressed(this.fileName,b.rawData[a]);setTimeout(function(){b.readNextEncodedData(b,a+1,e)},0)}catch(c){if(b){b.error=new Error("There was a problem reading that file:\n\n"+c.message);b.finishedLoad()}}}else{b.decompress(b)}};papaya.volume.Volume.prototype.getVoxelAtIndexNative=function(d,c,b,a,e){return this.transform.getVoxelAtIndexNative(d,c,b,0,e)};papaya.volume.Volume.prototype.getVoxelAtIndex=function(d,c,b,a,e){return this.transform.getVoxelAtIndex(d,c,b,a,e)};papaya.volume.Volume.prototype.getVoxelAtCoordinate=function(e,c,a,b,d){return this.transform.getVoxelAtCoordinate(e,c,a,b,d)};papaya.volume.Volume.prototype.getVoxelAtMM=function(e,c,a,b,d){return this.transform.getVoxelAtMM(e,c,a,b,d)};papaya.volume.Volume.prototype.hasError=function(){return(this.error!==null)};papaya.volume.Volume.prototype.getXDim=function(){return this.header.imageDimensions.xDim};papaya.volume.Volume.prototype.getYDim=function(){return this.header.imageDimensions.yDim};papaya.volume.Volume.prototype.getZDim=function(){return this.header.imageDimensions.zDim};papaya.volume.Volume.prototype.getXSize=function(){return this.header.voxelDimensions.xSize};papaya.volume.Volume.prototype.getYSize=function(){return this.header.voxelDimensions.ySize};papaya.volume.Volume.prototype.getZSize=function(){return this.header.voxelDimensions.zSize};papaya.volume.Volume.prototype.decompress=function(a){a.compressed=a.compressed||a.fileIsCompressed(a.fileName,a.rawData[0]);if(a.compressed){try{pako.inflate(new Uint8Array(a.rawData[0]),null,this.progressMeter,function(c){a.finishedDecompress(a,c.buffer)})}catch(b){console.log(b)}}else{setTimeout(function(){a.finishedReadData(a)},0)}};papaya.volume.Volume.prototype.finishedDecompress=function(a,b){a.rawData[0]=b;setTimeout(function(){a.finishedReadData(a)},0)};papaya.volume.Volume.prototype.finishedReadData=function(a){a.rawData=papaya.utilities.ArrayUtils.cleanArray(a.rawData);a.header.readHeaderData(a.fileName,a.rawData,this.progressMeter,this.dialogHandler,papaya.utilities.ObjectUtils.bind(this,this.finishedReadHeaderData))};papaya.volume.Volume.prototype.finishedReadHeaderData=function(){this.rawData=null;if(this.header.hasError()){this.error=this.header.error;console.error(this.error.stack);this.onFinishedRead(this);return}this.header.imageType.swapped=(this.header.imageType.littleEndian!==papaya.utilities.PlatformUtils.isPlatformLittleEndian());var a=this.header.getName();if(a){this.fileName=this.header.getName()}this.header.readImageData(this.progressMeter,papaya.utilities.ObjectUtils.bind(this,this.finishedReadImageData))};papaya.volume.Volume.prototype.finishedReadImageData=function(a){this.imageData.readFileData(this.header,a,papaya.utilities.ObjectUtils.bind(this,this.finishedLoad))};papaya.volume.Volume.prototype.finishedLoad=function(){if(!this.loaded){this.loaded=true;if(this.onFinishedRead){if(!this.hasError()){this.transform=new papaya.volume.Transform(papaya.volume.Transform.IDENTITY.clone(),this);this.numTimepoints=this.header.imageDimensions.timepoints||1;this.applyBestTransform()}else{console.log(this.error)}this.isLoaded=true;this.rawData=null;this.onFinishedRead(this)}}};papaya.volume.Volume.prototype.setOrigin=function(b){var a=this.header.orientation.convertCoordinate(b,new papaya.core.Coordinate(0,0,0));this.header.origin.setCoordinate(a.x,a.y,a.z)};papaya.volume.Volume.prototype.getOrigin=function(){return this.header.orientation.convertCoordinate(this.header.origin,new papaya.core.Coordinate(0,0,0))};papaya.volume.Volume.prototype.applyBestTransform=function(){var a=this.header.getBestTransform();if(a!==null){this.transform.worldMatNifti=numeric.inv(a);this.setOrigin(this.header.getBestTransformOrigin());this.transform.updateWorldMat()}};papaya.volume.Volume.prototype.isWorldSpaceOnly=function(){var b,a=false;if(this.header.fileFormat instanceof papaya.volume.nifti.HeaderNIFTI){b=this.header.fileFormat;if(b.nifti.qform_code>0){a|=!b.qFormHasRotations()}if(b.nifti.sform_code>0){a|=!b.sFormHasRotations()}return !a}return false};papaya.volume.Volume.prototype.getSeriesLabels=function(){return this.header.getSeriesLabels()};"use strict";var papaya=papaya||{};papaya.volume=papaya.volume||{};papaya.volume.VoxelDimensions=papaya.volume.VoxelDimensions||function(d,a,b,c){this.colSize=Math.abs(d);this.rowSize=Math.abs(a);this.sliceSize=Math.abs(b);this.xSize=0;this.ySize=0;this.zSize=0;this.flip=false;this.timeSize=c;this.spatialUnit=papaya.volume.VoxelDimensions.UNITS_UNKNOWN;this.temporalUnit=papaya.volume.VoxelDimensions.UNITS_UNKNOWN};papaya.volume.VoxelDimensions.UNITS_UNKNOWN=0;papaya.volume.VoxelDimensions.UNITS_METER=1;papaya.volume.VoxelDimensions.UNITS_MM=2;papaya.volume.VoxelDimensions.UNITS_MICRON=3;papaya.volume.VoxelDimensions.UNITS_SEC=8;papaya.volume.VoxelDimensions.UNITS_MSEC=16;papaya.volume.VoxelDimensions.UNITS_USEC=24;papaya.volume.VoxelDimensions.UNITS_HZ=32;papaya.volume.VoxelDimensions.UNITS_PPM=40;papaya.volume.VoxelDimensions.UNITS_RADS=48;papaya.volume.VoxelDimensions.UNIT_STRINGS=[];papaya.volume.VoxelDimensions.UNIT_STRINGS[papaya.volume.VoxelDimensions.UNITS_UNKNOWN]="Unknown Unit";papaya.volume.VoxelDimensions.UNIT_STRINGS[papaya.volume.VoxelDimensions.UNITS_METER]="Meters";papaya.volume.VoxelDimensions.UNIT_STRINGS[papaya.volume.VoxelDimensions.UNITS_MM]="Millimeters";papaya.volume.VoxelDimensions.UNIT_STRINGS[papaya.volume.VoxelDimensions.UNITS_MICRON]="Microns";papaya.volume.VoxelDimensions.UNIT_STRINGS[papaya.volume.VoxelDimensions.UNITS_SEC]="Seconds";papaya.volume.VoxelDimensions.UNIT_STRINGS[papaya.volume.VoxelDimensions.UNITS_MSEC]="Milliseconds";papaya.volume.VoxelDimensions.UNIT_STRINGS[papaya.volume.VoxelDimensions.UNITS_USEC]="Microseconds";papaya.volume.VoxelDimensions.UNIT_STRINGS[papaya.volume.VoxelDimensions.UNITS_HZ]="Hertz";papaya.volume.VoxelDimensions.UNIT_STRINGS[papaya.volume.VoxelDimensions.UNITS_PPM]="Parts-per-million";papaya.volume.VoxelDimensions.UNIT_STRINGS[papaya.volume.VoxelDimensions.UNITS_RADS]="Radians-per-second";papaya.volume.VoxelDimensions.prototype.isValid=function(){return((this.colSize>0)&&(this.rowSize>0)&&(this.sliceSize>0)&&(this.timeSize>=0))};papaya.volume.VoxelDimensions.prototype.getSpatialUnitString=function(){return papaya.volume.VoxelDimensions.UNIT_STRINGS[this.spatialUnit]};papaya.volume.VoxelDimensions.prototype.getTemporalUnitString=function(){return papaya.volume.VoxelDimensions.UNIT_STRINGS[this.temporalUnit]};papaya.volume.VoxelDimensions.prototype.getTemporalUnitMultiplier=function(){if(this.temporalUnit===papaya.volume.VoxelDimensions.UNITS_MSEC){return 0.001}if(this.temporalUnit===papaya.volume.VoxelDimensions.UNITS_USEC){return 0.000001}return 1};"use strict";var papaya=papaya||{};papaya.volume=papaya.volume||{};papaya.volume.VoxelValue=papaya.volume.VoxelValue||function(e,c,b,d,a){this.imageData=e;this.imageType=c;this.imageRange=d;this.orientation=a;this.swap16=((this.imageType.numBytes===2)&&this.imageType.swapped)&&(this.imageType.datatype!==papaya.volume.ImageType.DATATYPE_FLOAT);this.swap32=((this.imageType.numBytes===4)&&this.imageType.swapped)&&(this.imageType.datatype!==papaya.volume.ImageType.DATATYPE_FLOAT);this.xIncrement=a.xIncrement;this.yIncrement=a.yIncrement;this.zIncrement=a.zIncrement;this.xDim=b.xDim;this.yDim=b.yDim;this.zDim=b.zDim;this.sliceSize=b.getNumVoxelsSlice();this.volSize=b.getNumVoxelsVolume();this.dataScaleSlopes=d.dataScaleSlopes;this.dataScaleIntercepts=d.dataScaleIntercepts;this.globalDataScaleSlope=d.globalDataScaleSlope;this.globalDataScaleIntercept=d.globalDataScaleIntercept;this.usesGlobalDataScale=d.usesGlobalDataScale;this.interpFirstPass=[[0,0],[0,0]];this.interpSecondPass=[0,0];this.forceABS=false};papaya.volume.VoxelValue.prototype.getVoxelAtIndexNative=function(d,c,b,a,e){if(e){d=papayaRoundFast(d);c=papayaRoundFast(c);b=papayaRoundFast(b);return this.getVoxelAtOffset(this.orientation.convertIndexToOffsetNative(d,c,b),a,d,c,b)}return this.getVoxelAtIndexLinear(d,c,b,a)};papaya.volume.VoxelValue.prototype.getVoxelAtIndex=function(d,c,b,a,e){if(e){d=papayaRoundFast(d);c=papayaRoundFast(c);b=papayaRoundFast(b);return this.getVoxelAtOffset(this.orientation.convertIndexToOffset(d,c,b),a,d,c,b)}return this.getVoxelAtIndexLinear(d,c,b,a)};papaya.volume.VoxelValue.prototype.getVoxelAtOffset=function(d,c,g,e,b){var a,h=d+(this.volSize*c),f;if((g<0)||(g>=this.xDim)||(e<0)||(e>=this.yDim)||(b<0)||(b>=this.zDim)){return 0}if(this.usesGlobalDataScale){f=(this.checkSwap(this.imageData.data[h])*this.globalDataScaleSlope)+this.globalDataScaleIntercept}else{a=parseInt(h/this.sliceSize);f=(this.checkSwap(this.imageData.data[h])*this.dataScaleSlopes[a])+this.dataScaleIntercepts[a]}if(this.forceABS){return Math.abs(f)}else{return f}};papaya.volume.VoxelValue.prototype.getVoxelAtIndexLinear=function(k,n,s,c){var l,i,h,f,b,a,e,d,g,j,p,o,m,r,q;l=b=a=0;d=Math.floor(k);g=Math.floor(n);j=Math.floor(s);i=k-d;h=n-g;f=s-j;p=(i!==0);o=(h!==0);m=(f!==0);if(p&&o&&m){for(r=0;r<2;r+=1){for(q=0;q<2;q+=1){e=this.orientation.convertIndexToOffsetNative(d+r,g+q,j);b=this.getVoxelAtOffset(e,c,d+r,g+q,j)*(1-f);e=this.orientation.convertIndexToOffsetNative(d+r,g+q,j+1);a=this.getVoxelAtOffset(e,c,d+r,g+q,j+1)*f;this.interpFirstPass[r][q]=b+a}}this.interpSecondPass[0]=(this.interpFirstPass[0][0]*(1-h))+(this.interpFirstPass[0][1]*h);this.interpSecondPass[1]=(this.interpFirstPass[1][0]*(1-h))+(this.interpFirstPass[1][1]*h);l=(this.interpSecondPass[0]*(1-i))+(this.interpSecondPass[1]*i)}else{if(p&&o&&!m){for(r=0;r<2;r+=1){e=this.orientation.convertIndexToOffsetNative(d+r,g,j);b=this.getVoxelAtOffset(e,c,d+r,g,j)*(1-h);e=this.orientation.convertIndexToOffsetNative(d+r,g+1,j);a=this.getVoxelAtOffset(e,c,d+r,g+1,j)*h;this.interpSecondPass[r]=b+a}l=(this.interpSecondPass[0]*(1-i))+(this.interpSecondPass[1]*i)}else{if(p&&!o&&m){for(r=0;r<2;r+=1){e=this.orientation.convertIndexToOffsetNative(d+r,g,j);b=this.getVoxelAtOffset(e,c,d+r,g,j)*(1-f);e=this.orientation.convertIndexToOffsetNative(d+r,g,j+1);a=this.getVoxelAtOffset(e,c,d+r,g,j+1)*f;this.interpSecondPass[r]=b+a}l=(this.interpSecondPass[0]*(1-i))+(this.interpSecondPass[1]*i)}else{if(!p&&o&&m){for(q=0;q<2;q+=1){e=this.orientation.convertIndexToOffsetNative(d,g+q,j);b=this.getVoxelAtOffset(e,c,d,g+q,j)*(1-f);e=this.orientation.convertIndexToOffsetNative(d,g+q,j+1);a=this.getVoxelAtOffset(e,c,d,g+q,j+1)*f;this.interpSecondPass[q]=b+a}l=(this.interpSecondPass[0]*(1-h))+(this.interpSecondPass[1]*h)}else{if(!p&&!o&&m){e=this.orientation.convertIndexToOffsetNative(d,g,j);b=this.getVoxelAtOffset(e,c,d,g,j)*(1-f);e=this.orientation.convertIndexToOffsetNative(d,g,j+1);a=this.getVoxelAtOffset(e,c,d,g,j+1)*f;l=b+a}else{if(!p&&o&&!m){e=this.orientation.convertIndexToOffsetNative(d,g,j);b=this.getVoxelAtOffset(e,c,d,g,j)*(1-h);e=this.orientation.convertIndexToOffsetNative(d,g+1,j);a=this.getVoxelAtOffset(e,c,d,g+1,j)*h;l=b+a}else{if(p&&!o&&!m){e=this.orientation.convertIndexToOffsetNative(d,g,j);b=this.getVoxelAtOffset(e,c,d,g,j)*(1-i);e=this.orientation.convertIndexToOffsetNative(d+1,g,j);a=this.getVoxelAtOffset(e,c,d+1,g,j)*i;l=b+a}else{l=this.getVoxelAtOffset(this.orientation.convertIndexToOffsetNative(k,n,s),c,k,n,s)}}}}}}}return l};papaya.volume.VoxelValue.prototype.checkSwap=function(a){if(this.swap16){return((((a&255)<<8)|((a>>8)&255))<<16)>>16}if(this.swap32){return((a&255)<<24)|((a&65280)<<8)|((a>>8)&65280)|((a>>24)&255)}return a};"use strict";var papaya=papaya||{};papaya.surface=papaya.surface||{};papaya.surface.Surface=papaya.surface.Surface||function(a,b){this.progressMeter=a;this.error=null;this.filename=null;this.rawData=null;this.onFinishedRead=null;this.pointData=null;this.triangleData=null;this.normalsData=null;this.colorsData=null;this.numPoints=0;this.numTriangles=0;this.pointsBuffer=null;this.trianglesBuffer=null;this.normalsBuffer=null;this.colorsBuffer=null;this.solidColor=null;this.surfaceType=papaya.surface.Surface.SURFACE_TYPE_UNKNOWN;this.fileFormat=null;this.params=b;this.nextSurface=null;this.volume=null;this.alpha=1};papaya.surface.Surface.SURFACE_TYPE_UNKNOWN=0;papaya.surface.Surface.SURFACE_TYPE_GIFTI=1;papaya.surface.Surface.SURFACE_TYPE_MANGO=2;papaya.surface.Surface.SURFACE_TYPE_VTK=3;papaya.surface.Surface.findSurfaceType=function(a){if(gifti.isThisFormat(a)){return papaya.surface.Surface.SURFACE_TYPE_GIFTI}else{if(papaya.surface.SurfaceMango.isThisFormat(a)){return papaya.surface.Surface.SURFACE_TYPE_MANGO}else{if(papaya.surface.SurfaceVTK.isThisFormat(a)){return papaya.surface.Surface.SURFACE_TYPE_VTK}}}return papaya.surface.Surface.SURFACE_TYPE_UNKNOWN};papaya.surface.Surface.prototype.makeFileFormat=function(a){this.surfaceType=papaya.surface.Surface.findSurfaceType(a);if(this.surfaceType===papaya.surface.Surface.SURFACE_TYPE_GIFTI){this.fileFormat=new papaya.surface.SurfaceGIFTI()}else{if(this.surfaceType===papaya.surface.Surface.SURFACE_TYPE_MANGO){this.fileFormat=new papaya.surface.SurfaceMango()}else{if(this.surfaceType===papaya.surface.Surface.SURFACE_TYPE_VTK){this.fileFormat=new papaya.surface.SurfaceVTK()}}}};papaya.surface.Surface.prototype.readURL=function(b,d,f){var e,a=this;this.filename=b.substr(b.lastIndexOf("/")+1,b.length);this.onFinishedRead=f;this.volume=d;this.processParams(this.filename);this.makeFileFormat(this.filename);if(this.surfaceType===papaya.surface.Surface.SURFACE_TYPE_UNKNOWN){this.error=new Error("This surface format is not supported!");this.finishedLoading();return}try{if(typeof new XMLHttpRequest().responseType==="string"){e=new XMLHttpRequest();e.open("GET",b,true);if(this.fileFormat.isSurfaceDataBinary()){e.responseType="arraybuffer"}e.onreadystatechange=function(){if(e.readyState===4){if(e.status===200){a.rawData=e.response;a.finishedLoading()}else{a.error=new Error("There was a problem reading that file ("+a.filename+"):\n\nResponse status = "+e.status);a.finishedLoading()}}};e.onprogress=function(g){if(g.lengthComputable){a.progressMeter.drawProgress(g.loaded/g.total,papaya.volume.Volume.PROGRESS_LABEL_LOADING)}};e.send(null)}else{a.error=new Error("There was a problem reading that file ("+a.filename+"):\n\nResponse type is not supported.");a.finishedLoading()}}catch(c){if(a!==null){a.error=new Error("There was a problem reading that file ("+a.filename+"):\n\n"+c.message);a.finishedLoading()}}};papaya.surface.Surface.prototype.readFile=function(d,f,g){var c=papaya.utilities.PlatformUtils.makeSlice(d,0,d.size),b=this;this.filename=d.name;this.onFinishedRead=g;this.volume=f;this.processParams(this.filename);this.makeFileFormat(this.filename);if(this.surfaceType===papaya.surface.Surface.SURFACE_TYPE_UNKNOWN){this.error=new Error("This surface format is not supported!");this.finishedLoading();return}try{var a=new FileReader();a.onloadend=function(h){if(h.target.readyState===FileReader.DONE){b.rawData=h.target.result;b.finishedLoading()}};a.onerror=function(h){b.error=new Error("There was a problem reading that file:\n\n"+h.getMessage());b.finishedLoading()};if(this.fileFormat.isSurfaceDataBinary()){a.readAsArrayBuffer(c)}else{a.readAsText(c)}}catch(e){b.error=new Error("There was a problem reading that file:\n\n"+e.message);b.finishedLoading()}};papaya.surface.Surface.prototype.readEncodedData=function(a,c,d){this.filename=(a+".surf.gii");this.onFinishedRead=d;this.volume=c;this.processParams(a);this.makeFileFormat(this.filename);if(this.surfaceType===papaya.surface.Surface.SURFACE_TYPE_UNKNOWN){this.error=new Error("This surface format is not supported!");this.finishedLoading();return}try{if(this.fileFormat.isSurfaceDataBinary()){this.rawData=Base64Binary.decodeArrayBuffer(papaya.utilities.ObjectUtils.dereference(a))}else{this.rawData=atob(papaya.utilities.ObjectUtils.dereference(a))}}catch(b){this.error=new Error("There was a problem reading that file:\n\n"+b.message)}this.finishedLoading()};papaya.surface.Surface.prototype.processParams=function(a){var b=this.params[a];if(b){if(b.color!==undefined){this.solidColor=b.color}if(b.alpha!==undefined){this.alpha=b.alpha}if(b.icon!==undefined){this.staticIcon=b.icon}}};papaya.surface.Surface.prototype.finishedLoading=function(){this.readData()};papaya.surface.Surface.prototype.readData=function(){if(this.error){console.log(this.error);this.onFinishedRead(this);return}var b=this.progressMeter;var c=function(d){b.drawProgress(d,"Loading surface...")};try{this.fileFormat.readData(this.rawData,c,papaya.utilities.ObjectUtils.bind(this,this.finishedReading),this.volume)}catch(a){this.error=a;this.onFinishedRead(this)}};papaya.surface.Surface.prototype.finishedReading=function(){var a=this.fileFormat.getNumSurfaces(),c=this,b;if(this.fileFormat.error){this.error=this.fileFormat.error}else{for(b=0;b<a;b+=1){if(b>0){c.nextSurface=new papaya.surface.Surface();c=c.nextSurface}c.numPoints=this.fileFormat.getNumPoints(b);c.numTriangles=this.fileFormat.getNumTriangles(b);c.pointData=this.fileFormat.getPointData(b);c.normalsData=this.fileFormat.getNormalsData(b);c.triangleData=this.fileFormat.getTriangleData(b);c.colorsData=this.fileFormat.getColorsData(b);if(c.normalsData===null){this.generateNormals()}if(this.fileFormat.getSolidColor(b)){c.solidColor=this.fileFormat.getSolidColor(b)}}}this.progressMeter.drawProgress(1,"Loading surface...");this.onFinishedRead(this)};papaya.surface.Surface.prototype.generateNormals=function(){var p=[],o=[],m=[],g=[],q=[],a,h=this.pointData.length,n,d,c,b,l,k,j,i,f,e;this.normalsData=new Float32Array(h);n=this.numTriangles*3;for(a=0;a<n;a+=3){i=this.triangleData[a]*3;f=this.triangleData[a+1]*3;e=this.triangleData[a+2]*3;p.x=this.pointData[i];p.y=this.pointData[i+1];p.z=this.pointData[i+2];o.x=this.pointData[f];o.y=this.pointData[f+1];o.z=this.pointData[f+2];m.x=this.pointData[e];m.y=this.pointData[e+1];m.z=this.pointData[e+2];d=o.x-p.x;c=o.y-p.y;b=o.z-p.z;l=m.x-p.x;k=m.y-p.y;j=m.z-p.z;g[0]=(k*b)-(j*c);g[1]=(j*d)-(l*b);g[2]=(l*c)-(k*d);this.normalsData[i]+=g[0];this.normalsData[i+1]+=g[1];this.normalsData[i+2]+=g[2];this.normalsData[f]+=g[0];this.normalsData[f+1]+=g[1];this.normalsData[f+2]+=g[2];this.normalsData[e]+=g[0];this.normalsData[e+1]+=g[1];this.normalsData[e+2]+=g[2]}for(a=0;a<h;a+=3){g[0]=-1*this.normalsData[a];g[1]=-1*this.normalsData[a+1];g[2]=-1*this.normalsData[a+2];vec3.normalize(g,q);this.normalsData[a]=q[0];this.normalsData[a+1]=q[1];this.normalsData[a+2]=q[2]}};"use strict";var papaya=papaya||{};papaya.surface=papaya.surface||{};papaya.surface.SurfaceGIFTI=papaya.surface.SurfaceGIFTI||function(){this.gii=null;this.error=null;this.pointData=null;this.triangleData=null;this.normalsData=null;this.colorsData=null;this.onFinishedRead=null};papaya.surface.SurfaceGIFTI.prototype.isSurfaceDataBinary=function(){return false};papaya.surface.SurfaceGIFTI.prototype.readData=function(c,a,d){var b=this;a(0);this.onFinishedRead=d;this.gii=gifti.parse(c);setTimeout(function(){b.readDataPoints(b,a)},0)};papaya.surface.SurfaceGIFTI.prototype.readDataPoints=function(d,b){b(0.2);if(d.gii.getPointsDataArray()!=null){d.pointData=d.gii.getPointsDataArray().getData()}else{d.error=new Error("Surface is missing point information!")}if(d.gii.getPointsDataArray().attributes.ArrayIndexingOrder==="ColumnMajorOrder"){var g=d.pointData.slice();var f=g.length/3;var a=0;for(var e=0;e<f;e++){for(var c=0;c<3;c++){d.pointData[a]=g[(c*f)+e];a++}}}setTimeout(function(){d.readDataNormals(d,b)},0)};papaya.surface.SurfaceGIFTI.prototype.readDataNormals=function(b,a){a(0.4);if(b.gii.getNormalsDataArray()!=null){b.normalsData=b.gii.getNormalsDataArray().getData()}setTimeout(function(){b.readDataTriangles(b,a)},0)};papaya.surface.SurfaceGIFTI.prototype.readDataTriangles=function(d,b){b(0.6);if(d.gii.getTrianglesDataArray()!=null){d.triangleData=d.gii.getTrianglesDataArray().getData()}else{d.error=Error("Surface is missing triangle information!")}if(d.gii.getTrianglesDataArray().attributes.ArrayIndexingOrder==="ColumnMajorOrder"){var g=d.triangleData.slice();var f=g.length/3;var a=0;for(var e=0;e<f;e++){for(var c=0;c<3;c++){d.triangleData[a]=g[(c*f)+e];a++}}}setTimeout(function(){d.readDataColors(d,b)},0)};papaya.surface.SurfaceGIFTI.prototype.readDataColors=function(b,a){a(0.8);if(b.gii.getColorsDataArray()!=null){b.colorsData=b.gii.getColorsDataArray().getData()}setTimeout(function(){b.onFinishedRead()},0)};papaya.surface.SurfaceGIFTI.prototype.getNumSurfaces=function(){return 1};papaya.surface.SurfaceGIFTI.prototype.getNumPoints=function(){return this.gii.getNumPoints()};papaya.surface.SurfaceGIFTI.prototype.getNumTriangles=function(){return this.gii.getNumTriangles()};papaya.surface.SurfaceGIFTI.prototype.getPointData=function(){return this.pointData};papaya.surface.SurfaceGIFTI.prototype.getNormalsData=function(){return this.normalsData};papaya.surface.SurfaceGIFTI.prototype.getTriangleData=function(){return this.triangleData};papaya.surface.SurfaceGIFTI.prototype.getColorsData=function(){return this.colorsData};papaya.surface.SurfaceGIFTI.prototype.getSolidColor=function(){return this.solidColor};"use strict";var papaya=papaya||{};papaya.surface=papaya.surface||{};papaya.surface.SurfaceMango=papaya.surface.SurfaceMango||function(){this.error=null;this.onFinishedRead=null;this.origin=[];this.imageDims=[];this.voxelDims=[];this.center=[];this.diffs=[];this.dv=null;this.index=0;this.surfaceIndex=0;this.dataLength=0;this.numSurfaces=0;this.littleEndian=false;this.surfaces=[];this.v14=false;this.v15=false};papaya.surface.SurfaceMangoData=papaya.surface.SurfaceMangoData||function(){this.pointData=null;this.triangleData=null;this.normalsData=null;this.colorsData=null;this.solidColor=[]};papaya.surface.SurfaceMango.MAGIC_NUMBER_LITTLE_1_5=["m","a","n","g","o","l","1","5"];papaya.surface.SurfaceMango.MAGIC_NUMBER_BIG_1_5=["m","a","n","g","o","b","1","5"];papaya.surface.SurfaceMango.MAGIC_NUMBER_LITTLE_1_4=["m","a","n","g","o","l","1","4"];papaya.surface.SurfaceMango.MAGIC_NUMBER_BIG_1_4=["m","a","n","g","o","b","1","4"];papaya.surface.SurfaceMango.SURFACE_OVERLAY_MAGIC_NUMBER=[0,0,0,0,"s","c","a","l"];papaya.surface.SurfaceMango.NAME_SIZE=64;papaya.surface.SurfaceMango.isThisFormat=function(a){return a.endsWith(".surf")};papaya.surface.SurfaceMango.prototype.isSurfaceDataBinary=function(){return true};papaya.surface.SurfaceMango.prototype.isLittleEndian15=function(b){var c=new Uint8Array(b),a;for(a=0;a<papaya.surface.SurfaceMango.MAGIC_NUMBER_LITTLE_1_5.length;a+=1){if(c[a]!==papaya.surface.SurfaceMango.MAGIC_NUMBER_LITTLE_1_5[a].charCodeAt(0)){return false}}return true};papaya.surface.SurfaceMango.prototype.isLittleEndian14=function(b){var c=new Uint8Array(b),a;for(a=0;a<papaya.surface.SurfaceMango.MAGIC_NUMBER_LITTLE_1_4.length;a+=1){if(c[a]!==papaya.surface.SurfaceMango.MAGIC_NUMBER_LITTLE_1_4[a].charCodeAt(0)){return false}}return true};papaya.surface.SurfaceMango.prototype.isVersion15=function(c){var d=new Uint8Array(c),b,a=true;for(b=0;b<papaya.surface.SurfaceMango.MAGIC_NUMBER_LITTLE_1_5.length;b+=1){if(d[b]!==papaya.surface.SurfaceMango.MAGIC_NUMBER_LITTLE_1_5[b].charCodeAt(0)){a=false;break}}if(!a){a=true;for(b=0;b<papaya.surface.SurfaceMango.MAGIC_NUMBER_BIG_1_5.length;b+=1){if(d[b]!==papaya.surface.SurfaceMango.MAGIC_NUMBER_BIG_1_5[b].charCodeAt(0)){a=false;break}}}return a};papaya.surface.SurfaceMango.prototype.isVersion14=function(c){var d=new Uint8Array(c),b,a=true;for(b=0;b<papaya.surface.SurfaceMango.MAGIC_NUMBER_LITTLE_1_4.length;b+=1){if(d[b]!==papaya.surface.SurfaceMango.MAGIC_NUMBER_LITTLE_1_4[b].charCodeAt(0)){a=false;break}}if(!a){a=true;for(b=0;b<papaya.surface.SurfaceMango.MAGIC_NUMBER_BIG_1_4.length;b+=1){if(d[b]!==papaya.surface.SurfaceMango.MAGIC_NUMBER_BIG_1_4[b].charCodeAt(0)){a=false;break}}}return a};papaya.surface.SurfaceMango.prototype.isLittleEndian=function(a){return this.isLittleEndian15(a)||this.isLittleEndian14(a)};papaya.surface.SurfaceMango.prototype.hasOverlay=function(){var a,b;for(a=0;a<papaya.surface.SurfaceMango.SURFACE_OVERLAY_MAGIC_NUMBER.length;a+=1){b=papaya.surface.SurfaceMango.SURFACE_OVERLAY_MAGIC_NUMBER[a];if(b){b=papaya.surface.SurfaceMango.SURFACE_OVERLAY_MAGIC_NUMBER[a].charCodeAt(0)}if(this.dv.getUint8(this.index+a)!==b){return false}}return true};papaya.surface.SurfaceMango.prototype.getString=function(a){var b,c=[];for(b=0;b<a;b+=1){c[b]=this.dv.getUint8(this.index+b)}return String.fromCharCode.apply(null,c)};papaya.surface.SurfaceMango.prototype.readData=function(c,a,d){var b;a(0.2);this.littleEndian=this.isLittleEndian(c);this.dataLength=c.byteLength;this.v14=this.isVersion14(c);this.v15=this.isVersion15(c);this.index=papaya.surface.SurfaceMango.MAGIC_NUMBER_LITTLE_1_5.length;this.dv=new DataView(c);if(!(this.v14||this.v15)){throw new Error("Only Mango surface format version 1.4 and 1.5 are supported!")}this.onFinishedRead=d;b=this.dv.getUint32(this.index,this.littleEndian);this.index+=4;this.numSurfaces=this.dv.getUint32(this.index,this.littleEndian);this.index+=4;this.index+=(16*8);this.imageDims[0]=this.dv.getUint32(this.index,this.littleEndian);this.index+=4;this.imageDims[1]=this.dv.getUint32(this.index,this.littleEndian);this.index+=4;this.imageDims[2]=this.dv.getUint32(this.index,this.littleEndian);this.index+=4;this.voxelDims[0]=this.dv.getFloat32(this.index,this.littleEndian);this.index+=4;this.voxelDims[1]=this.dv.getFloat32(this.index,this.littleEndian);this.index+=4;this.voxelDims[2]=this.dv.getFloat32(this.index,this.littleEndian);this.index+=4;this.origin[0]=this.dv.getFloat32(this.index,this.littleEndian)*this.voxelDims[0];this.index+=4;this.origin[1]=this.dv.getFloat32(this.index,this.littleEndian)*this.voxelDims[1];this.index+=4;this.origin[2]=this.dv.getFloat32(this.index,this.littleEndian)*this.voxelDims[2];this.index+=4;this.center[0]=((this.imageDims[0]*this.voxelDims[0])/2);this.center[1]=((this.imageDims[1]*this.voxelDims[1])/2);this.center[2]=((this.imageDims[2]*this.voxelDims[2])/2);if(this.v14){this.diffs[0]=this.center[0]-this.origin[0];this.diffs[1]=this.center[1]-this.origin[1];this.diffs[2]=this.origin[2]-this.center[2]}else{this.diffs[0]=this.center[0]-this.origin[0];this.diffs[1]=this.center[1]-this.origin[1];this.diffs[2]=this.center[2]-this.origin[2]}this.index+=4;this.index+=b;this.readNextSurface(this,a)};papaya.surface.SurfaceMango.prototype.readNextSurface=function(c,b){var a=new papaya.surface.SurfaceMangoData();c.index+=papaya.surface.SurfaceMango.NAME_SIZE;c.surfaces[c.surfaceIndex]=a;c.surfaces[c.surfaceIndex].solidColor[0]=c.dv.getFloat32(c.index,c.littleEndian);c.index+=4;c.surfaces[c.surfaceIndex].solidColor[1]=c.dv.getFloat32(c.index,c.littleEndian);c.index+=4;c.surfaces[c.surfaceIndex].solidColor[2]=c.dv.getFloat32(c.index,c.littleEndian);c.index+=4;setTimeout(function(){c.readDataPoints(c,b)},0)};papaya.surface.SurfaceMango.prototype.readDataPoints=function(b,a){var d,c;a(0.4);b.index+=4;d=b.dv.getInt32(b.index,b.littleEndian);b.index+=4;b.surfaces[b.surfaceIndex].pointData=new Float32Array(d);if(b.v14){for(c=0;c<d;c+=1,b.index+=4){b.surfaces[b.surfaceIndex].pointData[c]=(((c%3)!==2)?-1:1)*(b.dv.getFloat32(b.index,b.littleEndian)+(b.diffs[c%3]))}}else{for(c=0;c<d;c+=1,b.index+=4){b.surfaces[b.surfaceIndex].pointData[c]=(((c%3)!==0)?-1:1)*(b.dv.getFloat32(b.index,b.littleEndian)+(b.diffs[c%3]))}}setTimeout(function(){b.readDataNormals(b,a)},0)};papaya.surface.SurfaceMango.prototype.readDataNormals=function(b,a){var d,c;a(0.6);b.index+=4;d=b.dv.getInt32(b.index,b.littleEndian);b.index+=4;b.surfaces[b.surfaceIndex].normalsData=new Float32Array(d);if(b.v14){for(c=0;c<d;c+=1,b.index+=4){b.surfaces[b.surfaceIndex].normalsData[c]=(((c%3)!==2)?-1:1)*b.dv.getFloat32(b.index,b.littleEndian)}}else{for(c=0;c<d;c+=1,b.index+=4){b.surfaces[b.surfaceIndex].normalsData[c]=(((c%3)!==0)?-1:1)*b.dv.getFloat32(b.index,b.littleEndian)}}setTimeout(function(){b.readDataTriangles(b,a)},0)};papaya.surface.SurfaceMango.prototype.readDataTriangles=function(b,a){var d,c;a(0.8);b.index+=4;d=b.dv.getInt32(b.index,b.littleEndian);b.index+=4;b.surfaces[b.surfaceIndex].triangleData=new Uint32Array(d);for(c=0;c<d;c+=1,b.index+=4){b.surfaces[b.surfaceIndex].triangleData[c]=b.dv.getUint32(b.index,b.littleEndian)}setTimeout(function(){b.readDataColors(b,a)},0)};papaya.surface.SurfaceMango.prototype.readDataColors=function(h,a){var i,n,l,j,d,k,g,c,m,f,e,b=false;while(h.index<h.dataLength){if(h.hasOverlay()){b=true;h.index+=papaya.surface.SurfaceMango.SURFACE_OVERLAY_MAGIC_NUMBER.length;h.index+=papaya.surface.SurfaceMango.NAME_SIZE;m=h.getString(papaya.surface.SurfaceMango.NAME_SIZE);h.index+=papaya.surface.SurfaceMango.NAME_SIZE;m=m.replace(/\0/g,"");h.index+=4;i=h.dv.getFloat32(this.index,this.littleEndian);h.index+=4;n=h.dv.getFloat32(this.index,this.littleEndian);h.index+=4;l=255/(n-i);h.index+=4;h.index+=4;j=h.dv.getUint32(this.index,this.littleEndian);h.index+=4;k=new Float32Array(j);for(f=0;f<j;f+=1,h.index+=4){k[f]=h.dv.getFloat32(h.index,h.littleEndian)}if(papaya.viewer.ColorTable.findLUT(m)!==papaya.viewer.ColorTable.TABLE_GRAYSCALE){e=new papaya.viewer.ColorTable(m,false)}else{e=new papaya.viewer.ColorTable("Spectrum",false)}e.updateLUT(0,255);d=h.surfaces[h.surfaceIndex].pointData.length/3;if(h.surfaces[h.surfaceIndex].colorsData===null){h.surfaces[h.surfaceIndex].colorsData=new Float32Array(d*4)}for(f=0;f<d;f+=1){c=k[f];if(c<=i){if(h.surfaces[h.surfaceIndex].colorsData[(f*4)+3]===0){h.surfaces[h.surfaceIndex].colorsData[(f*4)]=h.surfaces[h.surfaceIndex].solidColor[0];h.surfaces[h.surfaceIndex].colorsData[(f*4)+1]=h.surfaces[h.surfaceIndex].solidColor[1];h.surfaces[h.surfaceIndex].colorsData[(f*4)+2]=h.surfaces[h.surfaceIndex].solidColor[2];h.surfaces[h.surfaceIndex].colorsData[(f*4)+3]=1}}else{if(c>n){h.surfaces[h.surfaceIndex].colorsData[(f*4)]=e.lookupRed(255)/255;h.surfaces[h.surfaceIndex].colorsData[(f*4)+1]=e.lookupGreen(255)/255;h.surfaces[h.surfaceIndex].colorsData[(f*4)+2]=e.lookupBlue(255)/255;h.surfaces[h.surfaceIndex].colorsData[(f*4)+3]=1}else{g=Math.floor(((c-i)*l)+0.5);h.surfaces[h.surfaceIndex].colorsData[(f*4)]=e.lookupRed(g)/255;h.surfaces[h.surfaceIndex].colorsData[(f*4)+1]=e.lookupGreen(g)/255;h.surfaces[h.surfaceIndex].colorsData[(f*4)+2]=e.lookupBlue(g)/255;h.surfaces[h.surfaceIndex].colorsData[(f*4)+3]=1}}}}else{break}}h.surfaceIndex++;if(h.surfaceIndex===h.numSurfaces){setTimeout(function(){h.onFinishedRead()},0)}else{setTimeout(function(){h.readNextSurface(h,a)},0)}};papaya.surface.SurfaceMango.prototype.getNumSurfaces=function(){return this.numSurfaces};papaya.surface.SurfaceMango.prototype.getNumPoints=function(a){return this.surfaces[a].pointData.length/3};papaya.surface.SurfaceMango.prototype.getNumTriangles=function(a){return this.surfaces[a].triangleData.length/3};papaya.surface.SurfaceMango.prototype.getSolidColor=function(a){return this.surfaces[a].solidColor};papaya.surface.SurfaceMango.prototype.getPointData=function(a){return this.surfaces[a].pointData};papaya.surface.SurfaceMango.prototype.getNormalsData=function(a){return this.surfaces[a].normalsData};papaya.surface.SurfaceMango.prototype.getTriangleData=function(a){return this.surfaces[a].triangleData};papaya.surface.SurfaceMango.prototype.getColorsData=function(a){return this.surfaces[a].colorsData};"use strict";var papaya=papaya||{};papaya.surface=papaya.surface||{};papaya.surface.SurfaceVTK=papaya.surface.SurfaceVTK||function(){this.error=null;this.onFinishedRead=null;this.dv=null;this.index=0;this.littleEndian=true;this.numPoints=0;this.pointData=null;this.triangleData=null;this.normalsData=null;this.colorsData=null;this.vtkVersion=null;this.description=null;this.ascii=false;this.volume=null;this.done=false;this.headerRead=false};papaya.surface.SurfaceVTK.MAGIC_NUMBER="# vtk DataFile Version";papaya.surface.SurfaceVTK.MAGIC_NUMBER_ASCII="ASCII";papaya.surface.SurfaceVTK.MAGIC_NUMBER_DATASET="DATASET";papaya.surface.SurfaceVTK.MAGIC_NUMBER_POLYDATA="POLYDATA";papaya.surface.SurfaceVTK.MAGIC_NUMBER_POINTS="POINTS";papaya.surface.SurfaceVTK.MAGIC_NUMBER_POLYGONS="POLYGONS";papaya.surface.SurfaceVTK.MAGIC_NUMBER_NORMALS="NORMALS";papaya.surface.SurfaceVTK.isThisFormat=function(a){return a.endsWith(".vtk")};papaya.surface.SurfaceVTK.prototype.isSurfaceDataBinary=function(){return true};papaya.surface.SurfaceVTK.prototype.hasOverlay=function(){return false};papaya.surface.SurfaceVTK.prototype.getNextLine=function(a){var b,c,d=[];if(!a){a=256}for(b=0;b<a;b+=1){if(this.index>=this.dv.byteLength){this.done=true;break}c=this.dv.getUint8(this.index++);if(c<32){if((!this.headerRead||this.ascii)&&(this.index<this.dv.byteLength)&&(this.dv.getUint8(this.index)<32)){this.index++}break}d[b]=c}return String.fromCharCode.apply(null,d)};papaya.surface.SurfaceVTK.prototype.readData=function(d,a,f,c){var b=this,e;a(0.2);this.onFinishedRead=f;this.dv=new DataView(d);this.volume=c;this.vtkVersion=this.getNextLine().substring(papaya.surface.SurfaceVTK.MAGIC_NUMBER.length).trim();this.description=this.getNextLine().trim();this.ascii=(this.getNextLine()==papaya.surface.SurfaceVTK.MAGIC_NUMBER_ASCII);this.datasetType=this.getNextLine().substring(papaya.surface.SurfaceVTK.MAGIC_NUMBER_DATASET.length).trim();this.headerRead=true;if(this.datasetType!=papaya.surface.SurfaceVTK.MAGIC_NUMBER_POLYDATA){this.error=new Error("VTK: Only POLYDATA format is currently supported!");this.onFinishedRead()}e=this.getNextLine().split(" ");if(e[0]==papaya.surface.SurfaceVTK.MAGIC_NUMBER_POINTS){setTimeout(function(){b.readDataPoints(b,e[1],a)},0)}};papaya.surface.SurfaceVTK.prototype.readNextData=function(c,b){var d,a=0.2;if(c.pointData){a+=0.2}if(c.normalsData){a+=0.2}if(c.triangleData){a+=0.2}b(a);if(c.done||(c.pointData&&c.normalsData&&c.triangleData)){c.onFinishedRead()}else{d=this.getNextLine().split(" ");if(d&&(d[0]==papaya.surface.SurfaceVTK.MAGIC_NUMBER_POINTS)){setTimeout(function(){c.readDataPoints(c,d[1],b)},0)}else{if(d&&(d[0]==papaya.surface.SurfaceVTK.MAGIC_NUMBER_POLYGONS)){setTimeout(function(){c.readDataTriangles(c,d[1],b)},0)}else{if(d&&(d[0]==papaya.surface.SurfaceVTK.MAGIC_NUMBER_NORMALS)){setTimeout(function(){c.readDataNormals(c,b)},0)}else{setTimeout(function(){c.readNextData(c,b)},0)}}}}};papaya.surface.SurfaceVTK.prototype.readDataPoints=function(j,u,d){var p,e=0,l=[],m,q=0,h=u*3;j.numPoints=u;j.pointData=new Float32Array(h);var c=j.volume.header.orientation.orientation;var b=j.volume.header.voxelDimensions;var t=j.volume.header.origin;var r=(c.charAt(3)==="-"?1:-1)*(b.flip?-1:1);var n=(c.charAt(4)!=="-"?1:-1);var s=(c.charAt(5)!=="-"?1:-1);var f=c.indexOf("X");var i=c.indexOf("Y");var k=c.indexOf("Z");var o=r*t.x*b.xSize;var g=n*t.y*b.ySize;var a=s*t.z*b.zSize;if(j.ascii){while(q<h){m=j.getNextLine().trim().split(" ");for(p=0;p<m.length;p+=1){l[e]=parseFloat(m[p]);if(e===2){j.pointData[q++]=l[f]*r-o;j.pointData[q++]=l[i]*n-g;j.pointData[q++]=l[k]*s-a}e++;e%=3}}}else{for(p=0;p<h;p+=1,j.index+=4){l[e]=j.dv.getFloat32(j.index,false);if(e===2){j.pointData[q++]=l[f]*r-o;j.pointData[q++]=l[i]*n-g;j.pointData[q++]=l[k]*s-a}e++;e%=3}}j.readNextData(j,d)};papaya.surface.SurfaceVTK.prototype.readDataNormals=function(d,b){var e,f,c=0,a=d.numPoints*3;d.normalsData=new Float32Array(a);if(d.ascii){while(c<a){f=d.getNextLine().trim().split(" ");for(e=0;e<f.length;e+=1){d.normalsData[c++]=parseFloat(f[e])}}}else{for(e=0;e<a;e+=1,d.index+=4){d.normalsData[e]=d.dv.getFloat32(d.index,false)}}d.readNextData(d,b)};papaya.surface.SurfaceVTK.prototype.readDataTriangles=function(c,b,a){var d,f,e=0,g=b*3;c.triangleData=new Uint32Array(g);if(c.ascii){while(e<g){f=c.getNextLine().trim().split(" ");for(d=1;d<f.length;d+=1){c.triangleData[e++]=parseInt(f[d],10)}}}else{for(d=0;d<b;d+=1,c.index+=(4*4)){c.triangleData[(d*3)]=c.dv.getUint32(c.index+4,false);c.triangleData[(d*3)+1]=c.dv.getUint32(c.index+8,false);c.triangleData[(d*3)+2]=c.dv.getUint32(c.index+12,false)}}c.readNextData(c,a)};papaya.surface.SurfaceVTK.prototype.getColorsData=function(){return null};papaya.surface.SurfaceVTK.prototype.getNumSurfaces=function(){return 1};papaya.surface.SurfaceVTK.prototype.getNumPoints=function(){return this.pointData.length/3};papaya.surface.SurfaceVTK.prototype.getNumTriangles=function(){return this.triangleData.length/3};papaya.surface.SurfaceVTK.prototype.getSolidColor=function(){return this.solidColor};papaya.surface.SurfaceVTK.prototype.getPointData=function(){return this.pointData};papaya.surface.SurfaceVTK.prototype.getNormalsData=function(){return this.normalsData};papaya.surface.SurfaceVTK.prototype.getTriangleData=function(){return this.triangleData};"use strict";var papaya=papaya||{};papaya.ui=papaya.ui||{};papaya.ui.Dialog=papaya.ui.Dialog||function(c,g,e,f,h,b,a,d){this.container=c;this.viewer=c.viewer;this.title=g;this.modifier="";if(!papaya.utilities.StringUtils.isStringBlank(a)){this.modifier=a}this.id=this.title.replace(/ /g,"_");this.content=e;this.dataSource=f;this.callback=h;this.callbackOk=b;this.doWrap=d;this.scrollBehavior1=null;this.scrollBehavior2=null};papaya.ui.Dialog.showModalDialog=function(i,f,h){var c,g,e,k,d,j;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop;c=$(window).outerWidth();g=$(window).outerHeight();e=$(h).outerWidth();k=$(h).outerHeight();d=(c/2)-(e/2)+"px";j=a+(g/2)-(k/2)+"px";$(h).css({position:"absolute",zIndex:100,left:d,top:j});f.removeScroll();$(h).hide().fadeIn(200)};papaya.ui.Dialog.prototype.showDialog=function(){var b,h,e,a,i,g,d,c,f;d="#"+this.id;g=$(d);g.remove();f=$("body");e="<div id='"+this.id+"' class='"+PAPAYA_DIALOG_CSS+"'><span class='"+PAPAYA_DIALOG_TITLE_CSS+"'>"+this.title+"</span>";if(this.content){e+="<div class='"+PAPAYA_DIALOG_CONTENT_CSS+"'><table>";for(b=0;b<this.content.items.length;b+=1){if(this.content.items[b].spacer){e+="<tr><td class='"+PAPAYA_DIALOG_CONTENT_LABEL_CSS+"'>&nbsp;</td><td class='"+PAPAYA_DIALOG_CONTENT_CONTROL_CSS+"'>&nbsp;</td></tr>"}else{if(this.content.items[b].readonly){e+="<tr><td class='"+PAPAYA_DIALOG_CONTENT_LABEL_CSS+"'>"+this.content.items[b].label+"</td><td class='"+PAPAYA_DIALOG_CONTENT_CONTROL_CSS+"' id='"+this.content.items[b].field+"'></td></tr>"}else{if(this.content.items[b].disabled&&(papaya.utilities.ObjectUtils.bind(this.container,papaya.utilities.ObjectUtils.dereferenceIn(this,this.content.items[b].disabled)))()===true){c="disabled='disabled'"}else{c=""}e+="<tr><td class='"+PAPAYA_DIALOG_CONTENT_LABEL_CSS+"'>"+this.content.items[b].label+"</td><td class='"+PAPAYA_DIALOG_CONTENT_CONTROL_CSS+"'><select "+c+" id='"+this.content.items[b].field+"'>";for(h=0;h<this.content.items[b].options.length;h+=1){e+="<option value='"+this.content.items[b].options[h]+"'>"+papaya.utilities.StringUtils.truncateMiddleString(this.content.items[b].options[h].toString(),40)+"</option>"}e+="</select></td></tr>";if(this.content.items[b].help){e+="<tr><td colspan='2' class='"+PAPAYA_DIALOG_CONTENT_HELP+"'>"+this.content.items[b].help+"</td></tr>"}}}}e+="</table></div>"}e+="<div class='"+PAPAYA_DIALOG_BUTTON_CSS+"'><button type='button' id='"+this.id+"-Ok'>Ok</button></div></div>";f.append('<div class="'+PAPAYA_DIALOG_BACKGROUND+'"></div>');f.append(e);for(b=0;b<this.content.items.length;b+=1){if(this.content.items[b].readonly){a=this.dataSource[this.content.items[b].field](this.modifier);if(a!==null){$("#"+this.content.items[b].field).html(a)}else{$("#"+this.content.items[b].field).parent().remove()}}else{if(!this.content.items[b].spacer){i=$("#"+this.content.items[b].field);i.val(this.dataSource[this.content.items[b].field]);i.change(papaya.utilities.ObjectUtils.bind(this,this.doAction,[this.content.items[b].field]))}}}if(!this.doWrap){$("."+PAPAYA_DIALOG_CONTENT_CSS).addClass(PAPAYA_DIALOG_CONTENT_NOWRAP_CSS)}$("#"+this.id+"-Ok").click(papaya.utilities.ObjectUtils.bind(this,this.doOk));g=$(d);f.addClass(PAPAYA_DIALOG_STOPSCROLL);papaya.ui.Dialog.showModalDialog(this,this.viewer,g[0])};papaya.ui.Dialog.prototype.doOk=function(){var a,b;a=$("."+PAPAYA_DIALOG_CSS);b=$("."+PAPAYA_DIALOG_BACKGROUND);a.hide(100);b.hide(100);a.remove();b.remove();window.onmousewheel=this.scrollBehavior1;document.onmousewheel=this.scrollBehavior2;if(this.callbackOk){this.callbackOk()}$("body").removeClass(PAPAYA_DIALOG_STOPSCROLL);this.container.viewer.addScroll()};papaya.ui.Dialog.prototype.doAction=function(a){this.callback(a,$("#"+a).val())};"use strict";var papaya=papaya||{};papaya.ui=papaya.ui||{};papaya.ui.Menu=papaya.ui.Menu||function(d,b,e,c,a){this.viewer=d;this.method=b.method;this.isTitleBar=b.titleBar;this.label=b.label;this.icons=b.icons;this.callback=e;this.dataSource=c;this.items=[];this.rangeItem=null;this.menuOnHover=b.menuOnHover;this.contextMenu=false;if((a===undefined)||(a===null)){this.imageIndex=-1;this.modifier=this.viewer.container.containerIndex}else{this.imageIndex=a;this.modifier=a+this.viewer.container.containerIndex}this.buttonId=this.label.replace(/ /g,"_").replace("...","_")+(this.modifier||"");this.menuId=(this.label+"Menu").replace(/ /g,"_").replace("...","_")+(this.modifier||"");this.isRight=(b.icons!==null);this.isImageButton=b.imageButton;this.isSurfaceButton=b.surfaceButton;this.htmlParent=((this.viewer.container.showControlBar&&this.viewer.container.kioskMode&&this.viewer.container.showImageButtons)?this.viewer.container.sliderControlHtml:this.viewer.container.toolbarHtml)};papaya.ui.Menu.doShowMenu=function(h,b,a,l){var c,k,m,g,e,d,j,f;var i=$(b).parent().offset();c=$(h.canvas).offset();f=$(h.container.display.canvas).outerHeight();k=$(b).offset();m=$(b).outerWidth();g=$(a).outerWidth();e=$(a).outerHeight();d=k.left-i.left+(l?((-1*g)+m):0)+"px";if(h.container.showControlBar&&h.container.kioskMode&&h.container.showImageButtons){j=(-1*PAPAYA_SPACING-e)+"px"}else{j=($(b).outerHeight()+(l?0:PAPAYA_SPACING))+"px"}$(a).css({position:"absolute",zIndex:100,left:d,top:j});$(a).hide().fadeIn(200)};papaya.ui.Menu.getColorComponents=function(a){if(a){return a.match(/\d+/g)}return[0,0,0,255]};papaya.ui.Menu.getNiceForegroundColor=function(c){var a=papaya.ui.Menu.getColorComponents(c);var b=(parseInt(a[0])+parseInt(a[1])+parseInt(a[2]))/3;if(b>127){a[0]=a[1]=a[2]=0}else{a[0]=a[1]=a[2]=255}return("rgb("+a[0]+", "+a[1]+", "+a[2]+")")};papaya.ui.Menu.prototype.buildMenuButton=function(){var d,e,b,f,a,c;f="#"+this.buttonId;b=$(f);b.remove();d=null;if(this.icons){d="<span id='"+this.buttonId+"' class='"+PAPAYA_MENU_UNSELECTABLE+" "+PAPAYA_MENU_ICON_CSS+" "+(this.isImageButton?PAPAYA_MENU_BUTTON_CSS:"")+"'"+(this.isRight?" style='float:right'":"")+"><img class='"+PAPAYA_MENU_UNSELECTABLE+"' style='width:"+papaya.viewer.ColorTable.ICON_SIZE+"px; height:"+papaya.viewer.ColorTable.ICON_SIZE+"px; vertical-align:bottom; ";if(!this.isSurfaceButton&&this.dataSource.isSelected(parseInt(this.imageIndex,10))){d+="border:2px solid #FF5A3D;background-color:#eeeeee;padding:1px;"}else{d+="border:2px outset lightgray;background-color:#eeeeee;padding:1px;"}if(this.method){d+=("' src='"+this.icons[papaya.utilities.ObjectUtils.bind(this.viewer,papaya.utilities.ObjectUtils.dereferenceIn(this.viewer,this.method))()?1:0]+"' /></span>")}else{d+=("' src='"+this.icons[0]+"' /></span>")}}else{if(this.isTitleBar){d="<div class='"+PAPAYA_MENU_UNSELECTABLE+" "+PAPAYA_MENU_TITLEBAR_CSS+" "+PAPAYA_TITLEBAR_CSS+"' style='z-index:-1;position:absolute;top:"+(0)+"px;width:"+this.htmlParent.width()+"px;text-align:center;color:"+papaya.ui.Menu.getNiceForegroundColor(this.viewer.bgColor)+"'>"+this.label+"</div>"}else{d="<span id='"+this.buttonId+"' class='"+PAPAYA_MENU_UNSELECTABLE+" "+PAPAYA_MENU_LABEL_CSS+"'>"+this.label+"</span>"}}this.htmlParent.append(d);if(!this.isTitleBar){b=$(f);c="#"+this.buttonId+" > img";a=$(c);e=this;if(this.menuOnHover){a.mouseenter(function(){e.showHoverMenuTimeout=setTimeout(papaya.utilities.ObjectUtils.bind(e,e.showMenu),500)});a.mouseleave(function(){clearTimeout(e.showHoverMenuTimeout);e.showHoverMenuTimeout=null})}b.click(papaya.utilities.ObjectUtils.bind(this,this.doClick));if(this.icons){a.hover(function(){if(e.icons.length>1){$(this).css({"border-color":"gray"})}else{$(this).css({"border-color":"#FF5A3D"})}},papaya.utilities.ObjectUtils.bind(e,function(){if(e.dataSource.isSelected(parseInt(e.imageIndex,10))&&e.dataSource.isSelectable()){$("#"+e.buttonId+" > img").css({border:"2px solid #FF5A3D"})}else{$("#"+e.buttonId+" > img").css({border:"2px outset lightgray"})}}));a.mousedown(function(){$(this).css({border:"2px inset lightgray"})});a.mouseup(function(){$(this).css({border:"2px outset lightgray"})})}else{if(!this.isTitleBar){b.hover(function(){$(this).toggleClass(PAPAYA_MENU_BUTTON_HOVERING_CSS)})}}}return this.buttonId};papaya.ui.Menu.prototype.setMenuButton=function(a){this.buttonId=a};papaya.ui.Menu.prototype.buildMenu=function(){var c,b,a;b="<ul id='"+this.menuId+"' class='"+PAPAYA_MENU_CSS+"'></ul>";this.htmlParent.append(b);if(this.viewer.container.contextManager&&papaya.utilities.PlatformUtils.smallScreen){$("#"+this.menuId)[0].style.width=(this.viewer.viewerDim-10)+"px"}for(c=0;c<this.items.length;c+=1){if(!this.items[c].hide){a=this.items[c].buildHTML(this.menuId)}}};papaya.ui.Menu.prototype.addMenuItem=function(a){if(a instanceof papaya.ui.MenuItemRange){this.rangeItem=a}this.items.push(a)};papaya.ui.Menu.prototype.showContextMenu=function(){var b,d,a,g,f=0,c,e;if(this.items.length>0){a="#"+this.menuId;d=$(a);b=d.is(":visible");d.remove();if(!b){this.htmlParent=this.viewer.container.viewerHtml;this.buildMenu();d=$(a);d.hide();g=d.outerHeight();c=$(this.viewer.canvas).offset();e=$(this.viewer.container.display.canvas).outerHeight();if((this.viewer.contextMenuMousePositionY+g)>(c.top+e+$(this.viewer.canvas).outerHeight()+PAPAYA_SPACING)){f=(this.viewer.contextMenuMousePositionY+g)-(c.top+e+$(this.viewer.canvas).outerHeight()+PAPAYA_SPACING)-1}if(this.viewer.container.contextManager&&papaya.utilities.PlatformUtils.smallScreen){d.css({position:"absolute",zIndex:100,left:this.viewer.canvasRect.left,top:this.viewer.canvasRect.top-f})}else{d.css({position:"absolute",zIndex:100,left:this.viewer.contextMenuMousePositionX+this.viewer.canvasRect.left,top:this.viewer.contextMenuMousePositionY+this.viewer.canvasRect.top-f})}d.hide().fadeIn(200)}}};papaya.ui.Menu.prototype.showMenu=function(){var b,d,c,a;this.viewer.container.toolbar.closeAllMenus();if(this.contextMenu){this.showContextMenu();return}if(this.items.length>0){a="#"+this.menuId;c=$(a);b=c.is(":visible");c.remove();if(!b){d=$("#"+this.buttonId);this.buildMenu();c=$(a);c.hide();papaya.ui.Menu.doShowMenu(this.viewer,d[0],c[0],this.isRight)}}};papaya.ui.Menu.prototype.doClick=function(){var b,c,a;a="#"+this.menuId;c=$(a);b=c.is(":visible");this.callback(this.buttonId);if(this.icons){if(this.method){$("#"+this.buttonId+" > img").attr("src",this.icons[papaya.utilities.ObjectUtils.bind(this.viewer,papaya.utilities.ObjectUtils.dereferenceIn(this.viewer,this.method))()?1:0])}else{$("#"+this.buttonId+" > img").attr("src",this.icons[0])}}if(!this.menuOnHover&&!b){this.showMenu()}};papaya.ui.Menu.prototype.updateRangeItem=function(b,a){if(this.rangeItem){$("#"+this.rangeItem.minId).val(b);$("#"+this.rangeItem.maxId).val(a)}};"use strict";var papaya=papaya||{};papaya.ui=papaya.ui||{};papaya.ui.MenuItem=papaya.ui.MenuItem||function(e,b,c,g,d,f,a){this.viewer=e;this.modifier="";if(!papaya.utilities.StringUtils.isStringBlank(a)){this.modifier="-"+a}this.dataSource=d;this.method=f;if(this.dataSource&&this.method){this.label=this.dataSource[this.method]()}else{this.label=b}this.action=c+this.modifier;this.id=this.action.replace(/ /g,"_")+this.viewer.container.containerIndex;this.callback=g;this.menu=null;this.isContext=false};papaya.ui.MenuItem.prototype.buildHTML=function(d){var c,a,b;if(this.dataSource&&this.method){b=this.dataSource[this.method]()}else{b=this.label}c="<li id='"+this.id+"'><span class='"+PAPAYA_MENU_UNSELECTABLE+"'>"+b+"</span>"+(this.menu?"<span style='float:right'>&nbsp;&#x25B6;</span>":"")+"</li>";$("#"+d).append(c);a=$("#"+this.id);if(this.viewer.container.contextManager&&papaya.utilities.PlatformUtils.smallScreen){a[0].style.width=(this.viewer.viewerDim-10)+"px";a[0].style.fontSize=18+"px"}a.click(papaya.utilities.ObjectUtils.bind(this,function(f){this.doAction(this.isContext&&f.shiftKey)}));a.hover(function(){$(this).toggleClass(PAPAYA_MENU_HOVERING_CSS)})};papaya.ui.MenuItem.prototype.doAction=function(a){if(!a&&!this.menu){this.viewer.showingContextMenu=false}this.callback(this.action,null,a)};"use strict";var papaya=papaya||{};papaya.ui=papaya.ui||{};papaya.ui.MenuItemCheckBox=papaya.ui.MenuItemCheckBox||function(e,b,c,g,d,f,a){this.viewer=e;this.label=b;this.modifier="";if((a!==undefined)&&(a!==null)){this.modifier="-"+a}this.action=c+this.modifier;this.method=f;this.id=this.action.replace(/ /g,"_").replace(/\(/g,"").replace(/\)/g,"")+this.viewer.container.containerIndex;this.callback=g;this.dataSource=d};papaya.ui.MenuItemCheckBox.prototype.buildHTML=function(e){var c,d,b,a;c=this.dataSource[this.method](this.label);d="";if(c){d="checked='checked'"}b="<li id='"+this.id+"'><input type='checkbox' class='"+PAPAYA_MENU_COLORTABLE_CSS+"' name='"+PAPAYA_MENU_COLORTABLE_CSS+"' id='"+this.id+"' value='"+this.id+"' "+d+"><span class='"+PAPAYA_MENU_UNSELECTABLE+"'>&nbsp;"+this.label+"</span></li>";$("#"+e).append(b);a=$("#"+this.id);a.click(papaya.utilities.ObjectUtils.bind(this,this.doAction));a.hover(function(){$(this).toggleClass(PAPAYA_MENU_HOVERING_CSS)})};papaya.ui.MenuItemCheckBox.prototype.doAction=function(){$("."+PAPAYA_MENU_COLORTABLE_CSS).removeAttr("checked");$("#"+this.id+" > input")[0].checked=true;this.callback(this.action,null,true)};"use strict";var papaya=papaya||{};papaya.ui=papaya.ui||{};papaya.ui.MenuItemRadioButton=papaya.ui.MenuItemRadioButton||function(e,b,c,g,d,f,a){this.viewer=e;this.label=b;this.modifier="";if((a!==undefined)&&(a!==null)){this.modifier="-"+a}this.methodParam=this.action=c+this.modifier;this.method=f;this.id=this.action.replace(/ /g,"_").replace(/\(/g,"").replace(/\)/g,"")+this.viewer.container.containerIndex;this.callback=g;this.dataSource=d};papaya.ui.MenuItemRadioButton.prototype.buildHTML=function(e){var c,d,b,a;c=this.dataSource[this.method](this.label);d="";if(c){d="checked='checked'"}b="<li id='"+this.id+"'><input type='radio' class='"+PAPAYA_MENU_COLORTABLE_CSS+"' name='"+PAPAYA_MENU_COLORTABLE_CSS+"' id='"+this.id+"' value='"+this.id+"' "+d+"><span class='"+PAPAYA_MENU_UNSELECTABLE+"'>&nbsp;"+this.label+"</span></li>";$("#"+e).append(b);a=$("#"+this.id);a.click(papaya.utilities.ObjectUtils.bind(this,this.doAction));a.hover(function(){$(this).toggleClass(PAPAYA_MENU_HOVERING_CSS)})};papaya.ui.MenuItemRadioButton.prototype.doAction=function(){$("."+PAPAYA_MENU_COLORTABLE_CSS).removeAttr("checked");$("#"+this.id+" > input")[0].checked=true;this.callback(this.action,null,true)};"use strict";var papaya=papaya||{};papaya.ui=papaya.ui||{};papaya.ui.MenuItemFileChooser=papaya.ui.MenuItemFileChooser||function(e,b,d,f,c,a){this.viewer=e;this.label=b;this.modifier="";if((a!==undefined)&&(a!==null)){this.modifier="-"+a}this.action=d+this.modifier;this.id=this.action.replace(/ /g,"_")+this.viewer.container.containerIndex;this.fileChooserId="fileChooser"+this.label.replace(/ /g,"_").replace(/\./g,"")+this.viewer.container.containerIndex+(c?"folder":"");this.callback=f;this.folder=c};papaya.ui.MenuItemFileChooser.prototype.buildHTML=function(c){var a,b;a=this;b="<li id='"+this.id+"'><span class='"+PAPAYA_MENU_UNSELECTABLE+"'><label class='"+PAPAYA_MENU_FILECHOOSER+"' for='"+this.fileChooserId+"'>"+this.label;if(this.folder){b+="</label><input type='file' id='"+this.fileChooserId+"' multiple='multiple' webkitdirectory directory name='files' /></span></li>"}else{b+="</label><input type='file' id='"+this.fileChooserId+"' multiple='multiple' name='files' /></span></li>"}$("#"+c).append(b);$("#"+this.fileChooserId)[0].onchange=papaya.utilities.ObjectUtils.bind(a,function(){a.callback(a.action,document.getElementById(a.fileChooserId).files)});$("#"+this.id).hover(function(){$(this).toggleClass(PAPAYA_MENU_HOVERING_CSS)})};"use strict";var papaya=papaya||{};papaya.ui=papaya.ui||{};papaya.ui.MenuItemRange=papaya.ui.MenuItemRange||function(e,b,c,g,d,f,a){if(c==="ChangeRangeNeg"){this.negatives=true;a=e.getScreenVolumeIndex(e.screenVolumes[parseInt(a)].negativeScreenVol).toString()}this.viewer=e;this.label=b;this.index=a;this.modifier="";if(a!==undefined){this.modifier="-"+a}this.action=c+this.modifier;this.minId=this.action.replace(/ /g,"_")+"Min"+this.viewer.container.containerIndex;this.maxId=this.action.replace(/ /g,"_")+"Max"+this.viewer.container.containerIndex;this.callback=g;this.dataSource=d;this.method=f;this.id=b+this.modifier+this.viewer.container.containerIndex;this.grabOffset=0;this.screenVol=this.viewer.screenVolumes[this.index]};papaya.ui.MenuItemRange.getRelativeMousePositionFromParentX=function(c,b){var a=c.parent().offset();return papaya.utilities.PlatformUtils.getMousePositionX(b)-a.left};papaya.ui.MenuItemRange.getRelativeMousePositionX=function(c,b){var a=c.offset();return papaya.utilities.PlatformUtils.getMousePositionX(b)-a.left};papaya.ui.MenuItemRange.prototype.buildHTML=function(h){var j,i,c,k,f,d,g,b,l,a,e;d=this.id+"SliderMin";b=this.id+"SliderMax";a=this.id+"Slider";j=this.dataSource[this.method]();c=this;i="<li id='"+this.id+"'><span class='"+PAPAYA_MENU_UNSELECTABLE+"' style=''><input class='"+PAPAYA_MENU_INPUT_FIELD+"' type='text' size='4' id='"+this.minId+"' value='"+j[0]+"' /><div style='display:inline-block;position:relative;width:"+(papaya.viewer.ColorTable.COLOR_BAR_WIDTH+papaya.viewer.ColorTable.ARROW_ICON_WIDTH)+"px;top:-12px;'><img id='"+d+"' class='"+PAPAYA_MENU_UNSELECTABLE+"' style='position:absolute;top:5px;left:"+(c.screenVol.colorTable.minLUT/papaya.viewer.ColorTable.LUT_MAX)*(papaya.viewer.ColorTable.COLOR_BAR_WIDTH-1)+"px;z-index:99' src='"+papaya.viewer.ColorTable.ARROW_ICON+"' /><img id='"+b+"' class='"+PAPAYA_MENU_UNSELECTABLE+"' style='position:absolute;top:5px;left:"+(c.screenVol.colorTable.maxLUT/papaya.viewer.ColorTable.LUT_MAX)*(papaya.viewer.ColorTable.COLOR_BAR_WIDTH-1)+"px;z-index:99' src='"+papaya.viewer.ColorTable.ARROW_ICON+"' /><img id='"+a+"' class='"+PAPAYA_MENU_UNSELECTABLE+"' style='position:absolute;top:0;left:"+(parseInt(papaya.viewer.ColorTable.ARROW_ICON_WIDTH/2,10))+"px;' src='"+this.viewer.screenVolumes[parseInt(this.index,10)].colorBar+"' /></div><input class='"+PAPAYA_MENU_INPUT_FIELD+"' type='text' size='4' id='"+this.maxId+"' value='"+j[1]+"' /></span></li>";$("#"+h).append(i);k=$("#"+this.minId);f=$("#"+this.maxId);g=$("#"+d);l=$("#"+b);e=$("#"+a);if(papaya.utilities.PlatformUtils.ios){k[0].style.width=35+"px";k[0].style.marginRight=4+"px";f[0].style.width=35+"px";f[0].style.marginRight=4+"px"}g.bind(papaya.utilities.PlatformUtils.ios?"touchstart":"mousedown",function(m){c.grabOffset=papaya.ui.MenuItemRange.getRelativeMousePositionX(g,m);$(window).bind(papaya.utilities.PlatformUtils.ios?"touchmove":"mousemove",function(n){var o,p;p=(c.screenVol.colorTable.maxLUT/papaya.viewer.ColorTable.LUT_MAX)*(papaya.viewer.ColorTable.COLOR_BAR_WIDTH-1);o=(papaya.ui.MenuItemRange.getRelativeMousePositionFromParentX(g,n)-c.grabOffset);if(o<0){o=0}else{if(o>=papaya.viewer.ColorTable.COLOR_BAR_WIDTH){o=(papaya.viewer.ColorTable.COLOR_BAR_WIDTH-1)}else{if(o>p){o=p}}}c.screenVol.updateMinLUT(Math.round((o/(papaya.viewer.ColorTable.COLOR_BAR_WIDTH-1))*papaya.viewer.ColorTable.LUT_MAX));g.css({left:o+"px"});c.viewer.drawViewer(false,true);k.val(c.dataSource[c.method]()[0]);c.screenVol.updateColorBar();e.attr("src",c.screenVol.colorBar)});return false});l.bind(papaya.utilities.PlatformUtils.ios?"touchstart":"mousedown",function(m){c.grabOffset=papaya.ui.MenuItemRange.getRelativeMousePositionX(l,m);$(window).bind(papaya.utilities.PlatformUtils.ios?"touchmove":"mousemove",function(o){var p,n;n=(c.screenVol.colorTable.minLUT/papaya.viewer.ColorTable.LUT_MAX)*(papaya.viewer.ColorTable.COLOR_BAR_WIDTH-1);p=(papaya.ui.MenuItemRange.getRelativeMousePositionFromParentX(l,o)-c.grabOffset);if(p<0){p=0}else{if(p>=papaya.viewer.ColorTable.COLOR_BAR_WIDTH){p=(papaya.viewer.ColorTable.COLOR_BAR_WIDTH-1)}else{if(p<n){p=n}}}c.screenVol.updateMaxLUT(Math.round((p/(papaya.viewer.ColorTable.COLOR_BAR_WIDTH-1))*papaya.viewer.ColorTable.LUT_MAX));l.css({left:p+"px"});c.viewer.drawViewer(false,true);f.val(c.dataSource[c.method]()[1]);c.screenVol.updateColorBar();e.attr("src",c.screenVol.colorBar)});return false});$(window).bind(papaya.utilities.PlatformUtils.ios?"touchend":"mouseup",function(){$(window).unbind(papaya.utilities.PlatformUtils.ios?"touchmove":"mousemove")});$("#"+this.id).hover(function(){$(this).toggleClass(PAPAYA_MENU_HOVERING_CSS)});k.change(papaya.utilities.ObjectUtils.bind(this,function(){c.rangeChanged(true)}));f.change(papaya.utilities.ObjectUtils.bind(this,function(){c.rangeChanged(false)}));k.keyup(papaya.utilities.ObjectUtils.bind(this,function(m){if(m.keyCode===13){c.rangeChanged(false);c.viewer.container.toolbar.closeAllMenus()}}));f.keyup(papaya.utilities.ObjectUtils.bind(this,function(m){if(m.keyCode===13){c.rangeChanged(false);c.viewer.container.toolbar.closeAllMenus()}}));if(!papaya.utilities.PlatformUtils.ios){setTimeout(function(){k.focus();k.select()},10)}};papaya.ui.MenuItemRange.prototype.rangeChanged=function(a){this.updateDataSource(a);this.viewer.drawViewer(true);this.resetSlider()};papaya.ui.MenuItemRange.prototype.updateDataSource=function(c){var a,b,e,d;d=$("#"+this.minId);e=$("#"+this.maxId);b=parseFloat(d.val());if(isNaN(b)){b=this.dataSource.screenMin}a=parseFloat(e.val());if(isNaN(a)){a=this.dataSource.screenMax}d.val(b);e.val(a);if(this.negatives){this.dataSource.setScreenRangeNegatives(b,a)}else{this.dataSource.setScreenRange(b,a)}if(c){e.focus();e.select()}};papaya.ui.MenuItemRange.prototype.resetSlider=function(){var e,b,f,a,c,d;e=this.id+"SliderMin";f=this.id+"SliderMax";c=this.id+"Slider";b=$("#"+e);a=$("#"+f);d=$("#"+c);b.css({left:0});a.css({left:(papaya.viewer.ColorTable.COLOR_BAR_WIDTH-1)+"px"});this.screenVol.resetDynamicRange();d.attr("src",this.screenVol.colorBar)};"use strict";var papaya=papaya||{};papaya.ui=papaya.ui||{};papaya.ui.MenuItemSlider=papaya.ui.MenuItemSlider||function(e,b,c,g,d,f,a){if(c==="alphaneg"){c="alpha";a=e.getScreenVolumeIndex(e.screenVolumes[parseInt(a)].negativeScreenVol).toString()}this.viewer=e;this.label=b;this.index=a;this.modifier="";if(!papaya.utilities.StringUtils.isStringBlank(a)){this.modifier="-"+a}this.dataSource=d;this.method=f;this.action=c;this.event=((this.action.toLowerCase().indexOf("alpha")!=-1)||this.viewer.screenVolumes[0].isHighResSlice)?"change":"input change";this.id=this.action.replace(/ /g,"_")+this.viewer.container.containerIndex+"_"+this.index;this.callback=g;this.screenVol=d};papaya.ui.MenuItemSlider.prototype.buildHTML=function(g){var d,c,a,b,e,f;f=this.event;a=this.id+"Slider";d="<li id='"+this.id+"'><span style='padding-right:5px;' class='"+PAPAYA_MENU_UNSELECTABLE+"'>"+this.label+":</span><input min='0' max='100' value='"+parseInt((1-this.screenVol[this.action])*100,10)+"' id='"+a+"' class='"+PAPAYA_MENU_SLIDER+"' type='range' /></li>";$("#"+g).append(d);c=$("#"+this.id);c.hover(function(){$(this).toggleClass(PAPAYA_MENU_HOVERING_CSS)});b=$("#"+a);e=this;$("#"+this.id+"Slider").on(f,function(){e.screenVol[e.action]=1-(b.val()/100);e.doAction();e.viewer.drawViewer(true,false)})};papaya.ui.MenuItemSlider.prototype.doAction=function(){this.callback(this.action,null,true)};"use strict";var papaya=papaya||{};papaya.ui=papaya.ui||{};papaya.ui.MenuItemSpacer=papaya.ui.MenuItemSpacer||function(){};papaya.ui.MenuItemSpacer.prototype.buildHTML=function(b){var a;a="<div class='"+PAPAYA_MENU_SPACER_CSS+" "+PAPAYA_MENU_UNSELECTABLE+"'></div>";$("#"+b).append(a)};"use strict";var papaya=papaya||{};papaya.ui=papaya.ui||{};var papayaLoadableImages=papayaLoadableImages||[];papaya.ui.Toolbar=papaya.ui.Toolbar||function(a){this.container=a;this.viewer=a.viewer;this.imageMenus=null;this.surfaceMenus=null;this.spaceMenu=null};papaya.ui.Toolbar.SIZE=22;papaya.ui.Toolbar.ICON_IMAGESPACE="data:image/gif;base64,R0lGODlhFAAUAPcAMf//////GP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2f/ZNbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1qWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpVpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACoALAAAAAAUABQAAAipAFUIHEiwoMB/A1coXLiwisOHVf4hVLFCosWLGC9SzMgR48Z/VEJSUVjFj0mTESdWBCmS5EmU/6oIXCly5IqSLx/OlFjT5Us/DneybIkzp8yPDElChCjwj8Q/UKOqmkqVatOnUaGqmsaVq1UVTv+lGjv2z9SuXlVdFUs2ldmtaKeubev2bFy1YCXSfYt2mty8/6CS5XtXRcasVRMftJj1beK/hicanKwiIAA7";papaya.ui.Toolbar.ICON_WORLDSPACE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAplJREFUeNqM1H1ozVEcx/Hr3p+7O08jQzbzMErznEItK0+Fv0Ye/tki20ia//wn+YMSaXkoEiKkkCVKZhOipsnDstnFagzlrmGMNfeO6/Nd71unu2s59bq7O517ft/z/X7Pz+dLPUbLJrkqX+SbdEubfJZK2cC6PiOQYm61HJcpkintEpcmCcpryZV5spaHhvvbdJ9slsPyU67wgPlEli0X5aiMkMeyXSbKnVRRVxDRRtkm5czbZrv5vkgu8z1P9stWfleRHGkhT3xCLu1YzZIjpfKWnA6VEn43mwcWEaWlo1Ve2YZj5Jms53iP5BjFsFz9lg/yDj0U7JbslFpZQyBP2a83khoiLiWPA/h/OVGOk+GwnJ5y1iyRS5Im1VLm18cKOc+CYrlGjnxUuZPIOlAn0yWdNXdlrMyRE7LM00eBjBT7niFVTvHsKJ8k6sw1yC4ZIl0EUMOcRT/X44v14xEZSBWfk+d8NpzKujgPGiYrOXI+XTGeGtjpewtjm16Qh3JT3sgvickfNo4yF6V4PVyE2wQUZvP7FmmIa/iDIpwkHRPkrC2iEIlhEZ2mtarIsz3sOoX0PPrP7nAWPRYjj51E85JiJEYO0VsfR5hL5wZal3T7aZl10kLiEyNEHtOSbt4g/gaduRjzC+S9RwtZ332XBxQpzGZ+p72SR5BumUYHLaaDSiySUXKPig6Wj+SmjX5s4BQB0pFBQVo4dhenspfKC1kaYLKVa9pOAW5Q2Ww2qeU92kHbzZRDvK2sBSfLDLtNUp/82rOj7nDm9tJi7lhoeWNzG7Pkqxz8R5p8ByhcGVd0CzkOOWv28KBJvNGa+V2/Y5U08vQm8mgvmTNyjpxHSFUj6/9rZPKerGSTuCPCi7qIdX3GXwEGAPFYt+/OgAXDAAAAAElFTkSuQmCC";papaya.ui.Toolbar.ICON_EXPAND="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAE00lEQVR42u2djW3UQBCFJx3QAemAdJBQAVABTgekAqCC0EGOCoAKWDqADkIHKQGPfKdEh3Nr7493Z977pJWQwtk7+77ETs6zdyYEmrPWEyBtoQDgUABwKAA4FAAcCgAOBQCHAoBDAcChAOBQAHAoADgUABwKAE6uALfjuGg094dx7Mbxo9H5D7wZxzCOF43O/3scN6kvzhXg5ziuGhV+4K20k0DD/964/jCO16kv9iCABvCu0bm/ySRgS4KAC7Abx3Wjc9/J9OO/JUGABXjYn/9Po/O/kimAVtd/EQMC6E1Krevkbhx/Kx17KSpBrcuAHjd2kx2kcwGUYRxfy60LBO9lEjxGEAMCKINQgqUsDV8JYkQAZRBKEGNN+EqQzgTQa/6p69YglOA5YuHPrW2QzgT4NI77SCGDUIJjYuEP4ziXaX2fEqRDAT4vLIgSTCxdq49iSIA1hSGzZo3MCbC2QDTWro1JAVIKRSBlTcwKkFqwV1LXwrQAOYV7ImcNzAuQuwDWya3dhQAlFsIiJWp2I0CpBbFCqVpdCVByYXqmZI3uBCi9QL1RujaXAigeJahRk1sBFE8S1KrFtQCKBwlq1uBeAMWyBLXnDiGAYlGCLeYMI4BiSYKt5golgGJBgi3nCCeA0rMEW88NUgClRwlazKk7AeaaI3WCpQVQepKg1VzmBMhqjs0V4Lg9unavXg8StJzDS5keDX/ai5jVHl9ih5DDBgka/hep36jZMoAeBNRexA8ySaBzydobweoWMS2C6CH84lgVQNkyEJfhK5YFULYIxm34inUBlFhA55K+h8DcTddTBjEcvuJBAOWUBIOkh3Qp0+/ZpY/bDV4EUJ6T4GocvxKP+ZwAgzgIX/EkgKIS6K+ihx/ZQTL+Srbn+K+dgzgJX/EmgKLX7fP9v1O/84+53B8zSPs9iYriUQCyAgoADgUAhwKAQwHAoQDgUABwKAA4FAAcCgAOBQCHAoBDAcChAOB4FEDfDr6Sacfykm8Hy/6YfDu4Y46fCgpS9oEQ7X3QZ/L5QEiH8JGwBLwIcOqh0CtJF6DWw6bd4EGAUyHpj2z9iJWcx8LvT3x9EOMSWBeAjSGZWBaArWEFsCoAm0MLwfZwO+c+0FV7+NwGETk3XTF6CKDlHOY+rLrpBhHcImbbuXS3RQw3idp2Tt1tEsVt4rhNHDeK3HCOUAJYCH/rucIIYCn8LecMIYDF8Leau3sBLIe/RQ2uBfAQfu1a3ArgKfyaNbkUwGP4tWpzJ4Dn8GvU6EoAhPBL1+pGAKTwS9bsQgDE8EvVbl4A5PBLrIFpARj+I6lrYVYAhv8/KWtiUgCG/zxr18acAAw/zpo1MiUAw1/O0rUyI8D9woLII0skOBcDAuhHrFxECmH488QkmFvbIJ0JcIpBGH6MmATHBDEiwCAMfylrJAhiQIBBGP5alkoQpHMB9Lr1PX6oJPS4tXsRY+geAkOlY2vX1UXk/wTpXICa1P6w6hhzvXpbo+eHFUDZjeO60bnvpN53/1KCgAuQ1RyZyVxz7NYEARcgqz06k+P2+BYEaSjArcRvUmqh1/+dtAv/wGGDjFb3AXqTfZP6YqtbxJBCUABwKAA4FAAcCgAOBQCHAoBDAcChAOBQAHAoADgUABwKAA4FAIcCgPMPvdAfn3qMP2kAAAAASUVORK5CYII=";papaya.ui.Toolbar.ICON_COLLAPSE="data:image/png;base64,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";papaya.ui.Toolbar.FILE_MENU_DATA={label:"File",icons:null,items:[{label:"Add Image...",action:"OpenImage",type:"file",hide:papaya.utilities.PlatformUtils.ios},{label:"Add Surface...",action:"OpenSurface",type:"file",hide:papaya.utilities.PlatformUtils.ios},{label:"Add DICOM Folder...",action:"OpenFolder",type:"folder",hide:((papaya.utilities.PlatformUtils.browser!=="Chrome")||((typeof(daikon)==="undefined")))},{label:"Add DTI Vector Series...",action:"OpenDTI",type:"file"},{type:"spacer"},{label:"Close All",action:"CloseAllImages"}]};papaya.ui.Toolbar.RGB_FILE_MENU_DATA={label:"File",icons:null,items:[{label:"Close All",action:"CloseAllImages"}]};papaya.ui.Toolbar.MENU_DATA={menus:[papaya.ui.Toolbar.FILE_MENU_DATA,{label:"View",icons:null,items:[{label:"Orientation",action:"ShowOrientation",type:"checkbox",method:"isShowingOrientation"},{label:"Crosshairs",action:"ShowCrosshairs",type:"checkbox",method:"isShowingCrosshairs"},{label:"Ruler",action:"ShowRuler",type:"checkbox",method:"isShowingRuler"},{type:"spacer",required:"hasSurface"},{label:"Surface Planes",action:"ShowSurfacePlanes",type:"checkbox",method:"isShowingSurfacePlanes",required:"hasSurface"}]},{label:"Settings",icons:null,items:[{label:"Viewer Preferences",action:"Preferences"},{label:"Surface Preferences",action:"SurfacePreferences",required:"hasSurface"}]},{label:"Help",icons:null,items:[{label:"Show Keyboard Reference",action:"KeyboardRef"},{label:"Show Mouse Reference",action:"MouseRef"},{label:"Show License",action:"License"}]},{label:"TITLE",icons:null,titleBar:"true"},{label:"EXPAND",icons:[papaya.ui.Toolbar.ICON_EXPAND,papaya.ui.Toolbar.ICON_COLLAPSE],items:[],method:"isCollapsable",required:"isExpandable"},{label:"SPACE",icons:[papaya.ui.Toolbar.ICON_IMAGESPACE,papaya.ui.Toolbar.ICON_WORLDSPACE],items:[],method:"isWorldMode",menuOnHover:true}]};papaya.ui.Toolbar.MENU_DATA_KIOSK={menus:[{label:"EXPAND",icons:[papaya.ui.Toolbar.ICON_EXPAND,papaya.ui.Toolbar.ICON_COLLAPSE],items:[],method:"isCollapsable",required:"isExpandable"}]};papaya.ui.Toolbar.OVERLAY_IMAGE_MENU_DATA={items:[{label:"Show Header",action:"ShowHeader"},{label:"Show Image Info",action:"ImageInfo"},{type:"spacer",required:"isParametricCombined"},{label:"DisplayRange",action:"ChangeRange",type:"displayrange",method:"getRange"},{label:"Load Negatives",action:"LoadNegatives",required:"canCurrentOverlayLoadNegatives"},{label:"Transparency",action:"alpha",type:"range",method:"getAlpha"},{label:"Color Table",action:"ColorTable",items:[],required:"isNonParametricCombined"},{type:"spacer",required:"isParametricCombined"},{label:"DisplayRange",action:"ChangeRangeNeg",type:"displayrange",method:"getRangeNegative",required:"isParametricCombined"},{label:"Transparency",action:"alphaneg",type:"range",method:"getAlpha",required:"isParametricCombined"},{type:"spacer",required:"isParametricCombined"},{label:"Hide Overlay",action:"ToggleOverlay",method:"getHiddenLabel"},{label:"Close Overlay",action:"CloseOverlay",required:"isDesktopMode"},{label:"Open in Mango",action:"OpenInMango",required:"canOpenInMango"}]};papaya.ui.Toolbar.BASE_IMAGE_MENU_DATA={items:[{label:"Show Header",action:"ShowHeader"},{label:"Show Image Info",action:"ImageInfo"},{label:"DisplayRange",action:"ChangeRange",type:"displayrange",method:"getRange"},papaya.ui.Toolbar.OVERLAY_IMAGE_MENU_DATA.items[6],{label:"Rotation",action:"Rotation",items:[{label:"About X Axis",action:"rotationX",type:"range",method:"getRotationX"},{label:"About Y Axis",action:"rotationY",type:"range",method:"getRotationY"},{label:"About Z Axis",action:"rotationZ",type:"range",method:"getRotationZ"},{label:"Reset Transform",action:"ResetTransform"},{label:"Rotate About Center",action:"Rotate About Center",type:"radiobutton",method:"isRotatingAbout"},{label:"Rotate About Origin",action:"Rotate About Origin",type:"radiobutton",method:"isRotatingAbout"},{label:"Rotate About Crosshairs",action:"Rotate About Crosshairs",type:"radiobutton",method:"isRotatingAbout"}]},{label:"Open in Mango",action:"OpenInMango",required:"canOpenInMango"}]};papaya.ui.Toolbar.RGB_IMAGE_MENU_DATA={items:[{label:"Show Header",action:"ShowHeader"},{label:"Show Image Info",action:"ImageInfo"},{label:"Open in Mango",action:"OpenInMango",required:"canOpenInMango"}]};papaya.ui.Toolbar.SURFACE_MENU_DATA={items:[{label:"Show Surface Info",action:"SurfaceInfo"},{label:"Transparency",action:"alpha",type:"range",method:"getAlpha"}]};papaya.ui.Toolbar.DTI_IMAGE_MENU_DATA={items:[{label:"Show Header",action:"ShowHeader"},{label:"Show Image Info",action:"ImageInfo"},{label:"Display Colors",action:"DTI-RGB",type:"checkbox",method:"isDTIRGB"},{label:"Display Lines",action:"DTI-Lines",type:"checkbox",method:"isDTILines"},{label:"Display Lines &amp; Colors",action:"DTI-LinesColors",type:"checkbox",method:"isDTILinesAndRGB"},{label:"Transparency",action:"alpha",type:"range",method:"getAlpha",required:"canCurrentOverlayLoadMod"},{label:"Modulate with...",action:"DTI-Mod",type:"file",hide:papaya.utilities.PlatformUtils.ios,required:"canCurrentOverlayLoadMod"},{label:"Modulation",action:"dtiAlphaFactor",type:"range",method:"getDtiAlphaFactor",required:"canCurrentOverlayModulate"},{label:"Open in Mango",action:"OpenInMango",required:"canOpenInMango"}]};papaya.ui.Toolbar.PREFERENCES_DATA={items:[{label:"Coordinate display of:",field:"atlasLocks",options:["Mouse","Crosshairs"]},{label:"Scroll wheel behavior:",field:"scrollBehavior",options:["Zoom","Increment Slice"],disabled:"container.disableScrollWheel"},{spacer:"true"},{label:"Smooth display:",field:"smoothDisplay",options:["Yes","No"]},{label:"Radiological display:",field:"radiological",options:["Yes","No"]}]};papaya.ui.Toolbar.PREFERENCES_SURFACE_DATA={items:[{label:"Background color:",field:"surfaceBackgroundColor",options:["Black","Dark Gray","Gray","Light Gray","White"]}]};papaya.ui.Toolbar.IMAGE_INFO_DATA={items:[{label:"Filename:",field:"getFilename",readonly:"true"},{spacer:"true"},{label:"Image Dims:",field:"getImageDimensionsDescription",readonly:"true"},{label:"Voxel Dims:",field:"getVoxelDimensionsDescription",readonly:"true"},{spacer:"true"},{label:"Byte Type:",field:"getByteTypeDescription",readonly:"true"},{label:"Byte Order:",field:"getByteOrderDescription",readonly:"true"},{spacer:"true"},{label:"Orientation:",field:"getOrientationDescription",readonly:"true"},{spacer:"true"},{label:"Notes:",field:"getImageDescription",readonly:"true"}]};papaya.ui.Toolbar.SERIES_INFO_DATA={items:[{label:"Filename:",field:"getFilename",readonly:"true"},{label:"File Length:",field:"getFileLength",readonly:"true"},{spacer:"true"},{label:"Image Dims:",field:"getImageDimensionsDescription",readonly:"true"},{label:"Voxel Dims:",field:"getVoxelDimensionsDescription",readonly:"true"},{label:"Series Points:",field:"getSeriesDimensionsDescription",readonly:"true"},{label:"Series Point Size:",field:"getSeriesSizeDescription",readonly:"true"},{spacer:"true"},{label:"Byte Type:",field:"getByteTypeDescription",readonly:"true"},{label:"Byte Order:",field:"getByteOrderDescription",readonly:"true"},{label:"Compressed:",field:"getCompressedDescription",readonly:"true"},{spacer:"true"},{label:"Orientation:",field:"getOrientationDescription",readonly:"true"},{label:"Notes:",field:"getImageDescription",readonly:"true"}]};papaya.ui.Toolbar.SURFACE_INFO_DATA={items:[{label:"Filename:",field:"getSurfaceFilename",readonly:"true"},{spacer:"true"},{label:"Points:",field:"getSurfaceNumPoints",readonly:"true"},{label:"Triangles:",field:"getSurfaceNumTriangles",readonly:"true"}]};papaya.ui.Toolbar.HEADER_DATA={items:[{label:"",field:"getHeaderDescription",readonly:"true"}]};papaya.ui.Toolbar.LICENSE_DATA={items:[{label:"",field:"getLicense",readonly:"true"}]};papaya.ui.Toolbar.KEYBOARD_REF_DATA={items:[{label:"",field:"getKeyboardReference",readonly:"true"}]};papaya.ui.Toolbar.MOUSE_REF_DATA={items:[{label:"",field:"getMouseReference",readonly:"true"}]};papaya.ui.Toolbar.applyContextState=function(b){var a;b.contextMenu=true;if(b.items){for(a=0;a<b.items.length;a+=1){if(b.items[a].menu){papaya.ui.Toolbar.applyContextState(b.items[a].menu)}else{b.items[a].isContext=true}}}};papaya.ui.Toolbar.prototype.buildToolbar=function(){var a;this.imageMenus=null;this.surfaceMenus=null;this.spaceMenu=null;this.container.toolbarHtml.find("."+PAPAYA_MENU_ICON_CSS).remove();this.container.toolbarHtml.find("."+PAPAYA_MENU_LABEL_CSS).remove();this.container.toolbarHtml.find("."+PAPAYA_TITLEBAR_CSS).remove();if(this.container.kioskMode){for(a=0;a<papaya.ui.Toolbar.MENU_DATA_KIOSK.menus.length;a+=1){this.buildMenu(papaya.ui.Toolbar.MENU_DATA_KIOSK.menus[a],null,this.viewer,null)}}else{if((this.container.viewer.screenVolumes.length>0)&&this.container.viewer.screenVolumes[0].rgb){papaya.ui.Toolbar.MENU_DATA.menus[0]=papaya.ui.Toolbar.RGB_FILE_MENU_DATA}else{if(this.container.noNewFiles){papaya.ui.Toolbar.MENU_DATA.menus[0]=papaya.ui.Toolbar.RGB_FILE_MENU_DATA}else{papaya.ui.Toolbar.MENU_DATA.menus[0]=papaya.ui.Toolbar.FILE_MENU_DATA}this.buildOpenMenuItems(papaya.ui.Toolbar.MENU_DATA)}for(a=0;a<papaya.ui.Toolbar.MENU_DATA.menus.length;a+=1){this.buildMenu(papaya.ui.Toolbar.MENU_DATA.menus[a],null,this.viewer,null)}this.buildAtlasMenu()}this.buildColorMenuItems();this.container.titlebarHtml=this.container.containerHtml.find("."+PAPAYA_TITLEBAR_CSS);if(this.container.getViewerDimensions()[0]<600){this.container.titlebarHtml.css({visibility:"hidden"})}else{this.container.titlebarHtml.css({visibility:"visible"})}};papaya.ui.Toolbar.prototype.buildAtlasMenu=function(){if(papaya.data){if(papaya.data.Atlas){var a=this.spaceMenu.items;a[0]={label:papaya.data.Atlas.labels.atlas.header.name,action:"AtlasChanged-"+papaya.data.Atlas.labels.atlas.header.name,type:"radiobutton",method:"isUsingAtlas"};if(papaya.data.Atlas.labels.atlas.header.transformedname){a[1]={label:papaya.data.Atlas.labels.atlas.header.transformedname,action:"AtlasChanged-"+papaya.data.Atlas.labels.atlas.header.transformedname,type:"radiobutton",method:"isUsingAtlas"}}}}};papaya.ui.Toolbar.prototype.buildColorMenuItems=function(){var a,c,e,b,d;d=this.container.params.luts;if(d){for(c=0;c<d.length;c+=1){papaya.viewer.ColorTable.addCustomLUT(d[c])}}e=papaya.viewer.ColorTable.TABLE_ALL;a=papaya.ui.Toolbar.OVERLAY_IMAGE_MENU_DATA.items;for(c=0;c<a.length;c+=1){if(a[c].label==="Color Table"){a=a[c].items;break}}for(c=0;c<e.length;c+=1){b={label:e[c].name,action:"ColorTable-"+e[c].name,type:"radiobutton",method:"isUsingColorTable"};a[c]=b}};papaya.ui.Toolbar.prototype.buildOpenMenuItems=function(c){var d,b,a;for(d=0;d<c.menus.length;d+=1){if(c.menus[d].label==="File"){b=c.menus[d].items;break}}if(b){for(d=0;d<papayaLoadableImages.length;d+=1){if(!papayaLoadableImages[d].hide){if(papayaLoadableImages[d].surface){a="Add Surface "+papayaLoadableImages[d].nicename;if(!this.menuContains(b,a)){b.splice(2,0,{label:a,action:"OpenSurface-"+papayaLoadableImages[d].name})}}else{a="Add "+papayaLoadableImages[d].nicename;if(!this.menuContains(b,a)){b.splice(2,0,{label:a,action:"Open-"+papayaLoadableImages[d].name})}}}}}};papaya.ui.Toolbar.prototype.menuContains=function(b,a){var c;if(b){for(c=0;c<b.length;c+=1){if(b[c].label===a){return true}}}return false};papaya.ui.Toolbar.prototype.buildMenu=function(d,e,g,a,c){var f=null,b;if(c===undefined){c=false}if(!d.required||((papaya.utilities.ObjectUtils.bind(this.container,papaya.utilities.ObjectUtils.dereferenceIn(this.container,d.required)))()===true)){f=new papaya.ui.Menu(this.viewer,d,papaya.utilities.ObjectUtils.bind(this,this.doAction),this.viewer,a);if(d.label==="SPACE"){this.spaceMenu=d}if(!c){if(e){f.setMenuButton(e)}else{e=f.buildMenuButton()}}b=d.items;if(b){this.buildMenuItems(f,b,e,g,a)}}return f};papaya.ui.Toolbar.prototype.buildMenuItems=function(g,b,e,f,a){var h,d,c;if(a===undefined){a=""}for(h=0;h<b.length;h+=1){if(!b[h].required||((papaya.utilities.ObjectUtils.bind(this.container,papaya.utilities.ObjectUtils.dereferenceIn(this.container,b[h].required)))(parseInt(a))===true)){if(b[h].type==="spacer"){d=new papaya.ui.MenuItemSpacer()}else{if(b[h].type==="radiobutton"){d=new papaya.ui.MenuItemRadioButton(this.viewer,b[h].label,b[h].action,papaya.utilities.ObjectUtils.bind(this,this.doAction),f,b[h].method,a)}else{if(b[h].type==="checkbox"){d=new papaya.ui.MenuItemCheckBox(this.viewer,b[h].label,b[h].action,papaya.utilities.ObjectUtils.bind(this,this.doAction),f,b[h].method,a)}else{if(b[h].type==="file"){if((!b[h].hide)&&(!b[h].required||((papaya.utilities.ObjectUtils.bind(this.container,papaya.utilities.ObjectUtils.dereferenceIn(this.container,b[h].required)))(parseInt(a))===true))){d=new papaya.ui.MenuItemFileChooser(this.viewer,b[h].label,b[h].action,papaya.utilities.ObjectUtils.bind(this,this.doAction),false,a)}}else{if(b[h].type==="folder"){if((!b[h].hide)&&(!b[h].required||((papaya.utilities.ObjectUtils.bind(this.container,papaya.utilities.ObjectUtils.dereferenceIn(this.container,b[h].required)))(parseInt(a))===true))){d=new papaya.ui.MenuItemFileChooser(this.viewer,b[h].label,b[h].action,papaya.utilities.ObjectUtils.bind(this,this.doAction),true,a)}else{d=null}}else{if(b[h].type==="displayrange"){if(this.viewer.screenVolumes[a].supportsDynamicColorTable()){d=new papaya.ui.MenuItemRange(this.viewer,b[h].label,b[h].action,papaya.utilities.ObjectUtils.bind(this,this.doAction),f,b[h].method,a)}else{d=null}}else{if(b[h].type==="range"){if(papaya.utilities.PlatformUtils.isInputRangeSupported()){d=new papaya.ui.MenuItemSlider(this.viewer,b[h].label,b[h].action,papaya.utilities.ObjectUtils.bind(this,this.doAction),f,b[h].method,a)}}else{d=new papaya.ui.MenuItem(this.viewer,b[h].label,b[h].action,papaya.utilities.ObjectUtils.bind(this,this.doAction),f,b[h].method,a)}}}}}}}}else{d=null}if(d){g.addMenuItem(d);if(b[h].items){c=this.buildMenu(b[h],e,f,a);d.menu=c;d.callback=papaya.utilities.ObjectUtils.bind(c,c.showMenu)}}}};papaya.ui.Toolbar.prototype.updateImageButtons=function(){this.container.toolbarHtml.find("."+PAPAYA_MENU_BUTTON_CSS).remove();this.doUpdateImageButtons();this.updateSurfaceButtons()};papaya.ui.Toolbar.prototype.doUpdateImageButtons=function(){var b,d,c,a;this.imageMenus=[];if(this.container.showImageButtons){for(b=this.viewer.screenVolumes.length-1;b>=0;b-=1){d=this.viewer.screenVolumes[b];c=d.icon;a={menus:[{label:"ImageButton",icons:[c],items:null,imageButton:true}]};if(b===0){if(d.rgb){a.menus[0].items=papaya.ui.Toolbar.RGB_IMAGE_MENU_DATA.items}else{if(d.dti){a.menus[0].items=papaya.ui.Toolbar.DTI_IMAGE_MENU_DATA.items}else{a.menus[0].items=papaya.ui.Toolbar.BASE_IMAGE_MENU_DATA.items}}}else{if(d.dti){a.menus[0].items=papaya.ui.Toolbar.DTI_IMAGE_MENU_DATA.items}else{a.menus[0].items=papaya.ui.Toolbar.OVERLAY_IMAGE_MENU_DATA.items}}if(!this.container.combineParametric||!d.parametric){this.imageMenus.push((this.buildMenu(a.menus[0],null,d,b.toString())))}}}};papaya.ui.Toolbar.prototype.updateSurfaceButtons=function(){var d,f,e,c=this;this.surfaceMenus=[];if(this.container.showImageButtons){for(d=this.viewer.surfaces.length-1;d>=0;d-=1){var a=this.viewer.surfaces[d];if(a.staticIcon){var b=function(h,g){c.surfaceMenus.push((c.buildMenu({label:"SurfaceButton",icons:[h],items:papaya.ui.Toolbar.SURFACE_MENU_DATA.items,imageButton:true,surfaceButton:true},null,c.viewer.surfaces[g],g.toString())))};papaya.viewer.ScreenVolume.makeStaticIcon(a.staticIcon,b,d)}else{e=a.solidColor;if(e===null){e=[0.5,0.5,0.5]}f=papaya.viewer.ScreenVolume.makeSolidIcon(e[0],e[1],e[2]);this.surfaceMenus.push((this.buildMenu({label:"SurfaceButton",icons:[f],items:papaya.ui.Toolbar.SURFACE_MENU_DATA.items,imageButton:true,surfaceButton:true},null,a,d.toString())))}}}};papaya.ui.Toolbar.prototype.closeAllMenus=function(d){var c,a,e,b;c=this.container.toolbarHtml.find("."+PAPAYA_MENU_CSS);c.hide(100);c.remove();if(this.container.showControlBar){c=this.container.sliderControlHtml.find("."+PAPAYA_MENU_CSS);c.hide(100);c.remove()}a=this.container.toolbarHtml.find("."+PAPAYA_DIALOG_CSS);a.hide(100);a.remove();e=this.container.toolbarHtml.find("."+PAPAYA_DIALOG_BACKGROUND);e.hide(100);e.remove();if(!d){b=this.container.viewerHtml.find("."+PAPAYA_MENU_CSS);if(b){b.hide(100);b.remove()}}};papaya.ui.Toolbar.prototype.isShowingMenus=function(){var a,b;a=this.container.toolbarHtml.find("."+PAPAYA_MENU_CSS).is(":visible");b=this.container.toolbarHtml.find("."+PAPAYA_DIALOG_CSS).is(":visible");return(a||b)};papaya.ui.Toolbar.prototype.doAction=function(g,f,c){var b,k,i,l,j,a,d,h,e;if(!c){this.closeAllMenus()}if(g){if(g.startsWith("ImageButton")){b=parseInt(g.substr(g.length-2,1),10);this.viewer.setCurrentScreenVol(b);this.updateImageButtons()}else{if(g.startsWith("OpenSurface-")){j=g.substring(g.indexOf("-")+1);this.viewer.loadSurface(j)}else{if(g.startsWith("Open-")){j=g.substring(g.indexOf("-")+1);this.viewer.loadImage(j)}else{if(g==="OpenImage"){this.container.display.drawProgress(0.1,"Loading");this.viewer.loadImage(f)}else{if(g==="OpenDTI"){this.container.display.drawProgress(0.1,"Loading");this.viewer.loadingDTI=true;this.viewer.loadImage(f)}else{if(g==="OpenSurface"){this.container.display.drawProgress(0.1,"Loading");this.viewer.loadSurface(f)}else{if(g==="OpenFolder"){a=[];for(d=0;d<f.length;d+=1){e=false;for(h=0;h<papaya.Container.ignorePatterns.length;h+=1){if(papaya.Container.ignorePatterns[h].test(f[d].name)){e=true}}if(e){console.log("Ignoring file "+f[d].name)}else{a.push(f[d])}}this.container.display.drawProgress(0.1,"Loading");this.viewer.loadImage(a)}else{if(g.startsWith("ColorTable")){k=g.substring(g.indexOf("-")+1,g.lastIndexOf("-"));b=g.substring(g.lastIndexOf("-")+1);this.viewer.screenVolumes[b].changeColorTable(this.viewer,k);this.updateImageButtons()}else{if(g.startsWith("CloseAllImages")){papaya.Container.resetViewer(this.container.containerIndex,{})}else{if(g==="Preferences"){i=new papaya.ui.Dialog(this.container,"Viewer Preferences",papaya.ui.Toolbar.PREFERENCES_DATA,this.container.preferences,papaya.utilities.ObjectUtils.bind(this.container.preferences,this.container.preferences.updatePreference),papaya.utilities.ObjectUtils.bind(this,function(){this.viewer.updateScreenSliceTransforms();this.viewer.drawViewer(false,true)}));i.showDialog()}else{if(g==="SurfacePreferences"){i=new papaya.ui.Dialog(this.container,"Surface Preferences",papaya.ui.Toolbar.PREFERENCES_SURFACE_DATA,this.container.preferences,papaya.utilities.ObjectUtils.bind(this.container.preferences,this.container.preferences.updatePreference),papaya.utilities.ObjectUtils.bind(this,function(){this.viewer.updateScreenSliceTransforms();this.viewer.surfaceView.updatePreferences();this.viewer.drawViewer(false,true)}));i.showDialog()}else{if(g==="License"){i=new papaya.ui.Dialog(this.container,"License",papaya.ui.Toolbar.LICENSE_DATA,papaya.Container,null,null,null,true);i.showDialog()}else{if(g==="KeyboardRef"){i=new papaya.ui.Dialog(this.container,"Keyboard Reference",papaya.ui.Toolbar.KEYBOARD_REF_DATA,papaya.Container,null,null,null,true);i.showDialog()}else{if(g==="MouseRef"){i=new papaya.ui.Dialog(this.container,"Mouse Reference",papaya.ui.Toolbar.MOUSE_REF_DATA,papaya.Container,null,null,null,true);i.showDialog()}else{if(g.startsWith("ImageInfo")){b=g.substring(g.lastIndexOf("-")+1);if(this.viewer.screenVolumes[b].volume.numTimepoints>1){i=new papaya.ui.Dialog(this.container,"Image Info",papaya.ui.Toolbar.SERIES_INFO_DATA,this.viewer,null,null,b.toString())}else{i=new papaya.ui.Dialog(this.container,"Image Info",papaya.ui.Toolbar.IMAGE_INFO_DATA,this.viewer,null,null,b.toString())}i.showDialog()}else{if(g.startsWith("SurfaceInfo")){b=g.substring(g.lastIndexOf("-")+1);i=new papaya.ui.Dialog(this.container,"Surface Info",papaya.ui.Toolbar.SURFACE_INFO_DATA,this.viewer,null,null,b.toString());i.showDialog()}else{if(g.startsWith("ShowHeader")){b=g.substring(g.lastIndexOf("-")+1);i=new papaya.ui.Dialog(this.container,"Header",papaya.ui.Toolbar.HEADER_DATA,this.viewer,null,null,b.toString());i.showDialog()}else{if(g.startsWith("SPACE")){this.viewer.toggleWorldSpace();this.viewer.drawViewer(true)}else{if(g.startsWith("AtlasChanged")){l=g.substring(g.lastIndexOf("-")+1);this.viewer.atlas.currentAtlas=l;this.viewer.drawViewer(true)}else{if(g.startsWith("ShowRuler")){if(this.container.preferences.showRuler==="Yes"){this.container.preferences.updatePreference("showRuler","No")}else{this.container.preferences.updatePreference("showRuler","Yes")}this.viewer.drawViewer();this.closeAllMenus()}else{if(g.startsWith("ShowOrientation")){if(this.container.preferences.showOrientation==="Yes"){this.container.preferences.updatePreference("showOrientation","No")}else{this.container.preferences.updatePreference("showOrientation","Yes")}this.viewer.drawViewer();this.closeAllMenus()}else{if(g.startsWith("ShowCrosshairs")){if(this.container.preferences.showCrosshairs==="Yes"){this.container.preferences.updatePreference("showCrosshairs","No")}else{this.container.preferences.updatePreference("showCrosshairs","Yes")}this.viewer.drawViewer();this.closeAllMenus()}else{if(g.startsWith("EXPAND")){if(this.container.collapsable){this.container.collapseViewer()}else{this.container.expandViewer()}}else{if(g.startsWith("OpenInMango")){b=parseInt(g.substring(g.lastIndexOf("-")+1),10);if(b===0){if(this.container.viewer.volume.urls[0]){papaya.utilities.PlatformUtils.launchCustomProtocol(this.container,papaya.utilities.UrlUtils.getAbsoluteUrl(PAPAYA_CUSTOM_PROTOCOL,this.container.viewer.volume.urls[0]),this.customProtocolResult)}}else{if(this.container.viewer.screenVolumes[b].volume.urls[0]){papaya.utilities.PlatformUtils.launchCustomProtocol(this.container,papaya.utilities.UrlUtils.getAbsoluteUrl(PAPAYA_CUSTOM_PROTOCOL,this.container.viewer.screenVolumes[b].volume.urls[0])+"?"+encodeURIComponent("baseimage="+this.container.viewer.volume.fileName+"&params=o"),this.customProtocolResult)}}}else{if(g.startsWith("CloseOverlay")){b=parseInt(g.substring(g.lastIndexOf("-")+1),10);this.container.viewer.removeOverlay(b)}else{if(g.startsWith("ToggleOverlay")){b=parseInt(g.substring(g.lastIndexOf("-")+1),10);this.container.viewer.toggleOverlay(b)}else{if(g.startsWith("Context-")){this.container.contextManager.actionPerformed(g.substring(8))}else{if(g.startsWith("DTI-RGB")){b=g.substring(g.lastIndexOf("-")+1);this.viewer.screenVolumes[b].dtiLines=false;this.viewer.screenVolumes[b].dtiColors=true;this.viewer.screenVolumes[b].initDTI();this.viewer.drawViewer(true,false)}else{if(g.startsWith("DTI-LinesColors")){b=g.substring(g.lastIndexOf("-")+1);this.viewer.screenVolumes[b].dtiLines=true;this.viewer.screenVolumes[b].dtiColors=true;this.viewer.screenVolumes[b].initDTI();this.viewer.drawViewer(true,false)}else{if(g.startsWith("DTI-Lines")){b=g.substring(g.lastIndexOf("-")+1);this.viewer.screenVolumes[b].dtiLines=true;this.viewer.screenVolumes[b].dtiColors=false;this.viewer.screenVolumes[b].initDTI();this.viewer.drawViewer(true,false)}else{if(g.startsWith("DTI-Mod")){b=g.substring(g.lastIndexOf("-")+1);this.container.display.drawProgress(0.1,"Loading");this.viewer.loadingDTIModRef=this.viewer.screenVolumes[b];this.viewer.loadImage(f)}else{if(g.startsWith("LoadNegatives")){b=g.substring(g.lastIndexOf("-")+1);this.viewer.addParametric(b)}else{if(g.startsWith("ShowSurfacePlanes")){this.viewer.surfaceView.showSurfacePlanes=!this.viewer.surfaceView.showSurfacePlanes;this.viewer.surfaceView.updateActivePlanes();if(this.container.preferences.showSurfacePlanes==="Yes"){this.container.preferences.updatePreference("showSurfacePlanes","No")}else{this.container.preferences.updatePreference("showSurfacePlanes","Yes")}this.viewer.drawViewer(false,true);this.closeAllMenus()}else{if(g.startsWith("ShowSurfaceCrosshairs")){this.viewer.surfaceView.showSurfaceCrosshairs=!this.viewer.surfaceView.showSurfaceCrosshairs;this.viewer.surfaceView.updateActivePlanes();if(this.container.preferences.showSurfaceCrosshairs==="Yes"){this.container.preferences.updatePreference("showSurfaceCrosshairs","No")}else{this.container.preferences.updatePreference("showSurfaceCrosshairs","Yes")}this.viewer.drawViewer(false,true);this.closeAllMenus()}else{if(g.startsWith("rotation")){this.viewer.screenVolumes[0].updateTransform()}else{if(g.startsWith("Rotate About")){this.viewer.screenVolumes[0].rotationAbout=g.substring(0,g.indexOf("-"));this.viewer.screenVolumes[0].updateTransform();this.viewer.drawViewer(true,false)}else{if(g.startsWith("ResetTransform")){this.viewer.screenVolumes[0].resetTransform();this.viewer.screenVolumes[0].updateTransform();this.viewer.drawViewer(true,false)}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}};papaya.ui.Toolbar.prototype.customProtocolResult=function(a){if(a===false){if((papaya.utilities.PlatformUtils.browser==="Chrome")||(papaya.utilities.PlatformUtils.browser==="Internet Explorer")){alert("Mango does not appear to be installed.  You can download Mango at:\n\nhttp://ric.uthscsa.edu/mango")}else{if(papaya.utilities.PlatformUtils.ios){if(confirm("iMango does not appear to be installed.  Would you like to download it now?")){window.open("http://itunes.apple.com/us/app/imango/id423626092")}}else{if(confirm("Mango does not appear to be installed.  Would you like to download it now?")){window.open("http://ric.uthscsa.edu/mango/mango.html")}}}}};papaya.ui.Toolbar.prototype.updateTitleBar=function(b){var a=this.container.titlebarHtml[0];if(a){a.innerHTML=b}this.container.titlebarHtml.css({top:(0)})};papaya.ui.Toolbar.prototype.showImageMenu=function(a){this.viewer.screenVolumes[a].resetDynamicRange();this.imageMenus[a].showMenu()};papaya.ui.Toolbar.prototype.updateImageMenuRange=function(b,c,a){this.imageMenus[b].updateRangeItem(c,a)};"use strict";var papaya=papaya||{};papaya.viewer=papaya.viewer||{};papaya.viewer.Atlas=papaya.viewer.Atlas||function(c,b,d){this.container=b;this.callback=d;this.name=null;this.transformedname=null;this.labels=[];this.atlasLabelData=c.labels;this.volume=new papaya.volume.Volume(b.display,b.viewer);this.displayColumns=null;this.returnLabels=null;this.transform=null;this.currentAtlas=null;this.maxLabels=0;this.probabilistic=false;var a=b.findLoadableImage(c.labels.atlas.header.images.summaryimagefile);if(b.params.atlasURL){this.volume.readURLs([b.params.atlasURL],papaya.utilities.ObjectUtils.bind(this,this.readFinished))}else{if((a!==null)&&(a.encode!==undefined)){this.volume.readEncodedData([a.encode],papaya.utilities.ObjectUtils.bind(this,this.readFinished))}else{if((a!==null)&&(a.url!==undefined)){this.volume.readURLs([a.url],papaya.utilities.ObjectUtils.bind(this,this.readFinished))}}}};papaya.viewer.Atlas.MAX_LABELS=4;papaya.viewer.Atlas.PROBABILISTIC=["probabalistic","probabilistic","statistic"];papaya.viewer.Atlas.LABEL_SPLIT_REGEX=/\.|:|,|\//;papaya.viewer.Atlas.prototype.getLabelAtCoordinate=function(f,e,d){var c,b,a,g;if(this.transform&&(this.currentAtlas===this.transformedname)){c=((f*this.transform[0][0])+(e*this.transform[0][1])+(d*this.transform[0][2])+(this.transform[0][3]));b=((f*this.transform[1][0])+(e*this.transform[1][1])+(d*this.transform[1][2])+(this.transform[1][3]));a=((f*this.transform[2][0])+(e*this.transform[2][1])+(d*this.transform[2][2])+(this.transform[2][3]))}else{c=f;b=e;a=d}if(papaya.Container.atlasWorldSpace){g=(this.volume.getVoxelAtCoordinate(c,b,a,0,true))}else{g=(this.volume.getVoxelAtIndex(f,e,d,0,true))}if(this.probabilistic){g-=1}return this.formatLabels(this.labels[g],this.returnLabels)};papaya.viewer.Atlas.prototype.readFinished=function(){this.parseTransform();this.parseLabels();this.parseDisplayColumns();this.maxLabels=this.findMaxLabelParts();this.probabilistic=this.atlasLabelData.atlas.header.type&&((this.atlasLabelData.atlas.header.type.toLowerCase()===papaya.viewer.Atlas.PROBABILISTIC[0])||(this.atlasLabelData.atlas.header.type.toLowerCase()===papaya.viewer.Atlas.PROBABILISTIC[1])||(this.atlasLabelData.atlas.header.type.toLowerCase()===papaya.viewer.Atlas.PROBABILISTIC[2]));this.returnLabels=[];this.returnLabels.length=this.maxLabels;if(this.atlasLabelData.atlas.header.transformedname){this.transformedname=this.atlasLabelData.atlas.header.transformedname}this.name=this.atlasLabelData.atlas.header.name;this.currentAtlas=this.name;var a=this.container.params.atlas;if(a){if(a===this.transformedname){this.currentAtlas=this.transformedname}}this.callback()};papaya.viewer.Atlas.prototype.parseDisplayColumns=function(){var a,b,c;if(this.atlasLabelData.atlas.header.display){this.displayColumns=[];a=0;b=this.atlasLabelData.atlas.header.display.split(papaya.viewer.Atlas.LABEL_SPLIT_REGEX);for(c=0;c<b.length;c+=1){if(b[c]==="*"){this.displayColumns[a]=c;a+=1}}}};papaya.viewer.Atlas.prototype.parseTransform=function(){var c,b,a;if(this.atlasLabelData.atlas.header.transform){c=this.atlasLabelData.atlas.header.transform.split(" ");this.transform=papaya.volume.Transform.IDENTITY.clone();if(c.length===16){for(b=0;b<4;b+=1){for(a=0;a<4;a+=1){this.transform[b][a]=parseFloat(c[(b*4)+a])}}}}};papaya.viewer.Atlas.prototype.parseLabels=function(){var c,b,a;for(c=0;c<this.atlasLabelData.atlas.data.label.length;c+=1){a=this.atlasLabelData.atlas.data.label[c];if(a.index){b=parseInt(a.index,10)}else{b=c}if(a.content){this.labels[b]=a.content}else{this.labels[b]=a}}};papaya.viewer.Atlas.prototype.formatLabels=function(b,c){var d,f,a,e;if(b){a=b.split(papaya.viewer.Atlas.LABEL_SPLIT_REGEX);if(this.displayColumns){for(d=0;d<a.length;d+=1){if(d<this.displayColumns.length){c[d]=a[this.displayColumns[d]]}}}else{e=a.length;f=0;if(e>papaya.viewer.Atlas.MAX_LABELS){f=(e-papaya.viewer.Atlas.MAX_LABELS)}for(d=f;d<a.length;d+=1){c[d]=a[d].trim()}}}else{for(d=0;d<c.length;d+=1){c[d]=""}}return c};papaya.viewer.Atlas.prototype.findMaxLabelParts=function(){var a,b;if(this.displayColumns){return this.displayColumns.length}b=[];for(a=0;a<this.labels.length;a+=1){this.formatLabels(this.labels[a],b)}return b.length};"use strict";var papaya=papaya||{};papaya.viewer=papaya.viewer||{};papaya.viewer.ColorTable=papaya.viewer.ColorTable||function(d,c,a){var b=null;if(a!==undefined){b=a}else{b=papaya.viewer.ColorTable.findLUT(d)}this.lutData=b.data;this.maxLUT=0;this.minLUT=0;this.knotThresholds=[];this.knotRangeRatios=[];this.LUTarrayG=new Array(256);this.LUTarrayR=new Array(256);this.LUTarrayB=new Array(256);this.isBaseImage=c;this.knotMin=this.lutData[0];this.knotMax=this.lutData[this.lutData.length-1];this.useGradation=(typeof b.gradation==="undefined")||b.gradation;this.updateLUT(papaya.viewer.ColorTable.LUT_MIN,papaya.viewer.ColorTable.LUT_MAX)};papaya.viewer.ColorTable.TABLE_GRAYSCALE={name:"Grayscale",data:[[0,0,0,0],[1,1,1,1]],gradation:true};papaya.viewer.ColorTable.TABLE_SPECTRUM={name:"Spectrum",data:[[0,0,0,0],[0.1,0,0,1],[0.33,0,1,1],[0.5,0,1,0],[0.66,1,1,0],[0.9,1,0,0],[1,1,1,1]],gradation:true};papaya.viewer.ColorTable.TABLE_RED2YELLOW={name:"Overlay (Positives)",data:[[0,1,0,0],[1,1,1,0]],gradation:true};papaya.viewer.ColorTable.TABLE_BLUE2GREEN={name:"Overlay (Negatives)",data:[[0,0,0,1],[1,0,1,0]],gradation:true};papaya.viewer.ColorTable.TABLE_HOTANDCOLD={name:"Hot-and-Cold",data:[[0,0,0,1],[0.15,0,1,1],[0.3,0,1,0],[0.45,0,0,0],[0.5,0,0,0],[0.55,0,0,0],[0.7,1,1,0],[0.85,1,0,0],[1,1,1,1]],gradation:true};papaya.viewer.ColorTable.TABLE_GOLD={name:"Gold",data:[[0,0,0,0],[0.13,0.19,0.03,0],[0.25,0.39,0.12,0],[0.38,0.59,0.26,0],[0.5,0.8,0.46,0.08],[0.63,0.99,0.71,0.21],[0.75,0.99,0.88,0.34],[0.88,0.99,0.99,0.48],[1,0.9,0.95,0.61]],gradation:true};papaya.viewer.ColorTable.TABLE_RED2WHITE={name:"Red Overlay",data:[[0,0.75,0,0],[0.5,1,0.5,0],[0.95,1,1,0],[1,1,1,1]],gradation:true};papaya.viewer.ColorTable.TABLE_GREEN2WHITE={name:"Green Overlay",data:[[0,0,0.75,0],[0.5,0.5,1,0],[0.95,1,1,0],[1,1,1,1]],gradation:true};papaya.viewer.ColorTable.TABLE_BLUE2WHITE={name:"Blue Overlay",data:[[0,0,0,1],[0.5,0,0.5,1],[0.95,0,1,1],[1,1,1,1]],gradation:true};papaya.viewer.ColorTable.TABLE_DTI_SPECTRUM={name:"Spectrum",data:[[0,1,0,0],[0.5,0,1,0],[1,0,0,1]],gradation:true};papaya.viewer.ColorTable.TABLE_FIRE={name:"Fire",data:[[0,0,0,0],[0.06,0,0,0.36],[0.16,0.29,0,0.75],[0.22,0.48,0,0.89],[0.31,0.68,0,0.6],[0.37,0.76,0,0.36],[0.5,0.94,0.31,0],[0.56,1,0.45,0],[0.81,1,0.91,0],[0.88,1,1,0.38],[1,1,1,1]],gradation:true};papaya.viewer.ColorTable.ARROW_ICON="data:image/gif;base64,R0lGODlhCwARAPfGMf//////zP//mf//Zv//M///AP/M///MzP/Mmf/MZv/MM//MAP+Z//+ZzP+Zmf+ZZv+ZM/+ZAP9m//9mzP9mmf9mZv9mM/9mAP8z//8zzP8zmf8zZv8zM/8zAP8A//8AzP8Amf8AZv8AM/8AAMz//8z/zMz/mcz/Zsz/M8z/AMzM/8zMzMzMmczMZszMM8zMAMyZ/8yZzMyZmcyZZsyZM8yZAMxm/8xmzMxmmcxmZsxmM8xmAMwz/8wzzMwzmcwzZswzM8wzAMwA/8wAzMwAmcwAZswAM8wAAJn//5n/zJn/mZn/Zpn/M5n/AJnM/5nMzJnMmZnMZpnMM5nMAJmZ/5mZzJmZmZmZZpmZM5mZAJlm/5lmzJlmmZlmZplmM5lmAJkz/5kzzJkzmZkzZpkzM5kzAJkA/5kAzJkAmZkAZpkAM5kAAGb//2b/zGb/mWb/Zmb/M2b/AGbM/2bMzGbMmWbMZmbMM2bMAGaZ/2aZzGaZmWaZZmaZM2aZAGZm/2ZmzGZmmWZmZmZmM2ZmAGYz/2YzzGYzmWYzZmYzM2YzAGYA/2YAzGYAmWYAZmYAM2YAADP//zP/zDP/mTP/ZjP/MzP/ADPM/zPMzDPMmTPMZjPMMzPMADOZ/zOZzDOZmTOZZjOZMzOZADNm/zNmzDNmmTNmZjNmMzNmADMz/zMzzDMzmTMzZjMzMzMzADMA/zMAzDMAmTMAZjMAMzMAAAD//wD/zAD/mQD/ZgD/MwD/AADM/wDMzADMmQDMZgDMMwDMAACZ/wCZzACZmQCZZgCZMwCZAABm/wBmzABmmQBmZgBmMwBmAAAz/wAzzAAzmQAzZgAzMwAzAAAA/wAAzAAAmQAAZgAAM+4AAN0AALsAAKoAAIgAAHcAAFUAAEQAACIAABEAAADuAADdAAC7AACqAACIAAB3AABVAABEAAAiAAARAAAA7gAA3QAAuwAAqgAAiAAAdwAAVQAARAAAIgAAEe7u7t3d3bu7u6qqqoiIiHd3d1VVVURERCIiIhEREQAAACH5BAEAAMYALAAAAAALABEAAAg/AI0JFGhvoEGC+vodRKgv4UF7DSMqZBixoUKIFSv2w5jRIseOGztK/JgxpMiEJDWmHHkSZUuTIvvt60ezps2AADs=";papaya.viewer.ColorTable.ARROW_ICON_WIDTH=11;papaya.viewer.ColorTable.DEFAULT_COLOR_TABLE=papaya.viewer.ColorTable.TABLE_GRAYSCALE;papaya.viewer.ColorTable.PARAMETRIC_COLOR_TABLES=[papaya.viewer.ColorTable.TABLE_RED2YELLOW,papaya.viewer.ColorTable.TABLE_BLUE2GREEN];papaya.viewer.ColorTable.OVERLAY_COLOR_TABLES=[papaya.viewer.ColorTable.TABLE_RED2WHITE,papaya.viewer.ColorTable.TABLE_GREEN2WHITE,papaya.viewer.ColorTable.TABLE_BLUE2WHITE];papaya.viewer.ColorTable.TABLE_ALL=[papaya.viewer.ColorTable.TABLE_GRAYSCALE,papaya.viewer.ColorTable.TABLE_SPECTRUM,papaya.viewer.ColorTable.TABLE_FIRE,papaya.viewer.ColorTable.TABLE_HOTANDCOLD,papaya.viewer.ColorTable.TABLE_GOLD,papaya.viewer.ColorTable.TABLE_RED2YELLOW,papaya.viewer.ColorTable.TABLE_BLUE2GREEN,papaya.viewer.ColorTable.TABLE_RED2WHITE,papaya.viewer.ColorTable.TABLE_GREEN2WHITE,papaya.viewer.ColorTable.TABLE_BLUE2WHITE];papaya.viewer.ColorTable.LUT_MIN=0;papaya.viewer.ColorTable.LUT_MAX=255;papaya.viewer.ColorTable.ICON_SIZE=18;papaya.viewer.ColorTable.COLOR_BAR_WIDTH=100;papaya.viewer.ColorTable.COLOR_BAR_HEIGHT=15;papaya.viewer.ColorTable.findLUT=function(a){var b;for(b=0;b<papaya.viewer.ColorTable.TABLE_ALL.length;b+=1){if(papaya.viewer.ColorTable.TABLE_ALL[b].name==a){return papaya.viewer.ColorTable.TABLE_ALL[b]}}return papaya.viewer.ColorTable.TABLE_GRAYSCALE};papaya.viewer.ColorTable.addCustomLUT=function(a){if(papaya.viewer.ColorTable.findLUT(a.name).data===papaya.viewer.ColorTable.TABLE_GRAYSCALE.data){papaya.viewer.ColorTable.TABLE_ALL.push(a)}};papaya.viewer.ColorTable.prototype.updateMinLUT=function(a){this.updateLUT(a,this.maxLUT)};papaya.viewer.ColorTable.prototype.updateMaxLUT=function(a){this.updateLUT(this.minLUT,a)};papaya.viewer.ColorTable.prototype.updateLUT=function(f,e){var a,d,b,c;this.maxLUT=e;this.minLUT=f;a=this.maxLUT-this.minLUT;for(d=0;d<this.lutData.length;d+=1){this.knotThresholds[d]=(this.lutData[d][0]*a)+this.minLUT}for(d=0;d<(this.lutData.length-1);d+=1){this.knotRangeRatios[d]=papaya.viewer.ColorTable.LUT_MAX/(this.knotThresholds[d+1]-this.knotThresholds[d])}for(d=0;d<256;d+=1){if(d<=this.minLUT){this.LUTarrayR[d]=this.knotMin[1]*papaya.viewer.ColorTable.LUT_MAX;this.LUTarrayG[d]=this.knotMin[2]*papaya.viewer.ColorTable.LUT_MAX;this.LUTarrayB[d]=this.knotMin[3]*papaya.viewer.ColorTable.LUT_MAX}else{if(d>this.maxLUT){this.LUTarrayR[d]=this.knotMax[1]*papaya.viewer.ColorTable.LUT_MAX;this.LUTarrayG[d]=this.knotMax[2]*papaya.viewer.ColorTable.LUT_MAX;this.LUTarrayB[d]=this.knotMax[3]*papaya.viewer.ColorTable.LUT_MAX}else{for(b=0;b<(this.lutData.length-1);b+=1){if((d>this.knotThresholds[b])&&(d<=this.knotThresholds[b+1])){if(this.useGradation){c=(((d-this.knotThresholds[b])*this.knotRangeRatios[b])+0.5)/papaya.viewer.ColorTable.LUT_MAX;this.LUTarrayR[d]=(((1-c)*this.lutData[b][1])+(c*this.lutData[b+1][1]))*papaya.viewer.ColorTable.LUT_MAX;this.LUTarrayG[d]=(((1-c)*this.lutData[b][2])+(c*this.lutData[b+1][2]))*papaya.viewer.ColorTable.LUT_MAX;this.LUTarrayB[d]=(((1-c)*this.lutData[b][3])+(c*this.lutData[b+1][3]))*papaya.viewer.ColorTable.LUT_MAX}else{this.LUTarrayR[d]=(this.lutData[b][1])*papaya.viewer.ColorTable.LUT_MAX;this.LUTarrayG[d]=(this.lutData[b][2])*papaya.viewer.ColorTable.LUT_MAX;this.LUTarrayB[d]=(this.lutData[b][3])*papaya.viewer.ColorTable.LUT_MAX}}}}}}};papaya.viewer.ColorTable.prototype.lookupRed=function(a){if((a>=0)&&(a<256)){return(this.LUTarrayR[a]&255)}return 0};papaya.viewer.ColorTable.prototype.lookupGreen=function(a){if((a>=0)&&(a<256)){return(this.LUTarrayG[a]&255)}return 0};papaya.viewer.ColorTable.prototype.lookupBlue=function(a){if((a>=0)&&(a<256)){return(this.LUTarrayB[a]&255)}return 0};"use strict";var papaya=papaya||{};papaya.viewer=papaya.viewer||{};papaya.viewer.Display=papaya.viewer.Display||function(a,b){this.container=a;this.viewer=a.viewer;this.canvas=document.createElement("canvas");this.canvas.width=b;this.canvas.height=papaya.viewer.Display.SIZE;this.context=this.canvas.getContext("2d");this.canvas.style.padding=0;this.canvas.style.margin=0;this.canvas.style.border="none";this.canvas.style.cursor="default";this.tempCoord=new papaya.core.Coordinate(0,0,0);this.drawingError=false;this.progress=0;this.progressStartTime=0;this.progressTimeout=null;this.drawingProgress=false;this.errorMessage="";this.drawUninitializedDisplay()};papaya.viewer.Display.SIZE=50;papaya.viewer.Display.MINI_LABELS_THRESH=700;papaya.viewer.Display.PADDING=8;papaya.viewer.Display.FONT_COLOR_WHITE="white";papaya.viewer.Display.FONT_COLOR_ORANGE="rgb(182, 59, 0)";papaya.viewer.Display.FONT_SIZE_COORDINATE_LABEL=12;papaya.viewer.Display.FONT_COLOR_COORDINATE_LABEL=papaya.viewer.Display.FONT_COLOR_WHITE;papaya.viewer.Display.FONT_TYPE_COORDINATE_LABEL="sans-serif";papaya.viewer.Display.FONT_SIZE_COORDINATE_VALUE=18;papaya.viewer.Display.FONT_COLOR_COORDINATE_VALUE=papaya.viewer.Display.FONT_COLOR_ORANGE;papaya.viewer.Display.FONT_TYPE_COORDINATE_VALUE="sans-serif";papaya.viewer.Display.PRECISION_COORDINATE_VALUE=5;papaya.viewer.Display.PRECISION_COORDINATE_MAX=12;papaya.viewer.Display.FONT_SIZE_IMAGE_VALUE=20;papaya.viewer.Display.FONT_COLOR_IMAGE_VALUE=papaya.viewer.Display.FONT_COLOR_WHITE;papaya.viewer.Display.FONT_TYPE_IMAGE_VALUE="sans-serif";papaya.viewer.Display.PRECISION_IMAGE_VALUE=9;papaya.viewer.Display.PRECISION_IMAGE_MAX=14;papaya.viewer.Display.FONT_SIZE_ATLAS_MINI=14;papaya.viewer.Display.FONT_SIZE_ATLAS=20;papaya.viewer.Display.FONT_TYPE_ATLAS="sans-serif";papaya.viewer.Display.FONT_SIZE_MESSAGE_VALUE=20;papaya.viewer.Display.FONT_TYPE_MESSAGE_VALUE="sans-serif";papaya.viewer.Display.FONT_COLOR_MESSAGE="rgb(200, 75, 25)";papaya.viewer.Display.PROGRESS_LABEL_SUFFIX=["...","",".",".."];papaya.viewer.Display.PROGRESS_LABEL_DEFAULT="Loading";papaya.viewer.Display.prototype.drawUninitializedDisplay=function(){this.context.fillStyle="#000000";this.context.fillRect(0,0,this.canvas.width,this.canvas.height)};papaya.viewer.Display.prototype.canDraw=function(){return !(this.drawingError||this.drawingProgress)};papaya.viewer.Display.prototype.drawEmptyDisplay=function(){if(this.canDraw()){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.fillStyle="#000000";this.context.fillRect(0,0,this.canvas.width,this.canvas.height)}else{if(this.drawError){this.drawError(this.errorMessage)}}};papaya.viewer.Display.prototype.drawDisplay=function(j,l,r){var c,s,g,i,n,a,h,p,o,d,f,k,e,q,b,m;if(this.canDraw()){d=this.viewer.canvas.width/600;e=this.viewer.canvas.width/2;q=e/5;i=this.canvas.height;b=(e<300);if(this.container.preferences.atlasLocks!=="Mouse"){j=this.viewer.currentCoord.x;l=this.viewer.currentCoord.y;r=this.viewer.currentCoord.z}this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.fillStyle="#000000";this.context.fillRect(0,0,this.canvas.width,this.canvas.height);this.context.fillStyle=papaya.viewer.Display.FONT_COLOR_COORDINATE_LABEL;this.context.font=papaya.viewer.Display.FONT_SIZE_COORDINATE_LABEL+"px "+papaya.viewer.Display.FONT_TYPE_COORDINATE_LABEL;c=papaya.viewer.Display.FONT_SIZE_COORDINATE_LABEL+papaya.viewer.Display.PADDING*0.75;this.context.fillText("x",1.5*papaya.viewer.Display.PADDING,c);this.context.fillText("y",1.5*papaya.viewer.Display.PADDING+q,c);this.context.fillText("z",1.5*papaya.viewer.Display.PADDING+(2*q),c);c+=papaya.viewer.Display.FONT_SIZE_COORDINATE_VALUE+papaya.viewer.Display.PADDING/2;this.context.fillStyle=papaya.viewer.Display.FONT_COLOR_COORDINATE_VALUE;this.context.font=(papaya.viewer.Display.FONT_SIZE_COORDINATE_VALUE-(b?2:0))+"px "+papaya.viewer.Display.FONT_TYPE_COORDINATE_VALUE;if(this.viewer.worldSpace){g=this.viewer.screenVolumes[0].volume.header.origin;f=this.viewer.screenVolumes[0].volume.header.voxelDimensions;m=Math.min(papaya.viewer.Display.PRECISION_COORDINATE_MAX,(Math.round(papaya.viewer.Display.PRECISION_COORDINATE_VALUE*d)));this.context.fillText(parseFloat(((j-g.x)*f.xSize).toString().substr(0,m)),1.5*papaya.viewer.Display.PADDING,c);this.context.fillText(parseFloat(((g.y-l)*f.ySize).toString().substr(0,m)),1.5*papaya.viewer.Display.PADDING+q,c);this.context.fillText(parseFloat(((g.z-r)*f.zSize).toString().substr(0,m)),1.5*papaya.viewer.Display.PADDING+(2*q),c)}else{this.context.fillText(Math.round(j).toString(),1.5*papaya.viewer.Display.PADDING,c);this.context.fillText(Math.round(l).toString(),1.5*papaya.viewer.Display.PADDING+q,c);this.context.fillText(Math.round(r).toString(),1.5*papaya.viewer.Display.PADDING+(2*q),c)}if(!this.viewer.currentScreenVolume.rgb&&!this.viewer.currentScreenVolume.dti){s=this.viewer.getCurrentValueAt(j,l,r);this.canvas.currentval=s.toString();c=(i/2)+(papaya.viewer.Display.FONT_SIZE_IMAGE_VALUE/2)-(papaya.viewer.Display.PADDING/2);this.context.fillStyle=papaya.viewer.Display.FONT_COLOR_IMAGE_VALUE;this.context.font=(papaya.viewer.Display.FONT_SIZE_IMAGE_VALUE-(b?2:0))+"px "+papaya.viewer.Display.FONT_TYPE_IMAGE_VALUE;m=Math.min(papaya.viewer.Display.PRECISION_IMAGE_MAX,Math.round(papaya.viewer.Display.PRECISION_IMAGE_VALUE*d));this.context.fillText(parseFloat(s.toString().substr(0,m)),(2*papaya.viewer.Display.PADDING)+(3*q),c)}if(this.viewer.atlas&&(!this.viewer.atlas.volume||this.viewer.atlas.volume.isLoaded)){if(papaya.Container.atlasWorldSpace){this.viewer.getWorldCoordinateAtIndex(j,l,r,this.tempCoord);h=this.viewer.atlas.getLabelAtCoordinate(this.tempCoord.x,this.tempCoord.y,this.tempCoord.z,j,l,r)}else{h=this.viewer.atlas.getLabelAtCoordinate(j,l,r,j,l,r)}n=h.length;k=Math.ceil(this.viewer.atlas.maxLabels/2);if((e<300)&&(n>=2)){a=e*0.75;for(p=n-1;p>=0;p-=1){if(p===(n-2)){this.context.fillStyle=papaya.viewer.Display.FONT_COLOR_ORANGE;this.context.font=papaya.viewer.Display.FONT_SIZE_ATLAS_MINI+"px "+papaya.viewer.Display.FONT_TYPE_ATLAS}else{this.context.fillStyle=papaya.viewer.Display.FONT_COLOR_WHITE;this.context.font=papaya.viewer.Display.FONT_SIZE_ATLAS_MINI+"px "+papaya.viewer.Display.FONT_TYPE_ATLAS}o=this.context.measureText(h[p]);if(o.width>(a-2*papaya.viewer.Display.PADDING)){h[p]=(h[p].substr(0,Math.round(h[p].length/3))+" ... "+h[p].substr(h[p].length-3,3))}if(p===(n-2)){this.context.fillText(h[p],e+(e*0.25),papaya.viewer.Display.PADDING*1.5+(papaya.viewer.Display.FONT_SIZE_ATLAS_MINI/2))}else{if(p===(n-1)){this.context.fillText(h[p],e+(e*0.25),papaya.viewer.Display.PADDING+(i/2)+(papaya.viewer.Display.FONT_SIZE_ATLAS_MINI/2))}}}}else{if((e<600)&&(n>2)){a=e/2;for(p=n-1;p>=0;p-=1){if(p<k){this.context.fillStyle=papaya.viewer.Display.FONT_COLOR_ORANGE;this.context.font=papaya.viewer.Display.FONT_SIZE_ATLAS_MINI+"px "+papaya.viewer.Display.FONT_TYPE_ATLAS}else{this.context.fillStyle=papaya.viewer.Display.FONT_COLOR_WHITE;this.context.font=papaya.viewer.Display.FONT_SIZE_ATLAS_MINI+"px "+papaya.viewer.Display.FONT_TYPE_ATLAS}o=this.context.measureText(h[p]);if(o.width>(a-papaya.viewer.Display.PADDING*6)){h[p]=(h[p].substr(0,Math.round(h[p].length/3))+" ... "+h[p].substr(h[p].length-3,3))}if(p===0){this.context.fillText(h[p],e+papaya.viewer.Display.PADDING*5,papaya.viewer.Display.PADDING*1.5+(papaya.viewer.Display.FONT_SIZE_ATLAS_MINI/2))}else{if(p===1){this.context.fillText(h[p],e+papaya.viewer.Display.PADDING*5,papaya.viewer.Display.PADDING+(i/2)+(papaya.viewer.Display.FONT_SIZE_ATLAS_MINI/2))}else{if(p===2){this.context.fillText(h[p],e*1.5+papaya.viewer.Display.PADDING*5,papaya.viewer.Display.PADDING*1.5+(papaya.viewer.Display.FONT_SIZE_ATLAS_MINI/2))}else{if(p===3){this.context.fillText(h[p],e*1.5+papaya.viewer.Display.PADDING*5,papaya.viewer.Display.PADDING+(i/2)+(papaya.viewer.Display.FONT_SIZE_ATLAS_MINI/2))}}}}}}else{if((e<800)&&(n>3)){a=e/3;for(p=0;p<4;p+=1){if(p<2){if(p<k){this.context.fillStyle=papaya.viewer.Display.FONT_COLOR_ORANGE;this.context.font=papaya.viewer.Display.FONT_SIZE_ATLAS_MINI+"px "+papaya.viewer.Display.FONT_TYPE_ATLAS}else{this.context.fillStyle=papaya.viewer.Display.FONT_COLOR_WHITE;this.context.font=papaya.viewer.Display.FONT_SIZE_ATLAS_MINI+"px "+papaya.viewer.Display.FONT_TYPE_ATLAS}o=this.context.measureText(h[p]);if(o.width>(a-papaya.viewer.Display.PADDING*6)){h[p]=(h[p].substr(0,Math.round(h[p].length/3))+" ... "+h[p].substr(h[p].length-3,3))}if(p===0){this.context.fillText(h[p],e+papaya.viewer.Display.PADDING*5,papaya.viewer.Display.PADDING*1.5+(papaya.viewer.Display.FONT_SIZE_ATLAS_MINI/2))}else{if(p===1){this.context.fillText(h[p],e+papaya.viewer.Display.PADDING*5,papaya.viewer.Display.PADDING+(i/2)+(papaya.viewer.Display.FONT_SIZE_ATLAS_MINI/2))}else{if(p===2){this.context.fillText(h[p],e*1.5+papaya.viewer.Display.PADDING*5,papaya.viewer.Display.PADDING*1.5+(papaya.viewer.Display.FONT_SIZE_ATLAS_MINI/2))}else{if(p===3){this.context.fillText(h[p],e*1.5+papaya.viewer.Display.PADDING*5,papaya.viewer.Display.PADDING+(i/2)+(papaya.viewer.Display.FONT_SIZE_ATLAS_MINI/2))}}}}}else{c=(i/2)+(papaya.viewer.Display.FONT_SIZE_ATLAS/2)-(papaya.viewer.Display.PADDING/2);if(p<k){this.context.fillStyle=papaya.viewer.Display.FONT_COLOR_ORANGE;this.context.font=papaya.viewer.Display.FONT_SIZE_ATLAS+"px "+papaya.viewer.Display.FONT_TYPE_ATLAS}else{this.context.fillStyle=papaya.viewer.Display.FONT_COLOR_WHITE;this.context.font=papaya.viewer.Display.FONT_SIZE_ATLAS+"px "+papaya.viewer.Display.FONT_TYPE_ATLAS}o=this.context.measureText(h[p]);if(o.width>(a-(2*papaya.viewer.Display.PADDING))){h[p]=(h[p].substr(0,Math.round(h[p].length/3))+" ... "+h[p].substr(h[p].length-3,3))}if(p===2){this.context.fillText(h[p],e+papaya.viewer.Display.PADDING+a,c)}else{if(p===3){this.context.fillText(h[p],e+papaya.viewer.Display.PADDING+(2*a),c)}}}}}else{a=e/n;c=(i/2)+(papaya.viewer.Display.FONT_SIZE_ATLAS/2)-(papaya.viewer.Display.PADDING/2);for(p=0;p<n;p+=1){if(p<k){this.context.fillStyle=papaya.viewer.Display.FONT_COLOR_ORANGE;this.context.font=(papaya.viewer.Display.FONT_SIZE_ATLAS-(b?4:0))+"px "+papaya.viewer.Display.FONT_TYPE_ATLAS}else{this.context.fillStyle=papaya.viewer.Display.FONT_COLOR_WHITE;this.context.font=(papaya.viewer.Display.FONT_SIZE_ATLAS-(b?4:0))+"px "+papaya.viewer.Display.FONT_TYPE_ATLAS}o=this.context.measureText(h[p]);if(o.width>(a-(2*papaya.viewer.Display.PADDING))-(e*0.05*Math.max(0,3-n))){h[p]=(h[p].substr(0,Math.round(h[p].length/3))+" ... "+h[p].substr(h[p].length-3,3))}this.context.fillText(h[p],e+papaya.viewer.Display.PADDING+(e*0.05*Math.max(0,3-n))+(p*a),c)}}}}}}else{if(this.drawError){this.drawError(this.errorMessage)}}};papaya.viewer.Display.prototype.drawError=function(b){var a,c;this.errorMessage=b;this.drawingError=true;c=this;window.setTimeout(papaya.utilities.ObjectUtils.bind(c,function(){c.drawingError=false}),3000);this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.fillStyle="#000000";this.context.fillRect(0,0,this.canvas.width,this.canvas.height);this.context.fillStyle="red";this.context.font=papaya.viewer.Display.FONT_SIZE_MESSAGE_VALUE+"px "+papaya.viewer.Display.FONT_TYPE_MESSAGE_VALUE;a=papaya.viewer.Display.FONT_SIZE_COORDINATE_LABEL+papaya.viewer.Display.PADDING+1.5*papaya.viewer.Display.PADDING;this.context.fillText(b,papaya.viewer.Display.PADDING,a)};papaya.viewer.Display.prototype.drawProgress=function(e,d){var h,g,c,b,f,a;h=Math.round(e*1000);if(h>this.progress){this.progress=h;if(d!==undefined){a=d}else{a=papaya.viewer.Display.PROGRESS_LABEL_DEFAULT}if(this.progressStartTime===0){this.progressStartTime=new Date().getTime();c=this.progressStartTime}else{c=new Date().getTime()}b=parseInt((c-this.progressStartTime)/500,10)%4;if(this.progress>=990){if(this.progressTimeout){window.clearTimeout(this.progressTimeout);this.progressTimeout=null}this.drawingProgress=false;this.progress=0;this.progressStartTime=0;this.drawEmptyDisplay()}else{if(this.progressTimeout){window.clearTimeout(this.progressTimeout)}g=this;this.progressTimeout=window.setTimeout(papaya.utilities.ObjectUtils.bind(g,function(){g.drawingProgress=false}),3000);this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.fillStyle="#fff";this.context.fillRect(0,0,this.canvas.width,this.canvas.height);this.context.fillStyle="#000";this.context.fillRect(0,0,this.canvas.width*e,this.canvas.height);this.context.font=papaya.viewer.Display.FONT_SIZE_MESSAGE_VALUE+"px "+papaya.viewer.Display.FONT_TYPE_MESSAGE_VALUE;this.context.fillStyle=papaya.viewer.Display.FONT_COLOR_MESSAGE;f=papaya.viewer.Display.FONT_SIZE_COORDINATE_LABEL+papaya.viewer.Display.PADDING+1.5*papaya.viewer.Display.PADDING;this.context.fillText(a+papaya.viewer.Display.PROGRESS_LABEL_SUFFIX[b],papaya.viewer.Display.PADDING*2,f)}}};"use strict";var papaya=papaya||{};papaya.volume=papaya.volume||{};papaya.viewer.Preferences=papaya.viewer.Preferences||function(){this.viewer=null;this.showCrosshairs=papaya.viewer.Preferences.DEFAULT_SHOW_CROSSHAIRS;this.atlasLocks=papaya.viewer.Preferences.DEFAULT_ATLAS_LOCKS;this.showOrientation=papaya.viewer.Preferences.DEFAULT_SHOW_ORIENTATION;this.scrollBehavior=papaya.viewer.Preferences.DEFAULT_SCROLL;this.smoothDisplay=papaya.viewer.Preferences.DEFAULT_SMOOTH_DISPLAY;this.radiological=papaya.viewer.Preferences.DEFAULT_RADIOLOGICAL;this.showRuler=papaya.viewer.Preferences.DEFAULT_SHOW_RULER;this.surfaceBackgroundColor=papaya.viewer.Preferences.DEFAULT_SURFACE_BACKGROUND_COLOR;this.showSurfacePlanes=papaya.viewer.Preferences.DEFAULT_SHOW_SURFACE_PLANES;this.showSurfaceCrosshairs=papaya.viewer.Preferences.DEFAULT_SHOW_SURFACE_CROSSHAIRS};papaya.viewer.Preferences.ALL_PREFS=["showCrosshairs","atlasLocks","showOrientation","scrollBehavior","smoothDisplay","radiological","showRuler","surfaceBackgroundColor","showSurfacePlanes"];papaya.viewer.Preferences.COOKIE_PREFIX="papaya-";papaya.viewer.Preferences.COOKIE_EXPIRY_DAYS=365;papaya.viewer.Preferences.DEFAULT_SHOW_CROSSHAIRS="Yes";papaya.viewer.Preferences.DEFAULT_ATLAS_LOCKS="Mouse";papaya.viewer.Preferences.DEFAULT_SHOW_ORIENTATION="No";papaya.viewer.Preferences.DEFAULT_SCROLL="Increment Slice";papaya.viewer.Preferences.DEFAULT_SMOOTH_DISPLAY="Yes";papaya.viewer.Preferences.DEFAULT_RADIOLOGICAL="No";papaya.viewer.Preferences.DEFAULT_SHOW_RULER="No";papaya.viewer.Preferences.DEFAULT_SURFACE_BACKGROUND_COLOR="Gray";papaya.viewer.Preferences.DEFAULT_SHOW_SURFACE_PLANES="Yes";papaya.viewer.Preferences.prototype.updatePreference=function(b,a){this[b]=a;this.viewer.drawViewer(true);papaya.utilities.UrlUtils.createCookie(papaya.viewer.Preferences.COOKIE_PREFIX+b,a,papaya.viewer.Preferences.COOKIE_EXPIRY_DAYS)};papaya.viewer.Preferences.prototype.readPreferences=function(){var b,a;for(b=0;b<papaya.viewer.Preferences.ALL_PREFS.length;b+=1){a=papaya.utilities.UrlUtils.readCookie(papaya.viewer.Preferences.COOKIE_PREFIX+papaya.viewer.Preferences.ALL_PREFS[b]);if(a){this[papaya.viewer.Preferences.ALL_PREFS[b]]=a}}};"use strict";var papaya=papaya||{};papaya.viewer=papaya.viewer||{};papaya.viewer.ScreenSlice=papaya.viewer.ScreenSlice||function(f,c,g,a,b,e,h,d){this.screenVolumes=h;this.sliceDirection=c;this.currentSlice=-1;this.xDim=g;this.yDim=a;this.xSize=b;this.ySize=e;this.canvasMain=document.createElement("canvas");this.canvasMain.width=this.xDim;this.canvasMain.height=this.yDim;this.contextMain=this.canvasMain.getContext("2d");this.imageDataDraw=this.contextMain.createImageData(this.xDim,this.yDim);this.screenOffsetX=0;this.screenOffsetY=0;this.screenDim=0;this.screenTransform=[[1,0,0],[0,1,0],[0,0,1]];this.zoomTransform=[[1,0,0],[0,1,0],[0,0,1]];this.finalTransform=[[1,0,0],[0,1,0],[0,0,1]];this.radiologicalTransform=[[-1,0,this.xDim],[0,1,0],[0,0,1]];this.tempTransform=[[1,0,0],[0,1,0],[0,0,1]];this.tempTransform2=[[1,0,0],[0,1,0],[0,0,1]];this.screenTransform2=[[1,0,0],[0,1,0],[0,0,1]];this.finalTransform2=[[1,0,0],[0,1,0],[0,0,1]];this.imageData=[];this.imageData2=[];this.manager=d;this.rulerPoints=[new papaya.core.Point(parseInt(g*0.25),parseInt(a*0.25)),new papaya.core.Point(parseInt(g*0.75),parseInt(a*0.75))];this.tempPoint=new papaya.core.Point();this.canvasDTILines=null;this.contextDTILines=null};papaya.viewer.ScreenSlice.DIRECTION_UNKNOWN=0;papaya.viewer.ScreenSlice.DIRECTION_AXIAL=1;papaya.viewer.ScreenSlice.DIRECTION_CORONAL=2;papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL=3;papaya.viewer.ScreenSlice.DIRECTION_TEMPORAL=4;papaya.viewer.ScreenSlice.DIRECTION_SURFACE=5;papaya.viewer.ScreenSlice.SCREEN_PIXEL_MAX=255;papaya.viewer.ScreenSlice.SCREEN_PIXEL_MIN=0;papaya.viewer.ScreenSlice.GRAB_RADIUS=5;papaya.viewer.ScreenSlice.DTI_COLORS=["#ff0000","#00ff00","#0000ff"];papaya.viewer.ScreenSlice.prototype.updateSlice=function(k,f){var P,N,x,b,e,K,p,G,U,I,g,u,A,J,R,C,Q,B,T,L,E,t,H,l,j,q,z,m,M,V,h,y,w,r,F,i,d,S=false,o,D=0,n,O=false,v=this.manager.isWorldMode(),a;k=Math.round(k);if((this.manager.isRadiologicalMode()&&this.isRadiologicalSensitive())){o=-1}else{o=1}if(f||(this.currentSlice!==k)){this.currentSlice=k;P=this.screenVolumes[0].volume.header.origin;N=this.screenVolumes[0].volume.header.voxelDimensions;this.contextMain.clearRect(0,0,this.canvasMain.width,this.canvasMain.height);if(this.contextDTILines){this.contextDTILines.clearRect(0,0,this.screenDim,this.screenDim)}if(this.imageData.length<this.screenVolumes.length){this.imageData=papaya.utilities.ArrayUtils.createArray(this.screenVolumes.length,this.xDim*this.yDim);this.imageData2=papaya.utilities.ArrayUtils.createArray(this.screenVolumes.length,1)}for(x=0;x<this.screenVolumes.length;x+=1){if(this.screenVolumes[x].hidden){continue}I=this.screenVolumes[x].currentTimepoint;g=this.screenVolumes[x].rgb;u=this.screenVolumes[x].dti;J=this.screenVolumes[x].dtiLines;O|=!J;h=this.screenVolumes[x].dtiColors;d=this.screenVolumes[x].dtiAlphaFactor;n=((x===0)||this.screenVolumes[x].interpolation);n&=(this.manager.container.preferences.smoothDisplay==="Yes");if(J){this.updateDTILinesImage();this.contextDTILines.lineWidth=1;if(!h){this.contextDTILines.strokeStyle=papaya.viewer.ScreenSlice.DTI_COLORS[D];D+=1;D=D%3;this.contextDTILines.beginPath()}}for(b=0;b<this.yDim;b+=1){for(e=0;e<this.xDim;e+=1){K=0;p=255;U=this.screenVolumes[x].alpha;if(g){if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){K=this.screenVolumes[x].volume.getVoxelAtIndex(e,b,k,I,true)}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){K=this.screenVolumes[x].volume.getVoxelAtIndex(e,k,b,I,true)}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){K=this.screenVolumes[x].volume.getVoxelAtIndex(k,e,b,I,true)}}}G=((b*this.xDim)+e)*4;this.imageData[x][G]=K;this.imageDataDraw.data[G]=(K>>16)&255;this.imageDataDraw.data[G+1]=(K>>8)&255;this.imageDataDraw.data[G+2]=(K)&255;this.imageDataDraw.data[G+3]=p}else{if(u){if(v){if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){y=(e-P.x)*N.xSize;w=(P.y-b)*N.ySize;r=(P.z-k)*N.zSize}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){y=(e-P.x)*N.xSize;w=(P.y-k)*N.ySize;r=(P.z-b)*N.zSize}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){y=(k-P.x)*N.xSize;w=(P.y-e)*N.ySize;r=(P.z-b)*N.zSize}}}j=this.screenVolumes[x].volume.getVoxelAtCoordinate(y,w,r,0,!n);q=this.screenVolumes[x].volume.getVoxelAtCoordinate(y,w,r,1,!n);z=this.screenVolumes[x].volume.getVoxelAtCoordinate(y,w,r,2,!n);if(this.screenVolumes[x].dtiVolumeMod){U=Math.min(1,this.screenVolumes[x].dtiVolumeMod.getVoxelAtCoordinate(y,w,r,0,!n))}}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){y=e*N.xSize;w=b*N.ySize;r=k*N.zSize}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){y=e*N.xSize;w=k*N.ySize;r=b*N.zSize}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){y=k*N.xSize;w=e*N.ySize;r=b*N.zSize}}}j=this.screenVolumes[x].volume.getVoxelAtMM(y,w,r,0,!n);q=this.screenVolumes[x].volume.getVoxelAtMM(y,w,r,1,!n);z=this.screenVolumes[x].volume.getVoxelAtMM(y,w,r,2,!n);if(this.screenVolumes[x].dtiVolumeMod){U=Math.min(1,this.screenVolumes[x].dtiVolumeMod.getVoxelAtMM(y,w,r,0,!n))}}G=((b*this.xDim)+e)*4;if(J){if((j!==0)||(q!==0)||(z!==0)){if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){m=Math.atan2(o*q,j);i=Math.acos(Math.abs(z)/Math.sqrt(j*j+q*q+z*z))}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){m=Math.atan2(o*z,j);i=Math.acos(Math.abs(q)/Math.sqrt(j*j+q*q+z*z))}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){m=Math.atan2(z,q);i=Math.acos(Math.abs(j)/Math.sqrt(j*j+q*q+z*z))}}}i=1-(i/1.5708);j=papayaRoundFast(Math.abs((255*j)));q=papayaRoundFast(Math.abs((255*q)));z=papayaRoundFast(Math.abs((255*z)));A=papayaRoundFast(255*U);K=(((A&255)<<24)|((j&255)<<16)|((q&255)<<8)|(z&255));if(h){this.contextDTILines.beginPath();F=(K&16777215);this.contextDTILines.strokeStyle="#"+papaya.utilities.StringUtils.pad(F.toString(16),6)}this.imageData[x][G]=m;this.imageData2[x][G]=K;M=Math.sin(m);V=Math.cos(m);H=(this.finalTransform2[0][2]+(e+0.5)*this.finalTransform2[0][0]);l=(this.finalTransform2[1][2]+(b+0.5)*this.finalTransform2[1][1]);R=(this.finalTransform2[0][2]+(e+(0.5*i))*this.finalTransform2[0][0]);C=(this.finalTransform2[1][2]+(b+0.5)*this.finalTransform2[1][1]);T=V*(R-H)-M*(C-l)+H;L=M*(R-H)+V*(C-l)+l;this.contextDTILines.moveTo(T,L);Q=(this.finalTransform2[0][2]+(e+1-(0.5*i))*this.finalTransform2[0][0]);B=(this.finalTransform2[1][2]+(b+0.5)*this.finalTransform2[1][1]);E=V*(Q-H)-M*(B-l)+H;t=M*(Q-H)+V*(B-l)+l;this.contextDTILines.lineTo(E,t);if(h){this.contextDTILines.stroke()}}else{this.imageData[x][G]=Number.NaN}}else{if((j!==0)||(q!==0)||(z!==0)){U=(1-(((1-U)*d)))}else{U=0}j=papayaRoundFast(Math.abs((255*j)));q=papayaRoundFast(Math.abs((255*q)));z=papayaRoundFast(Math.abs((255*z)));A=papayaRoundFast(255*U);this.imageData[x][G]=(((A&255)<<24)|((j&255)<<16)|((q&255)<<8)|(z&255));if(!S){this.imageDataDraw.data[G]=j&255;this.imageDataDraw.data[G+1]=q&255;this.imageDataDraw.data[G+2]=z&255;this.imageDataDraw.data[G+3]=A&255}else{this.imageDataDraw.data[G]=(this.imageDataDraw.data[G]*(1-U)+(j&255)*U);this.imageDataDraw.data[G+1]=(this.imageDataDraw.data[G+1]*(1-U)+(q&255)*U);this.imageDataDraw.data[G+2]=(this.imageDataDraw.data[G+2]*(1-U)+(z&255)*U);this.imageDataDraw.data[G+3]=p}}}else{if(v){if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){K=this.screenVolumes[x].volume.getVoxelAtCoordinate((e-P.x)*N.xSize,(P.y-b)*N.ySize,(P.z-k)*N.zSize,I,!n)}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){K=this.screenVolumes[x].volume.getVoxelAtCoordinate((e-P.x)*N.xSize,(P.y-k)*N.ySize,(P.z-b)*N.zSize,I,!n)}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){K=this.screenVolumes[x].volume.getVoxelAtCoordinate((k-P.x)*N.xSize,(P.y-e)*N.ySize,(P.z-b)*N.zSize,I,!n)}}}}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){K=this.screenVolumes[x].volume.getVoxelAtMM(e*N.xSize,b*N.ySize,k*N.zSize,I,!n)}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){K=this.screenVolumes[x].volume.getVoxelAtMM(e*N.xSize,k*N.ySize,b*N.zSize,I,!n)}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){K=this.screenVolumes[x].volume.getVoxelAtMM(k*N.xSize,e*N.ySize,b*N.zSize,I,!n)}}}}G=((b*this.xDim)+e)*4;a=K;this.imageData[x][G]=K;if((!this.screenVolumes[x].negative&&(K<=this.screenVolumes[x].screenMin))||(this.screenVolumes[x].negative&&(K>=this.screenVolumes[x].screenMin))||isNaN(K)){K=papaya.viewer.ScreenSlice.SCREEN_PIXEL_MIN;p=this.screenVolumes[x].isOverlay()?0:255}else{if((!this.screenVolumes[x].negative&&(K>=this.screenVolumes[x].screenMax))||(this.screenVolumes[x].negative&&(K<=this.screenVolumes[x].screenMax))){K=papaya.viewer.ScreenSlice.SCREEN_PIXEL_MAX}else{K=papayaRoundFast(((K-this.screenVolumes[x].screenMin)*this.screenVolumes[x].screenRatio))}}if(!S){this.imageDataDraw.data[G]=this.screenVolumes[x].colorTable.lookupRed(K,a)*U;this.imageDataDraw.data[G+1]=this.screenVolumes[x].colorTable.lookupGreen(K,a)*U;this.imageDataDraw.data[G+2]=this.screenVolumes[x].colorTable.lookupBlue(K,a)*U;this.imageDataDraw.data[G+3]=p}else{if(p>0){this.imageDataDraw.data[G]=(this.imageDataDraw.data[G]*(1-U)+this.screenVolumes[x].colorTable.lookupRed(K,a)*U);this.imageDataDraw.data[G+1]=(this.imageDataDraw.data[G+1]*(1-U)+this.screenVolumes[x].colorTable.lookupGreen(K,a)*U);this.imageDataDraw.data[G+2]=(this.imageDataDraw.data[G+2]*(1-U)+this.screenVolumes[x].colorTable.lookupBlue(K,a)*U);this.imageDataDraw.data[G+3]=p}}}}}}if(!h){this.contextDTILines.stroke()}if(!J){S=true}}if(O){this.contextMain.putImageData(this.imageDataDraw,0,0)}}};papaya.viewer.ScreenSlice.prototype.repaint=function(w,d,o){var B,A,C,v,G,m=0,i,b,t,g,r,f,u,F,J,H,l,j,K,n,q,E,z,p,D,e,x,a,h,I=0,k=false,y;w=Math.round(w);this.currentSlice=w;this.contextMain.clearRect(0,0,this.canvasMain.width,this.canvasMain.height);if(this.contextDTILines){this.contextDTILines.clearRect(0,0,this.screenDim,this.screenDim)}if(this.imageData.length===this.screenVolumes.length){for(B=0;B<this.screenVolumes.length;B+=1){if(this.screenVolumes[B].hidden){continue}b=this.screenVolumes[B].rgb;t=this.screenVolumes[B].dti;g=this.screenVolumes[B].dtiLines;e=this.screenVolumes[B].dtiColors;if(g){this.contextDTILines.lineWidth=1;if(!e){this.contextDTILines.strokeStyle=papaya.viewer.ScreenSlice.DTI_COLORS[I];I+=1;I=I%3;this.contextDTILines.beginPath()}}for(A=0;A<this.yDim;A+=1){for(C=0;C<this.xDim;C+=1){v=this.imageData[B][m];G=255;i=this.screenVolumes[B].alpha;m=((A*this.xDim)+C)*4;if(b){this.imageDataDraw.data[m]=(v>>16)&255;this.imageDataDraw.data[m+1]=(v>>8)&255;this.imageDataDraw.data[m+2]=(v)&255;this.imageDataDraw.data[m+3]=G}else{if(t){if(g){z=this.imageData[B][m];if(!isNaN(z)){v=this.imageData2[B][m];x=(v>>16)&255;a=(v>>8)&255;h=v&255;r=(v&16777215);if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){f=Math.acos(Math.abs(h)/Math.sqrt(x*x+a*a+h*h))}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){f=Math.acos(Math.abs(a)/Math.sqrt(x*x+a*a+h*h))}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){f=Math.acos(Math.abs(x)/Math.sqrt(x*x+a*a+h*h))}}}f=1-(f/1.5708);if(e){this.contextDTILines.beginPath();this.contextDTILines.strokeStyle="#"+papaya.utilities.StringUtils.pad(r.toString(16),6)}p=Math.sin(z);D=Math.cos(z);u=(this.finalTransform2[0][2]+(C+0.5)*this.finalTransform2[0][0]);F=(this.finalTransform2[1][2]+(A+0.5)*this.finalTransform2[1][1]);J=(this.finalTransform2[0][2]+(C+(0.5*f))*this.finalTransform2[0][0]);l=(this.finalTransform2[1][2]+(A+0.5)*this.finalTransform2[1][1]);K=D*(J-u)-p*(l-F)+u;q=p*(J-u)+D*(l-F)+F;this.contextDTILines.moveTo(K,q);H=(this.finalTransform2[0][2]+(C+1-(0.5*f))*this.finalTransform2[0][0]);j=(this.finalTransform2[1][2]+(A+0.5)*this.finalTransform2[1][1]);n=D*(H-u)-p*(j-F)+u;E=p*(H-u)+D*(j-F)+F;this.contextDTILines.lineTo(n,E);if(e){this.contextDTILines.stroke()}}}else{v=this.imageData[B][m];r=(v&16777215);if(r!==0){i=(((v>>24)&255)/255)}else{i=0}if(!k){this.imageDataDraw.data[m]=(v>>16)&255;this.imageDataDraw.data[m+1]=(v>>8)&255;this.imageDataDraw.data[m+2]=(v)&255;this.imageDataDraw.data[m+3]=(v>>24)&255}else{this.imageDataDraw.data[m]=(this.imageDataDraw.data[m]*(1-i)+((v>>16)&255)*i);this.imageDataDraw.data[m+1]=(this.imageDataDraw.data[m+1]*(1-i)+((v>>8)&255)*i);this.imageDataDraw.data[m+2]=(this.imageDataDraw.data[m+2]*(1-i)+((v)&255)*i);this.imageDataDraw.data[m+3]=G}}}else{v=this.imageData[B][m];y=v;if((!this.screenVolumes[B].negative&&(v<=this.screenVolumes[B].screenMin))||(this.screenVolumes[B].negative&&(v>=this.screenVolumes[B].screenMin))||isNaN(v)){v=papaya.viewer.ScreenSlice.SCREEN_PIXEL_MIN;G=this.screenVolumes[B].isOverlay()?0:255}else{if((!this.screenVolumes[B].negative&&(v>=this.screenVolumes[B].screenMax))||(this.screenVolumes[B].negative&&(v<=this.screenVolumes[B].screenMax))){v=papaya.viewer.ScreenSlice.SCREEN_PIXEL_MAX}else{v=papayaRoundFast(((v-this.screenVolumes[B].screenMin)*this.screenVolumes[B].screenRatio))}}if(!k){this.imageDataDraw.data[m]=this.screenVolumes[B].colorTable.lookupRed(v,y)*i;this.imageDataDraw.data[m+1]=this.screenVolumes[B].colorTable.lookupGreen(v,y)*i;this.imageDataDraw.data[m+2]=this.screenVolumes[B].colorTable.lookupBlue(v,y)*i;this.imageDataDraw.data[m+3]=G}else{if(G>0){this.imageDataDraw.data[m]=(this.imageDataDraw.data[m]*(1-i)+this.screenVolumes[B].colorTable.lookupRed(v,y)*i);this.imageDataDraw.data[m+1]=(this.imageDataDraw.data[m+1]*(1-i)+this.screenVolumes[B].colorTable.lookupGreen(v,y)*i);this.imageDataDraw.data[m+2]=(this.imageDataDraw.data[m+2]*(1-i)+this.screenVolumes[B].colorTable.lookupBlue(v,y)*i);this.imageDataDraw.data[m+3]=G}}}}}}if(!e){this.contextDTILines.stroke()}if(!g){k=true}}this.contextMain.putImageData(this.imageDataDraw,0,0)}else{this.updateSlice(w,true)}};papaya.viewer.ScreenSlice.prototype.getRealWidth=function(){return this.xDim*this.xSize};papaya.viewer.ScreenSlice.prototype.getRealHeight=function(){return this.yDim*this.ySize};papaya.viewer.ScreenSlice.prototype.getXYratio=function(){return this.xSize/this.ySize};papaya.viewer.ScreenSlice.prototype.getYXratio=function(){return this.ySize/this.xSize};papaya.viewer.ScreenSlice.prototype.getXSize=function(){return this.xSize};papaya.viewer.ScreenSlice.prototype.getYSize=function(){return this.ySize};papaya.viewer.ScreenSlice.prototype.getXDim=function(){return this.xDim};papaya.viewer.ScreenSlice.prototype.getYDim=function(){return this.yDim};papaya.viewer.ScreenSlice.prototype.updateZoomTransform=function(c,i,b,h,a,d){var f,j,g,e;i=(i+0.5)*(c-1)*-1;b=(b+0.5)*(c-1)*-1;h=h*(c-1);a=a*(c-1);f=i+h;g=-1*(c-1)*this.xDim;if(f>0){f=0}else{if(f<g){f=g}}j=b+a;e=-1*(c-1)*this.yDim;if(j>0){j=0}else{if(j<e){j=e}}if(c>1){if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){d.panAmountX=(Math.round((f-i)/(c-1)));d.panAmountY=(Math.round((j-b)/(c-1)))}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){d.panAmountX=(Math.round((f-i)/(c-1)));d.panAmountZ=(Math.round((j-b)/(c-1)))}else{if(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){d.panAmountY=(Math.round((f-i)/(c-1)));d.panAmountZ=(Math.round((j-b)/(c-1)))}}}}this.zoomTransform[0][0]=c;this.zoomTransform[0][1]=0;this.zoomTransform[0][2]=f;this.zoomTransform[1][0]=0;this.zoomTransform[1][1]=c;this.zoomTransform[1][2]=j;this.updateFinalTransform()};papaya.viewer.ScreenSlice.prototype.updateFinalTransform=function(){var b,a;if(this.manager.isRadiologicalMode()&&this.isRadiologicalSensitive()){for(b=0;b<3;b+=1){for(a=0;a<3;a+=1){this.tempTransform[b][a]=this.screenTransform[b][a]}}for(b=0;b<3;b+=1){for(a=0;a<3;a+=1){this.tempTransform2[b][a]=(this.tempTransform[b][0]*this.radiologicalTransform[0][a])+(this.tempTransform[b][1]*this.radiologicalTransform[1][a])+(this.tempTransform[b][2]*this.radiologicalTransform[2][a])}}for(b=0;b<3;b+=1){for(a=0;a<3;a+=1){this.finalTransform[b][a]=(this.tempTransform2[b][0]*this.zoomTransform[0][a])+(this.tempTransform2[b][1]*this.zoomTransform[1][a])+(this.tempTransform2[b][2]*this.zoomTransform[2][a])}}for(b=0;b<3;b+=1){for(a=0;a<3;a+=1){this.tempTransform[b][a]=this.screenTransform2[b][a]}}for(b=0;b<3;b+=1){for(a=0;a<3;a+=1){this.tempTransform2[b][a]=(this.tempTransform[b][0]*this.radiologicalTransform[0][a])+(this.tempTransform[b][1]*this.radiologicalTransform[1][a])+(this.tempTransform[b][2]*this.radiologicalTransform[2][a])}}for(b=0;b<3;b+=1){for(a=0;a<3;a+=1){this.finalTransform2[b][a]=(this.tempTransform2[b][0]*this.zoomTransform[0][a])+(this.tempTransform2[b][1]*this.zoomTransform[1][a])+(this.tempTransform2[b][2]*this.zoomTransform[2][a])}}}else{for(b=0;b<3;b+=1){for(a=0;a<3;a+=1){this.finalTransform[b][a]=(this.screenTransform[b][0]*this.zoomTransform[0][a])+(this.screenTransform[b][1]*this.zoomTransform[1][a])+(this.screenTransform[b][2]*this.zoomTransform[2][a])}}for(b=0;b<3;b+=1){for(a=0;a<3;a+=1){this.finalTransform2[b][a]=(this.screenTransform2[b][0]*this.zoomTransform[0][a])+(this.screenTransform2[b][1]*this.zoomTransform[1][a])+(this.screenTransform2[b][2]*this.zoomTransform[2][a])}}}};papaya.viewer.ScreenSlice.prototype.isRadiologicalSensitive=function(){return((this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL)||(this.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL))};papaya.viewer.ScreenSlice.prototype.findProximalRulerHandle=function(b,a){this.tempPoint.x=b;this.tempPoint.y=a;if(papaya.utilities.MathUtils.lineDistance(this.tempPoint.x,this.tempPoint.y,this.rulerPoints[0].x,this.rulerPoints[0].y)<papaya.viewer.ScreenSlice.GRAB_RADIUS){return this.rulerPoints[0]}else{if(papaya.utilities.MathUtils.lineDistance(this.tempPoint.x,this.tempPoint.y,this.rulerPoints[1].x,this.rulerPoints[1].y)<papaya.viewer.ScreenSlice.GRAB_RADIUS){return this.rulerPoints[1]}}return null};papaya.viewer.ScreenSlice.prototype.updateDTILinesImage=function(){if((this.canvasDTILines===null)||(this.canvasDTILines.width!==this.screenDim)){this.canvasDTILines=document.createElement("canvas");this.canvasDTILines.width=this.screenDim;this.canvasDTILines.height=this.screenDim;this.contextDTILines=this.canvasDTILines.getContext("2d")}};papaya.viewer.ScreenSlice.prototype.clearDTILinesImage=function(){this.canvasDTILines=null;this.contextDTILines=null};"use strict";var papaya=papaya||{};papaya.viewer=papaya.viewer||{};papaya.viewer.ScreenVolume=papaya.viewer.ScreenVolume||function(a,g,d,b,c,f){this.volume=a;this.lutName=d;this.colorTable=new papaya.viewer.ColorTable(this.lutName,b);this.screenMin=this.volume.header.imageRange.displayMin;this.screenMax=this.volume.header.imageRange.displayMax;this.imageMin=this.volume.header.imageRange.imageMin;this.imageMax=this.volume.header.imageRange.imageMax;this.alpha=1;this.currentTimepoint=0;this.parametric=(c!==undefined)&&c;this.negativeScreenVol=null;this.dti=false;this.dtiLines=false;this.dtiColors=true;this.dtiVolumeMod=null;this.dtiAlphaFactor=1;this.rgb=(this.volume.header.imageType.datatype===papaya.volume.ImageType.DATATYPE_RGB);this.hasCheckedImageRange=false;this.interpolation=true;this.error=null;this.hidden=false;this.rotationX=0.5;this.rotationY=0.5;this.rotationZ=0.5;this.rotationAbout="Rotate About Center";this.isHighResSlice=this.volume.header.imageDimensions.getNumVoxelsSlice()>(512*512);this.currentCoord=f;this.seriesLabels=this.volume.getSeriesLabels();this.staticIcon=null;var e=g[this.volume.fileName];if(e){if(e.icon){this.staticIcon=e.icon}if(e.interpolation!==undefined){this.interpolation=e.interpolation}if(e.dti!==undefined){this.dti=e.dti;if(this.dti&&(this.volume.numTimepoints!==3)){this.error=new Error("DTI vector series must have 3 series points!")}if(this.dti){this.dtiLines=e.dtiLines;this.dtiColors=e.dtiColors;if(!this.dtiLines&&!this.dtiColors){this.dtiColors=true}this.initDTI()}}if((e.min!==undefined)&&(e.max!==undefined)){if(c){this.screenMin=-1*Math.abs(e.min);this.screenMax=-1*Math.abs(e.max)}else{this.screenMin=e.min;this.screenMax=e.max}}else{this.findDisplayRange(c,e)}if(c){if(e.negative_lut!==undefined){this.lutName=e.negative_lut;this.colorTable=new papaya.viewer.ColorTable(this.lutName,b)}}else{if(e.lut!==undefined){if(typeof e.lut==="string"||e.lut instanceof String){this.lutName=e.lut;this.colorTable=new papaya.viewer.ColorTable(this.lutName,b)}else{this.lutName="Object";this.colorTable=e.lut}}}if((e.alpha!==undefined)&&!b){this.alpha=e.alpha}if(e.labels&&!this.seriesLabels){this.seriesLabels=e.labels}if(b){if((e.rotation!==undefined)&&e.rotation.length&&(e.rotation.length===3)){this.rotationX=(Math.min(Math.max(e.rotation[0],-90),90)+90)/180;this.rotationY=(Math.min(Math.max(e.rotation[1],-90),90)+90)/180;this.rotationZ=(Math.min(Math.max(e.rotation[2],-90),90)+90)/180}if(e.rotationPoint){if(e.rotationPoint.toLowerCase()==="origin"){this.rotationAbout="Rotate About Origin"}else{if(e.rotationPoint.toLowerCase()==="crosshairs"){this.rotationAbout="Rotate About Crosshairs"}else{this.rotationAbout="Rotate About Center"}}}this.updateTransform()}}else{this.findDisplayRange(c,{})}this.negative=false;this.updateScreenRange();this.canvasIcon=document.createElement("canvas");this.canvasIcon.width=papaya.viewer.ColorTable.ICON_SIZE;this.canvasIcon.height=papaya.viewer.ColorTable.ICON_SIZE;this.contextIcon=this.canvasIcon.getContext("2d");this.imageDataIcon=this.contextIcon.createImageData(papaya.viewer.ColorTable.ICON_SIZE,papaya.viewer.ColorTable.ICON_SIZE);this.icon=null;this.canvasBar=document.createElement("canvas");this.canvasBar.width=papaya.viewer.ColorTable.COLOR_BAR_WIDTH;this.canvasBar.height=papaya.viewer.ColorTable.COLOR_BAR_HEIGHT;this.contextBar=this.canvasBar.getContext("2d");this.imageDataBar=this.contextBar.createImageData(papaya.viewer.ColorTable.COLOR_BAR_WIDTH,papaya.viewer.ColorTable.COLOR_BAR_HEIGHT);this.colorBar=null;this.originalScreenMin=this.screenMin;this.originalScreenMax=this.screenMax;this.updateIcon();this.updateColorBar()};papaya.viewer.ScreenVolume.makeSolidIcon=function(f,e,a){var d=document.createElement("canvas");d.width=papaya.viewer.ColorTable.ICON_SIZE;d.height=papaya.viewer.ColorTable.ICON_SIZE;var c=d.getContext("2d");c.fillStyle="rgb("+parseInt(f*255,10)+","+parseInt(e*255,10)+","+parseInt(a*255,10)+")";c.fillRect(0,0,papaya.viewer.ColorTable.ICON_SIZE,papaya.viewer.ColorTable.ICON_SIZE);return d.toDataURL()};papaya.viewer.ScreenVolume.makeStaticIcon=function(e,a,d){var f=new Image(papaya.viewer.ColorTable.ICON_SIZE,papaya.viewer.ColorTable.ICON_SIZE);var c=document.createElement("canvas");c.width=papaya.viewer.ColorTable.ICON_SIZE;c.height=papaya.viewer.ColorTable.ICON_SIZE;var b=c.getContext("2d");f.onload=function(){b.drawImage(f,0,0,f.naturalWidth,f.naturalHeight,0,0,papaya.viewer.ColorTable.ICON_SIZE,papaya.viewer.ColorTable.ICON_SIZE);a(c.toDataURL(),d)};f.src=e};papaya.viewer.ScreenVolume.prototype.setScreenRange=function(b,a){this.screenMin=b;this.screenMax=a;this.updateScreenRange()};papaya.viewer.ScreenVolume.prototype.resetScreenRange=function(){this.screenMin=this.originalScreenMin;this.screenMax=this.originalScreenMax;this.updateScreenRange()};papaya.viewer.ScreenVolume.prototype.setScreenRangeNegatives=function(b,a){this.negativeScreenVol.setScreenRange(b,a)};papaya.viewer.ScreenVolume.prototype.updateScreenRange=function(){this.screenRatio=(papaya.viewer.ScreenSlice.SCREEN_PIXEL_MAX/(this.screenMax-this.screenMin));this.negative=(this.screenMax<this.screenMin)};papaya.viewer.ScreenVolume.prototype.isOverlay=function(){return !this.colorTable.isBaseImage};papaya.viewer.ScreenVolume.prototype.findImageRange=function(){var c,b,e,a,j,d,g,h,i,f;c=(this.volume.header.imageRange.imageMin!==this.volume.header.imageRange.imageMax);if(!c&&!this.hasCheckedImageRange){this.hasCheckedImageRange=true;b=Number.MAX_VALUE;e=Number.MIN_VALUE;a=this.volume.header.imageDimensions.xDim;j=this.volume.header.imageDimensions.yDim;d=this.volume.header.imageDimensions.zDim;for(g=0;g<d;g+=1){for(h=0;h<j;h+=1){for(i=0;i<a;i+=1){f=this.volume.getVoxelAtIndexNative(i,h,g,0,true);if(f>e){e=f}if(f<b){b=f}}}}this.volume.header.imageRange.imageMin=this.imageMin=b;this.volume.header.imageRange.imageMax=this.imageMax=e}};papaya.viewer.ScreenVolume.prototype.findDisplayRange=function(e,f){var c,d,a,b;c=(this.volume.header.imageRange.imageMin!==this.volume.header.imageRange.imageMax);d=this.screenMin;a=this.screenMax;if(e){if(Math.abs(d)>Math.abs(a)){b=a;a=d;d=b}}if(!e&&((f.minPercent!==undefined)||(f.maxPercent!==undefined))){this.findImageRange();if(f.minPercent!==undefined){d=this.imageMax*f.minPercent}else{d=this.imageMin}if(f.maxPercent!==undefined){a=this.imageMax*f.maxPercent}else{a=this.imageMax}}else{if(this.isOverlay()){if((d===a)||((d<0)&&(a>0))||((d>0)&&(a<0))||(e&&((d>0)||(a>0)))||f.symmetric){this.findImageRange();if(e){if(f.symmetric||(this.imageMin===0)){d=-1*(this.imageMax-(this.imageMax*0.75));a=-1*(this.imageMax-(this.imageMax*0.25))}else{d=this.imageMin-(this.imageMin*0.75);a=this.imageMin-(this.imageMin*0.25)}}else{d=this.imageMax-(this.imageMax*0.75);a=this.imageMax-(this.imageMax*0.25)}}if(!((d<1)&&(d>-1)&&(a<1)&&(a>-1))){d=Math.round(d);a=Math.round(a)}}else{if(!((d<1)&&(d>-1)&&(a<1)&&(a>-1))){d=Math.round(d);a=Math.round(a)}if((d===0)&&(a===0)){this.findImageRange();d=this.imageMin;a=this.imageMax}if(a<=d){this.findImageRange();d=this.imageMin;a=this.imageMax}if(c&&(d<this.imageMin)){this.findImageRange();d=this.imageMin}if(c&&(a>this.imageMax)){this.findImageRange();a=this.imageMax}}}this.screenMin=d;this.screenMax=a};papaya.viewer.ScreenVolume.prototype.isUsingColorTable=function(a){return(this.lutName===a)};papaya.viewer.ScreenVolume.prototype.isRotatingAbout=function(a){return(this.rotationAbout===a)};papaya.viewer.ScreenVolume.prototype.changeColorTable=function(b,a){this.colorTable=new papaya.viewer.ColorTable(a,!this.isOverlay());this.lutName=a;this.updateIcon();this.updateColorBar();b.drawViewer(true)};papaya.viewer.ScreenVolume.prototype.getRange=function(){var a=new Array(2);a[0]=((this.colorTable.minLUT/(255/(this.screenMax-this.screenMin)))+this.screenMin);a[1]=((this.colorTable.maxLUT/(255/(this.screenMax-this.screenMin)))+this.screenMin);return a};papaya.viewer.ScreenVolume.prototype.getRangeNegative=function(){return this.negativeScreenVol.getRange()};papaya.viewer.ScreenVolume.prototype.getAlphaNegative=function(){return this.negativeScreenVol.alpha};papaya.viewer.ScreenVolume.prototype.incrementTimepoint=function(){var a=this.volume.numTimepoints;this.currentTimepoint+=1;if(this.currentTimepoint>=a){this.currentTimepoint=a-1}};papaya.viewer.ScreenVolume.prototype.decrementTimepoint=function(){this.currentTimepoint-=1;if(this.currentTimepoint<0){this.currentTimepoint=0}};papaya.viewer.ScreenVolume.prototype.setTimepoint=function(a){if(a<0){this.currentTimepoint=0}else{if(a>=this.volume.numTimepoints){this.currentTimepoint=(this.volume.numTimepoints-1)}else{this.currentTimepoint=a}}};papaya.viewer.ScreenVolume.prototype.updateMinLUT=function(a){this.colorTable.updateMinLUT(a)};papaya.viewer.ScreenVolume.prototype.updateMaxLUT=function(a){this.colorTable.updateMaxLUT(a)};papaya.viewer.ScreenVolume.prototype.updateLUT=function(b,a){this.colorTable.updateLUT(b,a)};papaya.viewer.ScreenVolume.prototype.supportsDynamicColorTable=function(){return((this.colorTable.updateMinLUT!==undefined)&&(this.colorTable.updateMaxLUT!==undefined)&&(this.colorTable.updateLUT!==undefined))};papaya.viewer.ScreenVolume.prototype.resetDynamicRange=function(){this.colorTable.minLUT=0;this.colorTable.maxLUT=papaya.viewer.ColorTable.LUT_MAX;this.updateLUT(this.colorTable.minLUT,this.colorTable.maxLUT);this.updateColorBar()};papaya.viewer.ScreenVolume.prototype.getCurrentTime=function(){return(this.currentTimepoint*(this.volume.header.voxelDimensions.timeSize*this.volume.header.voxelDimensions.getTemporalUnitMultiplier()))};papaya.viewer.ScreenVolume.prototype.setCurrentTime=function(b){var a=(this.volume.header.voxelDimensions.timeSize*this.volume.header.voxelDimensions.getTemporalUnitMultiplier());if(a===0){this.setTimepoint(0)}else{this.setTimepoint(parseInt(Math.round(b/a),10))}};papaya.viewer.ScreenVolume.prototype.hasError=function(){return(this.error!==null)};papaya.viewer.ScreenVolume.prototype.initDTI=function(){this.volume.numTimepoints=1;this.volume.header.imageDimensions.timepoints=1;this.colorTable=new papaya.viewer.ColorTable(this.lutName,false,papaya.viewer.ColorTable.TABLE_DTI_SPECTRUM);this.volume.transform.voxelValue.forceABS=!this.dtiLines;this.updateIcon()};papaya.viewer.ScreenVolume.prototype.isDTILines=function(){return this.dtiLines&&!this.dtiColors};papaya.viewer.ScreenVolume.prototype.isDTIRGB=function(){return !this.dtiLines&&this.dtiColors};papaya.viewer.ScreenVolume.prototype.isDTILinesAndRGB=function(){return this.dtiLines&&this.dtiColors};papaya.viewer.ScreenVolume.prototype.getHiddenLabel=function(){if(this.hidden){return"Show Overlay"}else{return"Hide Overlay"}};papaya.viewer.ScreenVolume.prototype.updateIcon=function(){var e,c,d,b,f;if(this.staticIcon){var g=this;var a=function(h){g.icon=h};papaya.viewer.ScreenVolume.makeStaticIcon(this.staticIcon,a)}else{if(this.imageDataIcon){e=papaya.viewer.ColorTable.LUT_MAX/papaya.viewer.ColorTable.ICON_SIZE;for(c=0;c<papaya.viewer.ColorTable.ICON_SIZE;c+=1){for(d=0;d<papaya.viewer.ColorTable.ICON_SIZE;d+=1){b=((c*papaya.viewer.ColorTable.ICON_SIZE)+d)*4;f=Math.round(d*e);this.imageDataIcon.data[b]=this.colorTable.lookupRed(f);this.imageDataIcon.data[b+1]=this.colorTable.lookupGreen(f);this.imageDataIcon.data[b+2]=this.colorTable.lookupBlue(f);this.imageDataIcon.data[b+3]=255}}this.contextIcon.putImageData(this.imageDataIcon,0,0);this.icon=this.canvasIcon.toDataURL()}}};papaya.viewer.ScreenVolume.prototype.updateColorBar=function(){var d,b,c,a,e;if(this.imageDataBar){d=papaya.viewer.ColorTable.LUT_MAX/papaya.viewer.ColorTable.COLOR_BAR_WIDTH;for(b=0;b<papaya.viewer.ColorTable.COLOR_BAR_HEIGHT;b+=1){for(c=0;c<papaya.viewer.ColorTable.COLOR_BAR_WIDTH;c+=1){a=((b*papaya.viewer.ColorTable.COLOR_BAR_WIDTH)+c)*4;e=Math.round(c*d);this.imageDataBar.data[a]=this.colorTable.lookupRed(e);this.imageDataBar.data[a+1]=this.colorTable.lookupGreen(e);this.imageDataBar.data[a+2]=this.colorTable.lookupBlue(e);this.imageDataBar.data[a+3]=255}}this.contextBar.putImageData(this.imageDataBar,0,0);this.colorBar=this.canvasBar.toDataURL()}};papaya.viewer.ScreenVolume.prototype.updateTransform=function(){var d=(this.rotationX-0.5)*180,b=(this.rotationY-0.5)*180,a=(this.rotationZ-0.5)*180,f,e,c;if(this.rotationAbout==="Rotate About Origin"){f=this.volume.header.origin.x*this.volume.header.voxelDimensions.xSize;e=this.volume.header.origin.y*this.volume.header.voxelDimensions.ySize;c=this.volume.header.origin.z*this.volume.header.voxelDimensions.zSize}else{if(this.rotationAbout==="Rotate About Crosshairs"){f=this.currentCoord.x*this.volume.header.voxelDimensions.xSize;e=this.currentCoord.y*this.volume.header.voxelDimensions.ySize;c=this.currentCoord.z*this.volume.header.voxelDimensions.zSize}else{f=(this.volume.header.imageDimensions.xDim/2)*this.volume.header.voxelDimensions.xSize;e=(this.volume.header.imageDimensions.yDim/2)*this.volume.header.voxelDimensions.ySize;c=(this.volume.header.imageDimensions.zDim/2)*this.volume.header.voxelDimensions.zSize}}this.volume.transform.updateImageMat(f,e,c,d,b,a)};papaya.viewer.ScreenVolume.prototype.resetTransform=function(){this.rotationX=0.5;this.rotationY=0.5;this.rotationZ=0.5};"use strict";var papaya=papaya||{};papaya.viewer=papaya.viewer||{};var PAPAYA_BUILD_NUM=PAPAYA_BUILD_NUM||"0";papaya.viewer.Viewer=papaya.viewer.Viewer||function(b,c,a,d){this.container=b;this.canvas=document.createElement("canvas");this.canvas.width=c;this.canvas.height=a;this.context=this.canvas.getContext("2d");this.canvas.style.padding=0;this.canvas.style.margin=0;this.canvas.style.border="none";this.atlas=null;this.initialized=false;this.pageLoaded=false;this.loadingVolume=null;this.volume=new papaya.volume.Volume(this.container.display,this);this.screenVolumes=[];this.surfaces=[];this.currentScreenVolume=null;this.axialSlice=null;this.coronalSlice=null;this.sagittalSlice=null;this.surfaceView=null;this.selectedSlice=null;this.mainImage=null;this.lowerImageBot2=null;this.lowerImageBot=null;this.lowerImageTop=null;this.viewerDim=0;this.worldSpace=false;this.ignoreSync=false;this.currentCoord=new papaya.core.Coordinate(0,0,0);this.cursorPosition=new papaya.core.Coordinate(0,0,0);this.longestDim=0;this.longestDimSize=0;this.draggingSliceDir=0;this.isDragging=false;this.isWindowControl=false;this.isZoomMode=false;this.isContextMode=false;this.isPanning=false;this.didLongTouch=false;this.isLongTouch=false;this.zoomFactor=papaya.viewer.Viewer.ZOOM_FACTOR_MIN;this.zoomFactorPrevious=papaya.viewer.Viewer.ZOOM_FACTOR_MIN;this.zoomLocX=0;this.zoomLocY=0;this.zoomLocZ=0;this.panLocX=0;this.panLocY=0;this.panLocZ=0;this.panAmountX=0;this.panAmountY=0;this.panAmountZ=0;this.keyPressIgnored=false;this.previousMousePosition=new papaya.core.Point();this.isControlKeyDown=false;this.isAltKeyDown=false;this.isShiftKeyDown=false;this.toggleMainCrosshairs=true;this.bgColor=null;this.hasSeries=false;this.controlsHidden=false;this.loadingDTI=false;this.loadingDTIModRef=null;this.tempCoor=new papaya.core.Coordinate();this.listenerContextMenu=function(e){e.preventDefault();return false};this.listenerMouseMove=papaya.utilities.ObjectUtils.bind(this,this.mouseMoveEvent);this.listenerMouseDown=papaya.utilities.ObjectUtils.bind(this,this.mouseDownEvent);this.listenerMouseOut=papaya.utilities.ObjectUtils.bind(this,this.mouseOutEvent);this.listenerMouseLeave=papaya.utilities.ObjectUtils.bind(this,this.mouseLeaveEvent);this.listenerMouseUp=papaya.utilities.ObjectUtils.bind(this,this.mouseUpEvent);this.listenerMouseDoubleClick=papaya.utilities.ObjectUtils.bind(this,this.mouseDoubleClickEvent);this.listenerKeyDown=papaya.utilities.ObjectUtils.bind(this,this.keyDownEvent);this.listenerKeyUp=papaya.utilities.ObjectUtils.bind(this,this.keyUpEvent);this.listenerTouchMove=papaya.utilities.ObjectUtils.bind(this,this.touchMoveEvent);this.listenerTouchStart=papaya.utilities.ObjectUtils.bind(this,this.touchStartEvent);this.listenerTouchEnd=papaya.utilities.ObjectUtils.bind(this,this.touchEndEvent);this.initialCoordinate=null;this.listenerScroll=papaya.utilities.ObjectUtils.bind(this,this.scrolled);this.longTouchTimer=null;this.updateTimer=null;this.updateTimerEvent=null;this.drawEmptyViewer();this.processParams(d)};papaya.viewer.Viewer.GAP=PAPAYA_SPACING;papaya.viewer.Viewer.BACKGROUND_COLOR="rgba(0, 0, 0, 255)";papaya.viewer.Viewer.CROSSHAIRS_COLOR="rgba(28, 134, 238, 255)";papaya.viewer.Viewer.KEYCODE_ROTATE_VIEWS=32;papaya.viewer.Viewer.KEYCODE_CENTER=67;papaya.viewer.Viewer.KEYCODE_ORIGIN=79;papaya.viewer.Viewer.KEYCODE_ARROW_UP=38;papaya.viewer.Viewer.KEYCODE_ARROW_DOWN=40;papaya.viewer.Viewer.KEYCODE_ARROW_RIGHT=39;papaya.viewer.Viewer.KEYCODE_ARROW_LEFT=37;papaya.viewer.Viewer.KEYCODE_PAGE_UP=33;papaya.viewer.Viewer.KEYCODE_PAGE_DOWN=34;papaya.viewer.Viewer.KEYCODE_SINGLE_QUOTE=222;papaya.viewer.Viewer.KEYCODE_FORWARD_SLASH=191;papaya.viewer.Viewer.KEYCODE_INCREMENT_MAIN=71;papaya.viewer.Viewer.KEYCODE_DECREMENT_MAIN=86;papaya.viewer.Viewer.KEYCODE_TOGGLE_CROSSHAIRS=65;papaya.viewer.Viewer.KEYCODE_SERIES_BACK=188;papaya.viewer.Viewer.KEYCODE_SERIES_FORWARD=190;papaya.viewer.Viewer.KEYCODE_RULER=82;papaya.viewer.Viewer.MAX_OVERLAYS=8;papaya.viewer.Viewer.ORIENTATION_MARKER_SUPERIOR="S";papaya.viewer.Viewer.ORIENTATION_MARKER_INFERIOR="I";papaya.viewer.Viewer.ORIENTATION_MARKER_ANTERIOR="A";papaya.viewer.Viewer.ORIENTATION_MARKER_POSTERIOR="P";papaya.viewer.Viewer.ORIENTATION_MARKER_LEFT="L";papaya.viewer.Viewer.ORIENTATION_MARKER_RIGHT="R";papaya.viewer.Viewer.ORIENTATION_MARKER_SIZE=16;papaya.viewer.Viewer.ORIENTATION_CERTAINTY_UNKNOWN_COLOR="red";papaya.viewer.Viewer.ORIENTATION_CERTAINTY_LOW_COLOR="yellow";papaya.viewer.Viewer.ORIENTATION_CERTAINTY_HIGH_COLOR="white";papaya.viewer.Viewer.UPDATE_TIMER_INTERVAL=250;papaya.viewer.Viewer.ZOOM_FACTOR_MAX=10;papaya.viewer.Viewer.ZOOM_FACTOR_MIN=1;papaya.viewer.Viewer.MOUSE_SCROLL_THRESHLD=0.25;papaya.viewer.Viewer.TITLE_MAX_LENGTH=30;papaya.viewer.Viewer.validDimBounds=function(a,b){return(a<b)?a:b-1};papaya.viewer.Viewer.getKeyCode=function(a){return(a.keyCode||a.charCode)};papaya.viewer.Viewer.isControlKey=function(a){var b=papaya.viewer.Viewer.getKeyCode(a);if((papaya.utilities.PlatformUtils.os==="MacOS")&&((b===91)||(b===93)||(b===224))){return true}return((papaya.utilities.PlatformUtils.os!=="MacOS")&&(b===17))};papaya.viewer.Viewer.isAltKey=function(a){var b=papaya.viewer.Viewer.getKeyCode(a);return(b===18)};papaya.viewer.Viewer.isShiftKey=function(a){var b=!!a.shiftKey;if(!b&&window.event){b=!!window.event.shiftKey}return b};papaya.viewer.Viewer.getOffsetRect=function(d){var g=d.getBoundingClientRect();var h=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop;var e=window.pageXOffset||b.scrollLeft;var f=b.clientTop||h.clientTop||0;var i=b.clientLeft||h.clientLeft||0;var j=g.top+a-f;var c=g.left+e-i;return{top:Math.round(j),left:Math.round(c)}};papaya.viewer.Viewer.drawRoundRect=function(d,c,h,e,b,a,g,f){if(typeof f==="undefined"){f=true}if(typeof a==="undefined"){a=5}d.beginPath();d.moveTo(c+a,h);d.lineTo(c+e-a,h);d.quadraticCurveTo(c+e,h,c+e,h+a);d.lineTo(c+e,h+b-a);d.quadraticCurveTo(c+e,h+b,c+e-a,h+b);d.lineTo(c+a,h+b);d.quadraticCurveTo(c,h+b,c,h+b-a);d.lineTo(c,h+a);d.quadraticCurveTo(c,h,c+a,h);d.closePath();if(f){d.stroke()}if(g){d.fill()}};papaya.viewer.Viewer.prototype.loadImage=function(a,c,d,b){if(this.screenVolumes.length===0){this.loadBaseImage(a,c,d,b)}else{this.loadOverlay(a,c,d,b)}};papaya.viewer.Viewer.prototype.showDialog=function(g,f,b,h,a){var e,c=-1;for(e=0;e<papayaContainers.length;e+=1){if(papayaContainers[e]===this.container){c=e;break}}var d=new papaya.ui.Dialog(this.container,g,f,b,h,a,c);d.showDialog()};papaya.viewer.Viewer.prototype.loadBaseImage=function(b,d,g,c){var f,e=[],a=this.container.findLoadableImages(b);this.volume=new papaya.volume.Volume(this.container.display,this,this.container.params);if(c){if(a&&a.length){for(f=0;f<a.length;f+=1){e.push(a[f].encode)}}else{if(!Array.isArray(b)){b=[b]}e=b}this.volume.readBinaryData(e,papaya.utilities.ObjectUtils.bind(this,this.initializeViewer))}else{if(g){if(a){for(f=0;f<a.length;f+=1){e.push(a[f].encode)}}else{e=b}this.volume.readEncodedData(e,papaya.utilities.ObjectUtils.bind(this,this.initializeViewer))}else{if((a!==null)&&(a[0].encode!==undefined)){for(f=0;f<a.length;f+=1){e.push(a[f].encode)}this.volume.readEncodedData(e,papaya.utilities.ObjectUtils.bind(this,this.initializeViewer))}else{if(d){this.volume.readURLs(b,papaya.utilities.ObjectUtils.bind(this,this.initializeViewer))}else{if((a!==null)&&(a[0].url!==undefined)){if(a){for(f=0;f<a.length;f+=1){e.push(a[f].url)}}this.volume.readURLs(e,papaya.utilities.ObjectUtils.bind(this,this.initializeViewer))}else{this.volume.readFiles(b,papaya.utilities.ObjectUtils.bind(this,this.initializeViewer))}}}}}};papaya.viewer.Viewer.prototype.loadOverlay=function(b,d,f,c){var e,a=this.container.findLoadableImage(b);this.loadingVolume=new papaya.volume.Volume(this.container.display,this,this.container.params);if(this.screenVolumes.length>papaya.viewer.Viewer.MAX_OVERLAYS){this.loadingVolume.error=new Error("Maximum number of overlays ("+papaya.viewer.Viewer.MAX_OVERLAYS+") has been reached!");this.initializeOverlay()}else{if(c){if(!Array.isArray(b)){b=[b]}e=b;this.loadingVolume.readBinaryData(e,papaya.utilities.ObjectUtils.bind(this,this.initializeOverlay))}else{if(f){e=a.encode;if(!(e instanceof Array)){e=[];e[0]=a.encode}this.loadingVolume.readEncodedData(e,papaya.utilities.ObjectUtils.bind(this,this.initializeOverlay))}else{if((a!==null)&&(a.encode!==undefined)){e=a.encode;if(!(e instanceof Array)){e=[];e[0]=a.encode}this.loadingVolume.readEncodedData(e,papaya.utilities.ObjectUtils.bind(this,this.initializeOverlay))}else{if(d){this.loadingVolume.readURLs(b,papaya.utilities.ObjectUtils.bind(this,this.initializeOverlay))}else{if((a!==null)&&(a.url!==undefined)){this.loadingVolume.readURLs([a.url],papaya.utilities.ObjectUtils.bind(this,this.initializeOverlay))}else{this.loadingVolume.readFiles(b,papaya.utilities.ObjectUtils.bind(this,this.initializeOverlay))}}}}}}};papaya.viewer.Viewer.prototype.loadSurface=function(d,c,e){var b=this.container.findLoadableImage(d,true);if(this.screenVolumes.length==0){this.container.display.drawError("Load an image before loading a surface!");return}var a=new papaya.surface.Surface(this.container.display,this.container.params);if(e){a.readEncodedData(d[0],this.volume,papaya.utilities.ObjectUtils.bind(this,this.initializeSurface))}else{if((b!==null)&&(b.encode!==undefined)){a.readEncodedData(b.encode,this.volume,papaya.utilities.ObjectUtils.bind(this,this.initializeSurface))}else{if(c){a.readURL(d,this.volume,papaya.utilities.ObjectUtils.bind(this,this.initializeSurface))}else{if((b!==null)&&(b.url!==undefined)){a.readURL(b.url,this.volume,papaya.utilities.ObjectUtils.bind(this,this.initializeSurface))}else{a.readFile(d[0],this.volume,papaya.utilities.ObjectUtils.bind(this,this.initializeSurface))}}}}};papaya.viewer.Viewer.prototype.initializeSurface=function(a){var b=a;if(!a.error){while(b!==null){this.surfaces.push(b);b=b.nextSurface}if(this.surfaceView===null){this.lowerImageBot2=this.surfaceView=new papaya.viewer.ScreenSurface(this.volume,this.surfaces,this,this.container.params);this.container.resizeViewerComponents(true)}else{b=a;while(b!==null){this.surfaceView.initBuffers(this.surfaceView.context,b);b=b.nextSurface}}if(this.container.params.mainView&&(this.container.params.mainView.toLowerCase()==="surface")){this.mainImage=this.surfaceView;this.lowerImageTop=this.axialSlice;this.lowerImageBot=this.sagittalSlice;this.lowerImageBot2=this.coronalSlice;this.viewsChanged()}this.container.toolbar.buildToolbar();this.container.toolbar.updateImageButtons();if(this.container.hasMoreToLoad()){this.container.loadNext()}else{this.finishedLoading()}}else{if(a.error){this.container.display.drawError(a.error)}}};papaya.viewer.Viewer.prototype.atlasLoaded=function(){this.finishedLoading()};papaya.viewer.Viewer.prototype.initializeViewer=function(){var a,b;b=this;if(this.volume.hasError()){a=this.volume.error.message;this.resetViewer();this.container.clearParams();this.container.display.drawError(a)}else{this.screenVolumes[0]=new papaya.viewer.ScreenVolume(this.volume,this.container.params,papaya.viewer.ColorTable.DEFAULT_COLOR_TABLE.name,true,false,this.currentCoord);if(this.loadingDTI){this.loadingDTI=false;this.screenVolumes[0].dti=true;if(this.screenVolumes[0].dti&&(this.screenVolumes[0].volume.numTimepoints!==3)){this.screenVolumes[0].error=new Error("DTI vector series must have 3 series points!")}if(this.screenVolumes[0].dti){this.screenVolumes[0].initDTI()}}if(this.screenVolumes[0].hasError()){a=this.screenVolumes[0].error.message;this.resetViewer();this.container.clearParams();this.container.display.drawError(a);return}this.setCurrentScreenVol(0);this.axialSlice=new papaya.viewer.ScreenSlice(this.volume,papaya.viewer.ScreenSlice.DIRECTION_AXIAL,this.volume.getXDim(),this.volume.getYDim(),this.volume.getXSize(),this.volume.getYSize(),this.screenVolumes,this);this.coronalSlice=new papaya.viewer.ScreenSlice(this.volume,papaya.viewer.ScreenSlice.DIRECTION_CORONAL,this.volume.getXDim(),this.volume.getZDim(),this.volume.getXSize(),this.volume.getZSize(),this.screenVolumes,this);this.sagittalSlice=new papaya.viewer.ScreenSlice(this.volume,papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL,this.volume.getYDim(),this.volume.getZDim(),this.volume.getYSize(),this.volume.getZSize(),this.screenVolumes,this);if((this.container.params.mainView===undefined)||(this.container.params.mainView.toLowerCase()==="axial")){this.mainImage=this.axialSlice;this.lowerImageTop=this.sagittalSlice;this.lowerImageBot=this.coronalSlice}else{if(this.container.params.mainView.toLowerCase()==="coronal"){this.mainImage=this.coronalSlice;this.lowerImageTop=this.axialSlice;this.lowerImageBot=this.sagittalSlice}else{if(this.container.params.mainView.toLowerCase()==="sagittal"){this.mainImage=this.sagittalSlice;this.lowerImageTop=this.coronalSlice;this.lowerImageBot=this.axialSlice}else{this.mainImage=this.axialSlice;this.lowerImageTop=this.sagittalSlice;this.lowerImageBot=this.coronalSlice}}}this.canvas.addEventListener("mousemove",this.listenerMouseMove,false);this.canvas.addEventListener("mousedown",this.listenerMouseDown,false);this.canvas.addEventListener("mouseout",this.listenerMouseOut,false);this.canvas.addEventListener("mouseleave",this.listenerMouseLeave,false);this.canvas.addEventListener("mouseup",this.listenerMouseUp,false);document.addEventListener("keydown",this.listenerKeyDown,true);document.addEventListener("keyup",this.listenerKeyUp,true);this.canvas.addEventListener("touchmove",this.listenerTouchMove,false);this.canvas.addEventListener("touchstart",this.listenerTouchStart,false);this.canvas.addEventListener("touchend",this.listenerTouchEnd,false);this.canvas.addEventListener("dblclick",this.listenerMouseDoubleClick,false);document.addEventListener("contextmenu",this.listenerContextMenu,false);if(this.container.showControlBar){$(this.container.sliderControlHtml.find("."+PAPAYA_CONTROL_MAIN_SLIDER).find("button")).eq(0).click(function(){if(b.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){b.incrementAxial(false)}else{if(b.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){b.incrementCoronal(false)}else{if(b.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){b.incrementSagittal(true)}}}});$(this.container.sliderControlHtml.find("."+PAPAYA_CONTROL_MAIN_SLIDER).find("button")).eq(1).click(function(){if(b.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){b.incrementAxial(true)}else{if(b.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){b.incrementCoronal(true)}else{if(b.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){b.incrementSagittal(false)}}}});$(this.container.sliderControlHtml.find("."+PAPAYA_CONTROL_DIRECTION_SLIDER).eq(0).find("button").eq(0)).click(function(){b.incrementAxial(false)});$(this.container.sliderControlHtml.find("."+PAPAYA_CONTROL_DIRECTION_SLIDER).eq(0).find("button").eq(1)).click(function(){b.incrementAxial(true)});$(this.container.sliderControlHtml.find("."+PAPAYA_CONTROL_DIRECTION_SLIDER).eq(1).find("button").eq(0)).click(function(){b.incrementCoronal(false)});$(this.container.sliderControlHtml.find("."+PAPAYA_CONTROL_DIRECTION_SLIDER).eq(1).find("button").eq(1)).click(function(){b.incrementCoronal(true)});$(this.container.sliderControlHtml.find("."+PAPAYA_CONTROL_DIRECTION_SLIDER).eq(2).find("button").eq(0)).click(function(){b.incrementSagittal(true)});$(this.container.sliderControlHtml.find("."+PAPAYA_CONTROL_DIRECTION_SLIDER).eq(2).find("button").eq(1)).click(function(){b.incrementSagittal(false)});$(this.container.sliderControlHtml.find("."+PAPAYA_CONTROL_DIRECTION_SLIDER).eq(3).find("button").eq(0)).click(function(){b.decrementSeriesPoint()});$(this.container.sliderControlHtml.find("."+PAPAYA_CONTROL_DIRECTION_SLIDER).eq(3).find("button").eq(1)).click(function(){b.incrementSeriesPoint()});$(this.container.sliderControlHtml.find("."+PAPAYA_CONTROL_SWAP_BUTTON_CSS)).click(function(){b.rotateViews()});$(this.container.sliderControlHtml.find("."+PAPAYA_CONTROL_GOTO_CENTER_BUTTON_CSS)).click(function(){var c=new papaya.core.Coordinate(Math.floor(b.volume.header.imageDimensions.xDim/2),Math.floor(b.volume.header.imageDimensions.yDim/2),Math.floor(b.volume.header.imageDimensions.zDim/2));b.gotoCoordinate(c)});$(this.container.sliderControlHtml.find("."+PAPAYA_CONTROL_GOTO_ORIGIN_BUTTON_CSS)).click(function(){b.gotoCoordinate(b.volume.header.origin)});$("."+PAPAYA_CONTROL_INCREMENT_BUTTON_CSS).prop("disabled",false);$("."+PAPAYA_CONTROL_SWAP_BUTTON_CSS).prop("disabled",false);$("."+PAPAYA_CONTROL_GOTO_CENTER_BUTTON_CSS).prop("disabled",false);$("."+PAPAYA_CONTROL_GOTO_ORIGIN_BUTTON_CSS).prop("disabled",false)}else{if(this.container.showControls){$("#"+PAPAYA_CONTROL_MAIN_INCREMENT_BUTTON_CSS+this.container.containerIndex).css({display:"inline"});$("#"+PAPAYA_CONTROL_MAIN_DECREMENT_BUTTON_CSS+this.container.containerIndex).css({display:"inline"});$("#"+PAPAYA_CONTROL_MAIN_SWAP_BUTTON_CSS+this.container.containerIndex).css({display:"inline"});$(this.container.containerHtml.find("#"+PAPAYA_CONTROL_MAIN_SWAP_BUTTON_CSS+this.container.containerIndex)).click(function(){b.rotateViews()});$(this.container.containerHtml.find("#"+PAPAYA_CONTROL_MAIN_INCREMENT_BUTTON_CSS+this.container.containerIndex)).click(function(){if(b.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){b.incrementAxial(false)}else{if(b.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){b.incrementCoronal(false)}else{if(b.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){b.incrementSagittal(true)}}}});$(this.container.containerHtml.find("#"+PAPAYA_CONTROL_MAIN_DECREMENT_BUTTON_CSS+this.container.containerIndex)).click(function(){if(b.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){b.incrementAxial(true)}else{if(b.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){b.incrementCoronal(true)}else{if(b.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){b.incrementSagittal(false)}}}});$(this.container.containerHtml.find("#"+PAPAYA_CONTROL_MAIN_GOTO_CENTER_BUTTON_CSS+this.container.containerIndex)).click(function(){var c=new papaya.core.Coordinate(Math.floor(b.volume.header.imageDimensions.xDim/2),Math.floor(b.volume.header.imageDimensions.yDim/2),Math.floor(b.volume.header.imageDimensions.zDim/2));b.gotoCoordinate(c)});$(this.container.containerHtml.find("#"+PAPAYA_CONTROL_MAIN_GOTO_ORIGIN_BUTTON_CSS+this.container.containerIndex)).click(function(){b.gotoCoordinate(b.volume.header.origin)})}}this.hasSeries=(this.volume.header.imageDimensions.timepoints>1);if(this.container.allowScroll){this.addScroll()}this.setLongestDim(this.volume);this.calculateScreenSliceTransforms(this);this.currentCoord.setCoordinate(papayaFloorFast(this.volume.getXDim()/2),papayaFloorFast(this.volume.getYDim()/2),papayaFloorFast(this.volume.getZDim()/2));this.updateOffsetRect();this.bgColor=$("body").css("background-color");if((this.bgColor==="rgba(0, 0, 0, 0)")||((this.bgColor==="transparent"))){this.bgColor="rgba(255, 255, 255, 255)"}this.context.fillStyle=this.bgColor;this.context.fillRect(0,0,this.canvas.offsetWidth,this.canvas.offsetHeight);if(this.volume.isWorldSpaceOnly()){if(this.ignoreNiftiTransforms){this.volume.header.orientationCertainty=papaya.volume.Header.ORIENTATION_CERTAINTY_UNKNOWN}else{this.worldSpace=true}}if(papaya.Container.atlas){this.atlas=papaya.Container.atlas}this.initialized=true;this.container.resizeViewerComponents(true);this.drawViewer();this.container.toolbar.buildToolbar();this.container.toolbar.updateImageButtons();this.updateWindowTitle();this.container.loadingImageIndex=1;if(this.container.hasMoreToLoad()){this.container.loadNext()}else{this.finishedLoading()}}};papaya.viewer.Viewer.prototype.finishedLoading=function(){if(!this.pageLoaded){this.goToInitialCoordinate();this.updateSliceSliderControl();this.pageLoaded=true}if(this.container.loadingComplete){this.container.loadingComplete();this.container.loadingComplete=null}this.container.toolbar.buildToolbar();this.container.toolbar.updateImageButtons();this.updateWindowTitle()};papaya.viewer.Viewer.prototype.addScroll=function(){window.addEventListener(papaya.utilities.PlatformUtils.getSupportedScrollEvent(),this.listenerScroll,false)};papaya.viewer.Viewer.prototype.removeScroll=function(){window.removeEventListener(papaya.utilities.PlatformUtils.getSupportedScrollEvent(),this.listenerScroll,false)};papaya.viewer.Viewer.prototype.updateOffsetRect=function(){this.canvasRect=papaya.viewer.Viewer.getOffsetRect(this.canvas)};papaya.viewer.Viewer.prototype.initializeOverlay=function(){var g,f,e,c,d,b,a;if(this.loadingVolume.hasError()){this.container.display.drawError(this.loadingVolume.error.message);this.container.clearParams();this.loadingVolume=null}else{g=this.container.params[this.loadingVolume.fileName];f=(g&&g.parametric);b=(g&&g.dtiMod);if(this.loadingDTIModRef){this.loadingDTIModRef.dtiVolumeMod=this.loadingVolume;this.loadingDTIModRef=null}else{if(b){a=this.getScreenVolumeByName(g.dtiRef);if(a){a.dtiVolumeMod=this.loadingVolume;if(g.dtiModAlphaFactor!==undefined){a.dtiAlphaFactor=g.dtiModAlphaFactor}else{a.dtiAlphaFactor=1}}}else{c=new papaya.viewer.ScreenVolume(this.loadingVolume,this.container.params,(f?papaya.viewer.ColorTable.PARAMETRIC_COLOR_TABLES[0].name:this.getNextColorTable()),false,false,this.currentCoord);if(this.loadingDTI){this.loadingDTI=false;c.dti=true;if(c.dti&&(c.volume.numTimepoints!==3)){c.error=new Error("DTI vector series must have 3 series points!")}if(c.dti){c.initDTI()}}if(c.hasError()){this.container.display.drawError(c.error.message);this.container.clearParams();this.loadingVolume=null;return}this.screenVolumes[this.screenVolumes.length]=c;this.setCurrentScreenVol(this.screenVolumes.length-1);if(f){this.screenVolumes[this.screenVolumes.length-1].findImageRange();if(this.screenVolumes[this.screenVolumes.length-1].volume.header.imageRange.imageMin<0){this.screenVolumes[this.screenVolumes.length]=d=new papaya.viewer.ScreenVolume(this.loadingVolume,this.container.params,papaya.viewer.ColorTable.PARAMETRIC_COLOR_TABLES[1].name,false,true,this.currentCoord);c.negativeScreenVol=d;this.setCurrentScreenVol(this.screenVolumes.length-1)}}}}this.container.toolbar.buildToolbar();this.container.toolbar.updateImageButtons();this.drawViewer(true);this.hasSeries=false;for(e=0;e<this.screenVolumes.length;e+=1){if(this.screenVolumes[e].volume.header.imageDimensions.timepoints>1){this.hasSeries=true;break}}this.container.resizeViewerComponents();this.updateWindowTitle();this.loadingVolume=null;if(g&&g.loadingComplete){g.loadingComplete()}if(this.container.hasMoreToLoad()){this.container.loadNext()}else{this.finishedLoading()}}};papaya.viewer.Viewer.prototype.closeOverlayByRef=function(a){this.closeOverlay(this.getScreenVolumeIndex(a))};papaya.viewer.Viewer.prototype.closeOverlay=function(a){var b;for(b=0;b<this.screenVolumes.length;b+=1){if(this.screenVolumes[b].negativeScreenVol===this.screenVolumes[a]){this.screenVolumes[b].negativeScreenVol=null}}this.screenVolumes.splice(a,1);this.setCurrentScreenVol(this.screenVolumes.length-1);this.drawViewer(true);this.container.toolbar.buildToolbar();this.container.toolbar.updateImageButtons();this.updateWindowTitle();this.hasSeries=false;for(b=0;b<this.screenVolumes.length;b+=1){if(this.screenVolumes[b].volume.header.imageDimensions.timepoints>1){this.hasSeries=true;break}}this.container.resizeViewerComponents()};papaya.viewer.Viewer.prototype.hasDefinedAtlas=function(){var a,b;a=(typeof papaya.data);if(a!=="undefined"){b=(typeof papaya.data.Atlas);if(b!=="undefined"){return true}}return false};papaya.viewer.Viewer.prototype.loadAtlas=function(){var a=this;if(this.atlas===null){this.atlas=new papaya.viewer.Atlas(papaya.data.Atlas,this.container,papaya.utilities.ObjectUtils.bind(a,a.atlasLoaded))}};papaya.viewer.Viewer.prototype.isInsideMainSlice=function(b,a){this.updateOffsetRect();b=b-this.canvasRect.left;a=a-this.canvasRect.top;if(this.mainImage===this.axialSlice){return this.insideScreenSlice(this.axialSlice,b,a,this.volume.getXDim(),this.volume.getYDim())}else{if(this.mainImage===this.coronalSlice){return this.insideScreenSlice(this.coronalSlice,b,a,this.volume.getXDim(),this.volume.getZDim())}else{if(this.mainImage===this.sagittalSlice){return this.insideScreenSlice(this.sagittalSlice,b,a,this.volume.getYDim(),this.volume.getZDim())}}}return false};papaya.viewer.Viewer.prototype.updatePosition=function(e,b,a,d){var j,c,i,h,g,f;e.updateOffsetRect();h=b;g=a;b=b-this.canvasRect.left;a=a-this.canvasRect.top;if(this.insideScreenSlice(e.axialSlice,b,a,e.volume.getXDim(),e.volume.getYDim())){if(!this.isDragging||(this.draggingSliceDir===papaya.viewer.ScreenSlice.DIRECTION_AXIAL)){j=this.convertScreenToImageCoordinateX(b,e.axialSlice);c=this.convertScreenToImageCoordinateY(a,e.axialSlice);if((j!==e.currentCoord.x)||(c!==e.currentCoord.y)){e.currentCoord.x=j;e.currentCoord.y=c;this.draggingSliceDir=papaya.viewer.ScreenSlice.DIRECTION_AXIAL}}}else{if(this.insideScreenSlice(e.coronalSlice,b,a,e.volume.getXDim(),e.volume.getZDim())){if(!this.isDragging||(this.draggingSliceDir===papaya.viewer.ScreenSlice.DIRECTION_CORONAL)){j=this.convertScreenToImageCoordinateX(b,e.coronalSlice);c=this.convertScreenToImageCoordinateY(a,e.coronalSlice);if((j!==e.currentCoord.x)||(c!==e.currentCoord.y)){e.currentCoord.x=j;e.currentCoord.z=c;this.draggingSliceDir=papaya.viewer.ScreenSlice.DIRECTION_CORONAL}}}else{if(this.insideScreenSlice(e.sagittalSlice,b,a,e.volume.getYDim(),e.volume.getZDim())){if(!this.isDragging||(this.draggingSliceDir===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL)){j=this.convertScreenToImageCoordinateX(b,e.sagittalSlice);c=this.convertScreenToImageCoordinateY(a,e.sagittalSlice);if((j!==e.currentCoord.x)||(c!==e.currentCoord.y)){i=j;e.currentCoord.y=i;e.currentCoord.z=c;this.draggingSliceDir=papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL}}}else{if(e.surfaceView&&this.insideScreenSlice(e.surfaceView,b,a,e.surfaceView.screenDim,e.surfaceView.screenDim)){e.surfaceView.updateDynamic(h,g,(this.selectedSlice===this.mainImage)?1:3)}}}}this.container.coordinateChanged(this);e.drawViewer(false,d)};papaya.viewer.Viewer.prototype.convertScreenToImageCoordinateX=function(b,a){return papaya.viewer.Viewer.validDimBounds(papayaFloorFast((b-a.finalTransform[0][2])/a.finalTransform[0][0]),a.xDim)};papaya.viewer.Viewer.prototype.convertScreenToImageCoordinateY=function(b,a){return papaya.viewer.Viewer.validDimBounds(papayaFloorFast((b-a.finalTransform[1][2])/a.finalTransform[1][1]),a.yDim)};papaya.viewer.Viewer.prototype.convertScreenToImageCoordinate=function(f,e,a){var d,c,b;if(a===undefined){a=this.mainImage}if(a.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){d=this.convertScreenToImageCoordinateX(f,a);c=this.convertScreenToImageCoordinateY(e,a);b=this.axialSlice.currentSlice}else{if(a.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){d=this.convertScreenToImageCoordinateX(f,a);b=this.convertScreenToImageCoordinateY(e,a);c=this.coronalSlice.currentSlice}else{if(a.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){c=this.convertScreenToImageCoordinateX(f,a);b=this.convertScreenToImageCoordinateY(e,a);d=this.sagittalSlice.currentSlice}}}return new papaya.core.Coordinate(d,c,b)};papaya.viewer.Viewer.prototype.convertCurrentCoordinateToScreen=function(a){return this.convertCoordinateToScreen(this.currentCoord,a)};papaya.viewer.Viewer.prototype.intersectsMainSlice=function(b){var a=this.mainImage.sliceDirection;if(a===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){return(b.z===this.mainImage.currentSlice)}else{if(a===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){return(b.y===this.mainImage.currentSlice)}else{if(a===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){return(b.x===this.mainImage.currentSlice)}}}return false};papaya.viewer.Viewer.prototype.convertCoordinateToScreen=function(c,b){var a,e,d;if(b===undefined){b=this.mainImage}d=b.sliceDirection;if(d===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){a=papayaFloorFast(b.finalTransform[0][2]+(c.x+0.5)*b.finalTransform[0][0]);e=papayaFloorFast(b.finalTransform[1][2]+(c.y+0.5)*b.finalTransform[1][1])}else{if(d===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){a=papayaFloorFast(b.finalTransform[0][2]+(c.x+0.5)*b.finalTransform[0][0]);e=papayaFloorFast(b.finalTransform[1][2]+(c.z+0.5)*b.finalTransform[1][1])}else{if(d===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){a=papayaFloorFast(b.finalTransform[0][2]+(c.y+0.5)*b.finalTransform[0][0]);e=papayaFloorFast(b.finalTransform[1][2]+(c.z+0.5)*b.finalTransform[1][1])}}}return new papaya.core.Point(a,e)};papaya.viewer.Viewer.prototype.updateCursorPosition=function(h,g,e){var d,c,b,a=null,f;if(this.container.display){g=g-this.canvasRect.left;e=e-this.canvasRect.top;if(this.insideScreenSlice(h.axialSlice,g,e,h.volume.getXDim(),h.volume.getYDim())){d=this.convertScreenToImageCoordinateX(g,h.axialSlice);c=this.convertScreenToImageCoordinateY(e,h.axialSlice);b=h.axialSlice.currentSlice;f=true}else{if(this.insideScreenSlice(h.coronalSlice,g,e,h.volume.getXDim(),h.volume.getZDim())){d=this.convertScreenToImageCoordinateX(g,h.coronalSlice);b=this.convertScreenToImageCoordinateY(e,h.coronalSlice);c=h.coronalSlice.currentSlice;f=true}else{if(this.insideScreenSlice(h.sagittalSlice,g,e,h.volume.getYDim(),h.volume.getZDim())){c=this.convertScreenToImageCoordinateX(g,h.sagittalSlice);b=this.convertScreenToImageCoordinateY(e,h.sagittalSlice);d=h.sagittalSlice.currentSlice;f=true}else{if(this.insideScreenSlice(h.surfaceView,g,e)){g-=h.surfaceView.screenOffsetX;e-=h.surfaceView.screenOffsetY;a=this.surfaceView.pick(g,e);if(a){this.getIndexCoordinateAtWorld(a.coordinate[0],a.coordinate[1],a.coordinate[2],this.tempCoor);d=this.tempCoor.x;c=this.tempCoor.y;b=this.tempCoor.z;f=true}}}}}if(f){this.cursorPosition.x=d;this.cursorPosition.y=c;this.cursorPosition.z=b;this.container.display.drawDisplay(d,c,b)}else{this.container.display.drawEmptyDisplay()}}};papaya.viewer.Viewer.prototype.insideScreenSlice=function(f,d,a,h,c){var e,b,i,g;if(!f){return false}if(f===this.surfaceView){e=f.screenOffsetX;b=f.screenOffsetX+f.screenDim;i=f.screenOffsetY;g=f.screenOffsetY+f.screenDim}else{e=papayaRoundFast(f.screenTransform[0][2]);b=papayaRoundFast(f.screenTransform[0][2]+h*f.screenTransform[0][0]);i=papayaRoundFast(f.screenTransform[1][2]);g=papayaRoundFast(f.screenTransform[1][2]+c*f.screenTransform[1][1])}return((d>=e)&&(d<b)&&(a>=i)&&(a<g))};papaya.viewer.Viewer.prototype.drawEmptyViewer=function(){var a,c,e,b,d;this.context.fillStyle="#000000";this.context.fillRect(0,0,this.canvas.width,this.canvas.height);this.context.fillStyle="#AAAAAA";if(this.container.readyForDnD()){c=18;this.context.font=c+"px sans-serif";a=this.canvas.height-22;e="Drop here or click the File menu";b=this.context.measureText(e);d=b.width;this.context.fillText(e,(this.canvas.width/2)-(d/2),a)}if(this.canvas.width>900){c=14;this.context.font=c+"px sans-serif";a=this.canvas.height-20;e="Supported formats: NIFTI"+(papaya.Container.DICOM_SUPPORT?", DICOM":"");this.context.fillText(e,20,a);c=14;this.context.font=c+"px sans-serif";a=this.canvas.height-20;e="Papaya (Build "+PAPAYA_BUILD_NUM+")";b=this.context.measureText(e);d=b.width;this.context.fillText(e,this.canvas.width-d-20,a)}};papaya.viewer.Viewer.prototype.drawViewer=function(b,d){var a=(this.container.preferences.radiological==="Yes"),c=(this.container.preferences.showOrientation==="Yes");if(!this.initialized){this.drawEmptyViewer();return}this.context.save();if(d){this.axialSlice.repaint(this.currentCoord.z,b,this.worldSpace);this.coronalSlice.repaint(this.currentCoord.y,b,this.worldSpace);this.sagittalSlice.repaint(this.currentCoord.x,b,this.worldSpace)}else{if(b||(this.draggingSliceDir!==papaya.viewer.ScreenSlice.DIRECTION_AXIAL)){this.axialSlice.updateSlice(this.currentCoord.z,b,this.worldSpace)}if(b||(this.draggingSliceDir!==papaya.viewer.ScreenSlice.DIRECTION_CORONAL)){this.coronalSlice.updateSlice(this.currentCoord.y,b,this.worldSpace)}if(b||(this.draggingSliceDir!==papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL)){this.sagittalSlice.updateSlice(this.currentCoord.x,b,this.worldSpace)}}if(this.hasSurface()&&(!papaya.utilities.PlatformUtils.smallScreen||b||(this.selectedSlice===this.surfaceView))){this.surfaceView.draw()}if(this.container.preferences.smoothDisplay==="No"){this.context.imageSmoothingEnabled=false;this.context.mozImageSmoothingEnabled=false;this.context.msImageSmoothingEnabled=false}else{this.context.imageSmoothingEnabled=true;this.context.mozImageSmoothingEnabled=true;this.context.msImageSmoothingEnabled=true}this.drawScreenSlice(this.mainImage);if(this.container.orthogonal){this.drawScreenSlice(this.lowerImageTop);this.drawScreenSlice(this.lowerImageBot);if(this.hasSurface()){this.drawScreenSlice(this.lowerImageBot2)}}if(c||a){this.drawOrientation()}if(this.container.preferences.showCrosshairs==="Yes"){this.drawCrosshairs()}if(this.container.preferences.showRuler==="Yes"){this.drawRuler()}if(this.container.display){this.container.display.drawDisplay(this.currentCoord.x,this.currentCoord.y,this.currentCoord.z)}if(this.container.contextManager&&this.container.contextManager.drawToViewer){this.container.contextManager.drawToViewer(this.context)}};papaya.viewer.Viewer.prototype.hasSurface=function(){return(this.container.hasSurface()&&this.surfaceView&&this.surfaceView.initialized)};papaya.viewer.Viewer.prototype.drawScreenSlice=function(e){var d,a,c,b=5;if(e===this.surfaceView){this.context.fillStyle=this.surfaceView.getBackgroundColor();this.context.fillRect(e.screenOffsetX,e.screenOffsetY,e.screenDim,e.screenDim);this.context.drawImage(e.canvas,e.screenOffsetX,e.screenOffsetY);if(this.container.preferences.showRuler==="Yes"){if(this.surfaceView===this.mainImage){this.context.font=papaya.viewer.Viewer.ORIENTATION_MARKER_SIZE+"px sans-serif";d=this.context.measureText("Ruler Length: ").width;a=this.context.measureText("Ruler Length: 000.00").width;c=(a/2);this.context.fillStyle="#ffb3db";this.context.fillText("Ruler Length:  ",e.screenDim/2-(c/2),papaya.viewer.Viewer.ORIENTATION_MARKER_SIZE+b);this.context.fillStyle="#FFFFFF";this.context.fillText(this.surfaceView.getRulerLength().toFixed(2),(e.screenDim/2)+d-(c/2),papaya.viewer.Viewer.ORIENTATION_MARKER_SIZE+b)}}}else{this.context.fillStyle=papaya.viewer.Viewer.BACKGROUND_COLOR;this.context.setTransform(1,0,0,1,0,0);this.context.fillRect(e.screenOffsetX,e.screenOffsetY,e.screenDim,e.screenDim);this.context.save();this.context.beginPath();this.context.rect(e.screenOffsetX,e.screenOffsetY,e.screenDim,e.screenDim);this.context.clip();this.context.setTransform(e.finalTransform[0][0],0,0,e.finalTransform[1][1],e.finalTransform[0][2],e.finalTransform[1][2]);this.context.drawImage(e.canvasMain,0,0);this.context.restore();if(e.canvasDTILines){this.context.drawImage(e.canvasDTILines,e.screenOffsetX,e.screenOffsetY)}}};papaya.viewer.Viewer.prototype.drawOrientation=function(){var j,h,f,k,b,e,n,d,m,i,c,l,g,a=(this.container.preferences.showOrientation==="Yes");if(this.mainImage===this.surfaceView){return}this.context.setTransform(1,0,0,1,0,0);this.context.fillStyle=this.getOrientationCertaintyColor();this.context.font=papaya.viewer.Viewer.ORIENTATION_MARKER_SIZE+"px sans-serif";j=this.context.measureText("X");h=j.width;f=(this.container.preferences.radiological==="Yes");if(this.mainImage===this.axialSlice){k=papaya.viewer.Viewer.ORIENTATION_MARKER_ANTERIOR;b=papaya.viewer.Viewer.ORIENTATION_MARKER_POSTERIOR;if(f){e=papaya.viewer.Viewer.ORIENTATION_MARKER_RIGHT;n=papaya.viewer.Viewer.ORIENTATION_MARKER_LEFT}else{e=papaya.viewer.Viewer.ORIENTATION_MARKER_LEFT;n=papaya.viewer.Viewer.ORIENTATION_MARKER_RIGHT}}else{if(this.mainImage===this.coronalSlice){k=papaya.viewer.Viewer.ORIENTATION_MARKER_SUPERIOR;b=papaya.viewer.Viewer.ORIENTATION_MARKER_INFERIOR;if(f){e=papaya.viewer.Viewer.ORIENTATION_MARKER_RIGHT;n=papaya.viewer.Viewer.ORIENTATION_MARKER_LEFT}else{e=papaya.viewer.Viewer.ORIENTATION_MARKER_LEFT;n=papaya.viewer.Viewer.ORIENTATION_MARKER_RIGHT}}else{if(this.mainImage===this.sagittalSlice){k=papaya.viewer.Viewer.ORIENTATION_MARKER_SUPERIOR;b=papaya.viewer.Viewer.ORIENTATION_MARKER_INFERIOR;e=papaya.viewer.Viewer.ORIENTATION_MARKER_ANTERIOR;n=papaya.viewer.Viewer.ORIENTATION_MARKER_POSTERIOR}}}d=this.mainImage.screenOffsetX;m=this.mainImage.screenOffsetX+this.mainImage.screenDim;i=Math.round(m/2);c=this.mainImage.screenOffsetY;l=this.mainImage.screenOffsetY+this.mainImage.screenDim;g=Math.round(l/2);if(a||this.mainImage.isRadiologicalSensitive()){this.context.fillText(e,d+papaya.viewer.Viewer.ORIENTATION_MARKER_SIZE,g+(papaya.viewer.Viewer.ORIENTATION_MARKER_SIZE*0.5));this.context.fillText(n,m-1.5*papaya.viewer.Viewer.ORIENTATION_MARKER_SIZE,g+(papaya.viewer.Viewer.ORIENTATION_MARKER_SIZE*0.5))}if(a){this.context.fillText(k,i-(h/2),c+papaya.viewer.Viewer.ORIENTATION_MARKER_SIZE*1.5);this.context.fillText(b,i-(h/2),l-papaya.viewer.Viewer.ORIENTATION_MARKER_SIZE)}};papaya.viewer.Viewer.prototype.drawRuler=function(){var d,c,b,a,k,f,e,h,i,j,g;if(this.mainImage===this.surfaceView){return}if(this.mainImage===this.axialSlice){d=(this.axialSlice.finalTransform[0][2]+(this.axialSlice.rulerPoints[0].x+0.5)*this.axialSlice.finalTransform[0][0]);c=(this.axialSlice.finalTransform[1][2]+(this.axialSlice.rulerPoints[0].y+0.5)*this.axialSlice.finalTransform[1][1]);b=(this.axialSlice.finalTransform[0][2]+(this.axialSlice.rulerPoints[1].x+0.5)*this.axialSlice.finalTransform[0][0]);a=(this.axialSlice.finalTransform[1][2]+(this.axialSlice.rulerPoints[1].y+0.5)*this.axialSlice.finalTransform[1][1])}else{if(this.mainImage===this.coronalSlice){d=(this.coronalSlice.finalTransform[0][2]+(this.coronalSlice.rulerPoints[0].x+0.5)*this.coronalSlice.finalTransform[0][0]);c=(this.coronalSlice.finalTransform[1][2]+(this.coronalSlice.rulerPoints[0].y+0.5)*this.coronalSlice.finalTransform[1][1]);b=(this.coronalSlice.finalTransform[0][2]+(this.coronalSlice.rulerPoints[1].x+0.5)*this.coronalSlice.finalTransform[0][0]);a=(this.coronalSlice.finalTransform[1][2]+(this.coronalSlice.rulerPoints[1].y+0.5)*this.coronalSlice.finalTransform[1][1])}else{if(this.mainImage===this.sagittalSlice){d=(this.sagittalSlice.finalTransform[0][2]+(this.sagittalSlice.rulerPoints[0].x+0.5)*this.sagittalSlice.finalTransform[0][0]);c=(this.sagittalSlice.finalTransform[1][2]+(this.sagittalSlice.rulerPoints[0].y+0.5)*this.sagittalSlice.finalTransform[1][1]);b=(this.sagittalSlice.finalTransform[0][2]+(this.sagittalSlice.rulerPoints[1].x+0.5)*this.sagittalSlice.finalTransform[0][0]);a=(this.sagittalSlice.finalTransform[1][2]+(this.sagittalSlice.rulerPoints[1].y+0.5)*this.sagittalSlice.finalTransform[1][1])}}}this.context.setTransform(1,0,0,1,0,0);this.context.strokeStyle="#FF1493";this.context.fillStyle="#FF1493";this.context.lineWidth=2;this.context.save();this.context.beginPath();this.context.moveTo(d,c);this.context.lineTo(b,a);this.context.stroke();this.context.closePath();this.context.beginPath();this.context.arc(d,c,3,0,2*Math.PI,false);this.context.arc(b,a,3,0,2*Math.PI,false);this.context.fill();this.context.closePath();k=papaya.utilities.StringUtils.formatNumber(papaya.utilities.MathUtils.lineDistance(this.mainImage.rulerPoints[0].x*this.mainImage.xSize,this.mainImage.rulerPoints[0].y*this.mainImage.ySize,this.mainImage.rulerPoints[1].x*this.mainImage.xSize,this.mainImage.rulerPoints[1].y*this.mainImage.ySize),false);f=this.context.measureText(k);e=f.width;h=14;i=2;j=parseInt((d+b)/2)-(e/2);g=parseInt((c+a)/2)+(h/2);this.context.fillStyle="#FFFFFF";papaya.viewer.Viewer.drawRoundRect(this.context,j-i,g-h-i+1,e+(i*2),h+(i*2),5,true,false);this.context.font=papaya.viewer.Viewer.ORIENTATION_MARKER_SIZE+"px sans-serif";this.context.strokeStyle="#FF1493";this.context.fillStyle="#FF1493";this.context.fillText(k,j,g)};papaya.viewer.Viewer.prototype.drawCrosshairs=function(){var f,c,e,b,d,a;this.context.setTransform(1,0,0,1,0,0);this.context.strokeStyle=papaya.viewer.Viewer.CROSSHAIRS_COLOR;this.context.lineWidth=1;if((this.mainImage!==this.axialSlice)||this.toggleMainCrosshairs){this.context.save();this.context.beginPath();this.context.rect(this.axialSlice.screenOffsetX,this.axialSlice.screenOffsetY,this.axialSlice.screenDim,this.axialSlice.screenDim);this.context.closePath();this.context.clip();this.context.beginPath();f=(this.axialSlice.finalTransform[0][2]+(this.currentCoord.x+0.5)*this.axialSlice.finalTransform[0][0]);c=(this.axialSlice.finalTransform[1][2]);e=(this.axialSlice.finalTransform[1][2]+this.axialSlice.yDim*this.axialSlice.finalTransform[1][1]);this.context.moveTo(f,c);this.context.lineTo(f,e);b=(this.axialSlice.finalTransform[1][2]+(this.currentCoord.y+0.5)*this.axialSlice.finalTransform[1][1]);d=(this.axialSlice.finalTransform[0][2]);a=(this.axialSlice.finalTransform[0][2]+this.axialSlice.xDim*this.axialSlice.finalTransform[0][0]);this.context.moveTo(d,b);this.context.lineTo(a,b);this.context.closePath();this.context.stroke();this.context.restore()}if((this.mainImage!==this.coronalSlice)||this.toggleMainCrosshairs){this.context.save();this.context.beginPath();this.context.rect(this.coronalSlice.screenOffsetX,this.coronalSlice.screenOffsetY,this.coronalSlice.screenDim,this.coronalSlice.screenDim);this.context.closePath();this.context.clip();this.context.beginPath();f=(this.coronalSlice.finalTransform[0][2]+(this.currentCoord.x+0.5)*this.coronalSlice.finalTransform[0][0]);c=(this.coronalSlice.finalTransform[1][2]);e=(this.coronalSlice.finalTransform[1][2]+this.coronalSlice.yDim*this.coronalSlice.finalTransform[1][1]);this.context.moveTo(f,c);this.context.lineTo(f,e);b=(this.coronalSlice.finalTransform[1][2]+(this.currentCoord.z+0.5)*this.coronalSlice.finalTransform[1][1]);d=(this.coronalSlice.finalTransform[0][2]);a=(this.coronalSlice.finalTransform[0][2]+this.coronalSlice.xDim*this.coronalSlice.finalTransform[0][0]);this.context.moveTo(d,b);this.context.lineTo(a,b);this.context.closePath();this.context.stroke();this.context.restore()}if((this.mainImage!==this.sagittalSlice)||this.toggleMainCrosshairs){this.context.save();this.context.beginPath();this.context.rect(this.sagittalSlice.screenOffsetX,this.sagittalSlice.screenOffsetY,this.sagittalSlice.screenDim,this.sagittalSlice.screenDim);this.context.closePath();this.context.clip();this.context.beginPath();f=(this.sagittalSlice.finalTransform[0][2]+(this.currentCoord.y+0.5)*this.sagittalSlice.finalTransform[0][0]);c=(this.sagittalSlice.finalTransform[1][2]);e=(this.sagittalSlice.finalTransform[1][2]+this.sagittalSlice.yDim*this.sagittalSlice.finalTransform[1][1]);this.context.moveTo(f,c);this.context.lineTo(f,e);b=(this.sagittalSlice.finalTransform[1][2]+(this.currentCoord.z+0.5)*this.sagittalSlice.finalTransform[1][1]);d=(this.sagittalSlice.finalTransform[0][2]);a=(this.sagittalSlice.finalTransform[0][2]+this.sagittalSlice.xDim*this.sagittalSlice.finalTransform[0][0]);this.context.moveTo(d,b);this.context.lineTo(a,b);this.context.closePath();this.context.stroke();this.context.restore()}};papaya.viewer.Viewer.prototype.calculateScreenSliceTransforms=function(){if(this.container.orthogonalTall){if(this.container.hasSurface()){this.viewerDim=this.canvas.height/1.333;this.getTransformParameters(this.mainImage,this.viewerDim,false,3);this.mainImage.screenTransform[0][2]+=this.mainImage.screenOffsetX=0;this.mainImage.screenTransform[1][2]+=this.mainImage.screenOffsetY=0;this.getTransformParameters(this.lowerImageTop,this.viewerDim,true,3);this.lowerImageTop.screenTransform[0][2]+=this.lowerImageTop.screenOffsetX=0;this.lowerImageTop.screenTransform[1][2]+=this.lowerImageTop.screenOffsetY=this.viewerDim+(papaya.viewer.Viewer.GAP);this.getTransformParameters(this.lowerImageBot,this.viewerDim,true,3);this.lowerImageBot.screenTransform[0][2]+=this.lowerImageBot.screenOffsetX=(((this.viewerDim-papaya.viewer.Viewer.GAP)/3)+(papaya.viewer.Viewer.GAP));this.lowerImageBot.screenTransform[1][2]+=this.lowerImageBot.screenOffsetY=this.viewerDim+(papaya.viewer.Viewer.GAP);this.getTransformParameters(this.lowerImageBot2,this.viewerDim,true,3);this.lowerImageBot2.screenTransform[0][2]+=this.lowerImageBot2.screenOffsetX=2*((((this.viewerDim-papaya.viewer.Viewer.GAP)/3)+(papaya.viewer.Viewer.GAP)));this.lowerImageBot2.screenTransform[1][2]+=this.lowerImageBot2.screenOffsetY=this.viewerDim+(papaya.viewer.Viewer.GAP)}else{this.viewerDim=this.canvas.height/1.5;this.getTransformParameters(this.mainImage,this.viewerDim,false,2);this.mainImage.screenTransform[0][2]+=this.mainImage.screenOffsetX=0;this.mainImage.screenTransform[1][2]+=this.mainImage.screenOffsetY=0;this.getTransformParameters(this.lowerImageBot,this.viewerDim,true,2);this.lowerImageBot.screenTransform[0][2]+=this.lowerImageBot.screenOffsetX=0;this.lowerImageBot.screenTransform[1][2]+=this.lowerImageBot.screenOffsetY=this.viewerDim+(papaya.viewer.Viewer.GAP);this.getTransformParameters(this.lowerImageTop,this.viewerDim,true,2);this.lowerImageTop.screenTransform[0][2]+=this.lowerImageTop.screenOffsetX=(((this.viewerDim-papaya.viewer.Viewer.GAP)/2)+(papaya.viewer.Viewer.GAP));this.lowerImageTop.screenTransform[1][2]+=this.lowerImageTop.screenOffsetY=this.viewerDim+(papaya.viewer.Viewer.GAP)}}else{this.viewerDim=this.canvas.height;if(this.container.hasSurface()){this.getTransformParameters(this.mainImage,this.viewerDim,false,3);this.mainImage.screenTransform[0][2]+=this.mainImage.screenOffsetX=0;this.mainImage.screenTransform[1][2]+=this.mainImage.screenOffsetY=0;this.getTransformParameters(this.lowerImageTop,this.viewerDim,true,3);this.lowerImageTop.screenTransform[0][2]+=this.lowerImageTop.screenOffsetX=(this.viewerDim+(papaya.viewer.Viewer.GAP));this.lowerImageTop.screenTransform[1][2]+=this.lowerImageTop.screenOffsetY=0;this.getTransformParameters(this.lowerImageBot,this.viewerDim,true,3);this.lowerImageBot.screenTransform[0][2]+=this.lowerImageBot.screenOffsetX=(this.viewerDim+(papaya.viewer.Viewer.GAP));this.lowerImageBot.screenTransform[1][2]+=this.lowerImageBot.screenOffsetY=(((this.viewerDim-papaya.viewer.Viewer.GAP)/3)+(papaya.viewer.Viewer.GAP));this.getTransformParameters(this.lowerImageBot2,this.viewerDim,true,3);this.lowerImageBot2.screenTransform[0][2]+=this.lowerImageBot2.screenOffsetX=(this.viewerDim+(papaya.viewer.Viewer.GAP));this.lowerImageBot2.screenTransform[1][2]+=this.lowerImageBot2.screenOffsetY=(((this.viewerDim-papaya.viewer.Viewer.GAP)/3)*2+(papaya.viewer.Viewer.GAP)*2)}else{this.getTransformParameters(this.mainImage,this.viewerDim,false,2);this.mainImage.screenTransform[0][2]+=this.mainImage.screenOffsetX=0;this.mainImage.screenTransform[1][2]+=this.mainImage.screenOffsetY=0;this.getTransformParameters(this.lowerImageBot,this.viewerDim,true,2);this.lowerImageBot.screenTransform[0][2]+=this.lowerImageBot.screenOffsetX=(this.viewerDim+(papaya.viewer.Viewer.GAP));this.lowerImageBot.screenTransform[1][2]+=this.lowerImageBot.screenOffsetY=(((this.viewerDim-papaya.viewer.Viewer.GAP)/2)+(papaya.viewer.Viewer.GAP));this.getTransformParameters(this.lowerImageTop,this.viewerDim,true,2);this.lowerImageTop.screenTransform[0][2]+=this.lowerImageTop.screenOffsetX=(this.viewerDim+(papaya.viewer.Viewer.GAP));this.lowerImageTop.screenTransform[1][2]+=this.lowerImageTop.screenOffsetY=0}}this.updateScreenSliceTransforms()};papaya.viewer.Viewer.prototype.updateScreenSliceTransforms=function(){this.axialSlice.updateFinalTransform();this.coronalSlice.updateFinalTransform();this.sagittalSlice.updateFinalTransform()};papaya.viewer.Viewer.prototype.getTransformParameters=function(b,i,d,f){var a,h,g,e,c;a=d?f:1;if(b===this.surfaceView){this.surfaceView.resize(this.viewerDim/a);return}if(b.getRealWidth()>b.getRealHeight()){h=(((d?i-papaya.viewer.Viewer.GAP:i)/this.longestDim)/a)*(b.getXSize()/this.longestDimSize);g=((((d?i-papaya.viewer.Viewer.GAP:i)/this.longestDim)*b.getYXratio())/a)*(b.getXSize()/this.longestDimSize)}else{h=((((d?i-papaya.viewer.Viewer.GAP:i)/this.longestDim)*b.getXYratio())/a)*(b.getYSize()/this.longestDimSize);g=(((d?i-papaya.viewer.Viewer.GAP:i)/this.longestDim)/a)*(b.getYSize()/this.longestDimSize)}e=(((d?i-papaya.viewer.Viewer.GAP:i)/a)-(b.getXDim()*h))/2;c=(((d?i-papaya.viewer.Viewer.GAP:i)/a)-(b.getYDim()*g))/2;b.screenDim=(d?(i-papaya.viewer.Viewer.GAP)/f:i);b.screenTransform[0][0]=h;b.screenTransform[1][1]=g;b.screenTransform[0][2]=e;b.screenTransform[1][2]=c;b.screenTransform2[0][0]=h;b.screenTransform2[1][1]=g;b.screenTransform2[0][2]=e;b.screenTransform2[1][2]=c};papaya.viewer.Viewer.prototype.setLongestDim=function(a){this.longestDim=a.getXDim();this.longestDimSize=a.getXSize();if((a.getYDim()*a.getYSize())>(this.longestDim*this.longestDimSize)){this.longestDim=a.getYDim();this.longestDimSize=a.getYSize()}if((a.getZDim()*a.getZSize())>(this.longestDim*this.longestDimSize)){this.longestDim=a.getZDim();this.longestDimSize=a.getZSize()}};papaya.viewer.Viewer.prototype.keyDownEvent=function(b){var c,a;this.keyPressIgnored=false;if(this.container.toolbar.isShowingMenus()){return}if(((papayaContainers.length>1)||papayaContainers[0].nestedViewer)&&(papaya.Container.papayaLastHoveredViewer!==this)){return}c=papaya.viewer.Viewer.getKeyCode(b);if(papaya.viewer.Viewer.isControlKey(b)){this.isControlKeyDown=true}else{if(papaya.viewer.Viewer.isAltKey(b)){this.isAltKeyDown=true}else{if(papaya.viewer.Viewer.isShiftKey(b)){this.isShiftKeyDown=true}else{if(c===papaya.viewer.Viewer.KEYCODE_ROTATE_VIEWS){this.rotateViews()}else{if(c===papaya.viewer.Viewer.KEYCODE_CENTER){a=new papaya.core.Coordinate(Math.floor(this.volume.header.imageDimensions.xDim/2),Math.floor(this.volume.header.imageDimensions.yDim/2),Math.floor(this.volume.header.imageDimensions.zDim/2));this.gotoCoordinate(a)}else{if(c===papaya.viewer.Viewer.KEYCODE_ORIGIN){this.gotoCoordinate(this.volume.header.origin)}else{if(c===papaya.viewer.Viewer.KEYCODE_ARROW_UP){this.incrementCoronal(false)}else{if(c===papaya.viewer.Viewer.KEYCODE_ARROW_DOWN){this.incrementCoronal(true)}else{if(c===papaya.viewer.Viewer.KEYCODE_ARROW_LEFT){this.incrementSagittal(true)}else{if(c===papaya.viewer.Viewer.KEYCODE_ARROW_RIGHT){this.incrementSagittal(false)}else{if((c===papaya.viewer.Viewer.KEYCODE_PAGE_DOWN)||(c===papaya.viewer.Viewer.KEYCODE_FORWARD_SLASH)){this.incrementAxial(true)}else{if((c===papaya.viewer.Viewer.KEYCODE_PAGE_UP)||(c===papaya.viewer.Viewer.KEYCODE_SINGLE_QUOTE)){this.incrementAxial(false)}else{if(c===papaya.viewer.Viewer.KEYCODE_INCREMENT_MAIN){if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){this.incrementAxial(false)}else{if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){this.incrementCoronal(false)}else{if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){this.incrementSagittal(true)}}}}else{if(c===papaya.viewer.Viewer.KEYCODE_DECREMENT_MAIN){if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){this.incrementAxial(true)}else{if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){this.incrementCoronal(true)}else{if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){this.incrementSagittal(false)}}}}else{if(c===papaya.viewer.Viewer.KEYCODE_TOGGLE_CROSSHAIRS){if(this.container.preferences.showCrosshairs==="Yes"){this.toggleMainCrosshairs=!this.toggleMainCrosshairs;this.drawViewer(true)}}else{if(c===papaya.viewer.Viewer.KEYCODE_SERIES_FORWARD){this.incrementSeriesPoint()}else{if(c===papaya.viewer.Viewer.KEYCODE_SERIES_BACK){this.decrementSeriesPoint()}else{if(c===papaya.viewer.Viewer.KEYCODE_RULER){if(this.container.preferences.showRuler==="Yes"){this.container.preferences.showRuler="No"}else{this.container.preferences.showRuler="Yes"}this.drawViewer(true,true)}else{this.keyPressIgnored=true}}}}}}}}}}}}}}}}}}if(!this.keyPressIgnored){b.handled=true;b.preventDefault()}};papaya.viewer.Viewer.prototype.keyUpEvent=function(a){if((papayaContainers.length>1)&&(papaya.Container.papayaLastHoveredViewer!==this)){return}this.isControlKeyDown=false;this.isAltKeyDown=false;this.isShiftKeyDown=false;if(!this.keyPressIgnored){a.handled=true;a.preventDefault()}if(this.hasSurface()){if(papaya.utilities.PlatformUtils.smallScreen){this.drawViewer(true,false)}}};papaya.viewer.Viewer.prototype.rotateViews=function(){var a;if(this.container.contextManager&&this.container.contextManager.clearContext){this.container.contextManager.clearContext()}if(this.hasSurface()){a=this.lowerImageBot2;this.lowerImageBot2=this.lowerImageBot;this.lowerImageBot=this.lowerImageTop;this.lowerImageTop=this.mainImage;this.mainImage=a}else{a=this.lowerImageBot;this.lowerImageBot=this.lowerImageTop;this.lowerImageTop=this.mainImage;this.mainImage=a}this.viewsChanged()};papaya.viewer.Viewer.prototype.viewsChanged=function(){this.calculateScreenSliceTransforms();if(this.hasSurface()){this.lowerImageBot2.clearDTILinesImage()}this.lowerImageBot.clearDTILinesImage();this.lowerImageTop.clearDTILinesImage();this.mainImage.clearDTILinesImage();if(!this.controlsHidden){if(this.mainImage!==this.surfaceView){this.fadeInControls()}else{$("#"+PAPAYA_CONTROL_MAIN_INCREMENT_BUTTON_CSS+this.container.containerIndex).fadeOut();$("#"+PAPAYA_CONTROL_MAIN_DECREMENT_BUTTON_CSS+this.container.containerIndex).fadeOut()}$("#"+PAPAYA_DEFAULT_SLIDER_ID+this.container.containerIndex+"main").find("button").prop("disabled",(this.mainImage===this.surfaceView))}this.drawViewer(true);this.updateSliceSliderControl()};papaya.viewer.Viewer.prototype.timepointChanged=function(){this.drawViewer(true);this.updateSliceSliderControl();this.updateWindowTitle()};papaya.viewer.Viewer.prototype.resetUpdateTimer=function(a){var b=this;if(this.updateTimer!==null){window.clearTimeout(this.updateTimer);this.updateTimer=null;this.updateTimerEvent=null}if(a!==null){this.updateTimerEvent=a;this.updateTimer=window.setTimeout(papaya.utilities.ObjectUtils.bind(b,function(){b.updatePosition(this,papaya.utilities.PlatformUtils.getMousePositionX(b.updateTimerEvent),papaya.utilities.PlatformUtils.getMousePositionY(b.updateTimerEvent))}),papaya.viewer.Viewer.UPDATE_TIMER_INTERVAL)}};papaya.viewer.Viewer.prototype.mouseDownEvent=function(c){var e=true,b,f,d;if(!papaya.Container.allowPropagation){c.stopPropagation()}c.preventDefault();if(this.showingContextMenu){this.container.toolbar.closeAllMenus();c.handled=true;return}if((c.target.nodeName==="IMG")||(c.target.nodeName==="CANVAS")){if(c.handled!==true){this.container.toolbar.closeAllMenus();this.previousMousePosition.x=papaya.utilities.PlatformUtils.getMousePositionX(c);this.previousMousePosition.y=papaya.utilities.PlatformUtils.getMousePositionY(c);this.findClickedSlice(this,this.previousMousePosition.x,this.previousMousePosition.y);if(((c.button===2)||this.isControlKeyDown||this.isLongTouch)&&this.container.contextManager&&(this.selectedSlice===this.mainImage)&&(this.mainImage===this.surfaceView)){this.contextMenuMousePositionX=this.previousMousePosition.x-this.canvasRect.left;this.contextMenuMousePositionY=this.previousMousePosition.y-this.canvasRect.top;if(this.container.contextManager.prefersColorPicking&&this.container.contextManager.prefersColorPicking()){d=this.surfaceView.pickColor(this.contextMenuMousePositionX,this.contextMenuMousePositionY);b=this.container.contextManager.getContextAtColor(d[0],d[1],d[2])}if(b){this.isContextMode=true;f=this.container.toolbar.buildMenu(b,null,null,null,true);papaya.ui.Toolbar.applyContextState(f);e=false;f.showMenu();this.showingContextMenu=true}this.isContextMode=true}else{if(((c.button===2)||this.isControlKeyDown||this.isLongTouch)&&this.container.contextManager&&(this.selectedSlice===this.mainImage)){if(this.isLongTouch){var a=this.convertCurrentCoordinateToScreen(this.mainImage);this.contextMenuMousePositionX=a.x;this.contextMenuMousePositionY=a.y;b=this.container.contextManager.getContextAtImagePosition(this.currentCoord.x,this.currentCoord.y,this.currentCoord.z)}else{this.contextMenuMousePositionX=this.previousMousePosition.x-this.canvasRect.left;this.contextMenuMousePositionY=this.previousMousePosition.y-this.canvasRect.top;b=this.container.contextManager.getContextAtImagePosition(this.cursorPosition.x,this.cursorPosition.y,this.cursorPosition.z)}if(b){this.isContextMode=true;f=this.container.toolbar.buildMenu(b,null,null,null,true);papaya.ui.Toolbar.applyContextState(f);e=false;f.showMenu();this.showingContextMenu=true}}else{if(((c.button===2)||this.isControlKeyDown)&&!this.currentScreenVolume.rgb){this.isWindowControl=true;if(this.container.showImageButtons&&(this.container.showControlBar||!this.container.kioskMode)&&this.screenVolumes[this.getCurrentScreenVolIndex()].supportsDynamicColorTable()){this.container.toolbar.showImageMenu(this.getCurrentScreenVolIndex())}}else{if(this.isAltKeyDown&&this.selectedSlice){this.isZoomMode=true;if(this.selectedSlice===this.surfaceView){this.isPanning=this.isShiftKeyDown;this.surfaceView.setStartDynamic(this.previousMousePosition.x,this.previousMousePosition.y)}else{if(this.isZooming()&&this.isShiftKeyDown){this.isPanning=true;this.setStartPanLocation(this.convertScreenToImageCoordinateX(this.previousMousePosition.x,this.selectedSlice),this.convertScreenToImageCoordinateY(this.previousMousePosition.y,this.selectedSlice),this.selectedSlice.sliceDirection)}else{this.setZoomLocation()}}}else{if(this.selectedSlice&&(this.selectedSlice!==this.surfaceView)){this.grabbedHandle=this.selectedSlice.findProximalRulerHandle(this.convertScreenToImageCoordinateX(this.previousMousePosition.x-this.canvasRect.left,this.selectedSlice),this.convertScreenToImageCoordinateY(this.previousMousePosition.y-this.canvasRect.top,this.selectedSlice));if(this.grabbedHandle===null){this.updatePosition(this,papaya.utilities.PlatformUtils.getMousePositionX(c),papaya.utilities.PlatformUtils.getMousePositionY(c),false);this.resetUpdateTimer(c)}}else{if(this.selectedSlice&&(this.selectedSlice===this.surfaceView)){if(this.surfaceView.findProximalRulerHandle(this.previousMousePosition.x-this.canvasRect.left,this.previousMousePosition.y-this.canvasRect.top)){}else{this.isPanning=this.isShiftKeyDown;this.surfaceView.setStartDynamic(this.previousMousePosition.x,this.previousMousePosition.y)}this.container.display.drawEmptyDisplay()}}}}}}this.isDragging=e;c.handled=true}if(!this.controlsHidden){this.controlsHiddenPrimed=true}}};papaya.viewer.Viewer.prototype.mouseUpEvent=function(a){if(!papaya.Container.allowPropagation){a.stopPropagation()}a.preventDefault();if(this.showingContextMenu){this.showingContextMenu=false;a.handled=true;return}if((a.target.nodeName==="IMG")||(a.target.nodeName==="CANVAS")){if(a.handled!==true){if(!this.isWindowControl&&!this.isZoomMode&&!this.isContextMode&&(this.grabbedHandle===null)&&(!this.surfaceView||(this.surfaceView.grabbedRulerPoint===-1))){this.updatePosition(this,papaya.utilities.PlatformUtils.getMousePositionX(a),papaya.utilities.PlatformUtils.getMousePositionY(a))}if(this.selectedSlice===this.surfaceView){this.updateCursorPosition(this,papaya.utilities.PlatformUtils.getMousePositionX(a),papaya.utilities.PlatformUtils.getMousePositionY(a))}this.zoomFactorPrevious=this.zoomFactor;this.isDragging=false;this.isWindowControl=false;this.isZoomMode=false;this.isPanning=false;this.selectedSlice=null;this.controlsHiddenPrimed=false;a.handled=true}}this.grabbedHandle=null;this.isContextMode=false;this.updateWindowTitle();this.updateSliceSliderControl();this.container.toolbar.closeAllMenus(true);if(this.hasSurface()){if(this.surfaceView.grabbedRulerPoint===-1){this.surfaceView.updateCurrent()}else{this.surfaceView.grabbedRulerPoint=-1}if(papaya.utilities.PlatformUtils.smallScreen){this.drawViewer(true,false)}}if(this.controlsHidden){this.controlsHidden=false;this.fadeInControls()}};papaya.viewer.Viewer.prototype.fadeOutControls=function(){$("#"+PAPAYA_CONTROL_MAIN_INCREMENT_BUTTON_CSS+this.container.containerIndex).fadeOut();$("#"+PAPAYA_CONTROL_MAIN_DECREMENT_BUTTON_CSS+this.container.containerIndex).fadeOut();$("#"+PAPAYA_CONTROL_MAIN_SWAP_BUTTON_CSS+this.container.containerIndex).fadeOut();$("#"+PAPAYA_CONTROL_MAIN_GOTO_CENTER_BUTTON_CSS+this.container.containerIndex).fadeOut();$("#"+PAPAYA_CONTROL_MAIN_GOTO_ORIGIN_BUTTON_CSS+this.container.containerIndex).fadeOut()};papaya.viewer.Viewer.prototype.fadeInControls=function(){if(this.container.getViewerDimensions()[0]<600){if(this.mainImage!==this.surfaceView){$("#"+PAPAYA_CONTROL_MAIN_INCREMENT_BUTTON_CSS+this.container.containerIndex).fadeIn();$("#"+PAPAYA_CONTROL_MAIN_DECREMENT_BUTTON_CSS+this.container.containerIndex).fadeIn()}$("#"+PAPAYA_CONTROL_MAIN_SWAP_BUTTON_CSS+this.container.containerIndex).fadeIn()}else{if(this.mainImage!==this.surfaceView){$("#"+PAPAYA_CONTROL_MAIN_INCREMENT_BUTTON_CSS+this.container.containerIndex).fadeIn();$("#"+PAPAYA_CONTROL_MAIN_DECREMENT_BUTTON_CSS+this.container.containerIndex).fadeIn()}$("#"+PAPAYA_CONTROL_MAIN_SWAP_BUTTON_CSS+this.container.containerIndex).fadeIn();$("#"+PAPAYA_CONTROL_MAIN_GOTO_CENTER_BUTTON_CSS+this.container.containerIndex).fadeIn();$("#"+PAPAYA_CONTROL_MAIN_GOTO_ORIGIN_BUTTON_CSS+this.container.containerIndex).fadeIn()}};papaya.viewer.Viewer.prototype.findClickedSlice=function(c,b,a){b=b-this.canvasRect.left;a=a-this.canvasRect.top;if(this.insideScreenSlice(c.axialSlice,b,a,c.volume.getXDim(),c.volume.getYDim())){this.selectedSlice=this.axialSlice}else{if(this.insideScreenSlice(c.coronalSlice,b,a,c.volume.getXDim(),c.volume.getZDim())){this.selectedSlice=this.coronalSlice}else{if(this.insideScreenSlice(c.sagittalSlice,b,a,c.volume.getYDim(),c.volume.getZDim())){this.selectedSlice=this.sagittalSlice}else{if(this.insideScreenSlice(c.surfaceView,b,a,c.volume.getYDim(),c.volume.getZDim())){this.selectedSlice=this.surfaceView}else{this.selectedSlice=null}}}}};papaya.viewer.Viewer.prototype.mouseMoveEvent=function(d){d.preventDefault();if(this.showingContextMenu){d.handled=true;return}var c,a,b;papaya.Container.papayaLastHoveredViewer=this;c=papaya.utilities.PlatformUtils.getMousePositionX(d);a=papaya.utilities.PlatformUtils.getMousePositionY(d);if(this.isDragging){if(this.grabbedHandle){if(this.isInsideMainSlice(c,a)){this.grabbedHandle.x=this.convertScreenToImageCoordinateX(c-this.canvasRect.left,this.selectedSlice);this.grabbedHandle.y=this.convertScreenToImageCoordinateY(a-this.canvasRect.top,this.selectedSlice);this.drawViewer(true,true)}}else{if(this.isWindowControl){this.windowLevelChanged(this.previousMousePosition.x-c,this.previousMousePosition.y-a);this.previousMousePosition.x=c;this.previousMousePosition.y=a}else{if(this.isPanning){if(this.selectedSlice===this.surfaceView){this.surfaceView.updateTranslateDynamic(papaya.utilities.PlatformUtils.getMousePositionX(d),papaya.utilities.PlatformUtils.getMousePositionY(d),(this.selectedSlice===this.mainImage)?1:3);this.drawViewer(false,true)}else{this.setCurrentPanLocation(this.convertScreenToImageCoordinateX(c,this.selectedSlice),this.convertScreenToImageCoordinateY(a,this.selectedSlice),this.selectedSlice.sliceDirection)}}else{if(this.isZoomMode){if(this.selectedSlice===this.surfaceView){b=((this.previousMousePosition.y-a)*0.5)*this.surfaceView.scaleFactor;this.surfaceView.zoom+=b;this.previousMousePosition.x=c;this.previousMousePosition.y=a}else{b=((this.previousMousePosition.y-a)*0.05);this.setZoomFactor(this.zoomFactorPrevious-b);this.axialSlice.updateZoomTransform(this.zoomFactor,this.zoomLocX,this.zoomLocY,this.panAmountX,this.panAmountY,this);this.coronalSlice.updateZoomTransform(this.zoomFactor,this.zoomLocX,this.zoomLocZ,this.panAmountX,this.panAmountZ,this);this.sagittalSlice.updateZoomTransform(this.zoomFactor,this.zoomLocY,this.zoomLocZ,this.panAmountY,this.panAmountZ,this)}this.drawViewer(true)}else{this.resetUpdateTimer(null);if(this.selectedSlice!==null){if(this.selectedSlice===this.surfaceView){if(this.surfaceView.grabbedRulerPoint!==-1){this.surfaceView.pickRuler(c-this.canvasRect.left,a-this.canvasRect.top);this.drawViewer(false,true)}else{this.surfaceView.updateDynamic(papaya.utilities.PlatformUtils.getMousePositionX(d),papaya.utilities.PlatformUtils.getMousePositionY(d),(this.selectedSlice===this.mainImage)?1:3);this.drawViewer(false,true);this.container.display.drawEmptyDisplay()}}else{this.updatePosition(this,papaya.utilities.PlatformUtils.getMousePositionX(d),papaya.utilities.PlatformUtils.getMousePositionY(d))}}}}}}}else{this.updateCursorPosition(this,papaya.utilities.PlatformUtils.getMousePositionX(d),papaya.utilities.PlatformUtils.getMousePositionY(d));this.isZoomMode=false}if(this.controlsHidden&&!this.isDragging){this.controlsHidden=false;this.fadeInControls()}if(this.controlsTimer){clearTimeout(this.controlsTimer);this.controlsTimer=null}this.controlsTimer=setTimeout(papaya.utilities.ObjectUtils.bind(this,function(){this.controlsHidden=true;this.fadeOutControls()}),8000);if(this.controlsHiddenPrimed){this.controlsHiddenPrimed=false;this.controlsHidden=true;this.fadeOutControls()}};papaya.viewer.Viewer.prototype.mouseDoubleClickEvent=function(){if(this.isAltKeyDown){this.zoomFactorPrevious=1;this.setZoomFactor(1)}};papaya.viewer.Viewer.prototype.mouseOutEvent=function(a){papaya.Container.papayaLastHoveredViewer=null;if(this.isDragging){this.mouseUpEvent(a)}else{if(this.container.display){this.container.display.drawEmptyDisplay()}this.grabbedHandle=null}};papaya.viewer.Viewer.prototype.mouseLeaveEvent=function(){};papaya.viewer.Viewer.prototype.touchMoveEvent=function(a){if(!this.didLongTouch){if(this.longTouchTimer){clearTimeout(this.longTouchTimer);this.longTouchTimer=null}if(!this.isDragging){this.mouseDownEvent(a);this.isDragging=true}this.mouseMoveEvent(a)}};papaya.viewer.Viewer.prototype.touchStartEvent=function(a){if(!papaya.Container.allowPropagation){a.stopPropagation()}a.preventDefault();this.longTouchTimer=setTimeout(papaya.utilities.ObjectUtils.bind(this,function(){this.doLongTouch(a)}),500)};papaya.viewer.Viewer.prototype.touchEndEvent=function(a){if(!this.didLongTouch){if(this.longTouchTimer){clearTimeout(this.longTouchTimer);this.longTouchTimer=null}if(!this.isDragging){this.mouseDownEvent(a)}this.mouseUpEvent(a)}this.didLongTouch=false;this.isLongTouch=false};papaya.viewer.Viewer.prototype.doLongTouch=function(a){this.longTouchTimer=null;this.didLongTouch=true;this.isLongTouch=true;this.updateCursorPosition(this,papaya.utilities.PlatformUtils.getMousePositionX(a),papaya.utilities.PlatformUtils.getMousePositionY(a));this.mouseDownEvent(a);this.mouseUpEvent(a)};papaya.viewer.Viewer.prototype.windowLevelChanged=function(a,c){var b,d,e,f;b=this.currentScreenVolume.screenMax-this.currentScreenVolume.screenMin;d=b*0.025;if(Math.abs(a)>Math.abs(c)){e=this.currentScreenVolume.screenMin+(d*papaya.utilities.MathUtils.signum(a));f=this.currentScreenVolume.screenMax+(-1*d*papaya.utilities.MathUtils.signum(a));if(f<=e){e=this.currentScreenVolume.screenMin;f=this.currentScreenVolume.screenMin}}else{e=this.currentScreenVolume.screenMin+(d*papaya.utilities.MathUtils.signum(c));f=this.currentScreenVolume.screenMax+(d*papaya.utilities.MathUtils.signum(c))}this.currentScreenVolume.setScreenRange(e,f);if(this.container.showImageButtons){this.container.toolbar.updateImageMenuRange(this.getCurrentScreenVolIndex(),parseFloat(e.toPrecision(7)),parseFloat(f.toPrecision(7)))}this.drawViewer(true)};papaya.viewer.Viewer.prototype.gotoCoordinate=function(d,b){if(!this.initialized){return}var e=this.volume.header.imageDimensions.xDim;var c=this.volume.header.imageDimensions.yDim;var a=this.volume.header.imageDimensions.zDim;if(d.x<0){this.currentCoord.x=0}else{if(d.x>=e){this.currentCoord.x=(e-1)}else{this.currentCoord.x=d.x}}if(d.y<0){this.currentCoord.y=0}else{if(d.y>=c){this.currentCoord.y=(c-1)}else{this.currentCoord.y=d.y}}if(d.z<0){this.currentCoord.z=0}else{if(d.z>=a){this.currentCoord.z=(a-1)}else{this.currentCoord.z=d.z}}this.drawViewer(true);this.updateSliceSliderControl();if(b){return}this.container.coordinateChanged(this);this.drawViewer(false)};papaya.viewer.Viewer.prototype.gotoWorldCoordinate=function(c,a){var b=new papaya.core.Coordinate();this.gotoCoordinate(this.getIndexCoordinateAtWorld(c.x,c.y,c.z,b),a)};papaya.viewer.Viewer.prototype.resizeViewer=function(g){var a=PAPAYA_PADDING/2,f,e,c,b,h,d;this.canvas.width=g[0];this.canvas.height=g[1];if(this.initialized){this.calculateScreenSliceTransforms();this.canvasRect=this.canvas.getBoundingClientRect();this.drawViewer(true);if(this.container.showControls){f=$(this.canvas).offset();b=$("#"+PAPAYA_CONTROL_MAIN_INCREMENT_BUTTON_CSS+this.container.containerIndex);b.css({top:f.top+a,left:f.left+this.mainImage.screenDim-b.outerWidth()-a,position:"absolute"});h=$("#"+PAPAYA_CONTROL_MAIN_DECREMENT_BUTTON_CSS+this.container.containerIndex);h.css({top:f.top+h.outerHeight()+PAPAYA_PADDING,left:f.left+this.mainImage.screenDim-h.outerWidth()-a,position:"absolute"});e=$("#"+PAPAYA_CONTROL_MAIN_SWAP_BUTTON_CSS+this.container.containerIndex);e.css({top:f.top+this.mainImage.screenDim-e.outerHeight()-a,left:f.left+this.mainImage.screenDim-e.outerWidth()-a,position:"absolute"});d=$("#"+PAPAYA_CONTROL_MAIN_GOTO_CENTER_BUTTON_CSS+this.container.containerIndex);d.css({top:f.top+this.mainImage.screenDim-d.outerHeight()-a,left:f.left+a,position:"absolute"});c=$("#"+PAPAYA_CONTROL_MAIN_GOTO_ORIGIN_BUTTON_CSS+this.container.containerIndex);c.css({top:f.top+this.mainImage.screenDim-c.outerHeight()-a,left:f.left+a+c.outerWidth()+PAPAYA_PADDING,position:"absolute"})}}};papaya.viewer.Viewer.prototype.getWorldCoordinateAtIndex=function(c,b,a,d){d.setCoordinate((c-this.volume.header.origin.x)*this.volume.header.voxelDimensions.xSize,(this.volume.header.origin.y-b)*this.volume.header.voxelDimensions.ySize,(this.volume.header.origin.z-a)*this.volume.header.voxelDimensions.zSize);return d};papaya.viewer.Viewer.prototype.getIndexCoordinateAtWorld=function(c,b,a,d){d.setCoordinate((c/this.volume.header.voxelDimensions.xSize)+this.volume.header.origin.x,-1*((b/this.volume.header.voxelDimensions.ySize)-this.volume.header.origin.y),-1*((a/this.volume.header.voxelDimensions.zSize)-this.volume.header.origin.z),true);return d};papaya.viewer.Viewer.prototype.getNextColorTable=function(){var c,a=0,b;for(c=1;c<this.screenVolumes.length;c+=1){if(!this.screenVolumes[c].dti){a+=1}}b=a%papaya.viewer.ColorTable.OVERLAY_COLOR_TABLES.length;return papaya.viewer.ColorTable.OVERLAY_COLOR_TABLES[b].name};papaya.viewer.Viewer.prototype.getCurrentValueAt=function(d,c,b){var a=!this.currentScreenVolume.interpolation;a&=(this.container.preferences.smoothDisplay==="Yes");if(this.worldSpace){a|=((this.currentScreenVolume.volume===this.volume)&&this.volume.isWorldSpaceOnly());return this.currentScreenVolume.volume.getVoxelAtCoordinate((d-this.volume.header.origin.x)*this.volume.header.voxelDimensions.xSize,(this.volume.header.origin.y-c)*this.volume.header.voxelDimensions.ySize,(this.volume.header.origin.z-b)*this.volume.header.voxelDimensions.zSize,this.currentScreenVolume.currentTimepoint,!a)}else{return this.currentScreenVolume.volume.getVoxelAtMM(d*this.volume.header.voxelDimensions.xSize,c*this.volume.header.voxelDimensions.ySize,b*this.volume.header.voxelDimensions.zSize,this.currentScreenVolume.currentTimepoint,!a)}};papaya.viewer.Viewer.prototype.resetViewer=function(){if(this.container.showControlBar){$("."+PAPAYA_CONTROL_INCREMENT_BUTTON_CSS).prop("disabled",true);$("."+PAPAYA_CONTROL_SWAP_BUTTON_CSS).prop("disabled",true);$("."+PAPAYA_CONTROL_GOTO_CENTER_BUTTON_CSS).prop("disabled",true);$("."+PAPAYA_CONTROL_GOTO_ORIGIN_BUTTON_CSS).prop("disabled",true)}else{if(this.container.showControls){$("#"+PAPAYA_CONTROL_MAIN_INCREMENT_BUTTON_CSS+this.container.containerIndex).css({display:"none"});$("#"+PAPAYA_CONTROL_MAIN_DECREMENT_BUTTON_CSS+this.container.containerIndex).css({display:"none"});$("#"+PAPAYA_CONTROL_MAIN_SWAP_BUTTON_CSS+this.container.containerIndex).css({display:"none"});$("#"+PAPAYA_CONTROL_MAIN_GOTO_CENTER_BUTTON_CSS+this.container.containerIndex).css({display:"none"});$("#"+PAPAYA_CONTROL_MAIN_GOTO_ORIGIN_BUTTON_CSS+this.container.containerIndex).css({display:"none"})}}this.initialized=false;this.loadingVolume=null;this.volume=new papaya.volume.Volume(this.container.display,this);this.screenVolumes=[];this.surfaces=[];this.surfaceView=null;this.currentScreenVolume=null;this.axialSlice=null;this.coronalSlice=null;this.sagittalSlice=null;this.mainImage=null;this.lowerImageBot2=null;this.lowerImageBot=null;this.lowerImageTop=null;this.viewerDim=0;this.currentCoord=new papaya.core.Coordinate(0,0,0);this.longestDim=0;this.longestDimSize=0;this.draggingSliceDir=0;this.isDragging=false;this.isWindowControl=false;this.hasSeries=false;this.previousMousePosition=new papaya.core.Point();this.canvas.removeEventListener("mousemove",this.listenerMouseMove,false);this.canvas.removeEventListener("mousedown",this.listenerMouseDown,false);this.canvas.removeEventListener("mouseout",this.listenerMouseOut,false);this.canvas.removeEventListener("mouseleave",this.listenerMouseLeave,false);this.canvas.removeEventListener("mouseup",this.listenerMouseUp,false);document.removeEventListener("keydown",this.listenerKeyDown,true);document.removeEventListener("keyup",this.listenerKeyUp,true);document.removeEventListener("contextmenu",this.listenerContextMenu,false);this.canvas.removeEventListener("touchmove",this.listenerTouchMove,false);this.canvas.removeEventListener("touchstart",this.listenerTouchStart,false);this.canvas.removeEventListener("touchend",this.listenerTouchEnd,false);this.canvas.removeEventListener("dblclick",this.listenerMouseDoubleClick,false);this.removeScroll();this.updateTimer=null;this.updateTimerEvent=null;this.drawEmptyViewer();if(this.container.display){this.container.display.drawEmptyDisplay()}this.updateSliceSliderControl();this.container.toolbar.buildToolbar()};papaya.viewer.Viewer.prototype.getHeaderDescription=function(a){a=a||0;return this.screenVolumes[a].volume.header.toString()};papaya.viewer.Viewer.prototype.getImageDimensionsDescription=function(b){var c,a;c=this.screenVolumes[b].volume.header.orientation.orientation;a=this.screenVolumes[b].volume.header.imageDimensions;return("("+c.charAt(0)+", "+c.charAt(1)+", "+c.charAt(2)+") "+a.cols+" x "+a.rows+" x "+a.slices)};papaya.viewer.Viewer.prototype.getVoxelDimensionsDescription=function(b){var c,a;c=this.screenVolumes[b].volume.header.orientation.orientation;a=this.screenVolumes[b].volume.header.voxelDimensions;return("("+c.charAt(0)+", "+c.charAt(1)+", "+c.charAt(2)+") "+papaya.utilities.StringUtils.formatNumber(a.colSize,true)+" x "+papaya.utilities.StringUtils.formatNumber(a.rowSize,true)+" x "+papaya.utilities.StringUtils.formatNumber(a.sliceSize,true)+" "+a.getSpatialUnitString())};papaya.viewer.Viewer.prototype.getSeriesDimensionsDescription=function(b){var a=this.screenVolumes[b].volume.header.imageDimensions;return(a.timepoints.toString())};papaya.viewer.Viewer.prototype.getSeriesSizeDescription=function(b){var a=this.screenVolumes[b].volume.header.voxelDimensions;return(a.timeSize.toString()+" "+a.getTemporalUnitString())};papaya.viewer.Viewer.prototype.getFilename=function(a){return papaya.utilities.StringUtils.wordwrap(this.screenVolumes[a].volume.fileName,25,"<br />",true)};papaya.viewer.Viewer.prototype.getSurfaceFilename=function(a){return papaya.utilities.StringUtils.wordwrap(this.surfaces[a].filename,25,"<br />",true)};papaya.viewer.Viewer.prototype.getSurfaceNumPoints=function(a){return this.surfaces[a].numPoints};papaya.viewer.Viewer.prototype.getSurfaceNumTriangles=function(a){return this.surfaces[a].numTriangles};papaya.viewer.Viewer.prototype.getNiceFilename=function(b){var c,a;c="...";a=this.screenVolumes[b].volume.fileName.replace(".nii","").replace(".gz","");if(a.length>papaya.viewer.Viewer.TITLE_MAX_LENGTH){a=a.substr(0,papaya.viewer.Viewer.TITLE_MAX_LENGTH-c.length)+c}return a};papaya.viewer.Viewer.prototype.getFileLength=function(a){return papaya.utilities.StringUtils.getSizeString(this.screenVolumes[a].volume.fileLength)};papaya.viewer.Viewer.prototype.getByteTypeDescription=function(a){return(this.screenVolumes[a].volume.header.imageType.numBytes+"-Byte "+this.screenVolumes[a].volume.header.imageType.getTypeDescription())};papaya.viewer.Viewer.prototype.getByteOrderDescription=function(a){return this.screenVolumes[a].volume.header.imageType.getOrderDescription()};papaya.viewer.Viewer.prototype.getCompressedDescription=function(a){if(this.screenVolumes[a].volume.header.imageType.compressed){return"Yes"}return"No"};papaya.viewer.Viewer.prototype.getOrientationDescription=function(a){return this.screenVolumes[a].volume.header.orientation.getOrientationDescription()};papaya.viewer.Viewer.prototype.getImageDescription=function(a){return papaya.utilities.StringUtils.wordwrap(this.screenVolumes[a].volume.header.imageDescription.notes,35,"<br />",true)};papaya.viewer.Viewer.prototype.setCurrentScreenVol=function(a){this.currentScreenVolume=this.screenVolumes[a];this.updateWindowTitle()};papaya.viewer.Viewer.prototype.updateWindowTitle=function(){var a;if(this.initialized){a=this.getNiceFilename(this.getCurrentScreenVolIndex());if(this.currentScreenVolume.volume.numTimepoints>1){if(this.currentScreenVolume.seriesLabels&&(this.currentScreenVolume.seriesLabels.length>this.currentScreenVolume.currentTimepoint)){a=this.currentScreenVolume.seriesLabels[this.currentScreenVolume.currentTimepoint]}else{a=(a+" ("+(this.currentScreenVolume.currentTimepoint+1)+" of "+this.currentScreenVolume.volume.numTimepoints+")")}}if(this.isZooming()){a=(a+" "+this.getZoomString())}this.container.toolbar.updateTitleBar(a)}};papaya.viewer.Viewer.prototype.getCurrentScreenVolIndex=function(){var a;for(a=0;a<this.screenVolumes.length;a+=1){if(this.screenVolumes[a]===this.currentScreenVolume){return a}}return -1};papaya.viewer.Viewer.prototype.toggleWorldSpace=function(){this.worldSpace=!this.worldSpace;if(this.container.syncOverlaySeries){this.reconcileOverlaySeriesPoint(this.currentScreenVolume)}};papaya.viewer.Viewer.prototype.isSelected=function(a){return(this.isSelectable()&&(a===this.getCurrentScreenVolIndex()))};papaya.viewer.Viewer.prototype.isSelectable=function(){return(this.screenVolumes.length>1)};papaya.viewer.Viewer.prototype.processParams=function(a){if(a.worldSpace){this.worldSpace=true}if(a.ignoreNiftiTransforms){this.ignoreNiftiTransforms=true}if(a.coordinate){this.initialCoordinate=a.coordinate}if(a.ignoreSync){this.ignoreSync=a.ignoreSync}if(!this.container.isDesktopMode()){if(a.showOrientation!==undefined){this.container.preferences.showOrientation=(a.showOrientation?"Yes":"No")}if(a.smoothDisplay!==undefined){this.container.preferences.smoothDisplay=(a.smoothDisplay?"Yes":"No")}if(a.radiological!==undefined){this.container.preferences.radiological=(a.radiological?"Yes":"No")}if(a.showRuler!==undefined){this.container.preferences.showRuler=(a.showRuler?"Yes":"No")}if(a.showSurfacePlanes!==undefined){this.container.preferences.showSurfacePlanes=(a.showSurfacePlanes?"Yes":"No")}if(a.showSurfaceCrosshairs!==undefined){this.container.preferences.showSurfaceCrosshairs=(a.showSurfaceCrosshairs?"Yes":"No")}}};papaya.viewer.Viewer.prototype.hasLoadedDTI=function(){return(this.screenVolumes.length===1)&&(this.screenVolumes[0].dti)&&(this.screenVolumes[0].dtiVolumeMod===null)};papaya.viewer.Viewer.prototype.goToInitialCoordinate=function(){var a=new papaya.core.Coordinate();if(this.screenVolumes.length>0){if(this.initialCoordinate===null){a.setCoordinate(papayaFloorFast(this.volume.header.imageDimensions.xDim/2),papayaFloorFast(this.volume.header.imageDimensions.yDim/2),papayaFloorFast(this.volume.header.imageDimensions.zDim/2),true)}else{if(this.worldSpace){this.getIndexCoordinateAtWorld(this.initialCoordinate[0],this.initialCoordinate[1],this.initialCoordinate[2],a)}else{a.setCoordinate(this.initialCoordinate[0],this.initialCoordinate[1],this.initialCoordinate[2],true)}this.initialCoordinate=null}this.gotoCoordinate(a);if(this.container.display){this.container.display.drawDisplay(this.currentCoord.x,this.currentCoord.y,this.currentCoord.z)}}};papaya.viewer.Viewer.prototype.getOrientationCertaintyColor=function(){var a=this.screenVolumes[0].volume.header.orientationCertainty;if(a===papaya.volume.Header.ORIENTATION_CERTAINTY_LOW){return papaya.viewer.Viewer.ORIENTATION_CERTAINTY_LOW_COLOR}if(a===papaya.volume.Header.ORIENTATION_CERTAINTY_HIGH){return papaya.viewer.Viewer.ORIENTATION_CERTAINTY_HIGH_COLOR}return papaya.viewer.Viewer.ORIENTATION_CERTAINTY_UNKNOWN_COLOR};papaya.viewer.Viewer.prototype.isUsingAtlas=function(a){return(a===this.atlas.currentAtlas)};papaya.viewer.Viewer.prototype.scrolled=function(c){var a,b;c=c||window.event;if(c.target!=this.canvas){return}if(c.preventDefault){c.preventDefault()}c.returnValue=false;b=(this.container.preferences.scrollBehavior==="Increment Slice");a=papaya.utilities.PlatformUtils.getScrollSign(c,!b);if(b){if(a<0){if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){this.incrementAxial(false,Math.abs(a))}else{if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){this.incrementCoronal(false,Math.abs(a))}else{if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){this.incrementSagittal(false,Math.abs(a))}}}this.gotoCoordinate(this.currentCoord)}else{if(a>0){if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){this.incrementAxial(true,Math.abs(a))}else{if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){this.incrementCoronal(true,Math.abs(a))}else{if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){this.incrementSagittal(true,Math.abs(a))}}}this.gotoCoordinate(this.currentCoord)}}}else{if(a!==0){this.isZoomMode=true;if(this.mainImage===this.surfaceView){this.surfaceView.zoom+=((a*-5)*this.surfaceView.scaleFactor);this.drawViewer(false,true)}else{if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){this.setZoomLocation(this.currentCoord.x,this.currentCoord.y,this.mainImage.sliceDirection)}else{if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){this.setZoomLocation(this.currentCoord.x,this.currentCoord.z,this.mainImage.sliceDirection)}else{if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){this.setZoomLocation(this.currentCoord.y,this.currentCoord.z,this.mainImage.sliceDirection)}}}this.setZoomFactor(this.zoomFactorPrevious+(a*0.1*this.zoomFactorPrevious))}this.zoomFactorPrevious=this.zoomFactor}}};papaya.viewer.Viewer.prototype.incrementAxial=function(b,c){var a=this.volume.header.imageDimensions.zDim;if(c===undefined){c=1}if(b){this.currentCoord.z+=c;if(this.currentCoord.z>=a){this.currentCoord.z=a-1}}else{this.currentCoord.z-=c;if(this.currentCoord.z<0){this.currentCoord.z=0}}this.gotoCoordinate(this.currentCoord)};papaya.viewer.Viewer.prototype.incrementCoronal=function(b,c){var a=this.volume.header.imageDimensions.yDim;if(c===undefined){c=1}if(b){this.currentCoord.y+=c;if(this.currentCoord.y>=a){this.currentCoord.y=a-1}}else{this.currentCoord.y-=c;if(this.currentCoord.y<0){this.currentCoord.y=0}}this.gotoCoordinate(this.currentCoord)};papaya.viewer.Viewer.prototype.incrementSagittal=function(b,c){var a=this.volume.header.imageDimensions.xDim;if(c===undefined){c=1}if(b){this.currentCoord.x-=c;if(this.currentCoord.x<0){this.currentCoord.x=0}}else{this.currentCoord.x+=c;if(this.currentCoord.x>=a){this.currentCoord.x=a-1}}this.gotoCoordinate(this.currentCoord)};papaya.viewer.Viewer.prototype.setZoomFactor=function(a){if(a>papaya.viewer.Viewer.ZOOM_FACTOR_MAX){a=papaya.viewer.Viewer.ZOOM_FACTOR_MAX}else{if(a<papaya.viewer.Viewer.ZOOM_FACTOR_MIN){a=papaya.viewer.Viewer.ZOOM_FACTOR_MIN}}this.zoomFactor=a;if(this.zoomFactor===1){this.panAmountX=this.panAmountY=this.panAmountZ=0}this.axialSlice.updateZoomTransform(this.zoomFactor,this.zoomLocX,this.zoomLocY,this.panAmountX,this.panAmountY,this);this.coronalSlice.updateZoomTransform(this.zoomFactor,this.zoomLocX,this.zoomLocZ,this.panAmountX,this.panAmountZ,this);this.sagittalSlice.updateZoomTransform(this.zoomFactor,this.zoomLocY,this.zoomLocZ,this.panAmountY,this.panAmountZ,this);this.drawViewer(false,true);this.updateWindowTitle()};papaya.viewer.Viewer.prototype.getZoomString=function(){return(parseInt(this.zoomFactor*100,10)+"%")};papaya.viewer.Viewer.prototype.isZooming=function(){return(this.zoomFactor>1)};papaya.viewer.Viewer.prototype.setZoomLocation=function(){if(this.zoomFactor===1){this.zoomLocX=this.currentCoord.x;this.zoomLocY=this.currentCoord.y;this.zoomLocZ=this.currentCoord.z;this.axialSlice.updateZoomTransform(this.zoomFactor,this.zoomLocX,this.zoomLocY,this.panAmountX,this.panAmountY,this);this.coronalSlice.updateZoomTransform(this.zoomFactor,this.zoomLocX,this.zoomLocZ,this.panAmountX,this.panAmountZ,this);this.sagittalSlice.updateZoomTransform(this.zoomFactor,this.zoomLocY,this.zoomLocZ,this.panAmountY,this.panAmountZ,this);this.drawViewer(false,true)}};papaya.viewer.Viewer.prototype.setStartPanLocation=function(d,b,c){var a;if(this.zoomFactor>1){if(c===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){this.panLocX=d;this.panLocY=b;this.panLocZ=this.axialSlice.currentSlice}else{if(c===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){this.panLocX=d;this.panLocY=this.coronalSlice.currentSlice;this.panLocZ=b}else{if(c===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){this.panLocX=this.sagittalSlice.currentSlice;a=d;this.panLocY=a;this.panLocZ=b}}}}};papaya.viewer.Viewer.prototype.setCurrentPanLocation=function(c,a,b){if(this.zoomFactor>1){if(b===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){this.panAmountX+=(c-this.panLocX);this.panAmountY+=(a-this.panLocY);this.panAmountZ=0}else{if(b===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){this.panAmountX+=(c-this.panLocX);this.panAmountY=0;this.panAmountZ+=(a-this.panLocZ)}else{if(b===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){this.panAmountX=0;this.panAmountY+=(c-this.panLocY);this.panAmountZ+=(a-this.panLocZ)}}}this.axialSlice.updateZoomTransform(this.zoomFactor,this.zoomLocX,this.zoomLocY,this.panAmountX,this.panAmountY,this);this.coronalSlice.updateZoomTransform(this.zoomFactor,this.zoomLocX,this.zoomLocZ,this.panAmountX,this.panAmountZ,this);this.sagittalSlice.updateZoomTransform(this.zoomFactor,this.zoomLocY,this.zoomLocZ,this.panAmountY,this.panAmountZ,this);this.drawViewer(false,true)}};papaya.viewer.Viewer.prototype.isWorldMode=function(){return this.worldSpace};papaya.viewer.Viewer.prototype.isRadiologicalMode=function(){return(this.container.preferences.radiological==="Yes")};papaya.viewer.Viewer.prototype.isCollapsable=function(){return this.container.collapsable};papaya.viewer.Viewer.prototype.mainSliderControlChanged=function(){if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){this.currentCoord.z=parseInt(this.mainSliderControl.val(),10)}else{if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){this.currentCoord.y=parseInt(this.mainSliderControl.val(),10)}else{if(this.mainImage.sliceDirection===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){this.currentCoord.x=parseInt(this.mainSliderControl.val(),10)}}}this.gotoCoordinate(this.currentCoord)};papaya.viewer.Viewer.prototype.axialSliderControlChanged=function(){this.currentCoord.z=parseInt(this.axialSliderControl.val(),10);this.gotoCoordinate(this.currentCoord)};papaya.viewer.Viewer.prototype.coronalSliderControlChanged=function(){this.currentCoord.y=parseInt(this.coronalSliderControl.val(),10);this.gotoCoordinate(this.currentCoord)};papaya.viewer.Viewer.prototype.sagittalSliderControlChanged=function(){this.currentCoord.x=parseInt(this.sagittalSliderControl.val(),10);this.gotoCoordinate(this.currentCoord)};papaya.viewer.Viewer.prototype.seriesSliderControlChanged=function(){this.currentScreenVolume.setTimepoint(parseInt(this.seriesSliderControl.val(),10));if(this.currentScreenVolume.isOverlay()&&this.container.syncOverlaySeries){this.reconcileOverlaySeriesPoint(this.currentScreenVolume)}this.timepointChanged()};papaya.viewer.Viewer.prototype.updateSliceSliderControl=function(){if(this.mainSliderControl){this.doUpdateSliceSliderControl(this.mainSliderControl,this.mainImage.sliceDirection)}if(this.axialSliderControl){this.doUpdateSliceSliderControl(this.axialSliderControl,papaya.viewer.ScreenSlice.DIRECTION_AXIAL)}if(this.coronalSliderControl){this.doUpdateSliceSliderControl(this.coronalSliderControl,papaya.viewer.ScreenSlice.DIRECTION_CORONAL)}if(this.sagittalSliderControl){this.doUpdateSliceSliderControl(this.sagittalSliderControl,papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL)}if(this.seriesSliderControl){this.doUpdateSliceSliderControl(this.seriesSliderControl,papaya.viewer.ScreenSlice.DIRECTION_TEMPORAL)}};papaya.viewer.Viewer.prototype.doUpdateSliceSliderControl=function(a,b){if(this.initialized){a.prop("disabled",false);a.prop("min","0");a.prop("step","1");if(b===papaya.viewer.ScreenSlice.DIRECTION_AXIAL){a.prop("max",(this.volume.header.imageDimensions.zDim-1).toString());a.val(this.currentCoord.z)}else{if(b===papaya.viewer.ScreenSlice.DIRECTION_CORONAL){a.prop("max",(this.volume.header.imageDimensions.yDim-1).toString());a.val(this.currentCoord.y)}else{if(b===papaya.viewer.ScreenSlice.DIRECTION_SAGITTAL){a.prop("max",(this.volume.header.imageDimensions.xDim-1).toString());a.val(this.currentCoord.x)}else{if(b===papaya.viewer.ScreenSlice.DIRECTION_TEMPORAL){a.prop("max",(this.currentScreenVolume.volume.header.imageDimensions.timepoints-1).toString());a.val(this.currentScreenVolume.currentTimepoint)}}}}}else{a.prop("disabled",true);a.prop("min","0");a.prop("step","1");a.prop("max","1");a.val(0)}};papaya.viewer.Viewer.prototype.incrementSeriesPoint=function(){this.currentScreenVolume.incrementTimepoint();if(this.currentScreenVolume.isOverlay()&&this.container.syncOverlaySeries){this.reconcileOverlaySeriesPoint(this.currentScreenVolume)}this.timepointChanged()};papaya.viewer.Viewer.prototype.decrementSeriesPoint=function(){this.currentScreenVolume.decrementTimepoint();if(this.currentScreenVolume.isOverlay()&&this.container.syncOverlaySeries){this.reconcileOverlaySeriesPoint(this.currentScreenVolume)}this.timepointChanged()};papaya.viewer.Viewer.prototype.reconcileOverlaySeriesPoint=function(a){var b,d,c;if(this.worldSpace){c=a.getCurrentTime();for(b=1;b<this.screenVolumes.length;b+=1){if(this.screenVolumes[b]!==a){this.screenVolumes[b].setCurrentTime(c)}}}else{d=a.currentTimepoint;for(b=1;b<this.screenVolumes.length;b+=1){if(this.screenVolumes[b]!==a){this.screenVolumes[b].setTimepoint(d)}}}};papaya.viewer.Viewer.prototype.hasParametricPair=function(a){if(a){return(this.screenVolumes[a].negativeScreenVol!==null)}else{return false}};papaya.viewer.Viewer.prototype.getScreenVolumeIndex=function(b){var a;if(b){for(a=0;a<this.screenVolumes.length;a+=1){if(b===this.screenVolumes[a]){return a}}}return -1};papaya.viewer.Viewer.prototype.getScreenVolumeByName=function(a){var b;for(b=0;b<this.screenVolumes.length;b+=1){if(a==this.screenVolumes[b].volume.fileName){return this.screenVolumes[b]}}return null};papaya.viewer.Viewer.prototype.isShowingRuler=function(){return(this.container.preferences.showRuler==="Yes")};papaya.viewer.Viewer.prototype.isShowingOrientation=function(){return(this.container.preferences.showOrientation==="Yes")};papaya.viewer.Viewer.prototype.isShowingCrosshairs=function(){return(this.container.preferences.showCrosshairs==="Yes")};papaya.viewer.Viewer.prototype.isShowingSurfacePlanes=function(){return(this.surfaceView&&this.surfaceView.showSurfacePlanes)};papaya.viewer.Viewer.prototype.isShowingSurfaceCrosshairs=function(){return(this.surfaceView&&this.surfaceView.showSurfaceCrosshairs)};papaya.viewer.Viewer.prototype.restart=function(a,c,d,b){this.resetViewer();this.container.toolbar.updateImageButtons();this.loadImage(a,c,d,b)};papaya.viewer.Viewer.prototype.removeOverlay=function(b){var c,a;c=this.container.viewer.screenVolumes[b];a=c.negativeScreenVol;this.closeOverlayByRef(c);if(this.container.combineParametric){this.closeOverlayByRef(a)}this.drawViewer(true,false)};papaya.viewer.Viewer.prototype.toggleOverlay=function(b){var c,a;c=this.container.viewer.screenVolumes[b];c.hidden=!c.hidden;a=c.negativeScreenVol;if(this.container.combineParametric&&a){a.hidden=!a.hidden}this.drawViewer(true,false);return c.hidden};papaya.viewer.Viewer.prototype.addParametric=function(a){var c=this.container.viewer.screenVolumes[a],b;if(c.negativeScreenVol===null){this.screenVolumes[this.screenVolumes.length]=b=new papaya.viewer.ScreenVolume(c.volume,{},papaya.viewer.ColorTable.PARAMETRIC_COLOR_TABLES[1].name,false,true,this.currentCoord);c.negativeScreenVol=b;this.setCurrentScreenVol(this.screenVolumes.length-1);this.drawViewer(true,false);this.container.toolbar.buildToolbar();this.container.toolbar.updateImageButtons()}};"use strict";var papaya=papaya||{};papaya.viewer=papaya.viewer||{};var shaderVert=["precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec4 aVertexColor;","attribute vec2 aTextureCoord;","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","uniform mat3 uNMatrix;","uniform vec3 uAmbientColor;","uniform vec3 uPointLightingLocation;","uniform vec3 uPointLightingColor;","uniform bool uActivePlane;","uniform bool uActivePlaneEdge;","uniform bool uCrosshairs;","uniform bool uColors;","uniform bool uColorPicking;","uniform bool uTrianglePicking;","uniform bool uColorSolid;","uniform vec4 uSolidColor;","uniform bool uOrientationText;","uniform bool uRuler;","uniform float uAlpha;","varying vec3 vLightWeighting;","varying lowp vec4 vColor;","varying vec2 vTextureCoord;","void main(void) {","    vec4 mvPosition = uMVMatrix * vec4(aVertexPosition, 1.0);","    gl_Position = uPMatrix * mvPosition;","    if (!uActivePlane && !uActivePlaneEdge && !uCrosshairs && !uOrientationText && !uRuler) {","       vec3 lightDirection = normalize(uPointLightingLocation - mvPosition.xyz);","       vec3 transformedNormal = uNMatrix * aVertexNormal;","       float directionalLightWeighting = max(dot(transformedNormal, lightDirection), 0.0);","       vLightWeighting = uAmbientColor + uPointLightingColor * directionalLightWeighting;","       if (uColors) {","           vColor = aVertexColor;","       }","   }","   if (uColorSolid) {","       vColor = uSolidColor;","   }","   if (uOrientationText) {","       vTextureCoord = aTextureCoord;","   }","}"].join("\n");var shaderFrag=["precision mediump float;","uniform bool uActivePlane;","uniform bool uActivePlaneEdge;","uniform bool uCrosshairs;","uniform bool uColors;","uniform bool uColorPicking;","uniform bool uTrianglePicking;","uniform bool uColorSolid;","uniform vec4 uSolidColor;","uniform bool uOrientationText;","uniform bool uRuler;","uniform sampler2D uSampler;","uniform float uAlpha;","varying vec3 vLightWeighting;","varying lowp vec4 vColor;","varying vec2 vTextureCoord;","vec4 packFloatToVec4i(const float value) {","   const vec4 bitSh = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);","   const vec4 bitMsk = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);","   vec4 res = fract(value * bitSh);","   res -= res.xxyz * bitMsk;","   return res;","}","void main(void) {","    vec4 fragmentColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (uColors) {","       fragmentColor = vColor;","    } else if (uColorSolid) {","       fragmentColor = vColor;","    }","    if (uActivePlane) {","       gl_FragColor = vec4(0.10980392156863, 0.52549019607843, 0.93333333333333, 0.5);","    } else if (uActivePlaneEdge) {","       gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    } else if (uRuler) {","       gl_FragColor = vec4(1.0, 0.078, 0.576, 1.0);","    } else if (uOrientationText) {","        vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));","        if (textureColor.a > 0.0) {","           gl_FragColor = vec4(textureColor.rgb, textureColor.a);","        } else {","           gl_FragColor = vec4(textureColor.rgb, 0);","        }","    } else if (uCrosshairs) {","       gl_FragColor = vec4(0.10980392156863, 0.52549019607843, 0.93333333333333, 1.0);","    } else if (uColorPicking) {","       gl_FragColor = vec4(fragmentColor.r, fragmentColor.g, fragmentColor.b, 1);","    } else if (uTrianglePicking) {","       gl_FragColor = packFloatToVec4i(gl_FragCoord.z);","    } else {","       gl_FragColor = vec4(fragmentColor.rgb * vLightWeighting, uAlpha);","    }","}"].join("\n");papaya.viewer.ScreenSurface=papaya.viewer.ScreenSurface||function(b,a,d,c){this.shaderProgram=null;this.mvMatrix=mat4.create();this.pMatrix=mat4.create();this.pMatrix1=mat4.create();this.centerMat=mat4.create();this.centerMatInv=mat4.create();this.tempMat=mat4.create();this.tempMat2=mat4.create();this.pickingBuffer=null;this.initialized=false;this.screenOffsetX=0;this.screenOffsetY=0;this.screenDim=0;this.screenTransform=[[1,0,0],[0,1,0],[0,0,1]];this.volume=b;this.surfaces=a;this.viewer=d;this.currentCoord=d.currentCoord;this.zoom=0;this.sliceDirection=papaya.viewer.ScreenSlice.DIRECTION_SURFACE;this.dynamicStartX=-1;this.dynamicStartY=-1;this.activePlaneVertsAxial=new Float32Array(12);this.activePlaneVertsCoronal=new Float32Array(12);this.activePlaneVertsSagittal=new Float32Array(12);this.activePlaneVertsAxialEdges=new Float32Array(24);this.activePlaneVertsCoronalEdges=new Float32Array(24);this.activePlaneVertsSagittalEdges=new Float32Array(24);this.orientationVerts=new Float32Array(24);this.crosshairLineVertsX=new Float32Array(6);this.crosshairLineVertsY=new Float32Array(6);this.crosshairLineVertsZ=new Float32Array(6);this.mouseRotDragX=this.clearTransform([]);this.mouseRotDragY=this.clearTransform([]);this.mouseRotDrag=this.clearTransform([]);this.mouseTransDrag=this.clearTransform([]);this.mouseRotCurrent=this.clearTransform([]);this.mouseTransCurrent=this.clearTransform([]);this.mouseRotTemp=this.clearTransform([]);this.mouseTransTemp=this.clearTransform([]);this.activePlaneAxialBuffer=null;this.activePlaneCoronalBuffer=null;this.activePlaneSagittalBuffer=null;this.activePlaneAxialEdgesBuffer=null;this.activePlaneCoronalEdgesBuffer=null;this.activePlaneSagittalEdgesBuffer=null;this.orientationBuffer=null;this.crosshairLineXBuffer=null;this.crosshairLineYBuffer=null;this.crosshairLineZBuffer=null;this.crosshairLineZBuffer=null;this.xSize=this.volume.header.voxelDimensions.xSize;this.xDim=this.volume.header.imageDimensions.xDim;this.xHalf=(this.xDim*this.xSize)/2;this.ySize=this.volume.header.voxelDimensions.ySize;this.yDim=this.volume.header.imageDimensions.yDim;this.yHalf=(this.yDim*this.ySize)/2;this.zSize=this.volume.header.voxelDimensions.zSize;this.zDim=this.volume.header.imageDimensions.zDim;this.zHalf=(this.zDim*this.zSize)/2;this.showSurfacePlanes=(d.container.preferences.showSurfacePlanes==="Yes");this.backgroundColor=papaya.viewer.ScreenSurface.DEFAULT_BACKGROUND;this.pickLocX=0;this.pickLocY=0;this.needsPickColor=false;this.pickedColor=null;this.needsPick=false;this.pickedCoordinate=null;this.scaleFactor=1;this.orientationTexture=null;this.orientationTextureCoords=null;this.orientationTextureCoordBuffer=null;this.orientationCanvas=null;this.orientationContext=null;this.rulerPoints=null;this.grabbedRulerPoint=-1;this.processParams(c)};papaya.viewer.ScreenSurface.DEFAULT_ORIENTATION=[-0.015552218963737041,0.09408106275544359,-0.9954430697501158,0,-0.9696501263313991,0.24152923619118966,0.03797658948646743,0,0.24400145970103732,0.965822108594413,0.0874693978960848,0,0,0,0,1];papaya.viewer.ScreenSurface.MOUSE_SENSITIVITY=0.3;papaya.viewer.ScreenSurface.DEFAULT_BACKGROUND=[0.5,0.5,0.5];papaya.viewer.ScreenSurface.TEXT_SIZE=50;papaya.viewer.ScreenSurface.ORIENTATION_SIZE=10;papaya.viewer.ScreenSurface.RULER_COLOR=[1,0.078,0.576];papaya.viewer.ScreenSurface.RULER_NUM_LINES=25;papaya.viewer.ScreenSurface.RULER_RADIUS=1;papaya.viewer.ScreenSurface.EXT_INT=null;papaya.viewer.ScreenSurface.makeShader=function(d,c,a){var b=d.createShader(a);d.shaderSource(b,c);d.compileShader(b);if(!d.getShaderParameter(b,d.COMPILE_STATUS)){console.log(d.getShaderInfoLog(b));return null}return b};papaya.viewer.ScreenSurface.initShaders=function(c){var a=papaya.viewer.ScreenSurface.makeShader(c,shaderVert,c.VERTEX_SHADER);var b=papaya.viewer.ScreenSurface.makeShader(c,shaderFrag,c.FRAGMENT_SHADER);var d=c.createProgram();c.attachShader(d,b);c.attachShader(d,a);c.linkProgram(d);if(!c.getProgramParameter(d,c.LINK_STATUS)){console.log("Could not initialise shaders")}c.useProgram(d);d.vertexPositionAttribute=c.getAttribLocation(d,"aVertexPosition");c.enableVertexAttribArray(d.vertexPositionAttribute);d.vertexNormalAttribute=c.getAttribLocation(d,"aVertexNormal");c.enableVertexAttribArray(d.vertexNormalAttribute);d.vertexColorAttribute=c.getAttribLocation(d,"aVertexColor");d.textureCoordAttribute=c.getAttribLocation(d,"aTextureCoord");d.pMatrixUniform=c.getUniformLocation(d,"uPMatrix");d.mvMatrixUniform=c.getUniformLocation(d,"uMVMatrix");d.nMatrixUniform=c.getUniformLocation(d,"uNMatrix");d.ambientColorUniform=c.getUniformLocation(d,"uAmbientColor");d.pointLightingLocationUniform=c.getUniformLocation(d,"uPointLightingLocation");d.pointLightingColorUniform=c.getUniformLocation(d,"uPointLightingColor");d.activePlane=c.getUniformLocation(d,"uActivePlane");d.activePlaneEdge=c.getUniformLocation(d,"uActivePlaneEdge");d.colorPicking=c.getUniformLocation(d,"uColorPicking");d.trianglePicking=c.getUniformLocation(d,"uTrianglePicking");d.crosshairs=c.getUniformLocation(d,"uCrosshairs");d.hasColors=c.getUniformLocation(d,"uColors");d.hasSolidColor=c.getUniformLocation(d,"uColorSolid");d.solidColor=c.getUniformLocation(d,"uSolidColor");d.orientationText=c.getUniformLocation(d,"uOrientationText");d.samplerUniform=c.getUniformLocation(d,"uSampler");d.ruler=c.getUniformLocation(d,"uRuler");d.alphaVal=c.getUniformLocation(d,"uAlpha");return d};papaya.viewer.ScreenSurface.prototype.initialize=function(){var a;this.initialized=true;this.canvas=document.createElement("canvas");this.canvas.width=this.screenDim;this.canvas.height=this.screenDim;this.context=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl");this.context.viewportWidth=this.canvas.width;this.context.viewportHeight=this.canvas.height;this.zoom=this.volume.header.imageDimensions.yDim*this.volume.header.voxelDimensions.ySize*1.5;this.initPerspective();this.shaderProgram=papaya.viewer.ScreenSurface.initShaders(this.context);for(a=0;a<this.surfaces.length;a+=1){this.initBuffers(this.context,this.surfaces[a])}this.calculateScaleFactor();this.initActivePlaneBuffers(this.context);this.initRulerBuffers(this.context);mat4.multiply(this.centerMat,papaya.viewer.ScreenSurface.DEFAULT_ORIENTATION,this.tempMat);mat4.multiply(this.tempMat,this.centerMatInv,this.mouseRotCurrent);papaya.viewer.ScreenSurface.EXT_INT=this.context.getExtension("OES_element_index_uint");if(!papaya.viewer.ScreenSurface.EXT_INT){console.log("This browser does not support OES_element_index_uint extension!")}this.updateBackgroundColor()};papaya.viewer.ScreenSurface.prototype.calculateScaleFactor=function(){var a=(this.xSize*this.xDim),d=(this.ySize*this.yDim),c=(this.zSize*this.zDim),b=a;if(d>b){b=d}if(c>b){b=c}this.scaleFactor=(b/256)};papaya.viewer.ScreenSurface.prototype.resize=function(a){if(!this.initialized){this.initialize()}this.screenDim=a;this.canvas.width=this.screenDim;this.canvas.height=this.screenDim;this.context.viewportWidth=this.canvas.width;this.context.viewportHeight=this.canvas.height};papaya.viewer.ScreenSurface.prototype.applyMatrixUniforms=function(b){b.uniformMatrix4fv(this.shaderProgram.pMatrixUniform,false,this.pMatrix);b.uniformMatrix4fv(this.shaderProgram.mvMatrixUniform,false,this.mvMatrix);var a=mat3.create();mat4.toInverseMat3(this.mvMatrix,a);mat3.transpose(a);b.uniformMatrix3fv(this.shaderProgram.nMatrixUniform,false,a)};papaya.viewer.ScreenSurface.prototype.draw=function(){if(this.surfaces.length>0){if(!this.initialized){this.initialize()}this.drawScene(this.context)}};papaya.viewer.ScreenSurface.prototype.initBuffers=function(b,a){a.pointsBuffer=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,a.pointsBuffer);b.bufferData(b.ARRAY_BUFFER,a.pointData,b.STATIC_DRAW);a.pointsBuffer.itemSize=3;a.pointsBuffer.numItems=a.numPoints;a.normalsBuffer=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,a.normalsBuffer);b.bufferData(b.ARRAY_BUFFER,a.normalsData,b.STATIC_DRAW);a.normalsBuffer.itemSize=3;a.normalsBuffer.numItems=a.numPoints;if(a.colorsData){a.colorsBuffer=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,a.colorsBuffer);b.bufferData(b.ARRAY_BUFFER,a.colorsData,b.STATIC_DRAW);a.colorsBuffer.itemSize=4;a.colorsBuffer.numItems=a.numPoints}a.trianglesBuffer=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a.trianglesBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,a.triangleData,b.STATIC_DRAW);a.trianglesBuffer.itemSize=1;a.trianglesBuffer.numItems=a.numTriangles*3};papaya.viewer.ScreenSurface.prototype.initOrientationBuffers=function(a){this.makeOrientedTextSquare();this.orientationBuffer=a.createBuffer();this.orientationBuffer.itemSize=3;this.orientationBuffer.numItems=4;this.orientationTextureCoordBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.orientationTextureCoordBuffer);this.orientationTextureCoords=[0,1,0,0,1,1,1,0];a.bufferData(a.ARRAY_BUFFER,new Float32Array(this.orientationTextureCoords),a.STATIC_DRAW);this.orientationTextureCoordBuffer.itemSize=2;this.orientationTextureCoordBuffer.numItems=4};papaya.viewer.ScreenSurface.prototype.initActivePlaneBuffers=function(a){this.updateActivePlanes();this.activePlaneAxialBuffer=a.createBuffer();this.activePlaneAxialBuffer.itemSize=3;this.activePlaneAxialBuffer.numItems=4;this.activePlaneCoronalBuffer=a.createBuffer();this.activePlaneCoronalBuffer.itemSize=3;this.activePlaneCoronalBuffer.numItems=4;this.activePlaneSagittalBuffer=a.createBuffer();this.activePlaneSagittalBuffer.itemSize=3;this.activePlaneSagittalBuffer.numItems=4;this.activePlaneAxialEdgesBuffer=a.createBuffer();this.activePlaneAxialEdgesBuffer.itemSize=3;this.activePlaneAxialEdgesBuffer.numItems=8;this.activePlaneCoronalEdgesBuffer=a.createBuffer();this.activePlaneCoronalEdgesBuffer.itemSize=3;this.activePlaneCoronalEdgesBuffer.numItems=8;this.activePlaneSagittalEdgesBuffer=a.createBuffer();this.activePlaneSagittalEdgesBuffer.itemSize=3;this.activePlaneSagittalEdgesBuffer.numItems=8;this.crosshairLineXBuffer=a.createBuffer();this.crosshairLineXBuffer.itemSize=3;this.crosshairLineXBuffer.numItems=2;this.crosshairLineYBuffer=a.createBuffer();this.crosshairLineYBuffer.itemSize=3;this.crosshairLineYBuffer.numItems=2;this.crosshairLineZBuffer=a.createBuffer();this.crosshairLineZBuffer.itemSize=3;this.crosshairLineZBuffer.numItems=2};papaya.viewer.ScreenSurface.prototype.initRulerBuffers=function(a){this.rulerPointData=this.makeSphere(papaya.viewer.ScreenSurface.RULER_NUM_LINES,papaya.viewer.ScreenSurface.RULER_NUM_LINES,papaya.viewer.ScreenSurface.RULER_RADIUS*this.scaleFactor);this.sphereVertexPositionBuffer=a.createBuffer();this.sphereVertexPositionBuffer.itemSize=3;this.sphereVertexPositionBuffer.numItems=this.rulerPointData.vertices.length/3;this.sphereNormalsPositionBuffer=a.createBuffer();this.sphereNormalsPositionBuffer.itemSize=3;this.sphereNormalsPositionBuffer.numItems=this.rulerPointData.normals.length/3;this.sphereVertexIndexBuffer=a.createBuffer();this.sphereVertexIndexBuffer.itemSize=1;this.sphereVertexIndexBuffer.numItems=this.rulerPointData.indices.length;this.rulerLineBuffer=a.createBuffer();this.rulerLineBuffer.itemSize=3;this.rulerLineBuffer.numItems=2};papaya.viewer.ScreenSurface.prototype.initPerspective=function(){mat4.perspective(45,1,10,100000,this.pMatrix1);this.eye=new vec3.create();this.eye[0]=0;this.eye[1]=0;this.center=new vec3.create();this.centerWorld=new papaya.core.Coordinate();this.viewer.getWorldCoordinateAtIndex(parseInt(this.xDim/2,10),parseInt(this.yDim/2,10),parseInt(this.zDim/2,10),this.centerWorld);this.center[0]=this.centerWorld.x;this.center[1]=this.centerWorld.y;this.center[2]=this.centerWorld.z;mat4.identity(this.centerMat);mat4.translate(this.centerMat,[this.center[0],this.center[1],this.center[2]]);mat4.identity(this.centerMatInv);mat4.translate(this.centerMatInv,[-this.center[0],-this.center[1],-this.center[2]]);this.up=new vec3.create();this.up[0]=0;this.up[1]=1;this.up[2]=0};papaya.viewer.ScreenSurface.prototype.updatePerspective=function(){var a;this.eye[2]=this.zoom;a=mat4.lookAt(this.eye,this.center,this.up);mat4.multiply(this.pMatrix1,a,this.pMatrix)};papaya.viewer.ScreenSurface.prototype.unpackFloatFromVec4i=function(b){var a=[1/(256*256*256),1/(256*256),1/256,1];return((b[0]*a[0])+(b[1]*a[1])+(b[2]*a[2])+(b[3]*a[3]))};papaya.viewer.ScreenSurface.prototype.hasTranslucentSurfaces=function(){var a;for(a=0;a<this.surfaces.length;a+=1){if(this.surfaces[a].alpha<1){return true}}return false};papaya.viewer.ScreenSurface.prototype.drawScene=function(f){var e,d,c,b,a=this.hasTranslucentSurfaces();f.clearColor(this.backgroundColor[0],this.backgroundColor[1],this.backgroundColor[2],1);f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);f.viewport(0,0,f.viewportWidth,f.viewportHeight);mat4.identity(this.mvMatrix);mat4.multiply(this.mouseRotDrag,this.mouseRotCurrent,this.mouseRotTemp);mat4.multiply(this.mouseTransDrag,this.mouseTransCurrent,this.mouseTransTemp);mat4.multiply(this.mouseTransTemp,this.mouseRotTemp,this.tempMat);mat4.set(this.tempMat,this.mvMatrix);this.updatePerspective();this.applyMatrixUniforms(f);f.uniform3f(this.shaderProgram.ambientColorUniform,0.2,0.2,0.2);f.uniform3f(this.shaderProgram.pointLightingLocationUniform,0,0,300*this.scaleFactor);f.uniform3f(this.shaderProgram.pointLightingColorUniform,0.8,0.8,0.8);f.uniform1i(this.shaderProgram.orientationText,0);f.uniform1i(this.shaderProgram.activePlane,0);f.uniform1i(this.shaderProgram.activePlaneEdge,0);f.uniform1i(this.shaderProgram.crosshairs,0);f.uniform1i(this.shaderProgram.hasColors,0);f.uniform1i(this.shaderProgram.colorPicking,0);f.uniform1i(this.shaderProgram.trianglePicking,0);if(this.needsPick){f.uniform1i(this.shaderProgram.trianglePicking,1);if((this.pickingBuffer===null)||(this.pickingBuffer.length!==(f.viewportWidth*f.viewportHeight*4))){this.pickingBuffer=new Uint8Array(f.viewportWidth*f.viewportHeight*4)}}else{if(this.needsPickColor){f.uniform1i(this.shaderProgram.colorPicking,1);if((this.pickingBuffer===null)||(this.pickingBuffer.length!==(f.viewportWidth*f.viewportHeight*4))){this.pickingBuffer=new Uint8Array(f.viewportWidth*f.viewportHeight*4)}}}f.enable(f.DEPTH_TEST);for(e=0;e<this.surfaces.length;e+=1){this.renderSurface(f,e,this.surfaces[e].alpha<1,true,false)}f.uniform1i(this.shaderProgram.hasSolidColor,0);f.uniform1i(this.shaderProgram.hasColors,0);if(this.needsPick){this.needsPick=false;this.pickedCoordinate=this.findPickedCoordinate(f,this.pickLocX,this.pickLocY);f.uniform1i(this.shaderProgram.trianglePicking,0)}else{if(this.needsPickColor){this.needsPickColor=false;this.pickedColor=this.findPickedColor(f);f.uniform1i(this.shaderProgram.colorPicking,0)}else{if(this.showSurfacePlanes){if(this.needsUpdateActivePlanes){this.needsUpdateActivePlanes=false;this.bindActivePlanes(f)}f.depthMask(false);f.uniform1i(this.shaderProgram.activePlane,1);f.enable(f.BLEND);f.blendFunc(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA);f.bindBuffer(f.ARRAY_BUFFER,this.activePlaneAxialBuffer);f.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.activePlaneAxialBuffer.itemSize,f.FLOAT,false,0,0);f.drawArrays(f.TRIANGLE_STRIP,0,4);f.bindBuffer(f.ARRAY_BUFFER,this.activePlaneCoronalBuffer);f.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.activePlaneCoronalBuffer.itemSize,f.FLOAT,false,0,0);f.drawArrays(f.TRIANGLE_STRIP,0,4);f.bindBuffer(f.ARRAY_BUFFER,this.activePlaneSagittalBuffer);f.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.activePlaneSagittalBuffer.itemSize,f.FLOAT,false,0,0);f.drawArrays(f.TRIANGLE_STRIP,0,4);f.depthMask(true);f.disable(f.BLEND);f.uniform1i(this.shaderProgram.activePlane,0);f.uniform1i(this.shaderProgram.activePlaneEdge,1);f.lineWidth(this.isMainView()?3:2);f.bindBuffer(f.ARRAY_BUFFER,this.activePlaneAxialEdgesBuffer);f.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.activePlaneAxialEdgesBuffer.itemSize,f.FLOAT,false,0,0);f.drawArrays(f.LINES,0,8);f.bindBuffer(f.ARRAY_BUFFER,this.activePlaneCoronalEdgesBuffer);f.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.activePlaneCoronalEdgesBuffer.itemSize,f.FLOAT,false,0,0);f.drawArrays(f.LINES,0,8);f.bindBuffer(f.ARRAY_BUFFER,this.activePlaneSagittalEdgesBuffer);f.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.activePlaneSagittalEdgesBuffer.itemSize,f.FLOAT,false,0,0);f.drawArrays(f.LINES,0,8);f.uniform1i(this.shaderProgram.activePlaneEdge,0)}if(this.viewer.isShowingCrosshairs()&&((this.viewer.mainImage!==this)||this.viewer.toggleMainCrosshairs)){if(this.needsUpdateActivePlanes){this.needsUpdateActivePlanes=false;this.bindActivePlanes(f)}f.uniform1i(this.shaderProgram.crosshairs,1);f.lineWidth(this.isMainView()?3:2);f.bindBuffer(f.ARRAY_BUFFER,this.crosshairLineXBuffer);f.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.crosshairLineXBuffer.itemSize,f.FLOAT,false,0,0);f.drawArrays(f.LINES,0,2);f.bindBuffer(f.ARRAY_BUFFER,this.crosshairLineYBuffer);f.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.crosshairLineYBuffer.itemSize,f.FLOAT,false,0,0);f.drawArrays(f.LINES,0,2);f.bindBuffer(f.ARRAY_BUFFER,this.crosshairLineZBuffer);f.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.crosshairLineZBuffer.itemSize,f.FLOAT,false,0,0);f.drawArrays(f.LINES,0,2);f.uniform1i(this.shaderProgram.crosshairs,0)}f.enable(f.DEPTH_TEST);for(e=0;e<this.surfaces.length;e+=1){if(a){this.renderSurface(f,e,this.surfaces[e].alpha<1,false,true)}}if((this.viewer.mainImage===this.viewer.surfaceView)&&(this.viewer.container.preferences.showOrientation==="Yes")){d=this.currentCoord.x+((this.xDim/2)-this.volume.header.origin.x);c=this.yDim-this.currentCoord.y-((this.yDim/2)-this.volume.header.origin.y);b=this.zDim-this.currentCoord.z-((this.zDim/2)-this.volume.header.origin.z);this.drawOrientedText(f,"S",papaya.viewer.ScreenSurface.TEXT_SIZE,[(d*this.xSize)-this.xHalf,(c*this.ySize)-this.yHalf,this.zHalf+papaya.viewer.ScreenSurface.ORIENTATION_SIZE*this.scaleFactor-((this.zDim/2)-this.volume.header.origin.z)*this.zSize]);this.drawOrientedText(f,"I",papaya.viewer.ScreenSurface.TEXT_SIZE,[(d*this.xSize)-this.xHalf,(c*this.ySize)-this.yHalf,-this.zHalf-papaya.viewer.ScreenSurface.ORIENTATION_SIZE*this.scaleFactor-((this.zDim/2)-this.volume.header.origin.z)*this.zSize]);this.drawOrientedText(f,"P",papaya.viewer.ScreenSurface.TEXT_SIZE,[(d*this.xSize)-this.xHalf,-this.yHalf-papaya.viewer.ScreenSurface.ORIENTATION_SIZE*this.scaleFactor-((this.yDim/2)-this.volume.header.origin.y)*this.ySize,(b*this.zSize)-this.zHalf]);this.drawOrientedText(f,"A",papaya.viewer.ScreenSurface.TEXT_SIZE,[(d*this.xSize)-this.xHalf,this.yHalf+papaya.viewer.ScreenSurface.ORIENTATION_SIZE*this.scaleFactor-((this.yDim/2)-this.volume.header.origin.y)*this.ySize,(b*this.zSize)-this.zHalf]);this.drawOrientedText(f,"L",papaya.viewer.ScreenSurface.TEXT_SIZE,[-this.xHalf-papaya.viewer.ScreenSurface.ORIENTATION_SIZE*this.scaleFactor+((this.xDim/2)-this.volume.header.origin.x)*this.xSize,(c*this.ySize)-this.yHalf,(b*this.zSize)-this.zHalf]);this.drawOrientedText(f,"R",papaya.viewer.ScreenSurface.TEXT_SIZE,[this.xHalf+papaya.viewer.ScreenSurface.ORIENTATION_SIZE*this.scaleFactor+((this.xDim/2)-this.volume.header.origin.x)*this.xSize,(c*this.ySize)-this.yHalf,(b*this.zSize)-this.zHalf])}if(this.viewer.container.preferences.showRuler==="Yes"){if(this.isMainView()){this.drawRuler(f)}}else{this.rulerPoints=null}}}f.disable(f.DEPTH_TEST)};papaya.viewer.ScreenSurface.prototype.renderSurface=function(d,b,c,a,e){d.uniform1f(this.shaderProgram.alphaVal,this.surfaces[b].alpha);if(c){if(a){d.enable(d.BLEND);d.enable(d.CULL_FACE);d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA);d.frontFace(d.CCW);d.cullFace(d.FRONT);d.uniform3f(this.shaderProgram.ambientColorUniform,0,0,0);d.uniform3f(this.shaderProgram.pointLightingLocationUniform,0,0,-300*this.scaleFactor)}else{if(e){d.enable(d.BLEND);d.enable(d.CULL_FACE);d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA);d.frontFace(d.CCW);d.cullFace(d.BACK);d.uniform3f(this.shaderProgram.ambientColorUniform,0.2,0.2,0.2);d.uniform3f(this.shaderProgram.pointLightingLocationUniform,0,0,300*this.scaleFactor)}}}else{d.uniform3f(this.shaderProgram.ambientColorUniform,0.2,0.2,0.2);d.uniform3f(this.shaderProgram.pointLightingLocationUniform,0,0,300*this.scaleFactor)}d.uniform1i(this.shaderProgram.hasSolidColor,0);d.uniform1i(this.shaderProgram.hasColors,0);if(this.surfaces[b].solidColor){d.uniform1i(this.shaderProgram.hasSolidColor,1);d.uniform4f(this.shaderProgram.solidColor,this.surfaces[b].solidColor[0],this.surfaces[b].solidColor[1],this.surfaces[b].solidColor[2],1)}d.bindBuffer(d.ARRAY_BUFFER,this.surfaces[b].pointsBuffer);d.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.surfaces[b].pointsBuffer.itemSize,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,this.surfaces[b].normalsBuffer);d.vertexAttribPointer(this.shaderProgram.vertexNormalAttribute,this.surfaces[b].normalsBuffer.itemSize,d.FLOAT,false,0,0);if(this.surfaces[b].colorsData){d.uniform1i(this.shaderProgram.hasColors,1);d.bindBuffer(d.ARRAY_BUFFER,this.surfaces[b].colorsBuffer);d.enableVertexAttribArray(this.shaderProgram.vertexColorAttribute);d.vertexAttribPointer(this.shaderProgram.vertexColorAttribute,this.surfaces[b].colorsBuffer.itemSize,d.FLOAT,false,0,0)}else{d.disableVertexAttribArray(this.shaderProgram.vertexColorAttribute)}d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.surfaces[b].trianglesBuffer);d.drawElements(d.TRIANGLES,this.surfaces[b].trianglesBuffer.numItems,d.UNSIGNED_INT,0);if(c&&(a||e)){d.disable(d.BLEND);d.disable(d.CULL_FACE)}};papaya.viewer.ScreenSurface.prototype.drawRuler=function(b){var a=true;if(this.rulerPoints===null){this.rulerPoints=new Float32Array(6);a=this.findInitialRulerPoints(b);this.drawScene(b)}if(a){b.uniform1i(this.shaderProgram.ruler,1);this.drawRulerPoint(b,this.rulerPoints[0],this.rulerPoints[1],this.rulerPoints[2]);this.drawRulerPoint(b,this.rulerPoints[3],this.rulerPoints[4],this.rulerPoints[5]);b.bindBuffer(b.ARRAY_BUFFER,this.rulerLineBuffer);b.bufferData(b.ARRAY_BUFFER,this.rulerPoints,b.DYNAMIC_DRAW);b.bindBuffer(b.ARRAY_BUFFER,this.rulerLineBuffer);b.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.rulerLineBuffer.itemSize,b.FLOAT,false,0,0);b.drawArrays(b.LINES,0,2);b.uniform1i(this.shaderProgram.ruler,0)}};papaya.viewer.ScreenSurface.prototype.drawRulerPoint=function(d,c,b,a){this.sphereVertexPositionBuffer.numItems=this.rulerPointData.vertices.length/3;d.bindBuffer(d.ARRAY_BUFFER,this.sphereVertexPositionBuffer);d.bufferData(d.ARRAY_BUFFER,new Float32Array(this.rulerPointData.vertices),d.STATIC_DRAW);this.sphereNormalsPositionBuffer.numItems=this.rulerPointData.normals.length/3;d.bindBuffer(d.ARRAY_BUFFER,this.sphereNormalsPositionBuffer);d.bufferData(d.ARRAY_BUFFER,new Float32Array(this.rulerPointData.normals),d.STATIC_DRAW);this.sphereVertexIndexBuffer.numItems=this.rulerPointData.indices.length;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.sphereVertexIndexBuffer);d.bufferData(d.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.rulerPointData.indices),d.STATIC_DRAW);d.uniform1i(this.shaderProgram.hasSolidColor,1);d.uniform4f(this.shaderProgram.solidColor,papaya.viewer.ScreenSurface.RULER_COLOR[0],papaya.viewer.ScreenSurface.RULER_COLOR[1],papaya.viewer.ScreenSurface.RULER_COLOR[2],1);d.bindBuffer(d.ARRAY_BUFFER,this.sphereVertexPositionBuffer);d.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.sphereVertexPositionBuffer.itemSize,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,this.sphereNormalsPositionBuffer);d.vertexAttribPointer(this.shaderProgram.vertexNormalAttribute,this.sphereNormalsPositionBuffer.itemSize,d.FLOAT,false,0,0);mat4.set(this.mvMatrix,this.tempMat);mat4.translate(this.mvMatrix,[c,b,a]);this.applyMatrixUniforms(d);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.sphereVertexIndexBuffer);d.drawElements(d.TRIANGLES,this.sphereVertexIndexBuffer.numItems,d.UNSIGNED_SHORT,0);mat4.set(this.tempMat,this.mvMatrix);this.applyMatrixUniforms(d)};papaya.viewer.ScreenSurface.prototype.drawOrientedText=function(c,b,a,d){if(this.orientationCanvas===null){this.initOrientationBuffers(this.context)}this.updateOrientedTextSquare(a,b);if(this.orientationTexture===null){this.orientationTexture=c.createTexture()}this.bindOrientation(c);c.enableVertexAttribArray(this.shaderProgram.textureCoordAttribute);c.uniform1i(this.shaderProgram.orientationText,1);c.enable(c.BLEND);c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA);this.orientationContext.imageSmoothingEnabled=true;this.orientationContext.mozImageSmoothingEnabled=true;this.orientationContext.msImageSmoothingEnabled=true;this.orientationContext.textAlign="center";this.orientationContext.textBaseline="middle";this.orientationContext.font=a+"px sans-serif";this.orientationContext.clearRect(0,0,this.orientationCanvas.width,this.orientationCanvas.height);this.orientationContext.fillStyle="#FFFFFF";this.orientationContext.fillText(b,this.orientationCanvas.width/2,this.orientationCanvas.height/2);mat4.set(this.mvMatrix,this.tempMat);mat4.multiplyVec3(this.mvMatrix,d);mat4.identity(this.mvMatrix);c.bindBuffer(c.ARRAY_BUFFER,this.orientationBuffer);c.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.orientationBuffer.itemSize,c.FLOAT,false,0,0);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,1);c.bindTexture(c.TEXTURE_2D,this.orientationTexture);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,this.orientationCanvas);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR_MIPMAP_NEAREST);c.generateMipmap(c.TEXTURE_2D);c.bindTexture(c.TEXTURE_2D,null);c.bindBuffer(c.ARRAY_BUFFER,this.orientationTextureCoordBuffer);c.vertexAttribPointer(this.shaderProgram.textureCoordAttribute,this.orientationTextureCoordBuffer.itemSize,c.FLOAT,false,0,0);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,this.orientationTexture);c.uniform1i(this.shaderProgram.samplerUniform,0);mat4.translate(this.mvMatrix,d);this.applyMatrixUniforms(c);c.drawArrays(c.TRIANGLE_STRIP,0,4);mat4.set(this.tempMat,this.mvMatrix);this.applyMatrixUniforms(c);c.disable(c.BLEND);c.uniform1i(this.shaderProgram.orientationText,0);c.disableVertexAttribArray(this.shaderProgram.textureCoordAttribute)};papaya.viewer.ScreenSurface.prototype.bindOrientation=function(a){a.bindBuffer(a.ARRAY_BUFFER,this.orientationBuffer);a.bufferData(a.ARRAY_BUFFER,this.orientationVerts,a.DYNAMIC_DRAW)};papaya.viewer.ScreenSurface.prototype.bindActivePlanes=function(a){a.bindBuffer(a.ARRAY_BUFFER,this.activePlaneAxialBuffer);a.bufferData(a.ARRAY_BUFFER,this.activePlaneVertsAxial,a.DYNAMIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.activePlaneCoronalBuffer);a.bufferData(a.ARRAY_BUFFER,this.activePlaneVertsCoronal,a.DYNAMIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.activePlaneSagittalBuffer);a.bufferData(a.ARRAY_BUFFER,this.activePlaneVertsSagittal,a.DYNAMIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.activePlaneAxialEdgesBuffer);a.bufferData(a.ARRAY_BUFFER,this.activePlaneVertsAxialEdges,a.DYNAMIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.activePlaneCoronalEdgesBuffer);a.bufferData(a.ARRAY_BUFFER,this.activePlaneVertsCoronalEdges,a.DYNAMIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.activePlaneSagittalEdgesBuffer);a.bufferData(a.ARRAY_BUFFER,this.activePlaneVertsSagittalEdges,a.DYNAMIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.crosshairLineXBuffer);a.bufferData(a.ARRAY_BUFFER,this.crosshairLineVertsX,a.DYNAMIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.crosshairLineYBuffer);a.bufferData(a.ARRAY_BUFFER,this.crosshairLineVertsY,a.DYNAMIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.crosshairLineZBuffer);a.bufferData(a.ARRAY_BUFFER,this.crosshairLineVertsZ,a.DYNAMIC_DRAW)};papaya.viewer.ScreenSurface.prototype.clearDTILinesImage=function(){};papaya.viewer.ScreenSurface.prototype.findProximalRulerHandle=function(b,a){this.pick(b,a,true);this.grabbedRulerPoint=-1;if(this.pickedCoordinate&&this.rulerPoints){if(papaya.utilities.MathUtils.lineDistance3d(this.rulerPoints[0],this.rulerPoints[1],this.rulerPoints[2],this.pickedCoordinate.coordinate[0],this.pickedCoordinate.coordinate[1],this.pickedCoordinate.coordinate[2])<(papaya.viewer.ScreenSlice.GRAB_RADIUS*this.scaleFactor)){this.grabbedRulerPoint=0}else{if(papaya.utilities.MathUtils.lineDistance3d(this.rulerPoints[3],this.rulerPoints[4],this.rulerPoints[5],this.pickedCoordinate.coordinate[0],this.pickedCoordinate.coordinate[1],this.pickedCoordinate.coordinate[2])<(papaya.viewer.ScreenSlice.GRAB_RADIUS*this.scaleFactor)){this.grabbedRulerPoint=1}}}return(this.grabbedRulerPoint!==-1)};papaya.viewer.ScreenSurface.prototype.setStartDynamic=function(b,a){this.dynamicStartX=b;this.dynamicStartY=a};papaya.viewer.ScreenSurface.prototype.updateDynamic=function(f,d,b){var e=(d-this.dynamicStartY)*papaya.viewer.ScreenSurface.MOUSE_SENSITIVITY*b;var c=(f-this.dynamicStartX)*papaya.viewer.ScreenSurface.MOUSE_SENSITIVITY*b;var a=(c*Math.PI)/180;mat4.identity(this.mouseRotDragX);mat4.rotateY(this.mouseRotDragX,a);a=(e*Math.PI)/180;mat4.identity(this.mouseRotDragY);mat4.rotateX(this.mouseRotDragY,a);mat4.multiply(this.centerMat,this.mouseRotDragY,this.tempMat);mat4.multiply(this.tempMat,this.mouseRotDragX,this.tempMat2);mat4.multiply(this.tempMat2,this.centerMatInv,this.mouseRotDrag)};papaya.viewer.ScreenSurface.prototype.updateTranslateDynamic=function(e,d,c){var b=(e-this.dynamicStartX)*papaya.viewer.ScreenSurface.MOUSE_SENSITIVITY*c;var a=(d-this.dynamicStartY)*papaya.viewer.ScreenSurface.MOUSE_SENSITIVITY*c*-1;mat4.identity(this.mouseTransDrag);mat4.translate(this.mouseTransDrag,[b,a,0])};papaya.viewer.ScreenSurface.prototype.updateCurrent=function(){var a=mat4.multiply(this.mouseRotDrag,this.mouseRotCurrent);mat4.set(a,this.mouseRotCurrent);a=mat4.multiply(this.mouseTransDrag,this.mouseTransCurrent);mat4.set(a,this.mouseTransCurrent);mat4.identity(this.mouseTransDrag);mat4.identity(this.mouseRotDragX);mat4.identity(this.mouseRotDragY);mat4.identity(this.mouseRotDrag)};papaya.viewer.ScreenSurface.prototype.clearTransform=function(a){mat4.identity(a);return a};papaya.viewer.ScreenSurface.prototype.makeOrientedTextSquare=function(){var a=papaya.viewer.ScreenSurface.ORIENTATION_SIZE*this.scaleFactor;this.orientationVerts[0]=-a;this.orientationVerts[1]=a;this.orientationVerts[2]=0;this.orientationVerts[3]=-a;this.orientationVerts[4]=-a;this.orientationVerts[5]=0;this.orientationVerts[6]=a;this.orientationVerts[7]=a;this.orientationVerts[8]=0;this.orientationVerts[9]=a;this.orientationVerts[10]=-a;this.orientationVerts[11]=0;this.orientationCanvas=document.createElement("canvas");this.orientationContext=this.orientationCanvas.getContext("2d");this.orientationContext.imageSmoothingEnabled=true;this.orientationContext.mozImageSmoothingEnabled=true;this.orientationContext.msImageSmoothingEnabled=true;this.orientationContext.fillStyle="#FFFFFF";this.orientationContext.textAlign="center";this.orientationContext.textBaseline="middle"};papaya.viewer.ScreenSurface.prototype.updateOrientedTextSquare=function(b,e){var d,c,a;this.orientationContext.imageSmoothingEnabled=true;this.orientationContext.mozImageSmoothingEnabled=true;this.orientationContext.msImageSmoothingEnabled=true;this.orientationContext.fillStyle="#FFFFFF";this.orientationContext.textAlign="center";this.orientationContext.textBaseline="middle";this.orientationContext.font=b+"px sans-serif";d=this.orientationContext.measureText(e).width;c=b;a=Math.max(d,c);this.orientationCanvas.width=papaya.utilities.MathUtils.getPowerOfTwo(a);this.orientationCanvas.height=papaya.utilities.MathUtils.getPowerOfTwo(a)};papaya.viewer.ScreenSurface.prototype.updateActivePlanes=function(){var c,b,a;if(!this.showSurfacePlanes&&!this.viewer.isShowingCrosshairs()){return}c=this.currentCoord.x+((this.xDim/2)-this.volume.header.origin.x);b=this.yDim-this.currentCoord.y-((this.yDim/2)-this.volume.header.origin.y);a=this.zDim-this.currentCoord.z-((this.zDim/2)-this.volume.header.origin.z);this.activePlaneVertsAxial[0]=-this.xHalf+this.centerWorld.x;this.activePlaneVertsAxial[1]=this.yHalf+this.centerWorld.y;this.activePlaneVertsAxial[2]=(a*this.zSize)-this.zHalf;this.activePlaneVertsAxial[3]=-this.xHalf+this.centerWorld.x;this.activePlaneVertsAxial[4]=-this.yHalf+this.centerWorld.y;this.activePlaneVertsAxial[5]=(a*this.zSize)-this.zHalf;this.activePlaneVertsAxial[6]=this.xHalf+this.centerWorld.x;this.activePlaneVertsAxial[7]=this.yHalf+this.centerWorld.y;this.activePlaneVertsAxial[8]=(a*this.zSize)-this.zHalf;this.activePlaneVertsAxial[9]=this.xHalf+this.centerWorld.x;this.activePlaneVertsAxial[10]=-this.yHalf+this.centerWorld.y;this.activePlaneVertsAxial[11]=(a*this.zSize)-this.zHalf;this.activePlaneVertsAxialEdges[0]=-this.xHalf+this.centerWorld.x;this.activePlaneVertsAxialEdges[1]=this.yHalf+this.centerWorld.y;this.activePlaneVertsAxialEdges[2]=(a*this.zSize)-this.zHalf;this.activePlaneVertsAxialEdges[3]=-this.xHalf+this.centerWorld.x;this.activePlaneVertsAxialEdges[4]=-this.yHalf+this.centerWorld.y;this.activePlaneVertsAxialEdges[5]=(a*this.zSize)-this.zHalf;this.activePlaneVertsAxialEdges[6]=-this.xHalf+this.centerWorld.x;this.activePlaneVertsAxialEdges[7]=-this.yHalf+this.centerWorld.y;this.activePlaneVertsAxialEdges[8]=(a*this.zSize)-this.zHalf;this.activePlaneVertsAxialEdges[9]=this.xHalf+this.centerWorld.x;this.activePlaneVertsAxialEdges[10]=-this.yHalf+this.centerWorld.y;this.activePlaneVertsAxialEdges[11]=(a*this.zSize)-this.zHalf;this.activePlaneVertsAxialEdges[12]=this.xHalf+this.centerWorld.x;this.activePlaneVertsAxialEdges[13]=-this.yHalf+this.centerWorld.y;this.activePlaneVertsAxialEdges[14]=(a*this.zSize)-this.zHalf;this.activePlaneVertsAxialEdges[15]=this.xHalf+this.centerWorld.x;this.activePlaneVertsAxialEdges[16]=this.yHalf+this.centerWorld.y;this.activePlaneVertsAxialEdges[17]=(a*this.zSize)-this.zHalf;this.activePlaneVertsAxialEdges[18]=this.xHalf+this.centerWorld.x;this.activePlaneVertsAxialEdges[19]=this.yHalf+this.centerWorld.y;this.activePlaneVertsAxialEdges[20]=(a*this.zSize)-this.zHalf;this.activePlaneVertsAxialEdges[21]=-this.xHalf+this.centerWorld.x;this.activePlaneVertsAxialEdges[22]=this.yHalf+this.centerWorld.y;this.activePlaneVertsAxialEdges[23]=(a*this.zSize)-this.zHalf;this.activePlaneVertsCoronal[0]=-this.xHalf+this.centerWorld.x;this.activePlaneVertsCoronal[1]=((b*this.ySize)-this.yHalf);this.activePlaneVertsCoronal[2]=this.zHalf+this.centerWorld.z;this.activePlaneVertsCoronal[3]=-this.xHalf+this.centerWorld.x;this.activePlaneVertsCoronal[4]=((b*this.ySize)-this.yHalf);this.activePlaneVertsCoronal[5]=-this.zHalf+this.centerWorld.z;this.activePlaneVertsCoronal[6]=this.xHalf+this.centerWorld.x;this.activePlaneVertsCoronal[7]=((b*this.ySize)-this.yHalf);this.activePlaneVertsCoronal[8]=this.zHalf+this.centerWorld.z;this.activePlaneVertsCoronal[9]=this.xHalf+this.centerWorld.x;this.activePlaneVertsCoronal[10]=((b*this.ySize)-this.yHalf);this.activePlaneVertsCoronal[11]=-this.zHalf+this.centerWorld.z;this.activePlaneVertsCoronalEdges[0]=-this.xHalf+this.centerWorld.x;this.activePlaneVertsCoronalEdges[1]=((b*this.ySize)-this.yHalf);this.activePlaneVertsCoronalEdges[2]=this.zHalf+this.centerWorld.z;this.activePlaneVertsCoronalEdges[3]=-this.xHalf+this.centerWorld.x;this.activePlaneVertsCoronalEdges[4]=((b*this.ySize)-this.yHalf);this.activePlaneVertsCoronalEdges[5]=-this.zHalf+this.centerWorld.z;this.activePlaneVertsCoronalEdges[6]=-this.xHalf+this.centerWorld.x;this.activePlaneVertsCoronalEdges[7]=((b*this.ySize)-this.yHalf);this.activePlaneVertsCoronalEdges[8]=-this.zHalf+this.centerWorld.z;this.activePlaneVertsCoronalEdges[9]=this.xHalf+this.centerWorld.x;this.activePlaneVertsCoronalEdges[10]=((b*this.ySize)-this.yHalf);this.activePlaneVertsCoronalEdges[11]=-this.zHalf+this.centerWorld.z;this.activePlaneVertsCoronalEdges[12]=this.xHalf+this.centerWorld.x;this.activePlaneVertsCoronalEdges[13]=((b*this.ySize)-this.yHalf);this.activePlaneVertsCoronalEdges[14]=-this.zHalf+this.centerWorld.z;this.activePlaneVertsCoronalEdges[15]=this.xHalf+this.centerWorld.x;this.activePlaneVertsCoronalEdges[16]=((b*this.ySize)-this.yHalf);this.activePlaneVertsCoronalEdges[17]=this.zHalf+this.centerWorld.z;this.activePlaneVertsCoronalEdges[18]=this.xHalf+this.centerWorld.x;this.activePlaneVertsCoronalEdges[19]=((b*this.ySize)-this.yHalf);this.activePlaneVertsCoronalEdges[20]=this.zHalf+this.centerWorld.z;this.activePlaneVertsCoronalEdges[21]=-this.xHalf+this.centerWorld.x;this.activePlaneVertsCoronalEdges[22]=((b*this.ySize)-this.yHalf);this.activePlaneVertsCoronalEdges[23]=this.zHalf+this.centerWorld.z;this.activePlaneVertsSagittal[0]=(c*this.xSize)-this.xHalf;this.activePlaneVertsSagittal[1]=-this.yHalf+this.centerWorld.y;this.activePlaneVertsSagittal[2]=this.zHalf+this.centerWorld.z;this.activePlaneVertsSagittal[3]=(c*this.xSize)-this.xHalf;this.activePlaneVertsSagittal[4]=-this.yHalf+this.centerWorld.y;this.activePlaneVertsSagittal[5]=-this.zHalf+this.centerWorld.z;this.activePlaneVertsSagittal[6]=(c*this.xSize)-this.xHalf;this.activePlaneVertsSagittal[7]=this.yHalf+this.centerWorld.y;this.activePlaneVertsSagittal[8]=this.zHalf+this.centerWorld.z;this.activePlaneVertsSagittal[9]=(c*this.xSize)-this.xHalf;this.activePlaneVertsSagittal[10]=this.yHalf+this.centerWorld.y;this.activePlaneVertsSagittal[11]=-this.zHalf+this.centerWorld.z;this.activePlaneVertsSagittalEdges[0]=(c*this.xSize)-this.xHalf;this.activePlaneVertsSagittalEdges[1]=-this.yHalf+this.centerWorld.y;this.activePlaneVertsSagittalEdges[2]=this.zHalf+this.centerWorld.z;this.activePlaneVertsSagittalEdges[3]=(c*this.xSize)-this.xHalf;this.activePlaneVertsSagittalEdges[4]=-this.yHalf+this.centerWorld.y;this.activePlaneVertsSagittalEdges[5]=-this.zHalf+this.centerWorld.z;this.activePlaneVertsSagittalEdges[6]=(c*this.xSize)-this.xHalf;this.activePlaneVertsSagittalEdges[7]=-this.yHalf+this.centerWorld.y;this.activePlaneVertsSagittalEdges[8]=-this.zHalf+this.centerWorld.z;this.activePlaneVertsSagittalEdges[9]=(c*this.xSize)-this.xHalf;this.activePlaneVertsSagittalEdges[10]=this.yHalf+this.centerWorld.y;this.activePlaneVertsSagittalEdges[11]=-this.zHalf+this.centerWorld.z;this.activePlaneVertsSagittalEdges[12]=(c*this.xSize)-this.xHalf;this.activePlaneVertsSagittalEdges[13]=this.yHalf+this.centerWorld.y;this.activePlaneVertsSagittalEdges[14]=-this.zHalf+this.centerWorld.z;this.activePlaneVertsSagittalEdges[15]=(c*this.xSize)-this.xHalf;this.activePlaneVertsSagittalEdges[16]=this.yHalf+this.centerWorld.y;this.activePlaneVertsSagittalEdges[17]=this.zHalf+this.centerWorld.z;this.activePlaneVertsSagittalEdges[18]=(c*this.xSize)-this.xHalf;this.activePlaneVertsSagittalEdges[19]=this.yHalf+this.centerWorld.y;this.activePlaneVertsSagittalEdges[20]=this.zHalf+this.centerWorld.z;this.activePlaneVertsSagittalEdges[21]=(c*this.xSize)-this.xHalf;this.activePlaneVertsSagittalEdges[22]=-this.yHalf+this.centerWorld.y;this.activePlaneVertsSagittalEdges[23]=this.zHalf+this.centerWorld.z;this.crosshairLineVertsZ[0]=((c*this.xSize)-this.xHalf);this.crosshairLineVertsZ[1]=((b*this.ySize)-this.yHalf);this.crosshairLineVertsZ[2]=-this.zHalf+this.centerWorld.z;this.crosshairLineVertsZ[3]=((c*this.xSize)-this.xHalf);this.crosshairLineVertsZ[4]=((b*this.ySize)-this.yHalf);this.crosshairLineVertsZ[5]=this.zHalf+this.centerWorld.z;this.crosshairLineVertsY[0]=((c*this.xSize)-this.xHalf);this.crosshairLineVertsY[1]=-this.yHalf+this.centerWorld.y;this.crosshairLineVertsY[2]=((a*this.zSize)-this.zHalf);this.crosshairLineVertsY[3]=((c*this.xSize)-this.xHalf);this.crosshairLineVertsY[4]=this.yHalf+this.centerWorld.y;this.crosshairLineVertsY[5]=((a*this.zSize)-this.zHalf);this.crosshairLineVertsX[0]=-this.xHalf+this.centerWorld.x;this.crosshairLineVertsX[1]=((b*this.ySize)-this.yHalf);this.crosshairLineVertsX[2]=((a*this.zSize)-this.zHalf);this.crosshairLineVertsX[3]=this.xHalf+this.centerWorld.x;this.crosshairLineVertsX[4]=((b*this.ySize)-this.yHalf);this.crosshairLineVertsX[5]=((a*this.zSize)-this.zHalf);this.needsUpdateActivePlanes=true};papaya.viewer.ScreenSurface.prototype.pick=function(b,a,c){this.needsPick=true;this.pickLocX=b;this.pickLocY=a;this.draw();if(c){return this.pickedCoordinate}this.draw();return this.pickedCoordinate};papaya.viewer.ScreenSurface.prototype.pickRuler=function(b,a){this.needsPick=true;this.pickLocX=b;this.pickLocY=a;this.draw();if(this.pickedCoordinate){this.rulerPoints[(this.grabbedRulerPoint*3)]=this.pickedCoordinate.coordinate[0];this.rulerPoints[(this.grabbedRulerPoint*3)+1]=this.pickedCoordinate.coordinate[1];this.rulerPoints[(this.grabbedRulerPoint*3)+2]=this.pickedCoordinate.coordinate[2];this.draw()}return this.pickedCoordinate};papaya.viewer.ScreenSurface.prototype.pickColor=function(b,a){this.needsPickColor=true;this.pickLocX=b;this.pickLocY=a;this.draw();this.draw();return this.pickedColor};papaya.viewer.ScreenSurface.prototype.findPickedCoordinate=function(e,c,b){var h=c,g=(e.viewportHeight-1-b),f,a,i,d=[];e.readPixels(h,g,1,1,e.RGBA,e.UNSIGNED_BYTE,this.pickingBuffer);f=(this.unpackFloatFromVec4i(this.pickingBuffer)/255);if(f>=1){return null}a=[0,0,e.viewportWidth,e.viewportHeight];i=GLU.unProject(h,g,f,this.mvMatrix,this.pMatrix,a,d);if(i){return{coordinate:d,depth:f}}return null};papaya.viewer.ScreenSurface.prototype.findInitialRulerPoints=function(f){var d=f.viewportWidth,j=f.viewportHeight,h,i=[],b=[],e,a,c,g;for(c=1;c<5;c+=1){e=parseInt(d*0.1*c,10);a=parseInt(j*0.1*c,10);h=this.pick(e,a,true);if(h){i.push(h)}e=parseInt(d-(d*0.1)*c,10);a=parseInt(j*0.1*c,10);h=this.pick(e,a,true);if(h){i.push(h)}e=parseInt(d-(d*0.1)*c,10);a=parseInt(j-(j*0.1)*c,10);h=this.pick(e,a,true);if(h){i.push(h)}e=parseInt(d*0.1*c,10);a=parseInt(j-(j*0.1)*c,10);h=this.pick(e,a,true);if(h){i.push(h)}}if(i<2){return false}g=0;for(c=0;c<i.length;c+=1){if(i[c].depth<i[g].depth){g=c}}b.push(i[g].coordinate);i.splice(g,1);g=0;for(c=0;c<i.length;c+=1){if(i[c].depth<i[g].depth){g=c}}b.push(i[g].coordinate);this.rulerPoints[0]=b[0][0];this.rulerPoints[1]=b[0][1];this.rulerPoints[2]=b[0][2];this.rulerPoints[3]=b[1][0];this.rulerPoints[4]=b[1][1];this.rulerPoints[5]=b[1][2];return true};papaya.viewer.ScreenSurface.prototype.findPickedColor=function(b){var a;b.readPixels(0,0,b.viewportWidth,b.viewportHeight,b.RGBA,b.UNSIGNED_BYTE,this.pickingBuffer);a=(b.viewportHeight-1-this.pickLocY)*b.viewportWidth*4+this.pickLocX*4;return[this.pickingBuffer[a],this.pickingBuffer[a+1],this.pickingBuffer[a+2]]};papaya.viewer.ScreenSurface.prototype.getBackgroundColor=function(){return("rgba("+parseInt((this.backgroundColor[0]*255)+0.5)+","+parseInt((this.backgroundColor[1]*255)+0.5)+","+parseInt((this.backgroundColor[2]*255)+0.5)+",255)")};papaya.viewer.ScreenSurface.prototype.updatePreferences=function(){this.updateBackgroundColor()};papaya.viewer.ScreenSurface.prototype.updateBackgroundColor=function(){var a=this.viewer.container.preferences.surfaceBackgroundColor;if(a==="Black"){this.backgroundColor=[0,0,0]}else{if(a==="Dark Gray"){this.backgroundColor=[0.25,0.25,0.25]}else{if(a==="Gray"){this.backgroundColor=[0.5,0.5,0.5]}else{if(a==="Light Gray"){this.backgroundColor=[0.75,0.75,0.75]}else{if(a==="White"){this.backgroundColor=[1,1,1]}else{this.backgroundColor=papaya.viewer.ScreenSurface.DEFAULT_BACKGROUND}}}}}};papaya.viewer.ScreenSurface.prototype.isMainView=function(){return(this.viewer.mainImage===this.viewer.surfaceView)};papaya.viewer.ScreenSurface.prototype.processParams=function(a){if(!this.viewer.container.isDesktopMode()){if(a.surfaceBackground!==undefined){this.viewer.container.preferences.surfaceBackgroundColor=a.surfaceBackground}}};papaya.viewer.ScreenSurface.prototype.makeSphere=function(e,f,d){var s,i;var n=[];var m=[];for(s=0;s<=e;s++){var h=s*Math.PI/e;var q=Math.sin(h);var o=Math.cos(h);for(i=0;i<=f;i++){var b=i*2*Math.PI/f;var p=Math.sin(b);var c=Math.cos(b);var l=c*q;var k=o;var j=p*q;m.push(l);m.push(k);m.push(j);n.push(d*l);n.push(d*k);n.push(d*j)}}var a=[];for(s=0;s<e;s++){for(i=0;i<f;i++){var g=(s*(f+1))+i;var r=g+f+1;a.push(g);a.push(r);a.push(g+1);a.push(r);a.push(r+1);a.push(g+1)}}return{vertices:n,normals:m,indices:a}};papaya.viewer.ScreenSurface.prototype.getRulerLength=function(){return papaya.utilities.MathUtils.lineDistance3d(this.rulerPoints[0],this.rulerPoints[1],this.rulerPoints[2],this.rulerPoints[3],this.rulerPoints[4],this.rulerPoints[5])};"use strict";var papaya=papaya||{};var papayaContainers=[];var papayaLoadableImages=papayaLoadableImages||[];var papayaDroppedFiles=[];papaya.Container=papaya.Container||function(a){this.containerHtml=a;this.containerIndex=null;this.toolbarHtml=null;this.viewerHtml=null;this.displayHtml=null;this.titlebarHtml=null;this.sliderControlHtml=null;this.viewer=null;this.display=null;this.toolbar=null;this.preferences=null;this.params=[];this.loadingImageIndex=0;this.loadingSurfaceIndex=0;this.nestedViewer=false;this.collapsable=false;this.orthogonal=true;this.orthogonalTall=false;this.orthogonalDynamic=false;this.kioskMode=false;this.noNewFiles=false;this.showControls=true;this.showControlBar=false;this.showImageButtons=true;this.fullScreenPadding=true;this.combineParametric=false;this.dropTimeout=null;this.showRuler=false;this.syncOverlaySeries=true;this.surfaceParams={};this.contextManager=null;this.allowScroll=true;this.loadingComplete=null;this.resetComponents()};papaya.Container.LICENSE_TEXT="<p>THIS PRODUCT IS NOT FOR CLINICAL USE.<br /><br />This software is available for use, as is, free of charge.  The software and data derived from this software may not be used for clinical purposes.<br /><br />The authors of this software make no representations or warranties about the suitability of the software, either express or implied, including but not limited to the implied warranties of merchantability, fitness for a particular purpose, non-infringement, or conformance to a specification or standard. The authors of this software shall not be liable for any damages suffered by licensee as a result of using or modifying this software or its derivatives.<br /><br />By using this software, you agree to be bounded by the terms of this license.  If you do not agree to the terms of this license, do not use this software.</p>";papaya.Container.KEYBOARD_REF_TEXT="<span style='color:#B5CBD3'>[Spacebar]</span> Cycle the main slice view in a clockwise rotation.<br /><br /><span style='color:#B5CBD3'>[Page Up]</span> or <span style='color:#B5CBD3'>[']</span> Increment the axial slice.<br /><br /><span style='color:#B5CBD3'>[Page Down]</span> or <span style='color:#B5CBD3'>[/]</span> Decrement the axial slice.<br /><br /><span style='color:#B5CBD3'>[Arrow Up]</span> and <span style='color:#B5CBD3'>[Arrow Down]</span> Increment/decrement the coronal slice.<br /><br /><span style='color:#B5CBD3'>[Arrow Right]</span> and <span style='color:#B5CBD3'>[Arrow Left]</span> Increment/decrement the sagittal slice.<br /><br /><span style='color:#B5CBD3'>[g]</span> and <span style='color:#B5CBD3'>[v]</span> Increment/decrement main slice.<br /><br /><span style='color:#B5CBD3'>[<]</span> or <span style='color:#B5CBD3'>[,]</span> Decrement the series point.<br /><br /><span style='color:#B5CBD3'>[>]</span> or <span style='color:#B5CBD3'>[.]</span> Increment the series point.<br /><br /><span style='color:#B5CBD3'>[o]</span> Navigate viewer to the image origin.<br /><br /><span style='color:#B5CBD3'>[c]</span> Navigate viewer to the center of the image.<br /><br /><span style='color:#B5CBD3'>[a]</span> Toggle main crosshairs on/off.";papaya.Container.MOUSE_REF_TEXT="<span style='color:#B5CBD3'>(Left-click and drag)</span> Change current coordinate.<br /><br /><span style='color:#B5CBD3'>[Alt](Left-click and drag)</span> Zoom in and out.<br /><br /><span style='color:#B5CBD3'>[Alt](Double left-click)</span> Reset zoom.<br /><br /><span style='color:#B5CBD3'>[Alt][Shift](Left-click and drag)</span> Pan zoomed image.<br /><br /><span style='color:#B5CBD3'>(Right-click and drag)</span> Window level controls.<br /><br /><span style='color:#B5CBD3'>(Scroll wheel)</span> See Preferences.<br /><br />";papaya.Container.DICOM_SUPPORT=true;papaya.Container.syncViewers=false;papaya.Container.syncViewersWorld=false;papaya.Container.allowPropagation=false;papaya.Container.papayaLastHoveredViewer=null;papaya.Container.ignorePatterns=[/^[.]/];papaya.Container.atlas=null;papaya.Container.atlasWorldSpace=true;papaya.Container.restartViewer=function(d,a,c,e,b){papayaContainers[d].viewer.restart(a,c,e,b)};papaya.Container.resetViewer=function(a,b){if(!b){b=papayaContainers[a].params;if(b.loadedImages){b.images=b.loadedImages}if(b.loadedEncodedImages){b.encodedImages=b.loadedEncodedImages}if(b.loadedBinaryImages){b.binaryImages=b.loadedBinaryImages}if(b.loadedSurfaces){b.surfaces=b.loadedSurfaces}if(b.loadedEncodedSurfaces){b.encodedSurfaces=b.loadedEncodedSurfaces}if(b.loadedFiles){b.files=b.loadedFiles}}papayaContainers[a].viewer.resetViewer();papayaContainers[a].toolbar.updateImageButtons();papayaContainers[a].reset();papayaContainers[a].params=b;papayaContainers[a].readGlobalParams();papayaContainers[a].rebuildContainer(b,a);papayaContainers[a].viewer.processParams(b)};papaya.Container.removeImage=function(b,a){if(a<1){console.log("Cannot remove the base image.  Try papaya.Container.resetViewer() instead.")}papayaContainers[b].viewer.removeOverlay(a)};papaya.Container.hideImage=function(b,a){papayaContainers[b].viewer.screenVolumes[a].hidden=true;papayaContainers[b].viewer.drawViewer(true,false)};papaya.Container.showImage=function(b,a){papayaContainers[b].viewer.screenVolumes[a].hidden=false;papayaContainers[b].viewer.drawViewer(true,false)};papaya.Container.addImage=function(a,c,d){var b;if(d){papayaContainers[a].params=$.extend({},papayaContainers[a].params,d)}if(!(c instanceof Array)){b=[];b[0]=c}else{b=c}if(papayaContainers[a].params.images){papayaContainers[a].viewer.loadImage(b,true,false,false)}else{if(papayaContainers[a].params.binaryImages){papayaContainers[a].viewer.loadImage(b,false,false,true)}else{if(papayaContainers[a].params.encodedImages){papayaContainers[a].viewer.loadImage(b,false,true,false)}}}};papaya.Container.findParameters=function(c){var b,a,d=null;a=c.data("params");if(!a){b=c.find("."+PAPAYA_VIEWER_CSS);if(b){a=b.data("params")}}if(a){if(typeof a==="object"){d=a}else{if(window[a]){d=window[a]}}}if(d){papaya.utilities.UrlUtils.getQueryParams(d)}return d};papaya.Container.fillContainerHTML=function(d,e,g,f){var a,c,h,b;if(e){a=d.find("#"+PAPAYA_DEFAULT_TOOLBAR_ID);c=d.find("#"+PAPAYA_DEFAULT_VIEWER_ID);h=d.find("#"+PAPAYA_DEFAULT_DISPLAY_ID);if(a){a.addClass(PAPAYA_TOOLBAR_CSS)}else{d.prepend("<div class='"+PAPAYA_TOOLBAR_CSS+"' id='"+PAPAYA_DEFAULT_TOOLBAR_ID+"'></div>")}if(c){c.addClass(PAPAYA_VIEWER_CSS)}else{$("<div class='"+PAPAYA_VIEWER_CSS+"' id='"+PAPAYA_DEFAULT_VIEWER_ID+"'></div>").insertAfter($("#"+PAPAYA_DEFAULT_TOOLBAR_ID))}if(h){h.addClass(PAPAYA_DISPLAY_CSS)}else{$("<div class='"+PAPAYA_DISPLAY_CSS+"' id='"+PAPAYA_DEFAULT_DISPLAY_ID+"'></div>").insertAfter($("#"+PAPAYA_DEFAULT_VIEWER_ID))}console.log("This method of adding a Papaya container is deprecated.  Try simply <div class='papaya' data-params='params'></div> instead...")}else{if(f!==undefined){b=f}else{b=papayaContainers.length}d.attr("id",PAPAYA_DEFAULT_CONTAINER_ID+b);if(!g||(g.kioskMode===undefined)||!g.kioskMode){d.append("<div id='"+(PAPAYA_DEFAULT_TOOLBAR_ID+b)+"' class='"+PAPAYA_TOOLBAR_CSS+"'></div>")}d.append("<div id='"+(PAPAYA_DEFAULT_VIEWER_ID+b)+"' class='"+PAPAYA_VIEWER_CSS+"'></div>");d.append("<div id='"+(PAPAYA_DEFAULT_DISPLAY_ID+b)+"' class='"+PAPAYA_DISPLAY_CSS+"'></div>");if(g&&g.showControlBar&&((g.showControls===undefined)||g.showControls)){d.append("<div id='"+PAPAYA_KIOSK_CONTROLS_CSS+b+"' class='"+PAPAYA_KIOSK_CONTROLS_CSS+"'><div id='"+(PAPAYA_DEFAULT_SLIDER_ID+b)+"main' class='"+PAPAYA_SLIDER_CSS+" "+PAPAYA_CONTROL_MAIN_SLIDER+"'><span class='"+PAPAYA_CONTROL_BAR_LABELS_CSS+"'>Slice: </span> <button type='button' class='"+PAPAYA_CONTROL_INCREMENT_BUTTON_CSS+"'>+</button> <button type='button' class='"+PAPAYA_CONTROL_INCREMENT_BUTTON_CSS+"'>-</button> </div><div id='"+(PAPAYA_DEFAULT_SLIDER_ID+b)+"axial' class='"+PAPAYA_SLIDER_CSS+" "+PAPAYA_CONTROL_DIRECTION_SLIDER+"'><span class='"+PAPAYA_CONTROL_BAR_LABELS_CSS+"'>Axial: </span> <button type='button' class='"+PAPAYA_CONTROL_INCREMENT_BUTTON_CSS+"'>+</button> <button type='button' class='"+PAPAYA_CONTROL_INCREMENT_BUTTON_CSS+"'>-</button> </div><div id='"+(PAPAYA_DEFAULT_SLIDER_ID+b)+"coronal' class='"+PAPAYA_SLIDER_CSS+" "+PAPAYA_CONTROL_DIRECTION_SLIDER+"'><span class='"+PAPAYA_CONTROL_BAR_LABELS_CSS+"'>Coronal: </span> <button type='button' class='"+PAPAYA_CONTROL_INCREMENT_BUTTON_CSS+"'>+</button> <button type='button' class='"+PAPAYA_CONTROL_INCREMENT_BUTTON_CSS+"'>-</button> </div><div id='"+(PAPAYA_DEFAULT_SLIDER_ID+b)+"sagittal' class='"+PAPAYA_SLIDER_CSS+" "+PAPAYA_CONTROL_DIRECTION_SLIDER+"'><span class='"+PAPAYA_CONTROL_BAR_LABELS_CSS+"'>Sagittal: </span> <button type='button' class='"+PAPAYA_CONTROL_INCREMENT_BUTTON_CSS+"'>+</button> <button type='button' class='"+PAPAYA_CONTROL_INCREMENT_BUTTON_CSS+"'>-</button> </div><div id='"+(PAPAYA_DEFAULT_SLIDER_ID+b)+"series' class='"+PAPAYA_SLIDER_CSS+" "+PAPAYA_CONTROL_DIRECTION_SLIDER+"'><span class='"+PAPAYA_CONTROL_BAR_LABELS_CSS+"'>Series: </span> <button type='button' class='"+PAPAYA_CONTROL_INCREMENT_BUTTON_CSS+"'>&lt;</button> <button type='button' class='"+PAPAYA_CONTROL_INCREMENT_BUTTON_CSS+"'>&gt;</button> </div>&nbsp;&nbsp;&nbsp;<button type='button' "+((g.kioskMode&&((g.showImageButtons===undefined)||g.showImageButtons))?"":"style='float:right;margin-left:5px;' ")+"class='"+PAPAYA_CONTROL_SWAP_BUTTON_CSS+"'>Swap View</button> <button type='button' "+((g.kioskMode&&((g.showImageButtons===undefined)||g.showImageButtons))?"":"style='float:right;margin-left:5px;' ")+"class='"+PAPAYA_CONTROL_GOTO_CENTER_BUTTON_CSS+"'>Go To Center</button> <button type='button' "+((g.kioskMode&&((g.showImageButtons===undefined)||g.showImageButtons))?"":"style='float:right;margin-left:5px;' ")+"class='"+PAPAYA_CONTROL_GOTO_ORIGIN_BUTTON_CSS+"'>Go To Origin</button> </div>");$("."+PAPAYA_CONTROL_INCREMENT_BUTTON_CSS).prop("disabled",true);$("."+PAPAYA_CONTROL_SWAP_BUTTON_CSS).prop("disabled",true);$("."+PAPAYA_CONTROL_GOTO_CENTER_BUTTON_CSS).prop("disabled",true);$("."+PAPAYA_CONTROL_GOTO_ORIGIN_BUTTON_CSS).prop("disabled",true)}else{if(g&&((g.showControls===undefined)||g.showControls)){d.append("<button type='button' id='"+(PAPAYA_CONTROL_MAIN_INCREMENT_BUTTON_CSS+b)+"' class='"+PAPAYA_CONTROL_MAIN_INCREMENT_BUTTON_CSS+"'>+</button> ");d.append("<button type='button' id='"+(PAPAYA_CONTROL_MAIN_DECREMENT_BUTTON_CSS+b)+"' class='"+PAPAYA_CONTROL_MAIN_DECREMENT_BUTTON_CSS+"'>-</button> ");d.append("<button type='button' id='"+(PAPAYA_CONTROL_MAIN_SWAP_BUTTON_CSS+b)+"' class='"+PAPAYA_CONTROL_MAIN_SWAP_BUTTON_CSS+"'>Swap View</button> ");d.append("<button type='button' id='"+(PAPAYA_CONTROL_MAIN_GOTO_CENTER_BUTTON_CSS+b)+"' class='"+PAPAYA_CONTROL_MAIN_GOTO_CENTER_BUTTON_CSS+"'>Go To Center</button> ");d.append("<button type='button' id='"+(PAPAYA_CONTROL_MAIN_GOTO_ORIGIN_BUTTON_CSS+b)+"' class='"+PAPAYA_CONTROL_MAIN_GOTO_ORIGIN_BUTTON_CSS+"'>Go To Origin</button> ");$("#"+PAPAYA_CONTROL_MAIN_INCREMENT_BUTTON_CSS+b).css({display:"none"});$("#"+PAPAYA_CONTROL_MAIN_DECREMENT_BUTTON_CSS+b).css({display:"none"});$("#"+PAPAYA_CONTROL_MAIN_SWAP_BUTTON_CSS+b).css({display:"none"});$("#"+PAPAYA_CONTROL_MAIN_GOTO_CENTER_BUTTON_CSS+b).css({display:"none"});$("#"+PAPAYA_CONTROL_MAIN_GOTO_ORIGIN_BUTTON_CSS+b).css({display:"none"})}}}return c};papaya.Container.buildContainer=function(a,e,h){var b,i,c,f,g,d=null;i=papaya.utilities.PlatformUtils.checkForBrowserCompatibility();c=a.find("."+PAPAYA_VIEWER_CSS);if(i!==null){papaya.Container.removeCheckForJSClasses(a,c);a.addClass(PAPAYA_UTILS_UNSUPPORTED_CSS);c.addClass(PAPAYA_UTILS_UNSUPPORTED_MESSAGE_CSS);c.html(i)}else{if(h!==undefined){g=h}else{g=papayaContainers.length}b=new papaya.Container(a);b.containerIndex=g;b.preferences=new papaya.viewer.Preferences();papaya.Container.removeCheckForJSClasses(a,c);if(e){b.params=$.extend(b.params,e)}b.nestedViewer=(a.parent()[0].tagName.toUpperCase()!=="BODY");b.readGlobalParams();if(b.isDesktopMode()){b.preferences.readPreferences()}b.buildViewer(b.params);b.buildDisplay();if(b.showControlBar){b.buildSliderControl()}b.buildToolbar();b.setUpDnD();f=c.data("load-url");if(f){d=f;if(!(d instanceof Array)){d=[];d[0]=f}b.viewer.loadImage(d,true,false,false)}else{if(b.params.images){d=b.params.images[0];if(!(d instanceof Array)){d=[];d[0]=b.params.images[0]}b.viewer.loadImage(d,true,false,false)}else{if(b.params.encodedImages){d=b.params.encodedImages[0];if(!(d instanceof Array)){d=[];d[0]=b.params.encodedImages[0]}b.viewer.loadImage(d,false,true,false)}else{if(b.params.binaryImages){d=b.params.binaryImages[0];b.viewer.loadImage(d,false,false,true)}else{if(b.params.files){d=b.params.files[0];if(!(d instanceof Array)){d=[];d[0]=b.params.files[0]}b.viewer.loadImage(d,false,false,false)}else{b.viewer.finishedLoading()}}}}}b.resizeViewerComponents(false);if(!b.nestedViewer){a.parent().height("100%");a.parent().width("100%")}papayaContainers[g]=b;papaya.Container.showLicense(b,e)}};papaya.Container.prototype.rebuildContainer=function(b,a){this.containerHtml.empty();papaya.Container.fillContainerHTML(this.containerHtml,false,b,a);papaya.Container.buildContainer(this.containerHtml,b,a);if((papayaContainers.length===1)&&!papayaContainers[0].nestedViewer){$("html").addClass(PAPAYA_CONTAINER_FULLSCREEN);$("body").addClass(PAPAYA_CONTAINER_FULLSCREEN);papaya.Container.setToFullPage()}};papaya.Container.buildAllContainers=function(){var a,b;a=$("#"+PAPAYA_DEFAULT_CONTAINER_ID);if(a.length>0){papaya.Container.fillContainerHTML(a,true);b=papaya.Container.findParameters(a);papaya.Container.buildContainer(a,b)}else{$("."+PAPAYA_CONTAINER_CLASS_NAME).each(function(){b=papaya.Container.findParameters($(this));if(b===null){b=[]}if(b.fullScreen===true){b.fullScreenPadding=false;b.kioskMode=true;b.showControlBar=false;$("body").css({"background-color":"black"})}papaya.Container.fillContainerHTML($(this),false,b);papaya.Container.buildContainer($(this),b)})}if((papayaContainers.length===1)&&!papayaContainers[0].nestedViewer){$("html").addClass(PAPAYA_CONTAINER_FULLSCREEN);$("body").addClass(PAPAYA_CONTAINER_FULLSCREEN);papaya.Container.setToFullPage();papayaContainers[0].resizeViewerComponents(true)}};papaya.Container.startPapaya=function(){setTimeout(function(){window.scrollTo(0,0)},0);papaya.Container.DICOM_SUPPORT=(typeof(daikon)!=="undefined");papaya.Container.buildAllContainers()};papaya.Container.resizePapaya=function(a,c){var b;papaya.Container.updateOrthogonalState();if((papayaContainers.length===1)&&!papayaContainers[0].nestedViewer){if(!papaya.utilities.PlatformUtils.smallScreen||c){papayaContainers[0].resizeViewerComponents(true)}}else{for(b=0;b<papayaContainers.length;b+=1){papayaContainers[b].resizeViewerComponents(true)}}setTimeout(function(){window.scrollTo(0,0)},0)};papaya.Container.addViewer=function(c,d,e){var a,b;b=$("#"+c);a=$('<div class="papaya"></div>');b.html(a);b[0].onclick="";b.off("click");papaya.Container.fillContainerHTML(a,false,d);papaya.Container.buildContainer(a,d);if(e){e()}};papaya.Container.removeCheckForJSClasses=function(b,a){a.removeClass(PAPAYA_CONTAINER_CLASS_NAME);a.removeClass(PAPAYA_UTILS_CHECKFORJS_CSS);b.removeClass(PAPAYA_CONTAINER_CLASS_NAME);b.removeClass(PAPAYA_UTILS_CHECKFORJS_CSS)};papaya.Container.setToFullPage=function(){document.body.style.marginTop=0;document.body.style.marginBottom=0;document.body.style.marginLeft="auto";document.body.style.marginRight="auto";document.body.style.padding=0;document.body.style.overflow="hidden";document.body.style.width="100%";document.body.style.height="100%"};papaya.Container.getLicense=function(){return papaya.Container.LICENSE_TEXT};papaya.Container.getKeyboardReference=function(){return papaya.Container.KEYBOARD_REF_TEXT};papaya.Container.getMouseReference=function(){return papaya.Container.MOUSE_REF_TEXT};papaya.Container.setLicenseRead=function(){papaya.utilities.UrlUtils.createCookie(papaya.viewer.Preferences.COOKIE_PREFIX+"eula","Yes",papaya.viewer.Preferences.COOKIE_EXPIRY_DAYS)};papaya.Container.isLicenseRead=function(){var a=papaya.utilities.UrlUtils.readCookie(papaya.viewer.Preferences.COOKIE_PREFIX+"eula");return(a&&(a==="Yes"))};papaya.Container.showLicense=function(b,d){var a=(d&&d.showEULA!==undefined)&&d.showEULA;if(a&&!papaya.Container.isLicenseRead()){var c=new papaya.ui.Dialog(b,"License",papaya.ui.Toolbar.LICENSE_DATA,papaya.Container,null,papaya.Container.setLicenseRead,null,true);c.showDialog()}};papaya.Container.updateOrthogonalState=function(){var a;for(a=0;a<papayaContainers.length;a+=1){if(papayaContainers[a].orthogonal&&((papaya.utilities.PlatformUtils.mobile||papayaContainers[a].orthogonalDynamic))){if($(window).height()>$(window).width()){papayaContainers[a].orthogonalTall=true}else{papayaContainers[a].orthogonalTall=false}}}};papaya.Container.reorientPapaya=function(){var a;for(a=0;a<papayaContainers.length;a+=1){papayaContainers[a].toolbar.closeAllMenus()}papaya.Container.updateOrthogonalState();papaya.Container.resizePapaya(null,true)};papaya.Container.prototype.resetComponents=function(){this.containerHtml.css({height:"auto"});this.containerHtml.css({width:"auto"});this.containerHtml.css({margin:"auto"});$("head").append("<style>div#papayaViewer:before{ content:'' }</style>")};papaya.Container.prototype.hasSurface=function(){return(this.viewer&&(this.viewer.surfaces.length>0))};papaya.Container.prototype.getViewerDimensions=function(){var d,a,c,b,f,e;d=this.containerHtml.parent().width()-(this.fullScreenPadding?(2*PAPAYA_PADDING):0);b=(this.orthogonal?(this.hasSurface()?1.333:1.5):1);if(this.orthogonalTall||!this.orthogonal){a=(this.collapsable?window.innerHeight:this.containerHtml.parent().height())-(papaya.viewer.Display.SIZE+(this.kioskMode?0:(papaya.ui.Toolbar.SIZE+PAPAYA_SPACING))+PAPAYA_SPACING+(this.fullScreenPadding&&!this.nestedViewer?(2*PAPAYA_CONTAINER_PADDING_TOP):0))-(this.showControlBar?2*papaya.ui.Toolbar.SIZE:0);c=papayaRoundFast(a/b)}else{c=d;a=papayaRoundFast(c/b)}if(!this.nestedViewer||this.collapsable){if(this.orthogonalTall){e=window.innerWidth-(this.fullScreenPadding?(2*PAPAYA_PADDING):0);if(c>e){c=e;a=papayaRoundFast(c*b)}}else{f=window.innerHeight-(papaya.viewer.Display.SIZE+(this.kioskMode?0:(papaya.ui.Toolbar.SIZE+PAPAYA_SPACING))+PAPAYA_SPACING+(this.fullScreenPadding?(2*PAPAYA_CONTAINER_PADDING_TOP):0))-(this.showControlBar?2*papaya.ui.Toolbar.SIZE:0);if(a>f){a=f;c=papayaRoundFast(a*b)}}}return[c,a]};papaya.Container.prototype.getViewerPadding=function(){var b,a,c;b=this.containerHtml.parent().width()-(this.fullScreenPadding?(2*PAPAYA_PADDING):0);a=this.getViewerDimensions();c=((b-a[0])/2);return c};papaya.Container.prototype.readGlobalParams=function(){this.kioskMode=(this.params.kioskMode===true)||papaya.utilities.PlatformUtils.smallScreen;this.combineParametric=(this.params.combineParametric===true);if(this.params.loadingComplete){this.loadingComplete=this.params.loadingComplete}if(this.params.showControls!==undefined){this.showControls=this.params.showControls}if(this.params.noNewFiles!==undefined){this.noNewFiles=this.params.noNewFiles}if(this.params.showImageButtons!==undefined){this.showImageButtons=this.params.showImageButtons}if(papaya.utilities.PlatformUtils.smallScreen){this.showImageButtons=false}if(this.params.fullScreenPadding!==undefined){this.fullScreenPadding=this.params.fullScreenPadding}if(this.params.orthogonal!==undefined){this.orthogonal=this.params.orthogonal}this.surfaceParams.showSurfacePlanes=(this.params.showSurfacePlanes===true);this.surfaceParams.showSurfaceCrosshairs=(this.params.showSurfaceCrosshairs===true);this.surfaceParams.surfaceBackground=this.params.surfaceBackground;this.orthogonalTall=this.orthogonal&&(this.params.orthogonalTall===true);this.orthogonalDynamic=this.orthogonal&&(this.params.orthogonalDynamic===true);if(this.params.allowScroll!==undefined){this.allowScroll=this.params.allowScroll}if(papaya.utilities.PlatformUtils.mobile||this.orthogonalDynamic){if(this.orthogonal){if($(window).height()>$(window).width()){this.orthogonalTall=true}else{this.orthogonalTall=false}}}if(this.params.syncOverlaySeries!==undefined){this.syncOverlaySeries=this.params.syncOverlaySeries}if(this.params.showControlBar!==undefined){this.showControlBar=this.showControls&&this.params.showControlBar}if(this.params.contextManager!==undefined){this.contextManager=this.params.contextManager}if(this.params.fullScreen===true){this.fullScreenPadding=this.params.fullScreenPadding=false;this.kioskMode=this.params.kioskMode=true;this.showControlBar=this.params.showControlBar=false;$("body").css("background-color:'black'")}};papaya.Container.prototype.reset=function(){this.loadingImageIndex=0;this.loadingSurfaceIndex=0;this.nestedViewer=false;this.collapsable=false;this.orthogonal=true;this.orthogonalTall=false;this.orthogonalDynamic=false;this.kioskMode=false;this.noNewFiles=false;this.showControls=true;this.showControlBar=false;this.fullScreenPadding=true;this.combineParametric=false;this.showRuler=false};papaya.Container.prototype.resizeViewerComponents=function(a){var d,c,b=0;this.toolbar.closeAllMenus();d=this.getViewerDimensions();c=this.getViewerPadding();this.toolbarHtml.css({width:d[0]+"px"});this.toolbarHtml.css({height:papaya.ui.Toolbar.SIZE+"px"});this.toolbarHtml.css({paddingLeft:c+"px"});this.toolbarHtml.css({paddingBottom:PAPAYA_SPACING+"px"});this.viewerHtml.css({width:d[0]+"px"});this.viewerHtml.css({height:d[1]+"px"});this.viewerHtml.css({paddingLeft:c+"px"});if(a){this.viewer.resizeViewer(d)}this.displayHtml.css({height:papaya.viewer.Display.SIZE+"px"});this.displayHtml.css({paddingLeft:c+"px"});this.displayHtml.css({paddingTop:PAPAYA_SPACING+"px"});this.display.canvas.width=d[0];if(this.showControls&&this.showControlBar){this.sliderControlHtml.css({width:d[0]+"px"});this.sliderControlHtml.css({height:papaya.viewer.Display.SIZE+"px"});if(this.kioskMode){b+=0}else{b+=-50}if(this.viewer.hasSeries){b+=200}else{b+=0}if(d[0]<(775+b)){$("."+PAPAYA_CONTROL_GOTO_CENTER_BUTTON_CSS).css({display:"none"});$("."+PAPAYA_CONTROL_GOTO_ORIGIN_BUTTON_CSS).css({display:"none"})}else{$("."+PAPAYA_CONTROL_GOTO_CENTER_BUTTON_CSS).css({display:"inline"});$("."+PAPAYA_CONTROL_GOTO_ORIGIN_BUTTON_CSS).css({display:"inline"})}if(d[0]<(600+b)){$("."+PAPAYA_CONTROL_DIRECTION_SLIDER).css({display:"none"});$("."+PAPAYA_CONTROL_MAIN_SLIDER).css({display:"inline"})}else{$("."+PAPAYA_CONTROL_DIRECTION_SLIDER).css({display:"inline"});$("."+PAPAYA_CONTROL_MAIN_SLIDER).css({display:"none"})}if(this.viewer.hasSeries&&(d[0]<(450+b))){$("."+PAPAYA_CONTROL_MAIN_SLIDER).css({display:"none"})}if(d[0]<200){$("."+PAPAYA_CONTROL_SWAP_BUTTON_CSS).css({display:"none"})}else{$("."+PAPAYA_CONTROL_SWAP_BUTTON_CSS).css({display:"inline"})}if(this.viewer.hasSeries){$("."+PAPAYA_CONTROL_DIRECTION_SLIDER).eq(3).css({display:"inline"})}else{$("."+PAPAYA_CONTROL_DIRECTION_SLIDER).eq(3).css({display:"none"})}}else{if(this.showControls&&this.viewer.initialized){if(d[0]<600){$("#"+PAPAYA_CONTROL_MAIN_GOTO_CENTER_BUTTON_CSS+this.containerIndex).css({display:"none"});$("#"+PAPAYA_CONTROL_MAIN_GOTO_ORIGIN_BUTTON_CSS+this.containerIndex).css({display:"none"})}else{if(!this.viewer.controlsHidden){$("#"+PAPAYA_CONTROL_MAIN_GOTO_CENTER_BUTTON_CSS+this.containerIndex).css({display:"inline"});$("#"+PAPAYA_CONTROL_MAIN_GOTO_ORIGIN_BUTTON_CSS+this.containerIndex).css({display:"inline"})}}}}if(this.isDesktopMode()){if(d[0]<600){this.titlebarHtml.css({visibility:"hidden"})}else{this.titlebarHtml.css({visibility:"visible"})}}if((!this.nestedViewer||this.collapsable)&&this.fullScreenPadding){this.containerHtml.css({paddingTop:PAPAYA_CONTAINER_PADDING_TOP+"px"})}else{this.containerHtml.css({paddingTop:"0"})}if(this.fullScreenPadding){this.containerHtml.css({paddingLeft:PAPAYA_PADDING+"px"});this.containerHtml.css({paddingRight:PAPAYA_PADDING+"px"})}if(this.viewer.initialized){this.viewer.drawViewer(false,true)}else{this.viewer.drawEmptyViewer();this.display.drawEmptyDisplay()}this.titlebarHtml.css({width:d[0]+"px",top:(0)})};papaya.Container.prototype.updateViewerSize=function(){this.toolbar.closeAllMenus();this.viewer.resizeViewer(this.getViewerDimensions());this.viewer.updateOffsetRect()};papaya.Container.prototype.buildViewer=function(b){var a;this.viewerHtml=this.containerHtml.find("."+PAPAYA_VIEWER_CSS);papaya.Container.removeCheckForJSClasses(this.containerHtml,this.viewerHtml);this.viewerHtml.html("");a=this.getViewerDimensions();this.viewer=new papaya.viewer.Viewer(this,a[0],a[1],b);this.viewerHtml.append($(this.viewer.canvas));this.preferences.viewer=this.viewer};papaya.Container.prototype.buildDisplay=function(){var a;this.displayHtml=this.containerHtml.find("."+PAPAYA_DISPLAY_CSS);a=this.getViewerDimensions();this.display=new papaya.viewer.Display(this,a[0]);this.displayHtml.append($(this.display.canvas))};papaya.Container.prototype.buildSliderControl=function(){this.sliderControlHtml=this.containerHtml.find("."+PAPAYA_KIOSK_CONTROLS_CSS)};papaya.Container.prototype.buildToolbar=function(){this.toolbarHtml=this.containerHtml.find("."+PAPAYA_TOOLBAR_CSS);this.toolbar=new papaya.ui.Toolbar(this);this.toolbar.buildToolbar();this.toolbar.updateImageButtons()};papaya.Container.prototype.readFile=function(b,a){b.file(function(d,c){if(d){if(c.name.charAt(0)!=="."){d(c)}}}.bind(this,a))};papaya.Container.prototype.readDir=function(a){this.readDirNextEntries(a.createReader())};papaya.Container.prototype.readDirNextEntries=function(b){var a=this;b.readEntries(function(d){var c=d.length,f,e;if(c>0){for(f=0;f<c;f+=1){e=d[f];if(e.isFile){a.readFile(e,papaya.utilities.ObjectUtils.bind(a,a.addDroppedFile))}}a.readDirNextEntries(b)}})};papaya.Container.prototype.setUpDnD=function(){var a=this;this.containerHtml[0].ondragover=function(){a.viewer.draggingOver=true;if(!a.viewer.initialized){a.viewer.drawEmptyViewer()}return false};this.containerHtml[0].ondragleave=function(){a.viewer.draggingOver=false;if(!a.viewer.initialized){a.viewer.drawEmptyViewer()}return false};this.containerHtml[0].ondragend=function(){a.viewer.draggingOver=false;if(!a.viewer.initialized){a.viewer.drawEmptyViewer()}return false};this.containerHtml[0].ondrop=function(c){c.preventDefault();var g=c.dataTransfer;a.display.drawProgress(0.1,"Loading");if(g){if(g.items&&(g.items.length>0)){var d=g.items,b=d.length,f,e;for(f=0;f<b;f+=1){e=d[f];if(e.getAsEntry){e=e.getAsEntry()}else{if(e.webkitGetAsEntry){e=e.webkitGetAsEntry()}}if(e.isFile){a.readFile(e,papaya.utilities.ObjectUtils.bind(a,a.addDroppedFile))}else{if(e.isDirectory){a.readDir(e)}}}}else{if(g.files&&(g.files.length>0)){a.viewer.loadImage(c.dataTransfer.files)}}}return false}};papaya.Container.prototype.addDroppedFile=function(a){clearTimeout(this.dropTimeout);papayaDroppedFiles.push(a);this.dropTimeout=setTimeout(papaya.utilities.ObjectUtils.bind(this,this.droppedFilesFinishedLoading),100)};papaya.Container.prototype.droppedFilesFinishedLoading=function(){if(papaya.surface.Surface.findSurfaceType(papayaDroppedFiles[0].name)!==papaya.surface.Surface.SURFACE_TYPE_UNKNOWN){this.viewer.loadSurface(papayaDroppedFiles)}else{this.viewer.loadImage(papayaDroppedFiles)}papayaDroppedFiles=[]};papaya.Container.prototype.clearParams=function(){this.params=[]};papaya.Container.prototype.loadNext=function(){if(this.hasImageToLoad()){this.loadNextImage()}else{if(this.hasSurfaceToLoad()){this.loadNextSurface()}else{if(this.hasAtlasToLoad()){this.viewer.loadAtlas()}}}};papaya.Container.prototype.hasMoreToLoad=function(){return(this.hasImageToLoad()||this.hasSurfaceToLoad()||this.hasAtlasToLoad())};papaya.Container.prototype.hasImageToLoad=function(){if(this.params.images){return(this.loadingImageIndex<this.params.images.length)}else{if(this.params.binaryImages){return(this.loadingImageIndex<this.params.binaryImages.length)}else{if(this.params.encodedImages){return(this.loadingImageIndex<this.params.encodedImages.length)}else{if(this.params.files){return(this.loadingImageIndex<this.params.files.length)}}}}return false};papaya.Container.prototype.hasAtlasToLoad=function(){return(papaya.Container.atlas==null)&&this.viewer.hasDefinedAtlas()};papaya.Container.prototype.hasSurfaceToLoad=function(){if(!papaya.utilities.PlatformUtils.isWebGLSupported()){console.log("Warning: This browser version is not able to load surfaces.");return false}if(this.params.surfaces){return(this.loadingSurfaceIndex<this.params.surfaces.length)}else{if(this.params.encodedSurfaces){return(this.loadingSurfaceIndex<this.params.encodedSurfaces.length)}}return false};papaya.Container.prototype.loadNextSurface=function(){var b=false,a;if(this.params.surfaces){if(this.loadingSurfaceIndex<this.params.surfaces.length){b=true;a=this.params.surfaces[this.loadingSurfaceIndex];this.loadingSurfaceIndex+=1;this.viewer.loadSurface(a,true,false)}else{this.params.loadedSurfaces=this.params.surfaces;this.params.surfaces=[]}}else{if(this.params.encodedSurfaces){if(this.loadingSurfaceIndex<this.params.encodedSurfaces.length){b=true;a=this.params.encodedSurfaces[this.loadingSurfaceIndex];if(!(a instanceof Array)){a=[];a[0]=this.params.encodedSurfaces[this.loadingSurfaceIndex]}this.viewer.loadSurface(a,false,true);this.loadingSurfaceIndex+=1}else{this.params.loadedEncodedSurfaces=this.params.encodedSurfaces;this.params.encodedSurfaces=[]}}}return b};papaya.Container.prototype.loadNextImage=function(){var b=false,a;if(this.params.images){if(this.loadingImageIndex<this.params.images.length){b=true;a=this.params.images[this.loadingImageIndex];if(!(a instanceof Array)){a=[];a[0]=this.params.images[this.loadingImageIndex]}this.viewer.loadImage(a,true,false,false);this.loadingImageIndex+=1}else{this.params.loadedImages=this.params.images;this.params.images=[]}}else{if(this.params.binaryImages){if(this.loadingImageIndex<this.params.binaryImages.length){b=true;a=this.params.binaryImages[this.loadingImageIndex];if(!(a instanceof Array)){a=[];a[0]=this.params.binaryImages[this.loadingImageIndex]}this.viewer.loadImage(a,false,false,true);this.loadingImageIndex+=1}else{this.params.loadedEncodedImages=this.params.binaryImages;this.params.binaryImages=[]}}else{if(this.params.encodedImages){if(this.loadingImageIndex<this.params.encodedImages.length){b=true;a=this.params.encodedImages[this.loadingImageIndex];if(!(a instanceof Array)){a=[];a[0]=this.params.encodedImages[this.loadingImageIndex]}this.viewer.loadImage(a,false,true,false);this.loadingImageIndex+=1}else{this.params.loadedEncodedImages=this.params.encodedImages;this.params.encodedImages=[]}}else{if(this.params.files){if(this.loadingImageIndex<this.params.files.length){b=true;a=this.params.files[this.loadingImageIndex];if(!(a instanceof Array)){a=[];a[0]=this.params.files[this.loadingImageIndex]}this.viewer.loadImage(a,false,false,false);this.loadingImageIndex+=1}else{this.params.loadedFiles=this.params.files;this.params.files=[]}}}}}return b};papaya.Container.prototype.readyForDnD=function(){return !this.kioskMode&&((this.params.images===undefined)||(this.loadingImageIndex>=this.params.images.length))&&((this.params.binaryImages===undefined)||(this.loadingImageIndex>=this.params.binaryImages.length))&&((this.params.encodedImages===undefined)||(this.loadingImageIndex>=this.params.encodedImages.length))&&((this.params.encodedSurfaces===undefined)||(this.loadingSurfaceIndex>=this.params.encodedSurfaces.length))};papaya.Container.prototype.findLoadableImage=function(b,a){var c;for(c=0;c<papayaLoadableImages.length;c+=1){if(a){if(papayaLoadableImages[c].surface){if(papayaLoadableImages[c].name==b){return papayaLoadableImages[c]}}}else{if(papayaLoadableImages[c].name==b){return papayaLoadableImages[c]}}}if(window[b]!==undefined){return{encode:b}}return null};papaya.Container.prototype.findLoadableImages=function(c,a){var d,e,b=[];if(!Array.isArray(c)){c=[c]}if(c){for(d=0;d<c.length;d++){e=this.findLoadableImage(c[d],a);if(e){b.push(e)}}}if(b.length>0){return b}return null};papaya.Container.prototype.expandViewer=function(){var a=this;if(this.nestedViewer){this.nestedViewer=false;this.collapsable=true;this.tempScrollTop=$(window).scrollTop();$(":hidden").addClass(PAPAYA_CONTAINER_COLLAPSABLE_EXEMPT);$(document.body).children().hide();this.containerHtml.show();this.originalStyle={};this.originalStyle.width=document.body.style.width;this.originalStyle.height=document.body.style.height;this.originalStyle.marginTop=document.body.style.marginTop;this.originalStyle.marginRight=document.body.style.marginRight;this.originalStyle.marginBottom=document.body.style.marginBottom;this.originalStyle.marginLeft=document.body.style.marginLeft;this.originalStyle.paddingTop=document.body.style.paddingTop;this.originalStyle.paddingRight=document.body.style.paddingRight;this.originalStyle.paddingBottom=document.body.style.paddingBottom;this.originalStyle.paddingLeft=document.body.style.paddingLeft;this.originalStyle.overflow=document.body.style.overflow;papaya.Container.setToFullPage();this.containerHtml.after('<div style="display:none" class="'+PAPAYA_CONTAINER_COLLAPSABLE+'"></div>');$(document.body).prepend(this.containerHtml);this.resizeViewerComponents(true);this.viewer.updateOffsetRect();this.updateViewerSize();setTimeout(function(){window.scrollTo(0,0);a.viewer.addScroll()},0)}};papaya.Container.prototype.collapseViewer=function(){var b,a;a=this;if(this.collapsable){this.nestedViewer=true;this.collapsable=false;document.body.style.width=this.originalStyle.width;document.body.style.height=this.originalStyle.height;document.body.style.marginTop=this.originalStyle.marginTop;document.body.style.marginRight=this.originalStyle.marginRight;document.body.style.marginBottom=this.originalStyle.marginBottom;document.body.style.marginLeft=this.originalStyle.marginLeft;document.body.style.paddingTop=this.originalStyle.paddingTop;document.body.style.paddingRight=this.originalStyle.paddingRight;document.body.style.paddingBottom=this.originalStyle.paddingBottom;document.body.style.paddingLeft=this.originalStyle.paddingLeft;document.body.style.overflow=this.originalStyle.overflow;$("."+PAPAYA_CONTAINER_COLLAPSABLE).replaceWith(this.containerHtml);$(document.body).children(":not(."+PAPAYA_CONTAINER_COLLAPSABLE_EXEMPT+")").show();$("."+PAPAYA_CONTAINER_COLLAPSABLE_EXEMPT).removeClass(PAPAYA_CONTAINER_COLLAPSABLE_EXEMPT);this.resizeViewerComponents(true);for(b=0;b<papayaContainers.length;b+=1){papayaContainers[b].updateViewerSize();papayaContainers[b].viewer.drawViewer(true)}setTimeout(function(){$(window).scrollTop(a.tempScrollTop);a.viewer.removeScroll()},0)}};papaya.Container.prototype.isNestedViewer=function(){return(this.nestedViewer||this.collapsable)};papaya.Container.prototype.isDesktopMode=function(){return !this.kioskMode};papaya.Container.prototype.hasLoadedDTI=function(){return this.viewer.hasLoadedDTI()};papaya.Container.prototype.disableScrollWheel=function(){return(this.isNestedViewer()||papaya.utilities.PlatformUtils.ios)};papaya.Container.prototype.canOpenInMango=function(){return this.params.canOpenInMango};papaya.Container.prototype.isExpandable=function(){return this.params.expandable&&this.isNestedViewer()};papaya.Container.prototype.isParametricCombined=function(a){return this.combineParametric&&this.viewer.hasParametricPair(a)};papaya.Container.prototype.isNonParametricCombined=function(a){return !this.isParametricCombined(a)};papaya.Container.prototype.coordinateChanged=function(d){var c,b,a=d.currentCoord;if(!d.ignoreSync){if(papaya.Container.syncViewersWorld){for(c=0;c<papayaContainers.length;c+=1){if((papayaContainers[c].viewer!==d)&&!papayaContainers[c].viewer.ignoreSync){b=new papaya.core.Coordinate();papayaContainers[c].viewer.gotoWorldCoordinate(d.getWorldCoordinateAtIndex(a.x,a.y,a.z,b),true)}}}else{if(papaya.Container.syncViewers){for(c=0;c<papayaContainers.length;c+=1){if((papayaContainers[c].viewer!==d)&&!papayaContainers[c].viewer.ignoreSync){papayaContainers[c].viewer.gotoCoordinate(a,true)}}}}}if(d.surfaceView){d.surfaceView.updateActivePlanes()}if(this.contextManager&&this.contextManager.clearContext){this.contextManager.clearContext()}};papaya.Container.prototype.canCurrentOverlayLoadNegatives=function(){var a=this.viewer.currentScreenVolume;return(!a.negative&&(a.negativeScreenVol===null))};papaya.Container.prototype.canCurrentOverlayLoadMod=function(){var a=this.viewer.currentScreenVolume;return(a.dti&&(a.dtiVolumeMod===null))};papaya.Container.prototype.canCurrentOverlayModulate=function(){var a=this.viewer.currentScreenVolume;return(a.dti&&(a.dtiVolumeMod!==null))};window.addEventListener("resize",papaya.Container.resizePapaya,false);window.addEventListener("orientationchange",papaya.Container.reorientPapaya,false);window.addEventListener("load",papaya.Container.startPapaya,false);window.addEventListener("message",function(a){if(a.data===PAPAYA_MANGO_INSTALLED){papaya.mangoinstalled=true}},false);
</script>

    
    	<title>Papaya Viewer</title>
    
    	<script type="text/javascript">
var params = [];
params["encodedImages"] = ["all_array"];
params["smoothdisplay"] = false;
params["luts"] = [{"name": "red-blue", "data":[[0, 0, 0, 1], [.5, 1,1, 1], [1, 1, 0, 0]]}];
params["all_array"] = {"lut": "red-blue", "min": -1, "max" : 1, symmetric:true }
params["coordinate"] = [0,0,-23];
params["fullScreenPadding"] = false;
params["kioskMode"] = true;
params["fullScreen"] = true; 
params["expandable"] = true;
params ["showControlBar"] = true; 
params["allowScroll"] = true;
params["showOrientation"] = false;
params["radiological"] = false;
params["smoothDisplay"] = false;
params["showImageButtons"] = true;
params["worldSpace"] = true;
</script>

	</head>

	<body>
		
		<div class="papaya" data-params="params"></div>
		
	</body>
</html>
